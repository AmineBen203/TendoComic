var pT=Object.defineProperty;var ME=c=>{throw TypeError(c)};var gT=(c,t,n)=>t in c?pT(c,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):c[t]=n;var Ee=(c,t,n)=>gT(c,typeof t!="symbol"?t+"":t,n),n1=(c,t,n)=>t.has(c)||ME("Cannot "+n);var d=(c,t,n)=>(n1(c,t,"read from private field"),n?n.call(c):t.get(c)),P=(c,t,n)=>t.has(c)?ME("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(c):t.set(c,n),E=(c,t,n,s)=>(n1(c,t,"write to private field"),s?s.call(c,n):t.set(c,n),n),R=(c,t,n)=>(n1(c,t,"access private method"),n);var Fr=(c,t,n,s)=>({set _(a){E(c,t,a,n)},get _(){return d(c,t,s)}});function mT(c,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in c)){const o=Object.getOwnPropertyDescriptor(s,a);o&&Object.defineProperty(c,a,o.get?o:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function vT(c,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in c)){const o=Object.getOwnPropertyDescriptor(s,a);o&&Object.defineProperty(c,a,o.get?o:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}))}(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function fk(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var OE={exports:{}},hv={},DE={exports:{}},et={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var FE;function yT(){if(FE)return et;FE=1;var c=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.iterator;function b(L){return L===null||typeof L!="object"?null:(L=y&&L[y]||L["@@iterator"],typeof L=="function"?L:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,x={};function C(L,$,ie){this.props=L,this.context=$,this.refs=x,this.updater=ie||_}C.prototype.isReactComponent={},C.prototype.setState=function(L,$){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,$,"setState")},C.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function N(){}N.prototype=C.prototype;function F(L,$,ie){this.props=L,this.context=$,this.refs=x,this.updater=ie||_}var D=F.prototype=new N;D.constructor=F,k(D,C.prototype),D.isPureReactComponent=!0;var j=Array.isArray,z=Object.prototype.hasOwnProperty,V={current:null},G={key:!0,ref:!0,__self:!0,__source:!0};function ee(L,$,ie){var he,ve={},pe=null,ge=null;if($!=null)for(he in $.ref!==void 0&&(ge=$.ref),$.key!==void 0&&(pe=""+$.key),$)z.call($,he)&&!G.hasOwnProperty(he)&&(ve[he]=$[he]);var Ce=arguments.length-2;if(Ce===1)ve.children=ie;else if(1<Ce){for(var Me=Array(Ce),ht=0;ht<Ce;ht++)Me[ht]=arguments[ht+2];ve.children=Me}if(L&&L.defaultProps)for(he in Ce=L.defaultProps,Ce)ve[he]===void 0&&(ve[he]=Ce[he]);return{$$typeof:c,type:L,key:pe,ref:ge,props:ve,_owner:V.current}}function oe(L,$){return{$$typeof:c,type:L.type,key:$,ref:L.ref,props:L.props,_owner:L._owner}}function de(L){return typeof L=="object"&&L!==null&&L.$$typeof===c}function ce(L){var $={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ie){return $[ie]})}var Ne=/\/+/g;function Ae(L,$){return typeof L=="object"&&L!==null&&L.key!=null?ce(""+L.key):$.toString(36)}function Pe(L,$,ie,he,ve){var pe=typeof L;(pe==="undefined"||pe==="boolean")&&(L=null);var ge=!1;if(L===null)ge=!0;else switch(pe){case"string":case"number":ge=!0;break;case"object":switch(L.$$typeof){case c:case t:ge=!0}}if(ge)return ge=L,ve=ve(ge),L=he===""?"."+Ae(ge,0):he,j(ve)?(ie="",L!=null&&(ie=L.replace(Ne,"$&/")+"/"),Pe(ve,$,ie,"",function(ht){return ht})):ve!=null&&(de(ve)&&(ve=oe(ve,ie+(!ve.key||ge&&ge.key===ve.key?"":(""+ve.key).replace(Ne,"$&/")+"/")+L)),$.push(ve)),1;if(ge=0,he=he===""?".":he+":",j(L))for(var Ce=0;Ce<L.length;Ce++){pe=L[Ce];var Me=he+Ae(pe,Ce);ge+=Pe(pe,$,ie,Me,ve)}else if(Me=b(L),typeof Me=="function")for(L=Me.call(L),Ce=0;!(pe=L.next()).done;)pe=pe.value,Me=he+Ae(pe,Ce++),ge+=Pe(pe,$,ie,Me,ve);else if(pe==="object")throw $=String(L),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return ge}function Ze(L,$,ie){if(L==null)return L;var he=[],ve=0;return Pe(L,he,"","",function(pe){return $.call(ie,pe,ve++)}),he}function le(L){if(L._status===-1){var $=L._result;$=$(),$.then(function(ie){(L._status===0||L._status===-1)&&(L._status=1,L._result=ie)},function(ie){(L._status===0||L._status===-1)&&(L._status=2,L._result=ie)}),L._status===-1&&(L._status=0,L._result=$)}if(L._status===1)return L._result.default;throw L._result}var ae={current:null},q={transition:null},te={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:q,ReactCurrentOwner:V};function X(){throw Error("act(...) is not supported in production builds of React.")}return et.Children={map:Ze,forEach:function(L,$,ie){Ze(L,function(){$.apply(this,arguments)},ie)},count:function(L){var $=0;return Ze(L,function(){$++}),$},toArray:function(L){return Ze(L,function($){return $})||[]},only:function(L){if(!de(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},et.Component=C,et.Fragment=n,et.Profiler=a,et.PureComponent=F,et.StrictMode=s,et.Suspense=p,et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,et.act=X,et.cloneElement=function(L,$,ie){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var he=k({},L.props),ve=L.key,pe=L.ref,ge=L._owner;if($!=null){if($.ref!==void 0&&(pe=$.ref,ge=V.current),$.key!==void 0&&(ve=""+$.key),L.type&&L.type.defaultProps)var Ce=L.type.defaultProps;for(Me in $)z.call($,Me)&&!G.hasOwnProperty(Me)&&(he[Me]=$[Me]===void 0&&Ce!==void 0?Ce[Me]:$[Me])}var Me=arguments.length-2;if(Me===1)he.children=ie;else if(1<Me){Ce=Array(Me);for(var ht=0;ht<Me;ht++)Ce[ht]=arguments[ht+2];he.children=Ce}return{$$typeof:c,type:L.type,key:ve,ref:pe,props:he,_owner:ge}},et.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:o,_context:L},L.Consumer=L},et.createElement=ee,et.createFactory=function(L){var $=ee.bind(null,L);return $.type=L,$},et.createRef=function(){return{current:null}},et.forwardRef=function(L){return{$$typeof:h,render:L}},et.isValidElement=de,et.lazy=function(L){return{$$typeof:v,_payload:{_status:-1,_result:L},_init:le}},et.memo=function(L,$){return{$$typeof:m,type:L,compare:$===void 0?null:$}},et.startTransition=function(L){var $=q.transition;q.transition={};try{L()}finally{q.transition=$}},et.unstable_act=X,et.useCallback=function(L,$){return ae.current.useCallback(L,$)},et.useContext=function(L){return ae.current.useContext(L)},et.useDebugValue=function(){},et.useDeferredValue=function(L){return ae.current.useDeferredValue(L)},et.useEffect=function(L,$){return ae.current.useEffect(L,$)},et.useId=function(){return ae.current.useId()},et.useImperativeHandle=function(L,$,ie){return ae.current.useImperativeHandle(L,$,ie)},et.useInsertionEffect=function(L,$){return ae.current.useInsertionEffect(L,$)},et.useLayoutEffect=function(L,$){return ae.current.useLayoutEffect(L,$)},et.useMemo=function(L,$){return ae.current.useMemo(L,$)},et.useReducer=function(L,$,ie){return ae.current.useReducer(L,$,ie)},et.useRef=function(L){return ae.current.useRef(L)},et.useState=function(L){return ae.current.useState(L)},et.useSyncExternalStore=function(L,$,ie){return ae.current.useSyncExternalStore(L,$,ie)},et.useTransition=function(){return ae.current.useTransition()},et.version="18.3.1",et}var jE;function sE(){return jE||(jE=1,DE.exports=yT()),DE.exports}/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var $E;function wT(){if($E)return hv;$E=1;var c=sE(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function u(h,p,m){var v,y={},b=null,_=null;m!==void 0&&(b=""+m),p.key!==void 0&&(b=""+p.key),p.ref!==void 0&&(_=p.ref);for(v in p)s.call(p,v)&&!o.hasOwnProperty(v)&&(y[v]=p[v]);if(h&&h.defaultProps)for(v in p=h.defaultProps,p)y[v]===void 0&&(y[v]=p[v]);return{$$typeof:t,type:h,key:b,ref:_,props:y,_owner:a.current}}return hv.Fragment=n,hv.jsx=u,hv.jsxs=u,hv}var zE;function bT(){return zE||(zE=1,OE.exports=wT()),OE.exports}var xe=bT(),ke=sE();const pk=fk(ke),_T=vT({__proto__:null,default:pk},[ke]);var C0={},r1={exports:{}},Wr={},BE={exports:{}},UE={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var HE;function ST(){return HE||(HE=1,function(c){function t(q,te){var X=q.length;q.push(te);e:for(;0<X;){var L=X-1>>>1,$=q[L];if(0<a($,te))q[L]=te,q[X]=$,X=L;else break e}}function n(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var te=q[0],X=q.pop();if(X!==te){q[0]=X;e:for(var L=0,$=q.length,ie=$>>>1;L<ie;){var he=2*(L+1)-1,ve=q[he],pe=he+1,ge=q[pe];if(0>a(ve,X))pe<$&&0>a(ge,ve)?(q[L]=ge,q[pe]=X,L=pe):(q[L]=ve,q[he]=X,L=he);else if(pe<$&&0>a(ge,X))q[L]=ge,q[pe]=X,L=pe;else break e}}return te}function a(q,te){var X=q.sortIndex-te.sortIndex;return X!==0?X:q.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;c.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();c.unstable_now=function(){return u.now()-h}}var p=[],m=[],v=1,y=null,b=3,_=!1,k=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(q){for(var te=n(m);te!==null;){if(te.callback===null)s(m);else if(te.startTime<=q)s(m),te.sortIndex=te.expirationTime,t(p,te);else break;te=n(m)}}function j(q){if(x=!1,D(q),!k)if(n(p)!==null)k=!0,le(z);else{var te=n(m);te!==null&&ae(j,te.startTime-q)}}function z(q,te){k=!1,x&&(x=!1,N(ee),ee=-1),_=!0;var X=b;try{for(D(te),y=n(p);y!==null&&(!(y.expirationTime>te)||q&&!ce());){var L=y.callback;if(typeof L=="function"){y.callback=null,b=y.priorityLevel;var $=L(y.expirationTime<=te);te=c.unstable_now(),typeof $=="function"?y.callback=$:y===n(p)&&s(p),D(te)}else s(p);y=n(p)}if(y!==null)var ie=!0;else{var he=n(m);he!==null&&ae(j,he.startTime-te),ie=!1}return ie}finally{y=null,b=X,_=!1}}var V=!1,G=null,ee=-1,oe=5,de=-1;function ce(){return!(c.unstable_now()-de<oe)}function Ne(){if(G!==null){var q=c.unstable_now();de=q;var te=!0;try{te=G(!0,q)}finally{te?Ae():(V=!1,G=null)}}else V=!1}var Ae;if(typeof F=="function")Ae=function(){F(Ne)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,Ze=Pe.port2;Pe.port1.onmessage=Ne,Ae=function(){Ze.postMessage(null)}}else Ae=function(){C(Ne,0)};function le(q){G=q,V||(V=!0,Ae())}function ae(q,te){ee=C(function(){q(c.unstable_now())},te)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(q){q.callback=null},c.unstable_continueExecution=function(){k||_||(k=!0,le(z))},c.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<q?Math.floor(1e3/q):5},c.unstable_getCurrentPriorityLevel=function(){return b},c.unstable_getFirstCallbackNode=function(){return n(p)},c.unstable_next=function(q){switch(b){case 1:case 2:case 3:var te=3;break;default:te=b}var X=b;b=te;try{return q()}finally{b=X}},c.unstable_pauseExecution=function(){},c.unstable_requestPaint=function(){},c.unstable_runWithPriority=function(q,te){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var X=b;b=q;try{return te()}finally{b=X}},c.unstable_scheduleCallback=function(q,te,X){var L=c.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?L+X:L):X=L,q){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=X+$,q={id:v++,callback:te,priorityLevel:q,startTime:X,expirationTime:$,sortIndex:-1},X>L?(q.sortIndex=X,t(m,q),n(p)===null&&q===n(m)&&(x?(N(ee),ee=-1):x=!0,ae(j,X-L))):(q.sortIndex=$,t(p,q),k||_||(k=!0,le(z))),q},c.unstable_shouldYield=ce,c.unstable_wrapCallback=function(q){var te=b;return function(){var X=b;b=te;try{return q.apply(this,arguments)}finally{b=X}}}}(UE)),UE}var VE;function ET(){return VE||(VE=1,BE.exports=ST()),BE.exports}/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var WE;function xT(){if(WE)return Wr;WE=1;var c=sE(),t=ET();function n(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function o(e,r){u(e,r),u(e+"Capture",r)}function u(e,r){for(a[e]=r,e=0;e<r.length;e++)s.add(r[e])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},y={};function b(e){return p.call(y,e)?!0:p.call(v,e)?!1:m.test(e)?y[e]=!0:(v[e]=!0,!1)}function _(e,r,i,l){if(i!==null&&i.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return l?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function k(e,r,i,l){if(r===null||typeof r>"u"||_(e,r,i,l))return!0;if(l)return!1;if(i!==null)switch(i.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function x(e,r,i,l,f,g,w){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=l,this.attributeNamespace=f,this.mustUseProperty=i,this.propertyName=e,this.type=r,this.sanitizeURL=g,this.removeEmptyString=w}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){C[e]=new x(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];C[r]=new x(r,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){C[e]=new x(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){C[e]=new x(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){C[e]=new x(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){C[e]=new x(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){C[e]=new x(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){C[e]=new x(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){C[e]=new x(e,5,!1,e.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function F(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(N,F);C[r]=new x(r,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(N,F);C[r]=new x(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(N,F);C[r]=new x(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){C[e]=new x(e,1,!1,e.toLowerCase(),null,!1,!1)}),C.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){C[e]=new x(e,1,!1,e.toLowerCase(),null,!0,!0)});function D(e,r,i,l){var f=C.hasOwnProperty(r)?C[r]:null;(f!==null?f.type!==0:l||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(k(r,i,f,l)&&(i=null),l||f===null?b(r)&&(i===null?e.removeAttribute(r):e.setAttribute(r,""+i)):f.mustUseProperty?e[f.propertyName]=i===null?f.type===3?!1:"":i:(r=f.attributeName,l=f.attributeNamespace,i===null?e.removeAttribute(r):(f=f.type,i=f===3||f===4&&i===!0?"":""+i,l?e.setAttributeNS(l,r,i):e.setAttribute(r,i))))}var j=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),V=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),ee=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),de=Symbol.for("react.provider"),ce=Symbol.for("react.context"),Ne=Symbol.for("react.forward_ref"),Ae=Symbol.for("react.suspense"),Pe=Symbol.for("react.suspense_list"),Ze=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),q=Symbol.iterator;function te(e){return e===null||typeof e!="object"?null:(e=q&&e[q]||e["@@iterator"],typeof e=="function"?e:null)}var X=Object.assign,L;function $(e){if(L===void 0)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);L=r&&r[1]||""}return`
`+L+e}var ie=!1;function he(e,r){if(!e||ie)return"";ie=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(O){var l=O}Reflect.construct(e,[],r)}else{try{r.call()}catch(O){l=O}e.call(r.prototype)}else{try{throw Error()}catch(O){l=O}e()}}catch(O){if(O&&l&&typeof O.stack=="string"){for(var f=O.stack.split(`
`),g=l.stack.split(`
`),w=f.length-1,S=g.length-1;1<=w&&0<=S&&f[w]!==g[S];)S--;for(;1<=w&&0<=S;w--,S--)if(f[w]!==g[S]){if(w!==1||S!==1)do if(w--,S--,0>S||f[w]!==g[S]){var A=`
`+f[w].replace(" at new "," at ");return e.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",e.displayName)),A}while(1<=w&&0<=S);break}}}finally{ie=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?$(e):""}function ve(e){switch(e.tag){case 5:return $(e.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return e=he(e.type,!1),e;case 11:return e=he(e.type.render,!1),e;case 1:return e=he(e.type,!0),e;default:return""}}function pe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case G:return"Fragment";case V:return"Portal";case oe:return"Profiler";case ee:return"StrictMode";case Ae:return"Suspense";case Pe:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ce:return(e.displayName||"Context")+".Consumer";case de:return(e._context.displayName||"Context")+".Provider";case Ne:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ze:return r=e.displayName||null,r!==null?r:pe(e.type)||"Memo";case le:r=e._payload,e=e._init;try{return pe(e(r))}catch{}}return null}function ge(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(r);case 8:return r===ee?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Ce(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Me(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ht(e){var r=Me(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),l=""+e[r];if(!e.hasOwnProperty(r)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var f=i.get,g=i.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return f.call(this)},set:function(w){l=""+w,g.call(this,w)}}),Object.defineProperty(e,r,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(w){l=""+w},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function es(e){e._valueTracker||(e._valueTracker=ht(e))}function Vs(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var i=r.getValue(),l="";return e&&(l=Me(e)?e.checked?"true":"false":e.value),e=l,e!==i?(r.setValue(e),!0):!1}function Ws(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Aa(e,r){var i=r.checked;return X({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function yp(e,r){var i=r.defaultValue==null?"":r.defaultValue,l=r.checked!=null?r.checked:r.defaultChecked;i=Ce(r.value!=null?r.value:i),e._wrapperState={initialChecked:l,initialValue:i,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function wp(e,r){r=r.checked,r!=null&&D(e,"checked",r,!1)}function Su(e,r){wp(e,r);var i=Ce(r.value),l=r.type;if(i!=null)l==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?Eu(e,r.type,i):r.hasOwnProperty("defaultValue")&&Eu(e,r.type,Ce(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function bp(e,r,i){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var l=r.type;if(!(l!=="submit"&&l!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,i||r===e.value||(e.value=r),e.defaultValue=r}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Eu(e,r,i){(r!=="number"||Ws(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var ri=Array.isArray;function ts(e,r,i,l){if(e=e.options,r){r={};for(var f=0;f<i.length;f++)r["$"+i[f]]=!0;for(i=0;i<e.length;i++)f=r.hasOwnProperty("$"+e[i].value),e[i].selected!==f&&(e[i].selected=f),f&&l&&(e[i].defaultSelected=!0)}else{for(i=""+Ce(i),r=null,f=0;f<e.length;f++){if(e[f].value===i){e[f].selected=!0,l&&(e[f].defaultSelected=!0);return}r!==null||e[f].disabled||(r=e[f])}r!==null&&(r.selected=!0)}}function xu(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return X({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _p(e,r){var i=r.value;if(i==null){if(i=r.children,r=r.defaultValue,i!=null){if(r!=null)throw Error(n(92));if(ri(i)){if(1<i.length)throw Error(n(93));i=i[0]}r=i}r==null&&(r=""),i=r}e._wrapperState={initialValue:Ce(i)}}function Sp(e,r){var i=Ce(r.value),l=Ce(r.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),r.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),l!=null&&(e.defaultValue=""+l)}function Ep(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function xp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ku(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?xp(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ca,kp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,i,l,f){MSApp.execUnsafeLocalFunction(function(){return e(r,i,l,f)})}:e}(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(Ca=Ca||document.createElement("div"),Ca.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Ca.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function si(e,r){if(r){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=r;return}}e.textContent=r}var ii={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ab=["Webkit","ms","Moz","O"];Object.keys(ii).forEach(function(e){ab.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),ii[r]=ii[e]})});function Ap(e,r,i){return r==null||typeof r=="boolean"||r===""?"":i||typeof r!="number"||r===0||ii.hasOwnProperty(e)&&ii[e]?(""+r).trim():r+"px"}function Cp(e,r){e=e.style;for(var i in r)if(r.hasOwnProperty(i)){var l=i.indexOf("--")===0,f=Ap(i,r[i],l);i==="float"&&(i="cssFloat"),l?e.setProperty(i,f):e[i]=f}}var ob=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Au(e,r){if(r){if(ob[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function Cu(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tu=null;function Pu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ru=null,ns=null,rs=null;function Tp(e){if(e=Ci(e)){if(typeof Ru!="function")throw Error(n(280));var r=e.stateNode;r&&(r=Ka(r),Ru(e.stateNode,e.type,r))}}function Pp(e){ns?rs?rs.push(e):rs=[e]:ns=e}function Rp(){if(ns){var e=ns,r=rs;if(rs=ns=null,Tp(e),r)for(e=0;e<r.length;e++)Tp(r[e])}}function Lp(e,r){return e(r)}function Np(){}var Lu=!1;function Ip(e,r,i){if(Lu)return e(r,i);Lu=!0;try{return Lp(e,r,i)}finally{Lu=!1,(ns!==null||rs!==null)&&(Np(),Rp())}}function ai(e,r){var i=e.stateNode;if(i===null)return null;var l=Ka(i);if(l===null)return null;i=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(n(231,r,typeof i));return i}var Nu=!1;if(h)try{var oi={};Object.defineProperty(oi,"passive",{get:function(){Nu=!0}}),window.addEventListener("test",oi,oi),window.removeEventListener("test",oi,oi)}catch{Nu=!1}function lb(e,r,i,l,f,g,w,S,A){var O=Array.prototype.slice.call(arguments,3);try{r.apply(i,O)}catch(U){this.onError(U)}}var li=!1,Ta=null,Pa=!1,Iu=null,ub={onError:function(e){li=!0,Ta=e}};function cb(e,r,i,l,f,g,w,S,A){li=!1,Ta=null,lb.apply(ub,arguments)}function hb(e,r,i,l,f,g,w,S,A){if(cb.apply(this,arguments),li){if(li){var O=Ta;li=!1,Ta=null}else throw Error(n(198));Pa||(Pa=!0,Iu=O)}}function xr(e){var r=e,i=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(i=r.return),e=r.return;while(e)}return r.tag===3?i:null}function Mp(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function Op(e){if(xr(e)!==e)throw Error(n(188))}function db(e){var r=e.alternate;if(!r){if(r=xr(e),r===null)throw Error(n(188));return r!==e?null:e}for(var i=e,l=r;;){var f=i.return;if(f===null)break;var g=f.alternate;if(g===null){if(l=f.return,l!==null){i=l;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===i)return Op(f),e;if(g===l)return Op(f),r;g=g.sibling}throw Error(n(188))}if(i.return!==l.return)i=f,l=g;else{for(var w=!1,S=f.child;S;){if(S===i){w=!0,i=f,l=g;break}if(S===l){w=!0,l=f,i=g;break}S=S.sibling}if(!w){for(S=g.child;S;){if(S===i){w=!0,i=g,l=f;break}if(S===l){w=!0,l=g,i=f;break}S=S.sibling}if(!w)throw Error(n(189))}}if(i.alternate!==l)throw Error(n(190))}if(i.tag!==3)throw Error(n(188));return i.stateNode.current===i?e:r}function Dp(e){return e=db(e),e!==null?Fp(e):null}function Fp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=Fp(e);if(r!==null)return r;e=e.sibling}return null}var jp=t.unstable_scheduleCallback,$p=t.unstable_cancelCallback,fb=t.unstable_shouldYield,pb=t.unstable_requestPaint,We=t.unstable_now,gb=t.unstable_getCurrentPriorityLevel,Mu=t.unstable_ImmediatePriority,zp=t.unstable_UserBlockingPriority,Ra=t.unstable_NormalPriority,mb=t.unstable_LowPriority,Bp=t.unstable_IdlePriority,La=null,an=null;function vb(e){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(La,e,void 0,(e.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:bb,yb=Math.log,wb=Math.LN2;function bb(e){return e>>>=0,e===0?32:31-(yb(e)/wb|0)|0}var Na=64,Ia=4194304;function ui(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ma(e,r){var i=e.pendingLanes;if(i===0)return 0;var l=0,f=e.suspendedLanes,g=e.pingedLanes,w=i&268435455;if(w!==0){var S=w&~f;S!==0?l=ui(S):(g&=w,g!==0&&(l=ui(g)))}else w=i&~f,w!==0?l=ui(w):g!==0&&(l=ui(g));if(l===0)return 0;if(r!==0&&r!==l&&(r&f)===0&&(f=l&-l,g=r&-r,f>=g||f===16&&(g&4194240)!==0))return r;if((l&4)!==0&&(l|=i&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=l;0<r;)i=31-Kt(r),f=1<<i,l|=e[i],r&=~f;return l}function _b(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sb(e,r){for(var i=e.suspendedLanes,l=e.pingedLanes,f=e.expirationTimes,g=e.pendingLanes;0<g;){var w=31-Kt(g),S=1<<w,A=f[w];A===-1?((S&i)===0||(S&l)!==0)&&(f[w]=_b(S,r)):A<=r&&(e.expiredLanes|=S),g&=~S}}function Ou(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Up(){var e=Na;return Na<<=1,(Na&4194240)===0&&(Na=64),e}function Du(e){for(var r=[],i=0;31>i;i++)r.push(e);return r}function ci(e,r,i){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-Kt(r),e[r]=i}function Eb(e,r){var i=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<i;){var f=31-Kt(i),g=1<<f;r[f]=0,l[f]=-1,e[f]=-1,i&=~g}}function Fu(e,r){var i=e.entangledLanes|=r;for(e=e.entanglements;i;){var l=31-Kt(i),f=1<<l;f&r|e[l]&r&&(e[l]|=r),i&=~f}}var Re=0;function Hp(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Vp,ju,Wp,Gp,qp,$u=!1,Oa=[],Hn=null,Vn=null,Wn=null,hi=new Map,di=new Map,Gn=[],xb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xp(e,r){switch(e){case"focusin":case"focusout":Hn=null;break;case"dragenter":case"dragleave":Vn=null;break;case"mouseover":case"mouseout":Wn=null;break;case"pointerover":case"pointerout":hi.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":di.delete(r.pointerId)}}function fi(e,r,i,l,f,g){return e===null||e.nativeEvent!==g?(e={blockedOn:r,domEventName:i,eventSystemFlags:l,nativeEvent:g,targetContainers:[f]},r!==null&&(r=Ci(r),r!==null&&ju(r)),e):(e.eventSystemFlags|=l,r=e.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),e)}function kb(e,r,i,l,f){switch(r){case"focusin":return Hn=fi(Hn,e,r,i,l,f),!0;case"dragenter":return Vn=fi(Vn,e,r,i,l,f),!0;case"mouseover":return Wn=fi(Wn,e,r,i,l,f),!0;case"pointerover":var g=f.pointerId;return hi.set(g,fi(hi.get(g)||null,e,r,i,l,f)),!0;case"gotpointercapture":return g=f.pointerId,di.set(g,fi(di.get(g)||null,e,r,i,l,f)),!0}return!1}function Yp(e){var r=kr(e.target);if(r!==null){var i=xr(r);if(i!==null){if(r=i.tag,r===13){if(r=Mp(i),r!==null){e.blockedOn=r,qp(e.priority,function(){Wp(i)});return}}else if(r===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Da(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var i=Bu(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);Tu=l,i.target.dispatchEvent(l),Tu=null}else return r=Ci(i),r!==null&&ju(r),e.blockedOn=i,!1;r.shift()}return!0}function Kp(e,r,i){Da(e)&&i.delete(r)}function Ab(){$u=!1,Hn!==null&&Da(Hn)&&(Hn=null),Vn!==null&&Da(Vn)&&(Vn=null),Wn!==null&&Da(Wn)&&(Wn=null),hi.forEach(Kp),di.forEach(Kp)}function pi(e,r){e.blockedOn===r&&(e.blockedOn=null,$u||($u=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ab)))}function gi(e){function r(f){return pi(f,e)}if(0<Oa.length){pi(Oa[0],e);for(var i=1;i<Oa.length;i++){var l=Oa[i];l.blockedOn===e&&(l.blockedOn=null)}}for(Hn!==null&&pi(Hn,e),Vn!==null&&pi(Vn,e),Wn!==null&&pi(Wn,e),hi.forEach(r),di.forEach(r),i=0;i<Gn.length;i++)l=Gn[i],l.blockedOn===e&&(l.blockedOn=null);for(;0<Gn.length&&(i=Gn[0],i.blockedOn===null);)Yp(i),i.blockedOn===null&&Gn.shift()}var ss=j.ReactCurrentBatchConfig,Fa=!0;function Cb(e,r,i,l){var f=Re,g=ss.transition;ss.transition=null;try{Re=1,zu(e,r,i,l)}finally{Re=f,ss.transition=g}}function Tb(e,r,i,l){var f=Re,g=ss.transition;ss.transition=null;try{Re=4,zu(e,r,i,l)}finally{Re=f,ss.transition=g}}function zu(e,r,i,l){if(Fa){var f=Bu(e,r,i,l);if(f===null)sc(e,r,l,ja,i),Xp(e,l);else if(kb(f,e,r,i,l))l.stopPropagation();else if(Xp(e,l),r&4&&-1<xb.indexOf(e)){for(;f!==null;){var g=Ci(f);if(g!==null&&Vp(g),g=Bu(e,r,i,l),g===null&&sc(e,r,l,ja,i),g===f)break;f=g}f!==null&&l.stopPropagation()}else sc(e,r,l,null,i)}}var ja=null;function Bu(e,r,i,l){if(ja=null,e=Pu(l),e=kr(e),e!==null)if(r=xr(e),r===null)e=null;else if(i=r.tag,i===13){if(e=Mp(r),e!==null)return e;e=null}else if(i===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return ja=e,null}function Qp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gb()){case Mu:return 1;case zp:return 4;case Ra:case mb:return 16;case Bp:return 536870912;default:return 16}default:return 16}}var qn=null,Uu=null,$a=null;function Jp(){if($a)return $a;var e,r=Uu,i=r.length,l,f="value"in qn?qn.value:qn.textContent,g=f.length;for(e=0;e<i&&r[e]===f[e];e++);var w=i-e;for(l=1;l<=w&&r[i-l]===f[g-l];l++);return $a=f.slice(e,1<l?1-l:void 0)}function za(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function Ba(){return!0}function Zp(){return!1}function Nt(e){function r(i,l,f,g,w){this._reactName=i,this._targetInst=f,this.type=l,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(i=e[S],this[S]=i?i(g):g[S]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ba:Zp,this.isPropagationStopped=Zp,this}return X(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ba)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ba)},persist:function(){},isPersistent:Ba}),r}var is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hu=Nt(is),mi=X({},is,{view:0,detail:0}),Pb=Nt(mi),Vu,Wu,vi,Ua=X({},mi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vi&&(vi&&e.type==="mousemove"?(Vu=e.screenX-vi.screenX,Wu=e.screenY-vi.screenY):Wu=Vu=0,vi=e),Vu)},movementY:function(e){return"movementY"in e?e.movementY:Wu}}),eg=Nt(Ua),Rb=X({},Ua,{dataTransfer:0}),Lb=Nt(Rb),Nb=X({},mi,{relatedTarget:0}),Gu=Nt(Nb),Ib=X({},is,{animationName:0,elapsedTime:0,pseudoElement:0}),Mb=Nt(Ib),Ob=X({},is,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Db=Nt(Ob),Fb=X({},is,{data:0}),tg=Nt(Fb),jb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$b={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bb(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=zb[e])?!!r[e]:!1}function qu(){return Bb}var Ub=X({},mi,{key:function(e){if(e.key){var r=jb[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=za(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$b[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qu,charCode:function(e){return e.type==="keypress"?za(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?za(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hb=Nt(Ub),Vb=X({},Ua,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ng=Nt(Vb),Wb=X({},mi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qu}),Gb=Nt(Wb),qb=X({},is,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xb=Nt(qb),Yb=X({},Ua,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Kb=Nt(Yb),Qb=[9,13,27,32],Xu=h&&"CompositionEvent"in window,yi=null;h&&"documentMode"in document&&(yi=document.documentMode);var Jb=h&&"TextEvent"in window&&!yi,rg=h&&(!Xu||yi&&8<yi&&11>=yi),sg=" ",ig=!1;function ag(e,r){switch(e){case"keyup":return Qb.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function og(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var as=!1;function Zb(e,r){switch(e){case"compositionend":return og(r);case"keypress":return r.which!==32?null:(ig=!0,sg);case"textInput":return e=r.data,e===sg&&ig?null:e;default:return null}}function e_(e,r){if(as)return e==="compositionend"||!Xu&&ag(e,r)?(e=Jp(),$a=Uu=qn=null,as=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return rg&&r.locale!=="ko"?null:r.data;default:return null}}var t_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lg(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!t_[e.type]:r==="textarea"}function ug(e,r,i,l){Pp(l),r=qa(r,"onChange"),0<r.length&&(i=new Hu("onChange","change",null,i,l),e.push({event:i,listeners:r}))}var wi=null,bi=null;function n_(e){Cg(e,0)}function Ha(e){var r=hs(e);if(Vs(r))return e}function r_(e,r){if(e==="change")return r}var cg=!1;if(h){var Yu;if(h){var Ku="oninput"in document;if(!Ku){var hg=document.createElement("div");hg.setAttribute("oninput","return;"),Ku=typeof hg.oninput=="function"}Yu=Ku}else Yu=!1;cg=Yu&&(!document.documentMode||9<document.documentMode)}function dg(){wi&&(wi.detachEvent("onpropertychange",fg),bi=wi=null)}function fg(e){if(e.propertyName==="value"&&Ha(bi)){var r=[];ug(r,bi,e,Pu(e)),Ip(n_,r)}}function s_(e,r,i){e==="focusin"?(dg(),wi=r,bi=i,wi.attachEvent("onpropertychange",fg)):e==="focusout"&&dg()}function i_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ha(bi)}function a_(e,r){if(e==="click")return Ha(r)}function o_(e,r){if(e==="input"||e==="change")return Ha(r)}function l_(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var Qt=typeof Object.is=="function"?Object.is:l_;function _i(e,r){if(Qt(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var i=Object.keys(e),l=Object.keys(r);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var f=i[l];if(!p.call(r,f)||!Qt(e[f],r[f]))return!1}return!0}function pg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gg(e,r){var i=pg(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=r&&l>=r)return{node:i,offset:r-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=pg(i)}}function mg(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?mg(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function vg(){for(var e=window,r=Ws();r instanceof e.HTMLIFrameElement;){try{var i=typeof r.contentWindow.location.href=="string"}catch{i=!1}if(i)e=r.contentWindow;else break;r=Ws(e.document)}return r}function Qu(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function u_(e){var r=vg(),i=e.focusedElem,l=e.selectionRange;if(r!==i&&i&&i.ownerDocument&&mg(i.ownerDocument.documentElement,i)){if(l!==null&&Qu(i)){if(r=l.start,e=l.end,e===void 0&&(e=r),"selectionStart"in i)i.selectionStart=r,i.selectionEnd=Math.min(e,i.value.length);else if(e=(r=i.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var f=i.textContent.length,g=Math.min(l.start,f);l=l.end===void 0?g:Math.min(l.end,f),!e.extend&&g>l&&(f=l,l=g,g=f),f=gg(i,g);var w=gg(i,l);f&&w&&(e.rangeCount!==1||e.anchorNode!==f.node||e.anchorOffset!==f.offset||e.focusNode!==w.node||e.focusOffset!==w.offset)&&(r=r.createRange(),r.setStart(f.node,f.offset),e.removeAllRanges(),g>l?(e.addRange(r),e.extend(w.node,w.offset)):(r.setEnd(w.node,w.offset),e.addRange(r)))}}for(r=[],e=i;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<r.length;i++)e=r[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var c_=h&&"documentMode"in document&&11>=document.documentMode,os=null,Ju=null,Si=null,Zu=!1;function yg(e,r,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Zu||os==null||os!==Ws(l)||(l=os,"selectionStart"in l&&Qu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Si&&_i(Si,l)||(Si=l,l=qa(Ju,"onSelect"),0<l.length&&(r=new Hu("onSelect","select",null,r,i),e.push({event:r,listeners:l}),r.target=os)))}function Va(e,r){var i={};return i[e.toLowerCase()]=r.toLowerCase(),i["Webkit"+e]="webkit"+r,i["Moz"+e]="moz"+r,i}var ls={animationend:Va("Animation","AnimationEnd"),animationiteration:Va("Animation","AnimationIteration"),animationstart:Va("Animation","AnimationStart"),transitionend:Va("Transition","TransitionEnd")},ec={},wg={};h&&(wg=document.createElement("div").style,"AnimationEvent"in window||(delete ls.animationend.animation,delete ls.animationiteration.animation,delete ls.animationstart.animation),"TransitionEvent"in window||delete ls.transitionend.transition);function Wa(e){if(ec[e])return ec[e];if(!ls[e])return e;var r=ls[e],i;for(i in r)if(r.hasOwnProperty(i)&&i in wg)return ec[e]=r[i];return e}var bg=Wa("animationend"),_g=Wa("animationiteration"),Sg=Wa("animationstart"),Eg=Wa("transitionend"),xg=new Map,kg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xn(e,r){xg.set(e,r),o(r,[e])}for(var tc=0;tc<kg.length;tc++){var nc=kg[tc],h_=nc.toLowerCase(),d_=nc[0].toUpperCase()+nc.slice(1);Xn(h_,"on"+d_)}Xn(bg,"onAnimationEnd"),Xn(_g,"onAnimationIteration"),Xn(Sg,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(Eg,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ei="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ei));function Ag(e,r,i){var l=e.type||"unknown-event";e.currentTarget=i,hb(l,r,void 0,e),e.currentTarget=null}function Cg(e,r){r=(r&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],f=l.event;l=l.listeners;e:{var g=void 0;if(r)for(var w=l.length-1;0<=w;w--){var S=l[w],A=S.instance,O=S.currentTarget;if(S=S.listener,A!==g&&f.isPropagationStopped())break e;Ag(f,S,O),g=A}else for(w=0;w<l.length;w++){if(S=l[w],A=S.instance,O=S.currentTarget,S=S.listener,A!==g&&f.isPropagationStopped())break e;Ag(f,S,O),g=A}}}if(Pa)throw e=Iu,Pa=!1,Iu=null,e}function Oe(e,r){var i=r[cc];i===void 0&&(i=r[cc]=new Set);var l=e+"__bubble";i.has(l)||(Tg(r,e,2,!1),i.add(l))}function rc(e,r,i){var l=0;r&&(l|=4),Tg(i,e,l,r)}var Ga="_reactListening"+Math.random().toString(36).slice(2);function xi(e){if(!e[Ga]){e[Ga]=!0,s.forEach(function(i){i!=="selectionchange"&&(f_.has(i)||rc(i,!1,e),rc(i,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[Ga]||(r[Ga]=!0,rc("selectionchange",!1,r))}}function Tg(e,r,i,l){switch(Qp(r)){case 1:var f=Cb;break;case 4:f=Tb;break;default:f=zu}i=f.bind(null,r,i,e),f=void 0,!Nu||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?e.addEventListener(r,i,{capture:!0,passive:f}):e.addEventListener(r,i,!0):f!==void 0?e.addEventListener(r,i,{passive:f}):e.addEventListener(r,i,!1)}function sc(e,r,i,l,f){var g=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var w=l.tag;if(w===3||w===4){var S=l.stateNode.containerInfo;if(S===f||S.nodeType===8&&S.parentNode===f)break;if(w===4)for(w=l.return;w!==null;){var A=w.tag;if((A===3||A===4)&&(A=w.stateNode.containerInfo,A===f||A.nodeType===8&&A.parentNode===f))return;w=w.return}for(;S!==null;){if(w=kr(S),w===null)return;if(A=w.tag,A===5||A===6){l=g=w;continue e}S=S.parentNode}}l=l.return}Ip(function(){var O=g,U=Pu(i),H=[];e:{var B=xg.get(e);if(B!==void 0){var Y=Hu,Q=e;switch(e){case"keypress":if(za(i)===0)break e;case"keydown":case"keyup":Y=Hb;break;case"focusin":Q="focus",Y=Gu;break;case"focusout":Q="blur",Y=Gu;break;case"beforeblur":case"afterblur":Y=Gu;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=eg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Lb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=Gb;break;case bg:case _g:case Sg:Y=Mb;break;case Eg:Y=Xb;break;case"scroll":Y=Pb;break;case"wheel":Y=Kb;break;case"copy":case"cut":case"paste":Y=Db;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=ng}var J=(r&4)!==0,Ge=!J&&e==="scroll",I=J?B!==null?B+"Capture":null:B;J=[];for(var T=O,M;T!==null;){M=T;var W=M.stateNode;if(M.tag===5&&W!==null&&(M=W,I!==null&&(W=ai(T,I),W!=null&&J.push(ki(T,W,M)))),Ge)break;T=T.return}0<J.length&&(B=new Y(B,Q,null,i,U),H.push({event:B,listeners:J}))}}if((r&7)===0){e:{if(B=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",B&&i!==Tu&&(Q=i.relatedTarget||i.fromElement)&&(kr(Q)||Q[_n]))break e;if((Y||B)&&(B=U.window===U?U:(B=U.ownerDocument)?B.defaultView||B.parentWindow:window,Y?(Q=i.relatedTarget||i.toElement,Y=O,Q=Q?kr(Q):null,Q!==null&&(Ge=xr(Q),Q!==Ge||Q.tag!==5&&Q.tag!==6)&&(Q=null)):(Y=null,Q=O),Y!==Q)){if(J=eg,W="onMouseLeave",I="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(J=ng,W="onPointerLeave",I="onPointerEnter",T="pointer"),Ge=Y==null?B:hs(Y),M=Q==null?B:hs(Q),B=new J(W,T+"leave",Y,i,U),B.target=Ge,B.relatedTarget=M,W=null,kr(U)===O&&(J=new J(I,T+"enter",Q,i,U),J.target=M,J.relatedTarget=Ge,W=J),Ge=W,Y&&Q)t:{for(J=Y,I=Q,T=0,M=J;M;M=us(M))T++;for(M=0,W=I;W;W=us(W))M++;for(;0<T-M;)J=us(J),T--;for(;0<M-T;)I=us(I),M--;for(;T--;){if(J===I||I!==null&&J===I.alternate)break t;J=us(J),I=us(I)}J=null}else J=null;Y!==null&&Pg(H,B,Y,J,!1),Q!==null&&Ge!==null&&Pg(H,Ge,Q,J,!0)}}e:{if(B=O?hs(O):window,Y=B.nodeName&&B.nodeName.toLowerCase(),Y==="select"||Y==="input"&&B.type==="file")var Z=r_;else if(lg(B))if(cg)Z=o_;else{Z=i_;var ne=s_}else(Y=B.nodeName)&&Y.toLowerCase()==="input"&&(B.type==="checkbox"||B.type==="radio")&&(Z=a_);if(Z&&(Z=Z(e,O))){ug(H,Z,i,U);break e}ne&&ne(e,B,O),e==="focusout"&&(ne=B._wrapperState)&&ne.controlled&&B.type==="number"&&Eu(B,"number",B.value)}switch(ne=O?hs(O):window,e){case"focusin":(lg(ne)||ne.contentEditable==="true")&&(os=ne,Ju=O,Si=null);break;case"focusout":Si=Ju=os=null;break;case"mousedown":Zu=!0;break;case"contextmenu":case"mouseup":case"dragend":Zu=!1,yg(H,i,U);break;case"selectionchange":if(c_)break;case"keydown":case"keyup":yg(H,i,U)}var re;if(Xu)e:{switch(e){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else as?ag(e,i)&&(ue="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(ue="onCompositionStart");ue&&(rg&&i.locale!=="ko"&&(as||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&as&&(re=Jp()):(qn=U,Uu="value"in qn?qn.value:qn.textContent,as=!0)),ne=qa(O,ue),0<ne.length&&(ue=new tg(ue,e,null,i,U),H.push({event:ue,listeners:ne}),re?ue.data=re:(re=og(i),re!==null&&(ue.data=re)))),(re=Jb?Zb(e,i):e_(e,i))&&(O=qa(O,"onBeforeInput"),0<O.length&&(U=new tg("onBeforeInput","beforeinput",null,i,U),H.push({event:U,listeners:O}),U.data=re))}Cg(H,r)})}function ki(e,r,i){return{instance:e,listener:r,currentTarget:i}}function qa(e,r){for(var i=r+"Capture",l=[];e!==null;){var f=e,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=ai(e,i),g!=null&&l.unshift(ki(e,g,f)),g=ai(e,r),g!=null&&l.push(ki(e,g,f))),e=e.return}return l}function us(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Pg(e,r,i,l,f){for(var g=r._reactName,w=[];i!==null&&i!==l;){var S=i,A=S.alternate,O=S.stateNode;if(A!==null&&A===l)break;S.tag===5&&O!==null&&(S=O,f?(A=ai(i,g),A!=null&&w.unshift(ki(i,A,S))):f||(A=ai(i,g),A!=null&&w.push(ki(i,A,S)))),i=i.return}w.length!==0&&e.push({event:r,listeners:w})}var p_=/\r\n?/g,g_=/\u0000|\uFFFD/g;function Rg(e){return(typeof e=="string"?e:""+e).replace(p_,`
`).replace(g_,"")}function Xa(e,r,i){if(r=Rg(r),Rg(e)!==r&&i)throw Error(n(425))}function Ya(){}var ic=null,ac=null;function oc(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var lc=typeof setTimeout=="function"?setTimeout:void 0,m_=typeof clearTimeout=="function"?clearTimeout:void 0,Lg=typeof Promise=="function"?Promise:void 0,v_=typeof queueMicrotask=="function"?queueMicrotask:typeof Lg<"u"?function(e){return Lg.resolve(null).then(e).catch(y_)}:lc;function y_(e){setTimeout(function(){throw e})}function uc(e,r){var i=r,l=0;do{var f=i.nextSibling;if(e.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"){if(l===0){e.removeChild(f),gi(r);return}l--}else i!=="$"&&i!=="$?"&&i!=="$!"||l++;i=f}while(i);gi(r)}function Yn(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function Ng(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(r===0)return e;r--}else i==="/$"&&r++}e=e.previousSibling}return null}var cs=Math.random().toString(36).slice(2),on="__reactFiber$"+cs,Ai="__reactProps$"+cs,_n="__reactContainer$"+cs,cc="__reactEvents$"+cs,w_="__reactListeners$"+cs,b_="__reactHandles$"+cs;function kr(e){var r=e[on];if(r)return r;for(var i=e.parentNode;i;){if(r=i[_n]||i[on]){if(i=r.alternate,r.child!==null||i!==null&&i.child!==null)for(e=Ng(e);e!==null;){if(i=e[on])return i;e=Ng(e)}return r}e=i,i=e.parentNode}return null}function Ci(e){return e=e[on]||e[_n],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(n(33))}function Ka(e){return e[Ai]||null}var hc=[],ds=-1;function Kn(e){return{current:e}}function De(e){0>ds||(e.current=hc[ds],hc[ds]=null,ds--)}function Ie(e,r){ds++,hc[ds]=e.current,e.current=r}var Qn={},dt=Kn(Qn),St=Kn(!1),Ar=Qn;function fs(e,r){var i=e.type.contextTypes;if(!i)return Qn;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===r)return l.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in i)f[g]=r[g];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=f),f}function Et(e){return e=e.childContextTypes,e!=null}function Qa(){De(St),De(dt)}function Ig(e,r,i){if(dt.current!==Qn)throw Error(n(168));Ie(dt,r),Ie(St,i)}function Mg(e,r,i){var l=e.stateNode;if(r=r.childContextTypes,typeof l.getChildContext!="function")return i;l=l.getChildContext();for(var f in l)if(!(f in r))throw Error(n(108,ge(e)||"Unknown",f));return X({},i,l)}function Ja(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qn,Ar=dt.current,Ie(dt,e),Ie(St,St.current),!0}function Og(e,r,i){var l=e.stateNode;if(!l)throw Error(n(169));i?(e=Mg(e,r,Ar),l.__reactInternalMemoizedMergedChildContext=e,De(St),De(dt),Ie(dt,e)):De(St),Ie(St,i)}var Sn=null,Za=!1,dc=!1;function Dg(e){Sn===null?Sn=[e]:Sn.push(e)}function __(e){Za=!0,Dg(e)}function Jn(){if(!dc&&Sn!==null){dc=!0;var e=0,r=Re;try{var i=Sn;for(Re=1;e<i.length;e++){var l=i[e];do l=l(!0);while(l!==null)}Sn=null,Za=!1}catch(f){throw Sn!==null&&(Sn=Sn.slice(e+1)),jp(Mu,Jn),f}finally{Re=r,dc=!1}}return null}var ps=[],gs=0,eo=null,to=0,jt=[],$t=0,Cr=null,En=1,xn="";function Tr(e,r){ps[gs++]=to,ps[gs++]=eo,eo=e,to=r}function Fg(e,r,i){jt[$t++]=En,jt[$t++]=xn,jt[$t++]=Cr,Cr=e;var l=En;e=xn;var f=32-Kt(l)-1;l&=~(1<<f),i+=1;var g=32-Kt(r)+f;if(30<g){var w=f-f%5;g=(l&(1<<w)-1).toString(32),l>>=w,f-=w,En=1<<32-Kt(r)+f|i<<f|l,xn=g+e}else En=1<<g|i<<f|l,xn=e}function fc(e){e.return!==null&&(Tr(e,1),Fg(e,1,0))}function pc(e){for(;e===eo;)eo=ps[--gs],ps[gs]=null,to=ps[--gs],ps[gs]=null;for(;e===Cr;)Cr=jt[--$t],jt[$t]=null,xn=jt[--$t],jt[$t]=null,En=jt[--$t],jt[$t]=null}var It=null,Mt=null,$e=!1,Jt=null;function jg(e,r){var i=Ht(5,null,null,0);i.elementType="DELETED",i.stateNode=r,i.return=e,r=e.deletions,r===null?(e.deletions=[i],e.flags|=16):r.push(i)}function $g(e,r){switch(e.tag){case 5:var i=e.type;return r=r.nodeType!==1||i.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,It=e,Mt=Yn(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,It=e,Mt=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(i=Cr!==null?{id:En,overflow:xn}:null,e.memoizedState={dehydrated:r,treeContext:i,retryLane:1073741824},i=Ht(18,null,null,0),i.stateNode=r,i.return=e,e.child=i,It=e,Mt=null,!0):!1;default:return!1}}function gc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function mc(e){if($e){var r=Mt;if(r){var i=r;if(!$g(e,r)){if(gc(e))throw Error(n(418));r=Yn(i.nextSibling);var l=It;r&&$g(e,r)?jg(l,i):(e.flags=e.flags&-4097|2,$e=!1,It=e)}}else{if(gc(e))throw Error(n(418));e.flags=e.flags&-4097|2,$e=!1,It=e}}}function zg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;It=e}function no(e){if(e!==It)return!1;if(!$e)return zg(e),$e=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!oc(e.type,e.memoizedProps)),r&&(r=Mt)){if(gc(e))throw Bg(),Error(n(418));for(;r;)jg(e,r),r=Yn(r.nextSibling)}if(zg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(r===0){Mt=Yn(e.nextSibling);break e}r--}else i!=="$"&&i!=="$!"&&i!=="$?"||r++}e=e.nextSibling}Mt=null}}else Mt=It?Yn(e.stateNode.nextSibling):null;return!0}function Bg(){for(var e=Mt;e;)e=Yn(e.nextSibling)}function ms(){Mt=It=null,$e=!1}function vc(e){Jt===null?Jt=[e]:Jt.push(e)}var S_=j.ReactCurrentBatchConfig;function Ti(e,r,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(n(309));var l=i.stateNode}if(!l)throw Error(n(147,e));var f=l,g=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===g?r.ref:(r=function(w){var S=f.refs;w===null?delete S[g]:S[g]=w},r._stringRef=g,r)}if(typeof e!="string")throw Error(n(284));if(!i._owner)throw Error(n(290,e))}return e}function ro(e,r){throw e=Object.prototype.toString.call(r),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function Ug(e){var r=e._init;return r(e._payload)}function Hg(e){function r(I,T){if(e){var M=I.deletions;M===null?(I.deletions=[T],I.flags|=16):M.push(T)}}function i(I,T){if(!e)return null;for(;T!==null;)r(I,T),T=T.sibling;return null}function l(I,T){for(I=new Map;T!==null;)T.key!==null?I.set(T.key,T):I.set(T.index,T),T=T.sibling;return I}function f(I,T){return I=ar(I,T),I.index=0,I.sibling=null,I}function g(I,T,M){return I.index=M,e?(M=I.alternate,M!==null?(M=M.index,M<T?(I.flags|=2,T):M):(I.flags|=2,T)):(I.flags|=1048576,T)}function w(I){return e&&I.alternate===null&&(I.flags|=2),I}function S(I,T,M,W){return T===null||T.tag!==6?(T=oh(M,I.mode,W),T.return=I,T):(T=f(T,M),T.return=I,T)}function A(I,T,M,W){var Z=M.type;return Z===G?U(I,T,M.props.children,W,M.key):T!==null&&(T.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===le&&Ug(Z)===T.type)?(W=f(T,M.props),W.ref=Ti(I,T,M),W.return=I,W):(W=To(M.type,M.key,M.props,null,I.mode,W),W.ref=Ti(I,T,M),W.return=I,W)}function O(I,T,M,W){return T===null||T.tag!==4||T.stateNode.containerInfo!==M.containerInfo||T.stateNode.implementation!==M.implementation?(T=lh(M,I.mode,W),T.return=I,T):(T=f(T,M.children||[]),T.return=I,T)}function U(I,T,M,W,Z){return T===null||T.tag!==7?(T=Dr(M,I.mode,W,Z),T.return=I,T):(T=f(T,M),T.return=I,T)}function H(I,T,M){if(typeof T=="string"&&T!==""||typeof T=="number")return T=oh(""+T,I.mode,M),T.return=I,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case z:return M=To(T.type,T.key,T.props,null,I.mode,M),M.ref=Ti(I,null,T),M.return=I,M;case V:return T=lh(T,I.mode,M),T.return=I,T;case le:var W=T._init;return H(I,W(T._payload),M)}if(ri(T)||te(T))return T=Dr(T,I.mode,M,null),T.return=I,T;ro(I,T)}return null}function B(I,T,M,W){var Z=T!==null?T.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return Z!==null?null:S(I,T,""+M,W);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case z:return M.key===Z?A(I,T,M,W):null;case V:return M.key===Z?O(I,T,M,W):null;case le:return Z=M._init,B(I,T,Z(M._payload),W)}if(ri(M)||te(M))return Z!==null?null:U(I,T,M,W,null);ro(I,M)}return null}function Y(I,T,M,W,Z){if(typeof W=="string"&&W!==""||typeof W=="number")return I=I.get(M)||null,S(T,I,""+W,Z);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case z:return I=I.get(W.key===null?M:W.key)||null,A(T,I,W,Z);case V:return I=I.get(W.key===null?M:W.key)||null,O(T,I,W,Z);case le:var ne=W._init;return Y(I,T,M,ne(W._payload),Z)}if(ri(W)||te(W))return I=I.get(M)||null,U(T,I,W,Z,null);ro(T,W)}return null}function Q(I,T,M,W){for(var Z=null,ne=null,re=T,ue=T=0,it=null;re!==null&&ue<M.length;ue++){re.index>ue?(it=re,re=null):it=re.sibling;var _e=B(I,re,M[ue],W);if(_e===null){re===null&&(re=it);break}e&&re&&_e.alternate===null&&r(I,re),T=g(_e,T,ue),ne===null?Z=_e:ne.sibling=_e,ne=_e,re=it}if(ue===M.length)return i(I,re),$e&&Tr(I,ue),Z;if(re===null){for(;ue<M.length;ue++)re=H(I,M[ue],W),re!==null&&(T=g(re,T,ue),ne===null?Z=re:ne.sibling=re,ne=re);return $e&&Tr(I,ue),Z}for(re=l(I,re);ue<M.length;ue++)it=Y(re,I,ue,M[ue],W),it!==null&&(e&&it.alternate!==null&&re.delete(it.key===null?ue:it.key),T=g(it,T,ue),ne===null?Z=it:ne.sibling=it,ne=it);return e&&re.forEach(function(or){return r(I,or)}),$e&&Tr(I,ue),Z}function J(I,T,M,W){var Z=te(M);if(typeof Z!="function")throw Error(n(150));if(M=Z.call(M),M==null)throw Error(n(151));for(var ne=Z=null,re=T,ue=T=0,it=null,_e=M.next();re!==null&&!_e.done;ue++,_e=M.next()){re.index>ue?(it=re,re=null):it=re.sibling;var or=B(I,re,_e.value,W);if(or===null){re===null&&(re=it);break}e&&re&&or.alternate===null&&r(I,re),T=g(or,T,ue),ne===null?Z=or:ne.sibling=or,ne=or,re=it}if(_e.done)return i(I,re),$e&&Tr(I,ue),Z;if(re===null){for(;!_e.done;ue++,_e=M.next())_e=H(I,_e.value,W),_e!==null&&(T=g(_e,T,ue),ne===null?Z=_e:ne.sibling=_e,ne=_e);return $e&&Tr(I,ue),Z}for(re=l(I,re);!_e.done;ue++,_e=M.next())_e=Y(re,I,ue,_e.value,W),_e!==null&&(e&&_e.alternate!==null&&re.delete(_e.key===null?ue:_e.key),T=g(_e,T,ue),ne===null?Z=_e:ne.sibling=_e,ne=_e);return e&&re.forEach(function(t1){return r(I,t1)}),$e&&Tr(I,ue),Z}function Ge(I,T,M,W){if(typeof M=="object"&&M!==null&&M.type===G&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case z:e:{for(var Z=M.key,ne=T;ne!==null;){if(ne.key===Z){if(Z=M.type,Z===G){if(ne.tag===7){i(I,ne.sibling),T=f(ne,M.props.children),T.return=I,I=T;break e}}else if(ne.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===le&&Ug(Z)===ne.type){i(I,ne.sibling),T=f(ne,M.props),T.ref=Ti(I,ne,M),T.return=I,I=T;break e}i(I,ne);break}else r(I,ne);ne=ne.sibling}M.type===G?(T=Dr(M.props.children,I.mode,W,M.key),T.return=I,I=T):(W=To(M.type,M.key,M.props,null,I.mode,W),W.ref=Ti(I,T,M),W.return=I,I=W)}return w(I);case V:e:{for(ne=M.key;T!==null;){if(T.key===ne)if(T.tag===4&&T.stateNode.containerInfo===M.containerInfo&&T.stateNode.implementation===M.implementation){i(I,T.sibling),T=f(T,M.children||[]),T.return=I,I=T;break e}else{i(I,T);break}else r(I,T);T=T.sibling}T=lh(M,I.mode,W),T.return=I,I=T}return w(I);case le:return ne=M._init,Ge(I,T,ne(M._payload),W)}if(ri(M))return Q(I,T,M,W);if(te(M))return J(I,T,M,W);ro(I,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,T!==null&&T.tag===6?(i(I,T.sibling),T=f(T,M),T.return=I,I=T):(i(I,T),T=oh(M,I.mode,W),T.return=I,I=T),w(I)):i(I,T)}return Ge}var vs=Hg(!0),Vg=Hg(!1),so=Kn(null),io=null,ys=null,yc=null;function wc(){yc=ys=io=null}function bc(e){var r=so.current;De(so),e._currentValue=r}function _c(e,r,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),e===i)break;e=e.return}}function ws(e,r){io=e,yc=ys=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&r)!==0&&(xt=!0),e.firstContext=null)}function zt(e){var r=e._currentValue;if(yc!==e)if(e={context:e,memoizedValue:r,next:null},ys===null){if(io===null)throw Error(n(308));ys=e,io.dependencies={lanes:0,firstContext:e}}else ys=ys.next=e;return r}var Pr=null;function Sc(e){Pr===null?Pr=[e]:Pr.push(e)}function Wg(e,r,i,l){var f=r.interleaved;return f===null?(i.next=i,Sc(r)):(i.next=f.next,f.next=i),r.interleaved=i,kn(e,l)}function kn(e,r){e.lanes|=r;var i=e.alternate;for(i!==null&&(i.lanes|=r),i=e,e=e.return;e!==null;)e.childLanes|=r,i=e.alternate,i!==null&&(i.childLanes|=r),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Zn=!1;function Ec(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gg(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function An(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function er(e,r,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(we&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,kn(e,i)}return f=l.interleaved,f===null?(r.next=r,Sc(l)):(r.next=f.next,f.next=r),l.interleaved=r,kn(e,i)}function ao(e,r,i){if(r=r.updateQueue,r!==null&&(r=r.shared,(i&4194240)!==0)){var l=r.lanes;l&=e.pendingLanes,i|=l,r.lanes=i,Fu(e,i)}}function qg(e,r){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var f=null,g=null;if(i=i.firstBaseUpdate,i!==null){do{var w={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};g===null?f=g=w:g=g.next=w,i=i.next}while(i!==null);g===null?f=g=r:g=g.next=r}else f=g=r;i={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:l.shared,effects:l.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=r:e.next=r,i.lastBaseUpdate=r}function oo(e,r,i,l){var f=e.updateQueue;Zn=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var A=S,O=A.next;A.next=null,w===null?g=O:w.next=O,w=A;var U=e.alternate;U!==null&&(U=U.updateQueue,S=U.lastBaseUpdate,S!==w&&(S===null?U.firstBaseUpdate=O:S.next=O,U.lastBaseUpdate=A))}if(g!==null){var H=f.baseState;w=0,U=O=A=null,S=g;do{var B=S.lane,Y=S.eventTime;if((l&B)===B){U!==null&&(U=U.next={eventTime:Y,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var Q=e,J=S;switch(B=r,Y=i,J.tag){case 1:if(Q=J.payload,typeof Q=="function"){H=Q.call(Y,H,B);break e}H=Q;break e;case 3:Q.flags=Q.flags&-65537|128;case 0:if(Q=J.payload,B=typeof Q=="function"?Q.call(Y,H,B):Q,B==null)break e;H=X({},H,B);break e;case 2:Zn=!0}}S.callback!==null&&S.lane!==0&&(e.flags|=64,B=f.effects,B===null?f.effects=[S]:B.push(S))}else Y={eventTime:Y,lane:B,tag:S.tag,payload:S.payload,callback:S.callback,next:null},U===null?(O=U=Y,A=H):U=U.next=Y,w|=B;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;B=S,S=B.next,B.next=null,f.lastBaseUpdate=B,f.shared.pending=null}}while(!0);if(U===null&&(A=H),f.baseState=A,f.firstBaseUpdate=O,f.lastBaseUpdate=U,r=f.shared.interleaved,r!==null){f=r;do w|=f.lane,f=f.next;while(f!==r)}else g===null&&(f.shared.lanes=0);Nr|=w,e.lanes=w,e.memoizedState=H}}function Xg(e,r,i){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var l=e[r],f=l.callback;if(f!==null){if(l.callback=null,l=i,typeof f!="function")throw Error(n(191,f));f.call(l)}}}var Pi={},ln=Kn(Pi),Ri=Kn(Pi),Li=Kn(Pi);function Rr(e){if(e===Pi)throw Error(n(174));return e}function xc(e,r){switch(Ie(Li,r),Ie(Ri,e),Ie(ln,Pi),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ku(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=ku(r,e)}De(ln),Ie(ln,r)}function bs(){De(ln),De(Ri),De(Li)}function Yg(e){Rr(Li.current);var r=Rr(ln.current),i=ku(r,e.type);r!==i&&(Ie(Ri,e),Ie(ln,i))}function kc(e){Ri.current===e&&(De(ln),De(Ri))}var ze=Kn(0);function lo(e){for(var r=e;r!==null;){if(r.tag===13){var i=r.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ac=[];function Cc(){for(var e=0;e<Ac.length;e++)Ac[e]._workInProgressVersionPrimary=null;Ac.length=0}var uo=j.ReactCurrentDispatcher,Tc=j.ReactCurrentBatchConfig,Lr=0,Be=null,Qe=null,rt=null,co=!1,Ni=!1,Ii=0,E_=0;function ft(){throw Error(n(321))}function Pc(e,r){if(r===null)return!1;for(var i=0;i<r.length&&i<e.length;i++)if(!Qt(e[i],r[i]))return!1;return!0}function Rc(e,r,i,l,f,g){if(Lr=g,Be=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,uo.current=e===null||e.memoizedState===null?C_:T_,e=i(l,f),Ni){g=0;do{if(Ni=!1,Ii=0,25<=g)throw Error(n(301));g+=1,rt=Qe=null,r.updateQueue=null,uo.current=P_,e=i(l,f)}while(Ni)}if(uo.current=po,r=Qe!==null&&Qe.next!==null,Lr=0,rt=Qe=Be=null,co=!1,r)throw Error(n(300));return e}function Lc(){var e=Ii!==0;return Ii=0,e}function un(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Be.memoizedState=rt=e:rt=rt.next=e,rt}function Bt(){if(Qe===null){var e=Be.alternate;e=e!==null?e.memoizedState:null}else e=Qe.next;var r=rt===null?Be.memoizedState:rt.next;if(r!==null)rt=r,Qe=e;else{if(e===null)throw Error(n(310));Qe=e,e={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},rt===null?Be.memoizedState=rt=e:rt=rt.next=e}return rt}function Mi(e,r){return typeof r=="function"?r(e):r}function Nc(e){var r=Bt(),i=r.queue;if(i===null)throw Error(n(311));i.lastRenderedReducer=e;var l=Qe,f=l.baseQueue,g=i.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}l.baseQueue=f=g,i.pending=null}if(f!==null){g=f.next,l=l.baseState;var S=w=null,A=null,O=g;do{var U=O.lane;if((Lr&U)===U)A!==null&&(A=A.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),l=O.hasEagerState?O.eagerState:e(l,O.action);else{var H={lane:U,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};A===null?(S=A=H,w=l):A=A.next=H,Be.lanes|=U,Nr|=U}O=O.next}while(O!==null&&O!==g);A===null?w=l:A.next=S,Qt(l,r.memoizedState)||(xt=!0),r.memoizedState=l,r.baseState=w,r.baseQueue=A,i.lastRenderedState=l}if(e=i.interleaved,e!==null){f=e;do g=f.lane,Be.lanes|=g,Nr|=g,f=f.next;while(f!==e)}else f===null&&(i.lanes=0);return[r.memoizedState,i.dispatch]}function Ic(e){var r=Bt(),i=r.queue;if(i===null)throw Error(n(311));i.lastRenderedReducer=e;var l=i.dispatch,f=i.pending,g=r.memoizedState;if(f!==null){i.pending=null;var w=f=f.next;do g=e(g,w.action),w=w.next;while(w!==f);Qt(g,r.memoizedState)||(xt=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),i.lastRenderedState=g}return[g,l]}function Kg(){}function Qg(e,r){var i=Be,l=Bt(),f=r(),g=!Qt(l.memoizedState,f);if(g&&(l.memoizedState=f,xt=!0),l=l.queue,Mc(em.bind(null,i,l,e),[e]),l.getSnapshot!==r||g||rt!==null&&rt.memoizedState.tag&1){if(i.flags|=2048,Oi(9,Zg.bind(null,i,l,f,r),void 0,null),st===null)throw Error(n(349));(Lr&30)!==0||Jg(i,r,f)}return f}function Jg(e,r,i){e.flags|=16384,e={getSnapshot:r,value:i},r=Be.updateQueue,r===null?(r={lastEffect:null,stores:null},Be.updateQueue=r,r.stores=[e]):(i=r.stores,i===null?r.stores=[e]:i.push(e))}function Zg(e,r,i,l){r.value=i,r.getSnapshot=l,tm(r)&&nm(e)}function em(e,r,i){return i(function(){tm(r)&&nm(e)})}function tm(e){var r=e.getSnapshot;e=e.value;try{var i=r();return!Qt(e,i)}catch{return!0}}function nm(e){var r=kn(e,1);r!==null&&nn(r,e,1,-1)}function rm(e){var r=un();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:e},r.queue=e,e=e.dispatch=A_.bind(null,Be,e),[r.memoizedState,e]}function Oi(e,r,i,l){return e={tag:e,create:r,destroy:i,deps:l,next:null},r=Be.updateQueue,r===null?(r={lastEffect:null,stores:null},Be.updateQueue=r,r.lastEffect=e.next=e):(i=r.lastEffect,i===null?r.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,r.lastEffect=e)),e}function sm(){return Bt().memoizedState}function ho(e,r,i,l){var f=un();Be.flags|=e,f.memoizedState=Oi(1|r,i,void 0,l===void 0?null:l)}function fo(e,r,i,l){var f=Bt();l=l===void 0?null:l;var g=void 0;if(Qe!==null){var w=Qe.memoizedState;if(g=w.destroy,l!==null&&Pc(l,w.deps)){f.memoizedState=Oi(r,i,g,l);return}}Be.flags|=e,f.memoizedState=Oi(1|r,i,g,l)}function im(e,r){return ho(8390656,8,e,r)}function Mc(e,r){return fo(2048,8,e,r)}function am(e,r){return fo(4,2,e,r)}function om(e,r){return fo(4,4,e,r)}function lm(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function um(e,r,i){return i=i!=null?i.concat([e]):null,fo(4,4,lm.bind(null,r,e),i)}function Oc(){}function cm(e,r){var i=Bt();r=r===void 0?null:r;var l=i.memoizedState;return l!==null&&r!==null&&Pc(r,l[1])?l[0]:(i.memoizedState=[e,r],e)}function hm(e,r){var i=Bt();r=r===void 0?null:r;var l=i.memoizedState;return l!==null&&r!==null&&Pc(r,l[1])?l[0]:(e=e(),i.memoizedState=[e,r],e)}function dm(e,r,i){return(Lr&21)===0?(e.baseState&&(e.baseState=!1,xt=!0),e.memoizedState=i):(Qt(i,r)||(i=Up(),Be.lanes|=i,Nr|=i,e.baseState=!0),r)}function x_(e,r){var i=Re;Re=i!==0&&4>i?i:4,e(!0);var l=Tc.transition;Tc.transition={};try{e(!1),r()}finally{Re=i,Tc.transition=l}}function fm(){return Bt().memoizedState}function k_(e,r,i){var l=sr(e);if(i={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null},pm(e))gm(r,i);else if(i=Wg(e,r,i,l),i!==null){var f=wt();nn(i,e,l,f),mm(i,r,l)}}function A_(e,r,i){var l=sr(e),f={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null};if(pm(e))gm(r,f);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var w=r.lastRenderedState,S=g(w,i);if(f.hasEagerState=!0,f.eagerState=S,Qt(S,w)){var A=r.interleaved;A===null?(f.next=f,Sc(r)):(f.next=A.next,A.next=f),r.interleaved=f;return}}catch{}finally{}i=Wg(e,r,f,l),i!==null&&(f=wt(),nn(i,e,l,f),mm(i,r,l))}}function pm(e){var r=e.alternate;return e===Be||r!==null&&r===Be}function gm(e,r){Ni=co=!0;var i=e.pending;i===null?r.next=r:(r.next=i.next,i.next=r),e.pending=r}function mm(e,r,i){if((i&4194240)!==0){var l=r.lanes;l&=e.pendingLanes,i|=l,r.lanes=i,Fu(e,i)}}var po={readContext:zt,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},C_={readContext:zt,useCallback:function(e,r){return un().memoizedState=[e,r===void 0?null:r],e},useContext:zt,useEffect:im,useImperativeHandle:function(e,r,i){return i=i!=null?i.concat([e]):null,ho(4194308,4,lm.bind(null,r,e),i)},useLayoutEffect:function(e,r){return ho(4194308,4,e,r)},useInsertionEffect:function(e,r){return ho(4,2,e,r)},useMemo:function(e,r){var i=un();return r=r===void 0?null:r,e=e(),i.memoizedState=[e,r],e},useReducer:function(e,r,i){var l=un();return r=i!==void 0?i(r):r,l.memoizedState=l.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},l.queue=e,e=e.dispatch=k_.bind(null,Be,e),[l.memoizedState,e]},useRef:function(e){var r=un();return e={current:e},r.memoizedState=e},useState:rm,useDebugValue:Oc,useDeferredValue:function(e){return un().memoizedState=e},useTransition:function(){var e=rm(!1),r=e[0];return e=x_.bind(null,e[1]),un().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,i){var l=Be,f=un();if($e){if(i===void 0)throw Error(n(407));i=i()}else{if(i=r(),st===null)throw Error(n(349));(Lr&30)!==0||Jg(l,r,i)}f.memoizedState=i;var g={value:i,getSnapshot:r};return f.queue=g,im(em.bind(null,l,g,e),[e]),l.flags|=2048,Oi(9,Zg.bind(null,l,g,i,r),void 0,null),i},useId:function(){var e=un(),r=st.identifierPrefix;if($e){var i=xn,l=En;i=(l&~(1<<32-Kt(l)-1)).toString(32)+i,r=":"+r+"R"+i,i=Ii++,0<i&&(r+="H"+i.toString(32)),r+=":"}else i=E_++,r=":"+r+"r"+i.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},T_={readContext:zt,useCallback:cm,useContext:zt,useEffect:Mc,useImperativeHandle:um,useInsertionEffect:am,useLayoutEffect:om,useMemo:hm,useReducer:Nc,useRef:sm,useState:function(){return Nc(Mi)},useDebugValue:Oc,useDeferredValue:function(e){var r=Bt();return dm(r,Qe.memoizedState,e)},useTransition:function(){var e=Nc(Mi)[0],r=Bt().memoizedState;return[e,r]},useMutableSource:Kg,useSyncExternalStore:Qg,useId:fm,unstable_isNewReconciler:!1},P_={readContext:zt,useCallback:cm,useContext:zt,useEffect:Mc,useImperativeHandle:um,useInsertionEffect:am,useLayoutEffect:om,useMemo:hm,useReducer:Ic,useRef:sm,useState:function(){return Ic(Mi)},useDebugValue:Oc,useDeferredValue:function(e){var r=Bt();return Qe===null?r.memoizedState=e:dm(r,Qe.memoizedState,e)},useTransition:function(){var e=Ic(Mi)[0],r=Bt().memoizedState;return[e,r]},useMutableSource:Kg,useSyncExternalStore:Qg,useId:fm,unstable_isNewReconciler:!1};function Zt(e,r){if(e&&e.defaultProps){r=X({},r),e=e.defaultProps;for(var i in e)r[i]===void 0&&(r[i]=e[i]);return r}return r}function Dc(e,r,i,l){r=e.memoizedState,i=i(l,r),i=i==null?r:X({},r,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var go={isMounted:function(e){return(e=e._reactInternals)?xr(e)===e:!1},enqueueSetState:function(e,r,i){e=e._reactInternals;var l=wt(),f=sr(e),g=An(l,f);g.payload=r,i!=null&&(g.callback=i),r=er(e,g,f),r!==null&&(nn(r,e,f,l),ao(r,e,f))},enqueueReplaceState:function(e,r,i){e=e._reactInternals;var l=wt(),f=sr(e),g=An(l,f);g.tag=1,g.payload=r,i!=null&&(g.callback=i),r=er(e,g,f),r!==null&&(nn(r,e,f,l),ao(r,e,f))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var i=wt(),l=sr(e),f=An(i,l);f.tag=2,r!=null&&(f.callback=r),r=er(e,f,l),r!==null&&(nn(r,e,l,i),ao(r,e,l))}};function vm(e,r,i,l,f,g,w){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,g,w):r.prototype&&r.prototype.isPureReactComponent?!_i(i,l)||!_i(f,g):!0}function ym(e,r,i){var l=!1,f=Qn,g=r.contextType;return typeof g=="object"&&g!==null?g=zt(g):(f=Et(r)?Ar:dt.current,l=r.contextTypes,g=(l=l!=null)?fs(e,f):Qn),r=new r(i,g),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=go,e.stateNode=r,r._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=f,e.__reactInternalMemoizedMaskedChildContext=g),r}function wm(e,r,i,l){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(i,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(i,l),r.state!==e&&go.enqueueReplaceState(r,r.state,null)}function Fc(e,r,i,l){var f=e.stateNode;f.props=i,f.state=e.memoizedState,f.refs={},Ec(e);var g=r.contextType;typeof g=="object"&&g!==null?f.context=zt(g):(g=Et(r)?Ar:dt.current,f.context=fs(e,g)),f.state=e.memoizedState,g=r.getDerivedStateFromProps,typeof g=="function"&&(Dc(e,r,g,i),f.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(r=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),r!==f.state&&go.enqueueReplaceState(f,f.state,null),oo(e,i,f,l),f.state=e.memoizedState),typeof f.componentDidMount=="function"&&(e.flags|=4194308)}function _s(e,r){try{var i="",l=r;do i+=ve(l),l=l.return;while(l);var f=i}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:e,source:r,stack:f,digest:null}}function jc(e,r,i){return{value:e,source:null,stack:i??null,digest:r??null}}function $c(e,r){try{console.error(r.value)}catch(i){setTimeout(function(){throw i})}}var R_=typeof WeakMap=="function"?WeakMap:Map;function bm(e,r,i){i=An(-1,i),i.tag=3,i.payload={element:null};var l=r.value;return i.callback=function(){So||(So=!0,Zc=l),$c(e,r)},i}function _m(e,r,i){i=An(-1,i),i.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var f=r.value;i.payload=function(){return l(f)},i.callback=function(){$c(e,r)}}var g=e.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(i.callback=function(){$c(e,r),typeof l!="function"&&(nr===null?nr=new Set([this]):nr.add(this));var w=r.stack;this.componentDidCatch(r.value,{componentStack:w!==null?w:""})}),i}function Sm(e,r,i){var l=e.pingCache;if(l===null){l=e.pingCache=new R_;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(i)||(f.add(i),e=V_.bind(null,e,r,i),r.then(e,e))}function Em(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function xm(e,r,i,l,f){return(e.mode&1)===0?(e===r?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(r=An(-1,1),r.tag=2,er(i,r,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=f,e)}var L_=j.ReactCurrentOwner,xt=!1;function yt(e,r,i,l){r.child=e===null?Vg(r,null,i,l):vs(r,e.child,i,l)}function km(e,r,i,l,f){i=i.render;var g=r.ref;return ws(r,f),l=Rc(e,r,i,l,g,f),i=Lc(),e!==null&&!xt?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~f,Cn(e,r,f)):($e&&i&&fc(r),r.flags|=1,yt(e,r,l,f),r.child)}function Am(e,r,i,l,f){if(e===null){var g=i.type;return typeof g=="function"&&!ah(g)&&g.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(r.tag=15,r.type=g,Cm(e,r,g,l,f)):(e=To(i.type,null,l,r,r.mode,f),e.ref=r.ref,e.return=r,r.child=e)}if(g=e.child,(e.lanes&f)===0){var w=g.memoizedProps;if(i=i.compare,i=i!==null?i:_i,i(w,l)&&e.ref===r.ref)return Cn(e,r,f)}return r.flags|=1,e=ar(g,l),e.ref=r.ref,e.return=r,r.child=e}function Cm(e,r,i,l,f){if(e!==null){var g=e.memoizedProps;if(_i(g,l)&&e.ref===r.ref)if(xt=!1,r.pendingProps=l=g,(e.lanes&f)!==0)(e.flags&131072)!==0&&(xt=!0);else return r.lanes=e.lanes,Cn(e,r,f)}return zc(e,r,i,l,f)}function Tm(e,r,i){var l=r.pendingProps,f=l.children,g=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(Es,Ot),Ot|=i;else{if((i&1073741824)===0)return e=g!==null?g.baseLanes|i:i,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,Ie(Es,Ot),Ot|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=g!==null?g.baseLanes:i,Ie(Es,Ot),Ot|=l}else g!==null?(l=g.baseLanes|i,r.memoizedState=null):l=i,Ie(Es,Ot),Ot|=l;return yt(e,r,f,i),r.child}function Pm(e,r){var i=r.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(r.flags|=512,r.flags|=2097152)}function zc(e,r,i,l,f){var g=Et(i)?Ar:dt.current;return g=fs(r,g),ws(r,f),i=Rc(e,r,i,l,g,f),l=Lc(),e!==null&&!xt?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~f,Cn(e,r,f)):($e&&l&&fc(r),r.flags|=1,yt(e,r,i,f),r.child)}function Rm(e,r,i,l,f){if(Et(i)){var g=!0;Ja(r)}else g=!1;if(ws(r,f),r.stateNode===null)vo(e,r),ym(r,i,l),Fc(r,i,l,f),l=!0;else if(e===null){var w=r.stateNode,S=r.memoizedProps;w.props=S;var A=w.context,O=i.contextType;typeof O=="object"&&O!==null?O=zt(O):(O=Et(i)?Ar:dt.current,O=fs(r,O));var U=i.getDerivedStateFromProps,H=typeof U=="function"||typeof w.getSnapshotBeforeUpdate=="function";H||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(S!==l||A!==O)&&wm(r,w,l,O),Zn=!1;var B=r.memoizedState;w.state=B,oo(r,l,w,f),A=r.memoizedState,S!==l||B!==A||St.current||Zn?(typeof U=="function"&&(Dc(r,i,U,l),A=r.memoizedState),(S=Zn||vm(r,i,S,l,B,A,O))?(H||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(r.flags|=4194308)):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=A),w.props=l,w.state=A,w.context=O,l=S):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{w=r.stateNode,Gg(e,r),S=r.memoizedProps,O=r.type===r.elementType?S:Zt(r.type,S),w.props=O,H=r.pendingProps,B=w.context,A=i.contextType,typeof A=="object"&&A!==null?A=zt(A):(A=Et(i)?Ar:dt.current,A=fs(r,A));var Y=i.getDerivedStateFromProps;(U=typeof Y=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(S!==H||B!==A)&&wm(r,w,l,A),Zn=!1,B=r.memoizedState,w.state=B,oo(r,l,w,f);var Q=r.memoizedState;S!==H||B!==Q||St.current||Zn?(typeof Y=="function"&&(Dc(r,i,Y,l),Q=r.memoizedState),(O=Zn||vm(r,i,O,l,B,Q,A)||!1)?(U||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(l,Q,A),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(l,Q,A)),typeof w.componentDidUpdate=="function"&&(r.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof w.componentDidUpdate!="function"||S===e.memoizedProps&&B===e.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&B===e.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=Q),w.props=l,w.state=Q,w.context=A,l=O):(typeof w.componentDidUpdate!="function"||S===e.memoizedProps&&B===e.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&B===e.memoizedState||(r.flags|=1024),l=!1)}return Bc(e,r,i,l,g,f)}function Bc(e,r,i,l,f,g){Pm(e,r);var w=(r.flags&128)!==0;if(!l&&!w)return f&&Og(r,i,!1),Cn(e,r,g);l=r.stateNode,L_.current=r;var S=w&&typeof i.getDerivedStateFromError!="function"?null:l.render();return r.flags|=1,e!==null&&w?(r.child=vs(r,e.child,null,g),r.child=vs(r,null,S,g)):yt(e,r,S,g),r.memoizedState=l.state,f&&Og(r,i,!0),r.child}function Lm(e){var r=e.stateNode;r.pendingContext?Ig(e,r.pendingContext,r.pendingContext!==r.context):r.context&&Ig(e,r.context,!1),xc(e,r.containerInfo)}function Nm(e,r,i,l,f){return ms(),vc(f),r.flags|=256,yt(e,r,i,l),r.child}var Uc={dehydrated:null,treeContext:null,retryLane:0};function Hc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Im(e,r,i){var l=r.pendingProps,f=ze.current,g=!1,w=(r.flags&128)!==0,S;if((S=w)||(S=e!==null&&e.memoizedState===null?!1:(f&2)!==0),S?(g=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(f|=1),Ie(ze,f&1),e===null)return mc(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((r.mode&1)===0?r.lanes=1:e.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(w=l.children,e=l.fallback,g?(l=r.mode,g=r.child,w={mode:"hidden",children:w},(l&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Po(w,l,0,null),e=Dr(e,l,i,null),g.return=r,e.return=r,g.sibling=e,r.child=g,r.child.memoizedState=Hc(i),r.memoizedState=Uc,e):Vc(r,w));if(f=e.memoizedState,f!==null&&(S=f.dehydrated,S!==null))return N_(e,r,w,l,S,f,i);if(g){g=l.fallback,w=r.mode,f=e.child,S=f.sibling;var A={mode:"hidden",children:l.children};return(w&1)===0&&r.child!==f?(l=r.child,l.childLanes=0,l.pendingProps=A,r.deletions=null):(l=ar(f,A),l.subtreeFlags=f.subtreeFlags&14680064),S!==null?g=ar(S,g):(g=Dr(g,w,i,null),g.flags|=2),g.return=r,l.return=r,l.sibling=g,r.child=l,l=g,g=r.child,w=e.child.memoizedState,w=w===null?Hc(i):{baseLanes:w.baseLanes|i,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=e.childLanes&~i,r.memoizedState=Uc,l}return g=e.child,e=g.sibling,l=ar(g,{mode:"visible",children:l.children}),(r.mode&1)===0&&(l.lanes=i),l.return=r,l.sibling=null,e!==null&&(i=r.deletions,i===null?(r.deletions=[e],r.flags|=16):i.push(e)),r.child=l,r.memoizedState=null,l}function Vc(e,r){return r=Po({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function mo(e,r,i,l){return l!==null&&vc(l),vs(r,e.child,null,i),e=Vc(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function N_(e,r,i,l,f,g,w){if(i)return r.flags&256?(r.flags&=-257,l=jc(Error(n(422))),mo(e,r,w,l)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(g=l.fallback,f=r.mode,l=Po({mode:"visible",children:l.children},f,0,null),g=Dr(g,f,w,null),g.flags|=2,l.return=r,g.return=r,l.sibling=g,r.child=l,(r.mode&1)!==0&&vs(r,e.child,null,w),r.child.memoizedState=Hc(w),r.memoizedState=Uc,g);if((r.mode&1)===0)return mo(e,r,w,null);if(f.data==="$!"){if(l=f.nextSibling&&f.nextSibling.dataset,l)var S=l.dgst;return l=S,g=Error(n(419)),l=jc(g,l,void 0),mo(e,r,w,l)}if(S=(w&e.childLanes)!==0,xt||S){if(l=st,l!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(l.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,kn(e,f),nn(l,e,f,-1))}return ih(),l=jc(Error(n(421))),mo(e,r,w,l)}return f.data==="$?"?(r.flags|=128,r.child=e.child,r=W_.bind(null,e),f._reactRetry=r,null):(e=g.treeContext,Mt=Yn(f.nextSibling),It=r,$e=!0,Jt=null,e!==null&&(jt[$t++]=En,jt[$t++]=xn,jt[$t++]=Cr,En=e.id,xn=e.overflow,Cr=r),r=Vc(r,l.children),r.flags|=4096,r)}function Mm(e,r,i){e.lanes|=r;var l=e.alternate;l!==null&&(l.lanes|=r),_c(e.return,r,i)}function Wc(e,r,i,l,f){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:f}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=l,g.tail=i,g.tailMode=f)}function Om(e,r,i){var l=r.pendingProps,f=l.revealOrder,g=l.tail;if(yt(e,r,l.children,i),l=ze.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mm(e,i,r);else if(e.tag===19)Mm(e,i,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Ie(ze,l),(r.mode&1)===0)r.memoizedState=null;else switch(f){case"forwards":for(i=r.child,f=null;i!==null;)e=i.alternate,e!==null&&lo(e)===null&&(f=i),i=i.sibling;i=f,i===null?(f=r.child,r.child=null):(f=i.sibling,i.sibling=null),Wc(r,!1,f,i,g);break;case"backwards":for(i=null,f=r.child,r.child=null;f!==null;){if(e=f.alternate,e!==null&&lo(e)===null){r.child=f;break}e=f.sibling,f.sibling=i,i=f,f=e}Wc(r,!0,i,null,g);break;case"together":Wc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function vo(e,r){(r.mode&1)===0&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function Cn(e,r,i){if(e!==null&&(r.dependencies=e.dependencies),Nr|=r.lanes,(i&r.childLanes)===0)return null;if(e!==null&&r.child!==e.child)throw Error(n(153));if(r.child!==null){for(e=r.child,i=ar(e,e.pendingProps),r.child=i,i.return=r;e.sibling!==null;)e=e.sibling,i=i.sibling=ar(e,e.pendingProps),i.return=r;i.sibling=null}return r.child}function I_(e,r,i){switch(r.tag){case 3:Lm(r),ms();break;case 5:Yg(r);break;case 1:Et(r.type)&&Ja(r);break;case 4:xc(r,r.stateNode.containerInfo);break;case 10:var l=r.type._context,f=r.memoizedProps.value;Ie(so,l._currentValue),l._currentValue=f;break;case 13:if(l=r.memoizedState,l!==null)return l.dehydrated!==null?(Ie(ze,ze.current&1),r.flags|=128,null):(i&r.child.childLanes)!==0?Im(e,r,i):(Ie(ze,ze.current&1),e=Cn(e,r,i),e!==null?e.sibling:null);Ie(ze,ze.current&1);break;case 19:if(l=(i&r.childLanes)!==0,(e.flags&128)!==0){if(l)return Om(e,r,i);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ie(ze,ze.current),l)break;return null;case 22:case 23:return r.lanes=0,Tm(e,r,i)}return Cn(e,r,i)}var Dm,Gc,Fm,jm;Dm=function(e,r){for(var i=r.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Gc=function(){},Fm=function(e,r,i,l){var f=e.memoizedProps;if(f!==l){e=r.stateNode,Rr(ln.current);var g=null;switch(i){case"input":f=Aa(e,f),l=Aa(e,l),g=[];break;case"select":f=X({},f,{value:void 0}),l=X({},l,{value:void 0}),g=[];break;case"textarea":f=xu(e,f),l=xu(e,l),g=[];break;default:typeof f.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=Ya)}Au(i,l);var w;i=null;for(O in f)if(!l.hasOwnProperty(O)&&f.hasOwnProperty(O)&&f[O]!=null)if(O==="style"){var S=f[O];for(w in S)S.hasOwnProperty(w)&&(i||(i={}),i[w]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(a.hasOwnProperty(O)?g||(g=[]):(g=g||[]).push(O,null));for(O in l){var A=l[O];if(S=f!=null?f[O]:void 0,l.hasOwnProperty(O)&&A!==S&&(A!=null||S!=null))if(O==="style")if(S){for(w in S)!S.hasOwnProperty(w)||A&&A.hasOwnProperty(w)||(i||(i={}),i[w]="");for(w in A)A.hasOwnProperty(w)&&S[w]!==A[w]&&(i||(i={}),i[w]=A[w])}else i||(g||(g=[]),g.push(O,i)),i=A;else O==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,S=S?S.__html:void 0,A!=null&&S!==A&&(g=g||[]).push(O,A)):O==="children"?typeof A!="string"&&typeof A!="number"||(g=g||[]).push(O,""+A):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(a.hasOwnProperty(O)?(A!=null&&O==="onScroll"&&Oe("scroll",e),g||S===A||(g=[])):(g=g||[]).push(O,A))}i&&(g=g||[]).push("style",i);var O=g;(r.updateQueue=O)&&(r.flags|=4)}},jm=function(e,r,i,l){i!==l&&(r.flags|=4)};function Di(e,r){if(!$e)switch(e.tailMode){case"hidden":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function pt(e){var r=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(r)for(var f=e.child;f!==null;)i|=f.lanes|f.childLanes,l|=f.subtreeFlags&14680064,l|=f.flags&14680064,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)i|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=l,e.childLanes=i,r}function M_(e,r,i){var l=r.pendingProps;switch(pc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(r),null;case 1:return Et(r.type)&&Qa(),pt(r),null;case 3:return l=r.stateNode,bs(),De(St),De(dt),Cc(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(no(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Jt!==null&&(nh(Jt),Jt=null))),Gc(e,r),pt(r),null;case 5:kc(r);var f=Rr(Li.current);if(i=r.type,e!==null&&r.stateNode!=null)Fm(e,r,i,l,f),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!l){if(r.stateNode===null)throw Error(n(166));return pt(r),null}if(e=Rr(ln.current),no(r)){l=r.stateNode,i=r.type;var g=r.memoizedProps;switch(l[on]=r,l[Ai]=g,e=(r.mode&1)!==0,i){case"dialog":Oe("cancel",l),Oe("close",l);break;case"iframe":case"object":case"embed":Oe("load",l);break;case"video":case"audio":for(f=0;f<Ei.length;f++)Oe(Ei[f],l);break;case"source":Oe("error",l);break;case"img":case"image":case"link":Oe("error",l),Oe("load",l);break;case"details":Oe("toggle",l);break;case"input":yp(l,g),Oe("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!g.multiple},Oe("invalid",l);break;case"textarea":_p(l,g),Oe("invalid",l)}Au(i,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var S=g[w];w==="children"?typeof S=="string"?l.textContent!==S&&(g.suppressHydrationWarning!==!0&&Xa(l.textContent,S,e),f=["children",S]):typeof S=="number"&&l.textContent!==""+S&&(g.suppressHydrationWarning!==!0&&Xa(l.textContent,S,e),f=["children",""+S]):a.hasOwnProperty(w)&&S!=null&&w==="onScroll"&&Oe("scroll",l)}switch(i){case"input":es(l),bp(l,g,!0);break;case"textarea":es(l),Ep(l);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(l.onclick=Ya)}l=f,r.updateQueue=l,l!==null&&(r.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xp(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=w.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=w.createElement(i,{is:l.is}):(e=w.createElement(i),i==="select"&&(w=e,l.multiple?w.multiple=!0:l.size&&(w.size=l.size))):e=w.createElementNS(e,i),e[on]=r,e[Ai]=l,Dm(e,r,!1,!1),r.stateNode=e;e:{switch(w=Cu(i,l),i){case"dialog":Oe("cancel",e),Oe("close",e),f=l;break;case"iframe":case"object":case"embed":Oe("load",e),f=l;break;case"video":case"audio":for(f=0;f<Ei.length;f++)Oe(Ei[f],e);f=l;break;case"source":Oe("error",e),f=l;break;case"img":case"image":case"link":Oe("error",e),Oe("load",e),f=l;break;case"details":Oe("toggle",e),f=l;break;case"input":yp(e,l),f=Aa(e,l),Oe("invalid",e);break;case"option":f=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},f=X({},l,{value:void 0}),Oe("invalid",e);break;case"textarea":_p(e,l),f=xu(e,l),Oe("invalid",e);break;default:f=l}Au(i,f),S=f;for(g in S)if(S.hasOwnProperty(g)){var A=S[g];g==="style"?Cp(e,A):g==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&kp(e,A)):g==="children"?typeof A=="string"?(i!=="textarea"||A!=="")&&si(e,A):typeof A=="number"&&si(e,""+A):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(a.hasOwnProperty(g)?A!=null&&g==="onScroll"&&Oe("scroll",e):A!=null&&D(e,g,A,w))}switch(i){case"input":es(e),bp(e,l,!1);break;case"textarea":es(e),Ep(e);break;case"option":l.value!=null&&e.setAttribute("value",""+Ce(l.value));break;case"select":e.multiple=!!l.multiple,g=l.value,g!=null?ts(e,!!l.multiple,g,!1):l.defaultValue!=null&&ts(e,!!l.multiple,l.defaultValue,!0);break;default:typeof f.onClick=="function"&&(e.onclick=Ya)}switch(i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return pt(r),null;case 6:if(e&&r.stateNode!=null)jm(e,r,e.memoizedProps,l);else{if(typeof l!="string"&&r.stateNode===null)throw Error(n(166));if(i=Rr(Li.current),Rr(ln.current),no(r)){if(l=r.stateNode,i=r.memoizedProps,l[on]=r,(g=l.nodeValue!==i)&&(e=It,e!==null))switch(e.tag){case 3:Xa(l.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xa(l.nodeValue,i,(e.mode&1)!==0)}g&&(r.flags|=4)}else l=(i.nodeType===9?i:i.ownerDocument).createTextNode(l),l[on]=r,r.stateNode=l}return pt(r),null;case 13:if(De(ze),l=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($e&&Mt!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Bg(),ms(),r.flags|=98560,g=!1;else if(g=no(r),l!==null&&l.dehydrated!==null){if(e===null){if(!g)throw Error(n(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));g[on]=r}else ms(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;pt(r),g=!1}else Jt!==null&&(nh(Jt),Jt=null),g=!0;if(!g)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=i,r):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(r.child.flags|=8192,(r.mode&1)!==0&&(e===null||(ze.current&1)!==0?Je===0&&(Je=3):ih())),r.updateQueue!==null&&(r.flags|=4),pt(r),null);case 4:return bs(),Gc(e,r),e===null&&xi(r.stateNode.containerInfo),pt(r),null;case 10:return bc(r.type._context),pt(r),null;case 17:return Et(r.type)&&Qa(),pt(r),null;case 19:if(De(ze),g=r.memoizedState,g===null)return pt(r),null;if(l=(r.flags&128)!==0,w=g.rendering,w===null)if(l)Di(g,!1);else{if(Je!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(w=lo(e),w!==null){for(r.flags|=128,Di(g,!1),l=w.updateQueue,l!==null&&(r.updateQueue=l,r.flags|=4),r.subtreeFlags=0,l=i,i=r.child;i!==null;)g=i,e=l,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=e,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,e=w.dependencies,g.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Ie(ze,ze.current&1|2),r.child}e=e.sibling}g.tail!==null&&We()>xs&&(r.flags|=128,l=!0,Di(g,!1),r.lanes=4194304)}else{if(!l)if(e=lo(w),e!==null){if(r.flags|=128,l=!0,i=e.updateQueue,i!==null&&(r.updateQueue=i,r.flags|=4),Di(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!$e)return pt(r),null}else 2*We()-g.renderingStartTime>xs&&i!==1073741824&&(r.flags|=128,l=!0,Di(g,!1),r.lanes=4194304);g.isBackwards?(w.sibling=r.child,r.child=w):(i=g.last,i!==null?i.sibling=w:r.child=w,g.last=w)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=We(),r.sibling=null,i=ze.current,Ie(ze,l?i&1|2:i&1),r):(pt(r),null);case 22:case 23:return sh(),l=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(r.flags|=8192),l&&(r.mode&1)!==0?(Ot&1073741824)!==0&&(pt(r),r.subtreeFlags&6&&(r.flags|=8192)):pt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function O_(e,r){switch(pc(r),r.tag){case 1:return Et(r.type)&&Qa(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return bs(),De(St),De(dt),Cc(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 5:return kc(r),null;case 13:if(De(ze),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(n(340));ms()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return De(ze),null;case 4:return bs(),null;case 10:return bc(r.type._context),null;case 22:case 23:return sh(),null;case 24:return null;default:return null}}var yo=!1,gt=!1,D_=typeof WeakSet=="function"?WeakSet:Set,K=null;function Ss(e,r){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(l){Ue(e,r,l)}else i.current=null}function Od(e,r,i){try{i()}catch(l){Ue(e,r,l)}}var $m=!1;function F_(e,r){if(ic=Fa,e=vg(),Qu(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var f=l.anchorOffset,g=l.focusNode;l=l.focusOffset;try{i.nodeType,g.nodeType}catch{i=null;break e}var w=0,S=-1,A=-1,O=0,U=0,H=e,B=null;t:for(;;){for(var Y;H!==i||f!==0&&H.nodeType!==3||(S=w+f),H!==g||l!==0&&H.nodeType!==3||(A=w+l),H.nodeType===3&&(w+=H.nodeValue.length),(Y=H.firstChild)!==null;)B=H,H=Y;for(;;){if(H===e)break t;if(B===i&&++O===f&&(S=w),B===g&&++U===l&&(A=w),(Y=H.nextSibling)!==null)break;H=B,B=H.parentNode}H=Y}i=S===-1||A===-1?null:{start:S,end:A}}else i=null}i=i||{start:0,end:0}}else i=null;for(ac={focusedElem:e,selectionRange:i},Fa=!1,K=r;K!==null;)if(r=K,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,K=e;else for(;K!==null;){r=K;try{var Q=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(Q!==null){var J=Q.memoizedProps,Ge=Q.memoizedState,I=r.stateNode,T=I.getSnapshotBeforeUpdate(r.elementType===r.type?J:Zt(r.type,J),Ge);I.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var M=r.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(W){Ue(r,r.return,W)}if(e=r.sibling,e!==null){e.return=r.return,K=e;break}K=r.return}return Q=$m,$m=!1,Q}function Fi(e,r,i){var l=r.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var f=l=l.next;do{if((f.tag&e)===e){var g=f.destroy;f.destroy=void 0,g!==void 0&&Od(r,i,g)}f=f.next}while(f!==l)}}function wo(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var l=i.create;i.destroy=l()}i=i.next}while(i!==r)}}function qc(e){var r=e.ref;if(r!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof r=="function"?r(e):r.current=e}}function zm(e){var r=e.alternate;r!==null&&(e.alternate=null,zm(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[on],delete r[Ai],delete r[cc],delete r[w_],delete r[b_])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Bm(e){return e.tag===5||e.tag===3||e.tag===4}function Um(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Bm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xc(e,r,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,r?i.nodeType===8?i.parentNode.insertBefore(e,r):i.insertBefore(e,r):(i.nodeType===8?(r=i.parentNode,r.insertBefore(e,i)):(r=i,r.appendChild(e)),i=i._reactRootContainer,i!=null||r.onclick!==null||(r.onclick=Ya));else if(l!==4&&(e=e.child,e!==null))for(Xc(e,r,i),e=e.sibling;e!==null;)Xc(e,r,i),e=e.sibling}function Yc(e,r,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,r?i.insertBefore(e,r):i.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(Yc(e,r,i),e=e.sibling;e!==null;)Yc(e,r,i),e=e.sibling}var lt=null,en=!1;function tr(e,r,i){for(i=i.child;i!==null;)Hm(e,r,i),i=i.sibling}function Hm(e,r,i){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(La,i)}catch{}switch(i.tag){case 5:gt||Ss(i,r);case 6:var l=lt,f=en;lt=null,tr(e,r,i),lt=l,en=f,lt!==null&&(en?(e=lt,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):lt.removeChild(i.stateNode));break;case 18:lt!==null&&(en?(e=lt,i=i.stateNode,e.nodeType===8?uc(e.parentNode,i):e.nodeType===1&&uc(e,i),gi(e)):uc(lt,i.stateNode));break;case 4:l=lt,f=en,lt=i.stateNode.containerInfo,en=!0,tr(e,r,i),lt=l,en=f;break;case 0:case 11:case 14:case 15:if(!gt&&(l=i.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){f=l=l.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&Od(i,r,w),f=f.next}while(f!==l)}tr(e,r,i);break;case 1:if(!gt&&(Ss(i,r),l=i.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=i.memoizedProps,l.state=i.memoizedState,l.componentWillUnmount()}catch(S){Ue(i,r,S)}tr(e,r,i);break;case 21:tr(e,r,i);break;case 22:i.mode&1?(gt=(l=gt)||i.memoizedState!==null,tr(e,r,i),gt=l):tr(e,r,i);break;default:tr(e,r,i)}}function Vm(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new D_),r.forEach(function(l){var f=G_.bind(null,e,l);i.has(l)||(i.add(l),l.then(f,f))})}}function tn(e,r){var i=r.deletions;if(i!==null)for(var l=0;l<i.length;l++){var f=i[l];try{var g=e,w=r,S=w;e:for(;S!==null;){switch(S.tag){case 5:lt=S.stateNode,en=!1;break e;case 3:lt=S.stateNode.containerInfo,en=!0;break e;case 4:lt=S.stateNode.containerInfo,en=!0;break e}S=S.return}if(lt===null)throw Error(n(160));Hm(g,w,f),lt=null,en=!1;var A=f.alternate;A!==null&&(A.return=null),f.return=null}catch(O){Ue(f,r,O)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Wm(r,e),r=r.sibling}function Wm(e,r){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(tn(r,e),cn(e),l&4){try{Fi(3,e,e.return),wo(3,e)}catch(J){Ue(e,e.return,J)}try{Fi(5,e,e.return)}catch(J){Ue(e,e.return,J)}}break;case 1:tn(r,e),cn(e),l&512&&i!==null&&Ss(i,i.return);break;case 5:if(tn(r,e),cn(e),l&512&&i!==null&&Ss(i,i.return),e.flags&32){var f=e.stateNode;try{si(f,"")}catch(J){Ue(e,e.return,J)}}if(l&4&&(f=e.stateNode,f!=null)){var g=e.memoizedProps,w=i!==null?i.memoizedProps:g,S=e.type,A=e.updateQueue;if(e.updateQueue=null,A!==null)try{S==="input"&&g.type==="radio"&&g.name!=null&&wp(f,g),Cu(S,w);var O=Cu(S,g);for(w=0;w<A.length;w+=2){var U=A[w],H=A[w+1];U==="style"?Cp(f,H):U==="dangerouslySetInnerHTML"?kp(f,H):U==="children"?si(f,H):D(f,U,H,O)}switch(S){case"input":Su(f,g);break;case"textarea":Sp(f,g);break;case"select":var B=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var Y=g.value;Y!=null?ts(f,!!g.multiple,Y,!1):B!==!!g.multiple&&(g.defaultValue!=null?ts(f,!!g.multiple,g.defaultValue,!0):ts(f,!!g.multiple,g.multiple?[]:"",!1))}f[Ai]=g}catch(J){Ue(e,e.return,J)}}break;case 6:if(tn(r,e),cn(e),l&4){if(e.stateNode===null)throw Error(n(162));f=e.stateNode,g=e.memoizedProps;try{f.nodeValue=g}catch(J){Ue(e,e.return,J)}}break;case 3:if(tn(r,e),cn(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{gi(r.containerInfo)}catch(J){Ue(e,e.return,J)}break;case 4:tn(r,e),cn(e);break;case 13:tn(r,e),cn(e),f=e.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Jc=We())),l&4&&Vm(e);break;case 22:if(U=i!==null&&i.memoizedState!==null,e.mode&1?(gt=(O=gt)||U,tn(r,e),gt=O):tn(r,e),cn(e),l&8192){if(O=e.memoizedState!==null,(e.stateNode.isHidden=O)&&!U&&(e.mode&1)!==0)for(K=e,U=e.child;U!==null;){for(H=K=U;K!==null;){switch(B=K,Y=B.child,B.tag){case 0:case 11:case 14:case 15:Fi(4,B,B.return);break;case 1:Ss(B,B.return);var Q=B.stateNode;if(typeof Q.componentWillUnmount=="function"){l=B,i=B.return;try{r=l,Q.props=r.memoizedProps,Q.state=r.memoizedState,Q.componentWillUnmount()}catch(J){Ue(l,i,J)}}break;case 5:Ss(B,B.return);break;case 22:if(B.memoizedState!==null){Xm(H);continue}}Y!==null?(Y.return=B,K=Y):Xm(H)}U=U.sibling}e:for(U=null,H=e;;){if(H.tag===5){if(U===null){U=H;try{f=H.stateNode,O?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(S=H.stateNode,A=H.memoizedProps.style,w=A!=null&&A.hasOwnProperty("display")?A.display:null,S.style.display=Ap("display",w))}catch(J){Ue(e,e.return,J)}}}else if(H.tag===6){if(U===null)try{H.stateNode.nodeValue=O?"":H.memoizedProps}catch(J){Ue(e,e.return,J)}}else if((H.tag!==22&&H.tag!==23||H.memoizedState===null||H===e)&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===e)break e;for(;H.sibling===null;){if(H.return===null||H.return===e)break e;U===H&&(U=null),H=H.return}U===H&&(U=null),H.sibling.return=H.return,H=H.sibling}}break;case 19:tn(r,e),cn(e),l&4&&Vm(e);break;case 21:break;default:tn(r,e),cn(e)}}function cn(e){var r=e.flags;if(r&2){try{e:{for(var i=e.return;i!==null;){if(Bm(i)){var l=i;break e}i=i.return}throw Error(n(160))}switch(l.tag){case 5:var f=l.stateNode;l.flags&32&&(si(f,""),l.flags&=-33);var g=Um(e);Yc(e,g,f);break;case 3:case 4:var w=l.stateNode.containerInfo,S=Um(e);Xc(e,S,w);break;default:throw Error(n(161))}}catch(A){Ue(e,e.return,A)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function j_(e,r,i){K=e,Gm(e)}function Gm(e,r,i){for(var l=(e.mode&1)!==0;K!==null;){var f=K,g=f.child;if(f.tag===22&&l){var w=f.memoizedState!==null||yo;if(!w){var S=f.alternate,A=S!==null&&S.memoizedState!==null||gt;S=yo;var O=gt;if(yo=w,(gt=A)&&!O)for(K=f;K!==null;)w=K,A=w.child,w.tag===22&&w.memoizedState!==null?Ym(f):A!==null?(A.return=w,K=A):Ym(f);for(;g!==null;)K=g,Gm(g),g=g.sibling;K=f,yo=S,gt=O}qm(e)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,K=g):qm(e)}}function qm(e){for(;K!==null;){var r=K;if((r.flags&8772)!==0){var i=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:gt||wo(5,r);break;case 1:var l=r.stateNode;if(r.flags&4&&!gt)if(i===null)l.componentDidMount();else{var f=r.elementType===r.type?i.memoizedProps:Zt(r.type,i.memoizedProps);l.componentDidUpdate(f,i.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var g=r.updateQueue;g!==null&&Xg(r,g,l);break;case 3:var w=r.updateQueue;if(w!==null){if(i=null,r.child!==null)switch(r.child.tag){case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}Xg(r,w,i)}break;case 5:var S=r.stateNode;if(i===null&&r.flags&4){i=S;var A=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&i.focus();break;case"img":A.src&&(i.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var O=r.alternate;if(O!==null){var U=O.memoizedState;if(U!==null){var H=U.dehydrated;H!==null&&gi(H)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}gt||r.flags&512&&qc(r)}catch(B){Ue(r,r.return,B)}}if(r===e){K=null;break}if(i=r.sibling,i!==null){i.return=r.return,K=i;break}K=r.return}}function Xm(e){for(;K!==null;){var r=K;if(r===e){K=null;break}var i=r.sibling;if(i!==null){i.return=r.return,K=i;break}K=r.return}}function Ym(e){for(;K!==null;){var r=K;try{switch(r.tag){case 0:case 11:case 15:var i=r.return;try{wo(4,r)}catch(A){Ue(r,i,A)}break;case 1:var l=r.stateNode;if(typeof l.componentDidMount=="function"){var f=r.return;try{l.componentDidMount()}catch(A){Ue(r,f,A)}}var g=r.return;try{qc(r)}catch(A){Ue(r,g,A)}break;case 5:var w=r.return;try{qc(r)}catch(A){Ue(r,w,A)}}}catch(A){Ue(r,r.return,A)}if(r===e){K=null;break}var S=r.sibling;if(S!==null){S.return=r.return,K=S;break}K=r.return}}var $_=Math.ceil,bo=j.ReactCurrentDispatcher,Kc=j.ReactCurrentOwner,Ut=j.ReactCurrentBatchConfig,we=0,st=null,Xe=null,ut=0,Ot=0,Es=Kn(0),Je=0,ji=null,Nr=0,_o=0,Qc=0,$i=null,kt=null,Jc=0,xs=1/0,Tn=null,So=!1,Zc=null,nr=null,Eo=!1,rr=null,xo=0,zi=0,eh=null,ko=-1,Ao=0;function wt(){return(we&6)!==0?We():ko!==-1?ko:ko=We()}function sr(e){return(e.mode&1)===0?1:(we&2)!==0&&ut!==0?ut&-ut:S_.transition!==null?(Ao===0&&(Ao=Up()),Ao):(e=Re,e!==0||(e=window.event,e=e===void 0?16:Qp(e.type)),e)}function nn(e,r,i,l){if(50<zi)throw zi=0,eh=null,Error(n(185));ci(e,i,l),((we&2)===0||e!==st)&&(e===st&&((we&2)===0&&(_o|=i),Je===4&&ir(e,ut)),At(e,l),i===1&&we===0&&(r.mode&1)===0&&(xs=We()+500,Za&&Jn()))}function At(e,r){var i=e.callbackNode;Sb(e,r);var l=Ma(e,e===st?ut:0);if(l===0)i!==null&&$p(i),e.callbackNode=null,e.callbackPriority=0;else if(r=l&-l,e.callbackPriority!==r){if(i!=null&&$p(i),r===1)e.tag===0?__(Qm.bind(null,e)):Dg(Qm.bind(null,e)),v_(function(){(we&6)===0&&Jn()}),i=null;else{switch(Hp(l)){case 1:i=Mu;break;case 4:i=zp;break;case 16:i=Ra;break;case 536870912:i=Bp;break;default:i=Ra}i=iv(i,Km.bind(null,e))}e.callbackPriority=r,e.callbackNode=i}}function Km(e,r){if(ko=-1,Ao=0,(we&6)!==0)throw Error(n(327));var i=e.callbackNode;if(ks()&&e.callbackNode!==i)return null;var l=Ma(e,e===st?ut:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||r)r=Co(e,l);else{r=l;var f=we;we|=2;var g=Zm();(st!==e||ut!==r)&&(Tn=null,xs=We()+500,Mr(e,r));do try{U_();break}catch(S){Jm(e,S)}while(!0);wc(),bo.current=g,we=f,Xe!==null?r=0:(st=null,ut=0,r=Je)}if(r!==0){if(r===2&&(f=Ou(e),f!==0&&(l=f,r=th(e,f))),r===1)throw i=ji,Mr(e,0),ir(e,l),At(e,We()),i;if(r===6)ir(e,l);else{if(f=e.current.alternate,(l&30)===0&&!z_(f)&&(r=Co(e,l),r===2&&(g=Ou(e),g!==0&&(l=g,r=th(e,g))),r===1))throw i=ji,Mr(e,0),ir(e,l),At(e,We()),i;switch(e.finishedWork=f,e.finishedLanes=l,r){case 0:case 1:throw Error(n(345));case 2:Or(e,kt,Tn);break;case 3:if(ir(e,l),(l&130023424)===l&&(r=Jc+500-We(),10<r)){if(Ma(e,0)!==0)break;if(f=e.suspendedLanes,(f&l)!==l){wt(),e.pingedLanes|=e.suspendedLanes&f;break}e.timeoutHandle=lc(Or.bind(null,e,kt,Tn),r);break}Or(e,kt,Tn);break;case 4:if(ir(e,l),(l&4194240)===l)break;for(r=e.eventTimes,f=-1;0<l;){var w=31-Kt(l);g=1<<w,w=r[w],w>f&&(f=w),l&=~g}if(l=f,l=We()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*$_(l/1960))-l,10<l){e.timeoutHandle=lc(Or.bind(null,e,kt,Tn),l);break}Or(e,kt,Tn);break;case 5:Or(e,kt,Tn);break;default:throw Error(n(329))}}}return At(e,We()),e.callbackNode===i?Km.bind(null,e):null}function th(e,r){var i=$i;return e.current.memoizedState.isDehydrated&&(Mr(e,r).flags|=256),e=Co(e,r),e!==2&&(r=kt,kt=i,r!==null&&nh(r)),e}function nh(e){kt===null?kt=e:kt.push.apply(kt,e)}function z_(e){for(var r=e;;){if(r.flags&16384){var i=r.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var l=0;l<i.length;l++){var f=i[l],g=f.getSnapshot;f=f.value;try{if(!Qt(g(),f))return!1}catch{return!1}}}if(i=r.child,r.subtreeFlags&16384&&i!==null)i.return=r,r=i;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ir(e,r){for(r&=~Qc,r&=~_o,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var i=31-Kt(r),l=1<<i;e[i]=-1,r&=~l}}function Qm(e){if((we&6)!==0)throw Error(n(327));ks();var r=Ma(e,0);if((r&1)===0)return At(e,We()),null;var i=Co(e,r);if(e.tag!==0&&i===2){var l=Ou(e);l!==0&&(r=l,i=th(e,l))}if(i===1)throw i=ji,Mr(e,0),ir(e,r),At(e,We()),i;if(i===6)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,Or(e,kt,Tn),At(e,We()),null}function rh(e,r){var i=we;we|=1;try{return e(r)}finally{we=i,we===0&&(xs=We()+500,Za&&Jn())}}function Ir(e){rr!==null&&rr.tag===0&&(we&6)===0&&ks();var r=we;we|=1;var i=Ut.transition,l=Re;try{if(Ut.transition=null,Re=1,e)return e()}finally{Re=l,Ut.transition=i,we=r,(we&6)===0&&Jn()}}function sh(){Ot=Es.current,De(Es)}function Mr(e,r){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,m_(i)),Xe!==null)for(i=Xe.return;i!==null;){var l=i;switch(pc(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&Qa();break;case 3:bs(),De(St),De(dt),Cc();break;case 5:kc(l);break;case 4:bs();break;case 13:De(ze);break;case 19:De(ze);break;case 10:bc(l.type._context);break;case 22:case 23:sh()}i=i.return}if(st=e,Xe=e=ar(e.current,null),ut=Ot=r,Je=0,ji=null,Qc=_o=Nr=0,kt=$i=null,Pr!==null){for(r=0;r<Pr.length;r++)if(i=Pr[r],l=i.interleaved,l!==null){i.interleaved=null;var f=l.next,g=i.pending;if(g!==null){var w=g.next;g.next=f,l.next=w}i.pending=l}Pr=null}return e}function Jm(e,r){do{var i=Xe;try{if(wc(),uo.current=po,co){for(var l=Be.memoizedState;l!==null;){var f=l.queue;f!==null&&(f.pending=null),l=l.next}co=!1}if(Lr=0,rt=Qe=Be=null,Ni=!1,Ii=0,Kc.current=null,i===null||i.return===null){Je=1,ji=r,Xe=null;break}e:{var g=e,w=i.return,S=i,A=r;if(r=ut,S.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var O=A,U=S,H=U.tag;if((U.mode&1)===0&&(H===0||H===11||H===15)){var B=U.alternate;B?(U.updateQueue=B.updateQueue,U.memoizedState=B.memoizedState,U.lanes=B.lanes):(U.updateQueue=null,U.memoizedState=null)}var Y=Em(w);if(Y!==null){Y.flags&=-257,xm(Y,w,S,g,r),Y.mode&1&&Sm(g,O,r),r=Y,A=O;var Q=r.updateQueue;if(Q===null){var J=new Set;J.add(A),r.updateQueue=J}else Q.add(A);break e}else{if((r&1)===0){Sm(g,O,r),ih();break e}A=Error(n(426))}}else if($e&&S.mode&1){var Ge=Em(w);if(Ge!==null){(Ge.flags&65536)===0&&(Ge.flags|=256),xm(Ge,w,S,g,r),vc(_s(A,S));break e}}g=A=_s(A,S),Je!==4&&(Je=2),$i===null?$i=[g]:$i.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,r&=-r,g.lanes|=r;var I=bm(g,A,r);qg(g,I);break e;case 1:S=A;var T=g.type,M=g.stateNode;if((g.flags&128)===0&&(typeof T.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(nr===null||!nr.has(M)))){g.flags|=65536,r&=-r,g.lanes|=r;var W=_m(g,S,r);qg(g,W);break e}}g=g.return}while(g!==null)}tv(i)}catch(Z){r=Z,Xe===i&&i!==null&&(Xe=i=i.return);continue}break}while(!0)}function Zm(){var e=bo.current;return bo.current=po,e===null?po:e}function ih(){(Je===0||Je===3||Je===2)&&(Je=4),st===null||(Nr&268435455)===0&&(_o&268435455)===0||ir(st,ut)}function Co(e,r){var i=we;we|=2;var l=Zm();(st!==e||ut!==r)&&(Tn=null,Mr(e,r));do try{B_();break}catch(f){Jm(e,f)}while(!0);if(wc(),we=i,bo.current=l,Xe!==null)throw Error(n(261));return st=null,ut=0,Je}function B_(){for(;Xe!==null;)ev(Xe)}function U_(){for(;Xe!==null&&!fb();)ev(Xe)}function ev(e){var r=sv(e.alternate,e,Ot);e.memoizedProps=e.pendingProps,r===null?tv(e):Xe=r,Kc.current=null}function tv(e){var r=e;do{var i=r.alternate;if(e=r.return,(r.flags&32768)===0){if(i=M_(i,r,Ot),i!==null){Xe=i;return}}else{if(i=O_(i,r),i!==null){i.flags&=32767,Xe=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Je=6,Xe=null;return}}if(r=r.sibling,r!==null){Xe=r;return}Xe=r=e}while(r!==null);Je===0&&(Je=5)}function Or(e,r,i){var l=Re,f=Ut.transition;try{Ut.transition=null,Re=1,H_(e,r,i,l)}finally{Ut.transition=f,Re=l}return null}function H_(e,r,i,l){do ks();while(rr!==null);if((we&6)!==0)throw Error(n(327));i=e.finishedWork;var f=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var g=i.lanes|i.childLanes;if(Eb(e,g),e===st&&(Xe=st=null,ut=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||Eo||(Eo=!0,iv(Ra,function(){return ks(),null})),g=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||g){g=Ut.transition,Ut.transition=null;var w=Re;Re=1;var S=we;we|=4,Kc.current=null,F_(e,i),Wm(i,e),u_(ac),Fa=!!ic,ac=ic=null,e.current=i,j_(i),pb(),we=S,Re=w,Ut.transition=g}else e.current=i;if(Eo&&(Eo=!1,rr=e,xo=f),g=e.pendingLanes,g===0&&(nr=null),vb(i.stateNode),At(e,We()),r!==null)for(l=e.onRecoverableError,i=0;i<r.length;i++)f=r[i],l(f.value,{componentStack:f.stack,digest:f.digest});if(So)throw So=!1,e=Zc,Zc=null,e;return(xo&1)!==0&&e.tag!==0&&ks(),g=e.pendingLanes,(g&1)!==0?e===eh?zi++:(zi=0,eh=e):zi=0,Jn(),null}function ks(){if(rr!==null){var e=Hp(xo),r=Ut.transition,i=Re;try{if(Ut.transition=null,Re=16>e?16:e,rr===null)var l=!1;else{if(e=rr,rr=null,xo=0,(we&6)!==0)throw Error(n(331));var f=we;for(we|=4,K=e.current;K!==null;){var g=K,w=g.child;if((K.flags&16)!==0){var S=g.deletions;if(S!==null){for(var A=0;A<S.length;A++){var O=S[A];for(K=O;K!==null;){var U=K;switch(U.tag){case 0:case 11:case 15:Fi(8,U,g)}var H=U.child;if(H!==null)H.return=U,K=H;else for(;K!==null;){U=K;var B=U.sibling,Y=U.return;if(zm(U),U===O){K=null;break}if(B!==null){B.return=Y,K=B;break}K=Y}}}var Q=g.alternate;if(Q!==null){var J=Q.child;if(J!==null){Q.child=null;do{var Ge=J.sibling;J.sibling=null,J=Ge}while(J!==null)}}K=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,K=w;else e:for(;K!==null;){if(g=K,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Fi(9,g,g.return)}var I=g.sibling;if(I!==null){I.return=g.return,K=I;break e}K=g.return}}var T=e.current;for(K=T;K!==null;){w=K;var M=w.child;if((w.subtreeFlags&2064)!==0&&M!==null)M.return=w,K=M;else e:for(w=T;K!==null;){if(S=K,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:wo(9,S)}}catch(Z){Ue(S,S.return,Z)}if(S===w){K=null;break e}var W=S.sibling;if(W!==null){W.return=S.return,K=W;break e}K=S.return}}if(we=f,Jn(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(La,e)}catch{}l=!0}return l}finally{Re=i,Ut.transition=r}}return!1}function nv(e,r,i){r=_s(i,r),r=bm(e,r,1),e=er(e,r,1),r=wt(),e!==null&&(ci(e,1,r),At(e,r))}function Ue(e,r,i){if(e.tag===3)nv(e,e,i);else for(;r!==null;){if(r.tag===3){nv(r,e,i);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(nr===null||!nr.has(l))){e=_s(i,e),e=_m(r,e,1),r=er(r,e,1),e=wt(),r!==null&&(ci(r,1,e),At(r,e));break}}r=r.return}}function V_(e,r,i){var l=e.pingCache;l!==null&&l.delete(r),r=wt(),e.pingedLanes|=e.suspendedLanes&i,st===e&&(ut&i)===i&&(Je===4||Je===3&&(ut&130023424)===ut&&500>We()-Jc?Mr(e,0):Qc|=i),At(e,r)}function rv(e,r){r===0&&((e.mode&1)===0?r=1:(r=Ia,Ia<<=1,(Ia&130023424)===0&&(Ia=4194304)));var i=wt();e=kn(e,r),e!==null&&(ci(e,r,i),At(e,i))}function W_(e){var r=e.memoizedState,i=0;r!==null&&(i=r.retryLane),rv(e,i)}function G_(e,r){var i=0;switch(e.tag){case 13:var l=e.stateNode,f=e.memoizedState;f!==null&&(i=f.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(n(314))}l!==null&&l.delete(r),rv(e,i)}var sv;sv=function(e,r,i){if(e!==null)if(e.memoizedProps!==r.pendingProps||St.current)xt=!0;else{if((e.lanes&i)===0&&(r.flags&128)===0)return xt=!1,I_(e,r,i);xt=(e.flags&131072)!==0}else xt=!1,$e&&(r.flags&1048576)!==0&&Fg(r,to,r.index);switch(r.lanes=0,r.tag){case 2:var l=r.type;vo(e,r),e=r.pendingProps;var f=fs(r,dt.current);ws(r,i),f=Rc(null,r,l,e,f,i);var g=Lc();return r.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Et(l)?(g=!0,Ja(r)):g=!1,r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Ec(r),f.updater=go,r.stateNode=f,f._reactInternals=r,Fc(r,l,e,i),r=Bc(null,r,l,!0,g,i)):(r.tag=0,$e&&g&&fc(r),yt(null,r,f,i),r=r.child),r;case 16:l=r.elementType;e:{switch(vo(e,r),e=r.pendingProps,f=l._init,l=f(l._payload),r.type=l,f=r.tag=X_(l),e=Zt(l,e),f){case 0:r=zc(null,r,l,e,i);break e;case 1:r=Rm(null,r,l,e,i);break e;case 11:r=km(null,r,l,e,i);break e;case 14:r=Am(null,r,l,Zt(l.type,e),i);break e}throw Error(n(306,l,""))}return r;case 0:return l=r.type,f=r.pendingProps,f=r.elementType===l?f:Zt(l,f),zc(e,r,l,f,i);case 1:return l=r.type,f=r.pendingProps,f=r.elementType===l?f:Zt(l,f),Rm(e,r,l,f,i);case 3:e:{if(Lm(r),e===null)throw Error(n(387));l=r.pendingProps,g=r.memoizedState,f=g.element,Gg(e,r),oo(r,l,null,i);var w=r.memoizedState;if(l=w.element,g.isDehydrated)if(g={element:l,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){f=_s(Error(n(423)),r),r=Nm(e,r,l,i,f);break e}else if(l!==f){f=_s(Error(n(424)),r),r=Nm(e,r,l,i,f);break e}else for(Mt=Yn(r.stateNode.containerInfo.firstChild),It=r,$e=!0,Jt=null,i=Vg(r,null,l,i),r.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(ms(),l===f){r=Cn(e,r,i);break e}yt(e,r,l,i)}r=r.child}return r;case 5:return Yg(r),e===null&&mc(r),l=r.type,f=r.pendingProps,g=e!==null?e.memoizedProps:null,w=f.children,oc(l,f)?w=null:g!==null&&oc(l,g)&&(r.flags|=32),Pm(e,r),yt(e,r,w,i),r.child;case 6:return e===null&&mc(r),null;case 13:return Im(e,r,i);case 4:return xc(r,r.stateNode.containerInfo),l=r.pendingProps,e===null?r.child=vs(r,null,l,i):yt(e,r,l,i),r.child;case 11:return l=r.type,f=r.pendingProps,f=r.elementType===l?f:Zt(l,f),km(e,r,l,f,i);case 7:return yt(e,r,r.pendingProps,i),r.child;case 8:return yt(e,r,r.pendingProps.children,i),r.child;case 12:return yt(e,r,r.pendingProps.children,i),r.child;case 10:e:{if(l=r.type._context,f=r.pendingProps,g=r.memoizedProps,w=f.value,Ie(so,l._currentValue),l._currentValue=w,g!==null)if(Qt(g.value,w)){if(g.children===f.children&&!St.current){r=Cn(e,r,i);break e}}else for(g=r.child,g!==null&&(g.return=r);g!==null;){var S=g.dependencies;if(S!==null){w=g.child;for(var A=S.firstContext;A!==null;){if(A.context===l){if(g.tag===1){A=An(-1,i&-i),A.tag=2;var O=g.updateQueue;if(O!==null){O=O.shared;var U=O.pending;U===null?A.next=A:(A.next=U.next,U.next=A),O.pending=A}}g.lanes|=i,A=g.alternate,A!==null&&(A.lanes|=i),_c(g.return,i,r),S.lanes|=i;break}A=A.next}}else if(g.tag===10)w=g.type===r.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(n(341));w.lanes|=i,S=w.alternate,S!==null&&(S.lanes|=i),_c(w,i,r),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===r){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}yt(e,r,f.children,i),r=r.child}return r;case 9:return f=r.type,l=r.pendingProps.children,ws(r,i),f=zt(f),l=l(f),r.flags|=1,yt(e,r,l,i),r.child;case 14:return l=r.type,f=Zt(l,r.pendingProps),f=Zt(l.type,f),Am(e,r,l,f,i);case 15:return Cm(e,r,r.type,r.pendingProps,i);case 17:return l=r.type,f=r.pendingProps,f=r.elementType===l?f:Zt(l,f),vo(e,r),r.tag=1,Et(l)?(e=!0,Ja(r)):e=!1,ws(r,i),ym(r,l,f),Fc(r,l,f,i),Bc(null,r,l,!0,e,i);case 19:return Om(e,r,i);case 22:return Tm(e,r,i)}throw Error(n(156,r.tag))};function iv(e,r){return jp(e,r)}function q_(e,r,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(e,r,i,l){return new q_(e,r,i,l)}function ah(e){return e=e.prototype,!(!e||!e.isReactComponent)}function X_(e){if(typeof e=="function")return ah(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ne)return 11;if(e===Ze)return 14}return 2}function ar(e,r){var i=e.alternate;return i===null?(i=Ht(e.tag,r,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=r,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,r=e.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function To(e,r,i,l,f,g){var w=2;if(l=e,typeof e=="function")ah(e)&&(w=1);else if(typeof e=="string")w=5;else e:switch(e){case G:return Dr(i.children,f,g,r);case ee:w=8,f|=8;break;case oe:return e=Ht(12,i,r,f|2),e.elementType=oe,e.lanes=g,e;case Ae:return e=Ht(13,i,r,f),e.elementType=Ae,e.lanes=g,e;case Pe:return e=Ht(19,i,r,f),e.elementType=Pe,e.lanes=g,e;case ae:return Po(i,f,g,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case de:w=10;break e;case ce:w=9;break e;case Ne:w=11;break e;case Ze:w=14;break e;case le:w=16,l=null;break e}throw Error(n(130,e==null?e:typeof e,""))}return r=Ht(w,i,r,f),r.elementType=e,r.type=l,r.lanes=g,r}function Dr(e,r,i,l){return e=Ht(7,e,l,r),e.lanes=i,e}function Po(e,r,i,l){return e=Ht(22,e,l,r),e.elementType=ae,e.lanes=i,e.stateNode={isHidden:!1},e}function oh(e,r,i){return e=Ht(6,e,null,r),e.lanes=i,e}function lh(e,r,i){return r=Ht(4,e.children!==null?e.children:[],e.key,r),r.lanes=i,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function Y_(e,r,i,l,f){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Du(0),this.expirationTimes=Du(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Du(0),this.identifierPrefix=l,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function uh(e,r,i,l,f,g,w,S,A){return e=new Y_(e,r,i,S,A),r===1?(r=1,g===!0&&(r|=8)):r=0,g=Ht(3,null,null,r),e.current=g,g.stateNode=e,g.memoizedState={element:l,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ec(g),e}function K_(e,r,i){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V,key:l==null?null:""+l,children:e,containerInfo:r,implementation:i}}function av(e){if(!e)return Qn;e=e._reactInternals;e:{if(xr(e)!==e||e.tag!==1)throw Error(n(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Et(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(e.tag===1){var i=e.type;if(Et(i))return Mg(e,i,r)}return r}function ov(e,r,i,l,f,g,w,S,A){return e=uh(i,l,!0,e,f,g,w,S,A),e.context=av(null),i=e.current,l=wt(),f=sr(i),g=An(l,f),g.callback=r??null,er(i,g,f),e.current.lanes=f,ci(e,f,l),At(e,l),e}function Ro(e,r,i,l){var f=r.current,g=wt(),w=sr(f);return i=av(i),r.context===null?r.context=i:r.pendingContext=i,r=An(g,w),r.payload={element:e},l=l===void 0?null:l,l!==null&&(r.callback=l),e=er(f,r,w),e!==null&&(nn(e,f,w,g),ao(e,f,w)),w}function Lo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function lv(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<r?i:r}}function ch(e,r){lv(e,r),(e=e.alternate)&&lv(e,r)}function Q_(){return null}var uv=typeof reportError=="function"?reportError:function(e){console.error(e)};function hh(e){this._internalRoot=e}No.prototype.render=hh.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(n(409));Ro(e,r,null,null)},No.prototype.unmount=hh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;Ir(function(){Ro(null,e,null,null)}),r[_n]=null}};function No(e){this._internalRoot=e}No.prototype.unstable_scheduleHydration=function(e){if(e){var r=Gp();e={blockedOn:null,target:e,priority:r};for(var i=0;i<Gn.length&&r!==0&&r<Gn[i].priority;i++);Gn.splice(i,0,e),i===0&&Yp(e)}};function dh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Io(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cv(){}function J_(e,r,i,l,f){if(f){if(typeof l=="function"){var g=l;l=function(){var O=Lo(w);g.call(O)}}var w=ov(r,l,e,0,null,!1,!1,"",cv);return e._reactRootContainer=w,e[_n]=w.current,xi(e.nodeType===8?e.parentNode:e),Ir(),w}for(;f=e.lastChild;)e.removeChild(f);if(typeof l=="function"){var S=l;l=function(){var O=Lo(A);S.call(O)}}var A=uh(e,0,!1,null,null,!1,!1,"",cv);return e._reactRootContainer=A,e[_n]=A.current,xi(e.nodeType===8?e.parentNode:e),Ir(function(){Ro(r,A,i,l)}),A}function Mo(e,r,i,l,f){var g=i._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var S=f;f=function(){var A=Lo(w);S.call(A)}}Ro(r,w,e,f)}else w=J_(i,r,e,f,l);return Lo(w)}Vp=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var i=ui(r.pendingLanes);i!==0&&(Fu(r,i|1),At(r,We()),(we&6)===0&&(xs=We()+500,Jn()))}break;case 13:Ir(function(){var l=kn(e,1);if(l!==null){var f=wt();nn(l,e,1,f)}}),ch(e,1)}},ju=function(e){if(e.tag===13){var r=kn(e,134217728);if(r!==null){var i=wt();nn(r,e,134217728,i)}ch(e,134217728)}},Wp=function(e){if(e.tag===13){var r=sr(e),i=kn(e,r);if(i!==null){var l=wt();nn(i,e,r,l)}ch(e,r)}},Gp=function(){return Re},qp=function(e,r){var i=Re;try{return Re=e,r()}finally{Re=i}},Ru=function(e,r,i){switch(r){case"input":if(Su(e,i),r=i.name,i.type==="radio"&&r!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<i.length;r++){var l=i[r];if(l!==e&&l.form===e.form){var f=Ka(l);if(!f)throw Error(n(90));Vs(l),Su(l,f)}}}break;case"textarea":Sp(e,i);break;case"select":r=i.value,r!=null&&ts(e,!!i.multiple,r,!1)}},Lp=rh,Np=Ir;var Z_={usingClientEntryPoint:!1,Events:[Ci,hs,Ka,Pp,Rp,rh]},Bi={findFiberByHostInstance:kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},e1={bundleType:Bi.bundleType,version:Bi.version,rendererPackageName:Bi.rendererPackageName,rendererConfig:Bi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Dp(e),e===null?null:e.stateNode},findFiberByHostInstance:Bi.findFiberByHostInstance||Q_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oo.isDisabled&&Oo.supportsFiber)try{La=Oo.inject(e1),an=Oo}catch{}}return Wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z_,Wr.createPortal=function(e,r){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dh(r))throw Error(n(200));return K_(e,r,null,i)},Wr.createRoot=function(e,r){if(!dh(e))throw Error(n(299));var i=!1,l="",f=uv;return r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(f=r.onRecoverableError)),r=uh(e,1,!1,null,null,i,!1,l,f),e[_n]=r.current,xi(e.nodeType===8?e.parentNode:e),new hh(r)},Wr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=Dp(r),e=e===null?null:e.stateNode,e},Wr.flushSync=function(e){return Ir(e)},Wr.hydrate=function(e,r,i){if(!Io(r))throw Error(n(200));return Mo(null,e,r,!0,i)},Wr.hydrateRoot=function(e,r,i){if(!dh(e))throw Error(n(405));var l=i!=null&&i.hydratedSources||null,f=!1,g="",w=uv;if(i!=null&&(i.unstable_strictMode===!0&&(f=!0),i.identifierPrefix!==void 0&&(g=i.identifierPrefix),i.onRecoverableError!==void 0&&(w=i.onRecoverableError)),r=ov(r,null,e,1,i??null,f,!1,g,w),e[_n]=r.current,xi(e),l)for(e=0;e<l.length;e++)i=l[e],f=i._getVersion,f=f(i._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[i,f]:r.mutableSourceEagerHydrationData.push(i,f);return new No(r)},Wr.render=function(e,r,i){if(!Io(r))throw Error(n(200));return Mo(null,e,r,!1,i)},Wr.unmountComponentAtNode=function(e){if(!Io(e))throw Error(n(40));return e._reactRootContainer?(Ir(function(){Mo(null,null,e,!1,function(){e._reactRootContainer=null,e[_n]=null})}),!0):!1},Wr.unstable_batchedUpdates=rh,Wr.unstable_renderSubtreeIntoContainer=function(e,r,i,l){if(!Io(i))throw Error(n(200));if(e==null||e._reactInternals===void 0)throw Error(n(38));return Mo(e,r,i,!1,l)},Wr.version="18.3.1-next-f1338f8080-20240426",Wr}var GE;function gk(){if(GE)return r1.exports;GE=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(t){console.error(t)}}return c(),r1.exports=xT(),r1.exports}var qE;function kT(){if(qE)return C0;qE=1;var c=gk();return C0.createRoot=c.createRoot,C0.hydrateRoot=c.hydrateRoot,C0}var AT=kT();const CT=fk(AT);gk();/**
* @remix-run/router v1.23.0
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function Bv(){return Bv=Object.assign?Object.assign.bind():function(c){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(c[s]=n[s])}return c},Bv.apply(this,arguments)}var cu;(function(c){c.Pop="POP",c.Push="PUSH",c.Replace="REPLACE"})(cu||(cu={}));const XE="popstate";function TT(c){c===void 0&&(c={});function t(s,a){let{pathname:o,search:u,hash:h}=s.location;return k1("",{pathname:o,search:u,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:yw(a)}return RT(t,n,null,c)}function yn(c,t){if(c===!1||c===null||typeof c>"u")throw new Error(t)}function mk(c,t){if(!c){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function PT(){return Math.random().toString(36).substr(2,8)}function YE(c,t){return{usr:c.state,key:c.key,idx:t}}function k1(c,t,n,s){return n===void 0&&(n=null),Bv({pathname:typeof c=="string"?c:c.pathname,search:"",hash:""},typeof t=="string"?gp(t):t,{state:n,key:t&&t.key||s||PT()})}function yw(c){let{pathname:t="/",search:n="",hash:s=""}=c;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function gp(c){let t={};if(c){let n=c.indexOf("#");n>=0&&(t.hash=c.substr(n),c=c.substr(0,n));let s=c.indexOf("?");s>=0&&(t.search=c.substr(s),c=c.substr(0,s)),c&&(t.pathname=c)}return t}function RT(c,t,n,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:o=!1}=s,u=a.history,h=cu.Pop,p=null,m=v();m==null&&(m=0,u.replaceState(Bv({},u.state,{idx:m}),""));function v(){return(u.state||{idx:null}).idx}function y(){h=cu.Pop;let C=v(),N=C==null?null:C-m;m=C,p&&p({action:h,location:x.location,delta:N})}function b(C,N){h=cu.Push;let F=k1(x.location,C,N);m=v()+1;let D=YE(F,m),j=x.createHref(F);try{u.pushState(D,"",j)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;a.location.assign(j)}o&&p&&p({action:h,location:x.location,delta:1})}function _(C,N){h=cu.Replace;let F=k1(x.location,C,N);m=v();let D=YE(F,m),j=x.createHref(F);u.replaceState(D,"",j),o&&p&&p({action:h,location:x.location,delta:0})}function k(C){let N=a.location.origin!=="null"?a.location.origin:a.location.href,F=typeof C=="string"?C:yw(C);return F=F.replace(/ $/,"%20"),yn(N,"No window.location.(origin|href) available to create URL for href: "+F),new URL(F,N)}let x={get action(){return h},get location(){return c(a,u)},listen(C){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(XE,y),p=C,()=>{a.removeEventListener(XE,y),p=null}},createHref(C){return t(a,C)},createURL:k,encodeLocation(C){let N=k(C);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:b,replace:_,go(C){return u.go(C)}};return x}var KE;(function(c){c.data="data",c.deferred="deferred",c.redirect="redirect",c.error="error"})(KE||(KE={}));function LT(c,t,n){return n===void 0&&(n="/"),NT(c,t,n)}function NT(c,t,n,s){let a=typeof t=="string"?gp(t):t,o=iE(a.pathname||"/",n);if(o==null)return null;let u=vk(c);IT(u);let h=null;for(let p=0;h==null&&p<u.length;++p){let m=WT(o);h=UT(u[p],m)}return h}function vk(c,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let a=(o,u,h)=>{let p={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};p.relativePath.startsWith("/")&&(yn(p.relativePath.startsWith(s),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(s.length));let m=du([s,p.relativePath]),v=n.concat(p);o.children&&o.children.length>0&&(yn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),vk(o.children,t,v,m)),!(o.path==null&&!o.index)&&t.push({path:m,score:zT(m,o.index),routesMeta:v})};return c.forEach((o,u)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))a(o,u);else for(let p of yk(o.path))a(o,u,p)}),t}function yk(c){let t=c.split("/");if(t.length===0)return[];let[n,...s]=t,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let u=yk(s.join("/")),h=[];return h.push(...u.map(p=>p===""?o:[o,p].join("/"))),a&&h.push(...u),h.map(p=>c.startsWith("/")&&p===""?"/":p)}function IT(c){c.sort((t,n)=>t.score!==n.score?n.score-t.score:BT(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const MT=/^:[\w-]+$/,OT=3,DT=2,FT=1,jT=10,$T=-2,QE=c=>c==="*";function zT(c,t){let n=c.split("/"),s=n.length;return n.some(QE)&&(s+=$T),t&&(s+=DT),n.filter(a=>!QE(a)).reduce((a,o)=>a+(MT.test(o)?OT:o===""?FT:jT),s)}function BT(c,t){return c.length===t.length&&c.slice(0,-1).every((n,s)=>n===t[s])?c[c.length-1]-t[t.length-1]:0}function UT(c,t,n){let{routesMeta:s}=c,a={},o="/",u=[];for(let h=0;h<s.length;++h){let p=s[h],m=h===s.length-1,v=o==="/"?t:t.slice(o.length)||"/",y=HT({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},v),b=p.route;if(!y)return null;Object.assign(a,y.params),u.push({params:a,pathname:du([o,y.pathname]),pathnameBase:YT(du([o,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(o=du([o,y.pathnameBase]))}return u}function HT(c,t){typeof c=="string"&&(c={path:c,caseSensitive:!1,end:!0});let[n,s]=VT(c.path,c.caseSensitive,c.end),a=t.match(n);if(!a)return null;let o=a[0],u=o.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:s.reduce((p,m,v)=>{let{paramName:y,isOptional:b}=m;if(y==="*"){let k=h[v]||"";u=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const _=h[v];return b&&!_?p[y]=void 0:p[y]=(_||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:u,pattern:c}}function VT(c,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),mk(c==="*"||!c.endsWith("*")||c.endsWith("/*"),'Route path "'+c+'" will be treated as if it were '+('"'+c.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+c.replace(/\*$/,"/*")+'".'));let s=[],a="^"+c.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,h)=>(s.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return c.endsWith("*")?(s.push({paramName:"*"}),a+=c==="*"||c==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":c!==""&&c!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function WT(c){try{return c.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return mk(!1,'The URL path "'+c+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),c}}function iE(c,t){if(t==="/")return c;if(!c.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=c.charAt(n);return s&&s!=="/"?null:c.slice(n)||"/"}function GT(c,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:a=""}=typeof c=="string"?gp(c):c;return{pathname:n?n.startsWith("/")?n:qT(n,t):t,search:KT(s),hash:QT(a)}}function qT(c,t){let n=t.replace(/\/+$/,"").split("/");return c.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function s1(c,t,n,s){return"Cannot include a '"+c+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function XT(c){return c.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function wk(c,t){let n=XT(c);return t?n.map((s,a)=>a===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function bk(c,t,n,s){s===void 0&&(s=!1);let a;typeof c=="string"?a=gp(c):(a=Bv({},c),yn(!a.pathname||!a.pathname.includes("?"),s1("?","pathname","search",a)),yn(!a.pathname||!a.pathname.includes("#"),s1("#","pathname","hash",a)),yn(!a.search||!a.search.includes("#"),s1("#","search","hash",a)));let o=c===""||a.pathname==="",u=o?"/":a.pathname,h;if(u==null)h=n;else{let y=t.length-1;if(!s&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),y-=1;a.pathname=b.join("/")}h=y>=0?t[y]:"/"}let p=GT(a,h),m=u&&u!=="/"&&u.endsWith("/"),v=(o||u===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(m||v)&&(p.pathname+="/"),p}const du=c=>c.join("/").replace(/\/\/+/g,"/"),YT=c=>c.replace(/\/+$/,"").replace(/^\/*/,"/"),KT=c=>!c||c==="?"?"":c.startsWith("?")?c:"?"+c,QT=c=>!c||c==="#"?"":c.startsWith("#")?c:"#"+c;function JT(c){return c!=null&&typeof c.status=="number"&&typeof c.statusText=="string"&&typeof c.internal=="boolean"&&"data"in c}const _k=["post","put","patch","delete"];new Set(_k);const ZT=["get",..._k];new Set(ZT);/**
* React Router v6.30.0
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function Uv(){return Uv=Object.assign?Object.assign.bind():function(c){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(c[s]=n[s])}return c},Uv.apply(this,arguments)}const aE=ke.createContext(null),eP=ke.createContext(null),Rd=ke.createContext(null),Yw=ke.createContext(null),wu=ke.createContext({outlet:null,matches:[],isDataRoute:!1}),Sk=ke.createContext(null);function tP(c,t){let{relative:n}=t===void 0?{}:t;v0()||yn(!1);let{basename:s,navigator:a}=ke.useContext(Rd),{hash:o,pathname:u,search:h}=xk(c,{relative:n}),p=u;return s!=="/"&&(p=u==="/"?s:du([s,u])),a.createHref({pathname:p,search:h,hash:o})}function v0(){return ke.useContext(Yw)!=null}function Kw(){return v0()||yn(!1),ke.useContext(Yw).location}function Ek(c){ke.useContext(Rd).static||ke.useLayoutEffect(c)}function nP(){let{isDataRoute:c}=ke.useContext(wu);return c?mP():rP()}function rP(){v0()||yn(!1);let c=ke.useContext(aE),{basename:t,future:n,navigator:s}=ke.useContext(Rd),{matches:a}=ke.useContext(wu),{pathname:o}=Kw(),u=JSON.stringify(wk(a,n.v7_relativeSplatPath)),h=ke.useRef(!1);return Ek(()=>{h.current=!0}),ke.useCallback(function(p,m){if(m===void 0&&(m={}),!h.current)return;if(typeof p=="number"){s.go(p);return}let v=bk(p,JSON.parse(u),o,m.relative==="path");c==null&&t!=="/"&&(v.pathname=v.pathname==="/"?t:du([t,v.pathname])),(m.replace?s.replace:s.push)(v,m.state,m)},[t,s,u,o,c])}function sP(){let{matches:c}=ke.useContext(wu),t=c[c.length-1];return t?t.params:{}}function xk(c,t){let{relative:n}=t===void 0?{}:t,{future:s}=ke.useContext(Rd),{matches:a}=ke.useContext(wu),{pathname:o}=Kw(),u=JSON.stringify(wk(a,s.v7_relativeSplatPath));return ke.useMemo(()=>bk(c,JSON.parse(u),o,n==="path"),[c,u,o,n])}function iP(c,t){return aP(c,t)}function aP(c,t,n,s){v0()||yn(!1);let{navigator:a,static:o}=ke.useContext(Rd),{matches:u}=ke.useContext(wu),h=u[u.length-1],p=h?h.params:{};h&&h.pathname;let m=h?h.pathnameBase:"/";h&&h.route;let v=Kw(),y;if(t){var b;let N=typeof t=="string"?gp(t):t;m==="/"||(b=N.pathname)!=null&&b.startsWith(m)||yn(!1),y=N}else y=v;let _=y.pathname||"/",k=_;if(m!=="/"){let N=m.replace(/^\//,"").split("/");k="/"+_.replace(/^\//,"").split("/").slice(N.length).join("/")}let x=LT(c,{pathname:k}),C=hP(x&&x.map(N=>Object.assign({},N,{params:Object.assign({},p,N.params),pathname:du([m,a.encodeLocation?a.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?m:du([m,a.encodeLocation?a.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),u,n,s);return t&&C?ke.createElement(Yw.Provider,{value:{location:Uv({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:cu.Pop}},C):C}function oP(){let c=gP(),t=JT(c)?c.status+" "+c.statusText:c instanceof Error?c.message:JSON.stringify(c),n=c instanceof Error?c.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ke.createElement(ke.Fragment,null,ke.createElement("h2",null,"Unexpected Application Error!"),ke.createElement("h3",{style:{fontStyle:"italic"}},t),n?ke.createElement("pre",{style:s},n):null,null)}const lP=ke.createElement(oP,null);class uP extends ke.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?ke.createElement(wu.Provider,{value:this.props.routeContext},ke.createElement(Sk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cP(c){let{routeContext:t,match:n,children:s}=c,a=ke.useContext(aE);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),ke.createElement(wu.Provider,{value:t},s)}function hP(c,t,n,s){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),c==null){var o;if(!n)return null;if(n.errors)c=n.matches;else if((o=s)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)c=n.matches;else return null}let u=c,h=(a=n)==null?void 0:a.errors;if(h!=null){let v=u.findIndex(y=>y.route.id&&(h==null?void 0:h[y.route.id])!==void 0);v>=0||yn(!1),u=u.slice(0,Math.min(u.length,v+1))}let p=!1,m=-1;if(n&&s&&s.v7_partialHydration)for(let v=0;v<u.length;v++){let y=u[v];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(m=v),y.route.id){let{loaderData:b,errors:_}=n,k=y.route.loader&&b[y.route.id]===void 0&&(!_||_[y.route.id]===void 0);if(y.route.lazy||k){p=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((v,y,b)=>{let _,k=!1,x=null,C=null;n&&(_=h&&y.route.id?h[y.route.id]:void 0,x=y.route.errorElement||lP,p&&(m<0&&b===0?(vP("route-fallback"),k=!0,C=null):m===b&&(k=!0,C=y.route.hydrateFallbackElement||null)));let N=t.concat(u.slice(0,b+1)),F=()=>{let D;return _?D=x:k?D=C:y.route.Component?D=ke.createElement(y.route.Component,null):y.route.element?D=y.route.element:D=v,ke.createElement(cP,{match:y,routeContext:{outlet:v,matches:N,isDataRoute:n!=null},children:D})};return n&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?ke.createElement(uP,{location:n.location,revalidation:n.revalidation,component:x,error:_,children:F(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):F()},null)}var kk=function(c){return c.UseBlocker="useBlocker",c.UseRevalidator="useRevalidator",c.UseNavigateStable="useNavigate",c}(kk||{}),Ak=function(c){return c.UseBlocker="useBlocker",c.UseLoaderData="useLoaderData",c.UseActionData="useActionData",c.UseRouteError="useRouteError",c.UseNavigation="useNavigation",c.UseRouteLoaderData="useRouteLoaderData",c.UseMatches="useMatches",c.UseRevalidator="useRevalidator",c.UseNavigateStable="useNavigate",c.UseRouteId="useRouteId",c}(Ak||{});function dP(c){let t=ke.useContext(aE);return t||yn(!1),t}function fP(c){let t=ke.useContext(eP);return t||yn(!1),t}function pP(c){let t=ke.useContext(wu);return t||yn(!1),t}function Ck(c){let t=pP(),n=t.matches[t.matches.length-1];return n.route.id||yn(!1),n.route.id}function gP(){var c;let t=ke.useContext(Sk),n=fP(),s=Ck();return t!==void 0?t:(c=n.errors)==null?void 0:c[s]}function mP(){let{router:c}=dP(kk.UseNavigateStable),t=Ck(Ak.UseNavigateStable),n=ke.useRef(!1);return Ek(()=>{n.current=!0}),ke.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?c.navigate(s):c.navigate(s,Uv({fromRouteId:t},a)))},[c,t])}const JE={};function vP(c,t,n){JE[c]||(JE[c]=!0)}function yP(c,t){c==null||c.v7_startTransition,c==null||c.v7_relativeSplatPath}function Vd(c){yn(!1)}function wP(c){let{basename:t="/",children:n=null,location:s,navigationType:a=cu.Pop,navigator:o,static:u=!1,future:h}=c;v0()&&yn(!1);let p=t.replace(/^\/*/,"/"),m=ke.useMemo(()=>({basename:p,navigator:o,static:u,future:Uv({v7_relativeSplatPath:!1},h)}),[p,h,o,u]);typeof s=="string"&&(s=gp(s));let{pathname:v="/",search:y="",hash:b="",state:_=null,key:k="default"}=s,x=ke.useMemo(()=>{let C=iE(v,p);return C==null?null:{location:{pathname:C,search:y,hash:b,state:_,key:k},navigationType:a}},[p,v,y,b,_,k,a]);return x==null?null:ke.createElement(Rd.Provider,{value:m},ke.createElement(Yw.Provider,{children:n,value:x}))}function bP(c){let{children:t,location:n}=c;return iP(A1(t),n)}new Promise(()=>{});function A1(c,t){t===void 0&&(t=[]);let n=[];return ke.Children.forEach(c,(s,a)=>{if(!ke.isValidElement(s))return;let o=[...t,a];if(s.type===ke.Fragment){n.push.apply(n,A1(s.props.children,o));return}s.type!==Vd&&yn(!1),!s.props.index||!s.props.children||yn(!1);let u={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(u.children=A1(s.props.children,o)),n.push(u)}),n}/**
* React Router DOM v6.30.0
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function C1(){return C1=Object.assign?Object.assign.bind():function(c){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(c[s]=n[s])}return c},C1.apply(this,arguments)}function _P(c,t){if(c==null)return{};var n={},s=Object.keys(c),a,o;for(o=0;o<s.length;o++)a=s[o],!(t.indexOf(a)>=0)&&(n[a]=c[a]);return n}function SP(c){return!!(c.metaKey||c.altKey||c.ctrlKey||c.shiftKey)}function EP(c,t){return c.button===0&&(!t||t==="_self")&&!SP(c)}const xP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],kP="6";try{window.__reactRouterVersion=kP}catch{}const AP="startTransition",ZE=_T[AP];function CP(c){let{basename:t,children:n,future:s,window:a}=c,o=ke.useRef();o.current==null&&(o.current=TT({window:a,v5Compat:!0}));let u=o.current,[h,p]=ke.useState({action:u.action,location:u.location}),{v7_startTransition:m}=s||{},v=ke.useCallback(y=>{m&&ZE?ZE(()=>p(y)):p(y)},[p,m]);return ke.useLayoutEffect(()=>u.listen(v),[u,v]),ke.useEffect(()=>yP(s),[s]),ke.createElement(wP,{basename:t,children:n,location:h.location,navigationType:h.action,navigator:u,future:s})}const TP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ef=ke.forwardRef(function(c,t){let{onClick:n,relative:s,reloadDocument:a,replace:o,state:u,target:h,to:p,preventScrollReset:m,viewTransition:v}=c,y=_P(c,xP),{basename:b}=ke.useContext(Rd),_,k=!1;if(typeof p=="string"&&PP.test(p)&&(_=p,TP))try{let F=new URL(window.location.href),D=p.startsWith("//")?new URL(F.protocol+p):new URL(p),j=iE(D.pathname,b);D.origin===F.origin&&j!=null?p=j+D.search+D.hash:k=!0}catch{}let x=tP(p,{relative:s}),C=RP(p,{replace:o,state:u,target:h,preventScrollReset:m,relative:s,viewTransition:v});function N(F){n&&n(F),F.defaultPrevented||C(F)}return ke.createElement("a",C1({},y,{href:_||x,onClick:k||a?n:N,ref:t,target:h}))});var ex;(function(c){c.UseScrollRestoration="useScrollRestoration",c.UseSubmit="useSubmit",c.UseSubmitFetcher="useSubmitFetcher",c.UseFetcher="useFetcher",c.useViewTransitionState="useViewTransitionState"})(ex||(ex={}));var tx;(function(c){c.UseFetcher="useFetcher",c.UseFetchers="useFetchers",c.UseScrollRestoration="useScrollRestoration"})(tx||(tx={}));function RP(c,t){let{target:n,replace:s,state:a,preventScrollReset:o,relative:u,viewTransition:h}=t===void 0?{}:t,p=nP(),m=Kw(),v=xk(c,{relative:u});return ke.useCallback(y=>{if(EP(y,n)){y.preventDefault();let b=s!==void 0?s:yw(m)===yw(v);p(c,{replace:b,state:a,preventScrollReset:o,relative:u,viewTransition:h})}},[m,p,v,s,a,n,c,o,u,h])}function LP(){return xe.jsxs("div",{className:"text-center mt-10",children:[xe.jsx("h1",{className:"text-5xl font-bold tracking-widest mb-10",children:"Check out the latest comic!"}),xe.jsxs("div",{className:"latest-comic mb-16",children:[xe.jsx("a",{href:"/comic",children:xe.jsx("img",{src:"/assets/comic/COVER.png",alt:"Cover",className:"mx-auto w-72 mb-6"})}),xe.jsx("h2",{className:"text-3xl mt-6 font-bold",children:"The only man who answered the call..."}),xe.jsx("p",{className:"mt-2 text-gray-400 max-w-xl mx-auto",children:"Discover Josh's journey with aliens in a black & white sci-fi webcomic."})]}),xe.jsxs("div",{className:"bg-white text-black p-6 rounded max-w-md mx-auto mb-10",children:[xe.jsx("h2",{className:"text-xl font-bold",children:"🛸 Featured Merch Drop"}),xe.jsx("p",{className:"mb-2 text-sm",children:"Josh's Black Sweatshirt is now available"}),xe.jsx(ef,{to:"/product/black-sweatshirt",className:"inline-block bg-black text-white px-4 py-2 rounded mt-2 hover:bg-gray-800 transition",children:"View Product"})]})]})}function NP(){const c=[1,2,3,4,5];return xe.jsx("div",{className:"flex flex-col items-center mt-10 space-y-6 px-4",children:c.map(t=>xe.jsx("img",{src:`/assets/comic/${t}.png`,alt:`Panel ${t}`,className:"max-w-2xl shadow-lg"},t))})}const Tk={"black-sweatshirt":{name:"Black Sweatshirt",image:"/assets/merch/black_sweatshirt.png",description:"Fade into the shadows like a UFO at night. Cozy and bold, this black sweatshirt is a must-have for undercover intergalactic operatives.",hostedButtonId:"9GX2P52VCBXSG"},"white-shirt":{name:"White Shirt",image:"/assets/merch/white_shirt.png",description:"Clean. Crisp. Cosmic. The white tee that says: 'I answered the call… and all I got was abducted.'",hostedButtonId:"R3E6REKYNW4TA"},"green-sweatshirt":{name:"Green Sweatshirt",image:"/assets/merch/green_sweatshirt.png",description:"Stay warm while decoding alien transmissions. This green sweatshirt is subtle enough to wear on Earth — or Mars.",hostedButtonId:"9GX2P52VCBXSG"},"black-shirt":{name:"Black Shirt",image:"/assets/merch/black_shirt.png",description:"Minimalist, mysterious, and made for those who speak in ancient alien frequencies. Looks great under a tin foil hat.",hostedButtonId:"R3E6REKYNW4TA"}};function IP(){return xe.jsxs("div",{className:"p-10 bg-black min-h-screen",children:[xe.jsx("h1",{className:"text-white text-4xl font-bold text-center mb-10",children:"🛍️ The Galactic Merch Store"}),xe.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-10",children:Object.entries(Tk).map(([c,t])=>xe.jsxs("div",{className:"bg-white text-black rounded-lg overflow-hidden shadow-lg transform transition duration-300 hover:scale-105 hover:shadow-2xl",children:[xe.jsx("img",{src:t.image,alt:t.name,className:"h-64 w-full object-contain bg-black p-4"}),xe.jsxs("div",{className:"p-4",children:[xe.jsx("h2",{className:"text-lg font-bold",children:t.name}),xe.jsxs("p",{className:"text-sm text-gray-600 mt-2 mb-4",children:[t.description.slice(0,60),"..."]}),xe.jsx(ef,{to:`/product/${c}`,className:"inline-block bg-black text-white px-4 py-2 rounded hover:bg-gray-800 transition",children:"View Product"})]})]},c))})]})}function MP(){return xe.jsxs("div",{className:"max-w-2xl mx-auto mt-10 px-4",children:[xe.jsx("h2",{className:"text-2xl font-bold",children:"About the Comic"}),xe.jsx("p",{className:"mt-4 text-gray-400",children:"Josh is just your average language teacher... until the aliens called. Follow his mysterious black-and-white journey as the only human who can understand an extraterrestrial transmission. Will he survive? Will he teach the aliens verbs?"})]})}function OP(){return xe.jsxs("header",{className:"bg-black text-white p-4 flex justify-between items-center border-b border-gray-700",children:[xe.jsx("h1",{className:"text-xl font-bold tracking-widest flex items-center",children:xe.jsxs("a",{href:"/",children:[xe.jsx("img",{src:"./src/assets/icon/icon.png",alt:"Site Logo",className:"h-24 w-24 mr-2"}),xe.jsx("span",{className:"text-3xl",children:"TendoComic"})]})}),xe.jsxs("nav",{className:"space-x-4 text-sm uppercase",children:[xe.jsx(ef,{to:"/",children:"Home"}),xe.jsx(ef,{to:"/comic",children:"Comic"}),xe.jsx(ef,{to:"/shop",children:"Shop"}),xe.jsx(ef,{to:"/about",children:"About"})]})]})}function DP(){const{id:c}=sP(),t=Tk[c];return ke.useEffect(()=>{const n=setInterval(()=>{window.paypal&&window.paypal.HostedButtons&&t!=null&&t.hostedButtonId&&(clearInterval(n),window.paypal.HostedButtons({hostedButtonId:t.hostedButtonId}).render(`#paypal-container-${t.hostedButtonId}`))},300)},[t]),t?xe.jsxs("div",{className:"max-w-xl mx-auto text-center mt-10",children:[xe.jsx("h2",{className:"text-3xl font-bold",children:t.name}),xe.jsx("img",{src:t.image,alt:t.name,className:"w-full my-6 rounded"}),xe.jsx("p",{className:"mb-6 text-gray-300",children:t.description}),xe.jsx("div",{id:`paypal-container-${t.hostedButtonId}`})]}):xe.jsx("p",{className:"text-center mt-10",children:"Product not found"})}function FP(){return xe.jsxs("footer",{className:"bg-black text-gray-400 py-8 border-t border-gray-700 text-center text-sm",children:[xe.jsxs("div",{className:"mb-3",children:[xe.jsx("a",{href:"hhttps://discord.gg/t5CpXaK7QY",target:"_blank",rel:"noopener noreferrer",className:"mx-2 hover:text-white transition",children:"Discord"}),"|",xe.jsx("a",{href:"https://www.instagram.com/bruce.wayne39",target:"_blank",rel:"noopener noreferrer",className:"mx-2 hover:text-white transition",children:"Instagram"}),"|",xe.jsx("a",{href:"mailto:contact@tendocomic.me",className:"mx-2 hover:text-white transition",children:"Email"})]}),xe.jsxs("p",{className:"text-xs text-gray-500",children:["© ",new Date().getFullYear()," TendoComic. All rights reserved."]})]})}function jP(){return xe.jsx(CP,{children:xe.jsxs("div",{className:"bg-black text-white min-h-screen font-mono cursor-ufocursor bg-stars",children:[xe.jsx(OP,{}),xe.jsxs(bP,{children:[xe.jsx(Vd,{path:"/",element:xe.jsx(LP,{})}),xe.jsx(Vd,{path:"/comic",element:xe.jsx(NP,{})}),xe.jsx(Vd,{path:"/shop",element:xe.jsx(IP,{})}),xe.jsx(Vd,{path:"/about",element:xe.jsx(MP,{})}),xe.jsx(Vd,{path:"/product/:id",element:xe.jsx(DP,{})})]}),xe.jsx(FP,{})]})})}CT.createRoot(document.getElementById("root")).render(xe.jsx(pk.StrictMode,{children:xe.jsx(jP,{})}));function oE(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}function $P(c){if(Object.prototype.hasOwnProperty.call(c,"__esModule"))return c;var t=c.default;if(typeof t=="function"){var n=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(c).forEach(function(s){var a=Object.getOwnPropertyDescriptor(c,s);Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:function(){return c[s]}})}),n}var i1={exports:{}},dv={},a1={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nx;function zP(){if(nx)return tt;nx=1;var c=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.iterator;function b(L){return L===null||typeof L!="object"?null:(L=y&&L[y]||L["@@iterator"],typeof L=="function"?L:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,x={};function C(L,$,ie){this.props=L,this.context=$,this.refs=x,this.updater=ie||_}C.prototype.isReactComponent={},C.prototype.setState=function(L,$){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,$,"setState")},C.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function N(){}N.prototype=C.prototype;function F(L,$,ie){this.props=L,this.context=$,this.refs=x,this.updater=ie||_}var D=F.prototype=new N;D.constructor=F,k(D,C.prototype),D.isPureReactComponent=!0;var j=Array.isArray,z=Object.prototype.hasOwnProperty,V={current:null},G={key:!0,ref:!0,__self:!0,__source:!0};function ee(L,$,ie){var he,ve={},pe=null,ge=null;if($!=null)for(he in $.ref!==void 0&&(ge=$.ref),$.key!==void 0&&(pe=""+$.key),$)z.call($,he)&&!G.hasOwnProperty(he)&&(ve[he]=$[he]);var Ce=arguments.length-2;if(Ce===1)ve.children=ie;else if(1<Ce){for(var Me=Array(Ce),ht=0;ht<Ce;ht++)Me[ht]=arguments[ht+2];ve.children=Me}if(L&&L.defaultProps)for(he in Ce=L.defaultProps,Ce)ve[he]===void 0&&(ve[he]=Ce[he]);return{$$typeof:c,type:L,key:pe,ref:ge,props:ve,_owner:V.current}}function oe(L,$){return{$$typeof:c,type:L.type,key:$,ref:L.ref,props:L.props,_owner:L._owner}}function de(L){return typeof L=="object"&&L!==null&&L.$$typeof===c}function ce(L){var $={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ie){return $[ie]})}var Ne=/\/+/g;function Ae(L,$){return typeof L=="object"&&L!==null&&L.key!=null?ce(""+L.key):$.toString(36)}function Pe(L,$,ie,he,ve){var pe=typeof L;(pe==="undefined"||pe==="boolean")&&(L=null);var ge=!1;if(L===null)ge=!0;else switch(pe){case"string":case"number":ge=!0;break;case"object":switch(L.$$typeof){case c:case t:ge=!0}}if(ge)return ge=L,ve=ve(ge),L=he===""?"."+Ae(ge,0):he,j(ve)?(ie="",L!=null&&(ie=L.replace(Ne,"$&/")+"/"),Pe(ve,$,ie,"",function(ht){return ht})):ve!=null&&(de(ve)&&(ve=oe(ve,ie+(!ve.key||ge&&ge.key===ve.key?"":(""+ve.key).replace(Ne,"$&/")+"/")+L)),$.push(ve)),1;if(ge=0,he=he===""?".":he+":",j(L))for(var Ce=0;Ce<L.length;Ce++){pe=L[Ce];var Me=he+Ae(pe,Ce);ge+=Pe(pe,$,ie,Me,ve)}else if(Me=b(L),typeof Me=="function")for(L=Me.call(L),Ce=0;!(pe=L.next()).done;)pe=pe.value,Me=he+Ae(pe,Ce++),ge+=Pe(pe,$,ie,Me,ve);else if(pe==="object")throw $=String(L),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return ge}function Ze(L,$,ie){if(L==null)return L;var he=[],ve=0;return Pe(L,he,"","",function(pe){return $.call(ie,pe,ve++)}),he}function le(L){if(L._status===-1){var $=L._result;$=$(),$.then(function(ie){(L._status===0||L._status===-1)&&(L._status=1,L._result=ie)},function(ie){(L._status===0||L._status===-1)&&(L._status=2,L._result=ie)}),L._status===-1&&(L._status=0,L._result=$)}if(L._status===1)return L._result.default;throw L._result}var ae={current:null},q={transition:null},te={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:q,ReactCurrentOwner:V};function X(){throw Error("act(...) is not supported in production builds of React.")}return tt.Children={map:Ze,forEach:function(L,$,ie){Ze(L,function(){$.apply(this,arguments)},ie)},count:function(L){var $=0;return Ze(L,function(){$++}),$},toArray:function(L){return Ze(L,function($){return $})||[]},only:function(L){if(!de(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},tt.Component=C,tt.Fragment=n,tt.Profiler=a,tt.PureComponent=F,tt.StrictMode=s,tt.Suspense=p,tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,tt.act=X,tt.cloneElement=function(L,$,ie){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var he=k({},L.props),ve=L.key,pe=L.ref,ge=L._owner;if($!=null){if($.ref!==void 0&&(pe=$.ref,ge=V.current),$.key!==void 0&&(ve=""+$.key),L.type&&L.type.defaultProps)var Ce=L.type.defaultProps;for(Me in $)z.call($,Me)&&!G.hasOwnProperty(Me)&&(he[Me]=$[Me]===void 0&&Ce!==void 0?Ce[Me]:$[Me])}var Me=arguments.length-2;if(Me===1)he.children=ie;else if(1<Me){Ce=Array(Me);for(var ht=0;ht<Me;ht++)Ce[ht]=arguments[ht+2];he.children=Ce}return{$$typeof:c,type:L.type,key:ve,ref:pe,props:he,_owner:ge}},tt.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:o,_context:L},L.Consumer=L},tt.createElement=ee,tt.createFactory=function(L){var $=ee.bind(null,L);return $.type=L,$},tt.createRef=function(){return{current:null}},tt.forwardRef=function(L){return{$$typeof:h,render:L}},tt.isValidElement=de,tt.lazy=function(L){return{$$typeof:v,_payload:{_status:-1,_result:L},_init:le}},tt.memo=function(L,$){return{$$typeof:m,type:L,compare:$===void 0?null:$}},tt.startTransition=function(L){var $=q.transition;q.transition={};try{L()}finally{q.transition=$}},tt.unstable_act=X,tt.useCallback=function(L,$){return ae.current.useCallback(L,$)},tt.useContext=function(L){return ae.current.useContext(L)},tt.useDebugValue=function(){},tt.useDeferredValue=function(L){return ae.current.useDeferredValue(L)},tt.useEffect=function(L,$){return ae.current.useEffect(L,$)},tt.useId=function(){return ae.current.useId()},tt.useImperativeHandle=function(L,$,ie){return ae.current.useImperativeHandle(L,$,ie)},tt.useInsertionEffect=function(L,$){return ae.current.useInsertionEffect(L,$)},tt.useLayoutEffect=function(L,$){return ae.current.useLayoutEffect(L,$)},tt.useMemo=function(L,$){return ae.current.useMemo(L,$)},tt.useReducer=function(L,$,ie){return ae.current.useReducer(L,$,ie)},tt.useRef=function(L){return ae.current.useRef(L)},tt.useState=function(L){return ae.current.useState(L)},tt.useSyncExternalStore=function(L,$,ie){return ae.current.useSyncExternalStore(L,$,ie)},tt.useTransition=function(){return ae.current.useTransition()},tt.version="18.3.1",tt}var rx;function lE(){return rx||(rx=1,a1.exports=zP()),a1.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sx;function BP(){if(sx)return dv;sx=1;var c=lE(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function u(h,p,m){var v,y={},b=null,_=null;m!==void 0&&(b=""+m),p.key!==void 0&&(b=""+p.key),p.ref!==void 0&&(_=p.ref);for(v in p)s.call(p,v)&&!o.hasOwnProperty(v)&&(y[v]=p[v]);if(h&&h.defaultProps)for(v in p=h.defaultProps,p)y[v]===void 0&&(y[v]=p[v]);return{$$typeof:t,type:h,key:b,ref:_,props:y,_owner:a.current}}return dv.Fragment=n,dv.jsx=u,dv.jsxs=u,dv}var ix;function UP(){return ix||(ix=1,i1.exports=BP()),i1.exports}var se=UP(),me=lE();const HP=oE(me),VP=mT({__proto__:null,default:HP},[me]);var T0={},o1={exports:{}},Gr={},l1={exports:{}},u1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ax;function WP(){return ax||(ax=1,function(c){function t(q,te){var X=q.length;q.push(te);e:for(;0<X;){var L=X-1>>>1,$=q[L];if(0<a($,te))q[L]=te,q[X]=$,X=L;else break e}}function n(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var te=q[0],X=q.pop();if(X!==te){q[0]=X;e:for(var L=0,$=q.length,ie=$>>>1;L<ie;){var he=2*(L+1)-1,ve=q[he],pe=he+1,ge=q[pe];if(0>a(ve,X))pe<$&&0>a(ge,ve)?(q[L]=ge,q[pe]=X,L=pe):(q[L]=ve,q[he]=X,L=he);else if(pe<$&&0>a(ge,X))q[L]=ge,q[pe]=X,L=pe;else break e}}return te}function a(q,te){var X=q.sortIndex-te.sortIndex;return X!==0?X:q.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;c.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();c.unstable_now=function(){return u.now()-h}}var p=[],m=[],v=1,y=null,b=3,_=!1,k=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(q){for(var te=n(m);te!==null;){if(te.callback===null)s(m);else if(te.startTime<=q)s(m),te.sortIndex=te.expirationTime,t(p,te);else break;te=n(m)}}function j(q){if(x=!1,D(q),!k)if(n(p)!==null)k=!0,le(z);else{var te=n(m);te!==null&&ae(j,te.startTime-q)}}function z(q,te){k=!1,x&&(x=!1,N(ee),ee=-1),_=!0;var X=b;try{for(D(te),y=n(p);y!==null&&(!(y.expirationTime>te)||q&&!ce());){var L=y.callback;if(typeof L=="function"){y.callback=null,b=y.priorityLevel;var $=L(y.expirationTime<=te);te=c.unstable_now(),typeof $=="function"?y.callback=$:y===n(p)&&s(p),D(te)}else s(p);y=n(p)}if(y!==null)var ie=!0;else{var he=n(m);he!==null&&ae(j,he.startTime-te),ie=!1}return ie}finally{y=null,b=X,_=!1}}var V=!1,G=null,ee=-1,oe=5,de=-1;function ce(){return!(c.unstable_now()-de<oe)}function Ne(){if(G!==null){var q=c.unstable_now();de=q;var te=!0;try{te=G(!0,q)}finally{te?Ae():(V=!1,G=null)}}else V=!1}var Ae;if(typeof F=="function")Ae=function(){F(Ne)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,Ze=Pe.port2;Pe.port1.onmessage=Ne,Ae=function(){Ze.postMessage(null)}}else Ae=function(){C(Ne,0)};function le(q){G=q,V||(V=!0,Ae())}function ae(q,te){ee=C(function(){q(c.unstable_now())},te)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(q){q.callback=null},c.unstable_continueExecution=function(){k||_||(k=!0,le(z))},c.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<q?Math.floor(1e3/q):5},c.unstable_getCurrentPriorityLevel=function(){return b},c.unstable_getFirstCallbackNode=function(){return n(p)},c.unstable_next=function(q){switch(b){case 1:case 2:case 3:var te=3;break;default:te=b}var X=b;b=te;try{return q()}finally{b=X}},c.unstable_pauseExecution=function(){},c.unstable_requestPaint=function(){},c.unstable_runWithPriority=function(q,te){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var X=b;b=q;try{return te()}finally{b=X}},c.unstable_scheduleCallback=function(q,te,X){var L=c.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?L+X:L):X=L,q){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=X+$,q={id:v++,callback:te,priorityLevel:q,startTime:X,expirationTime:$,sortIndex:-1},X>L?(q.sortIndex=X,t(m,q),n(p)===null&&q===n(m)&&(x?(N(ee),ee=-1):x=!0,ae(j,X-L))):(q.sortIndex=$,t(p,q),k||_||(k=!0,le(z))),q},c.unstable_shouldYield=ce,c.unstable_wrapCallback=function(q){var te=b;return function(){var X=b;b=te;try{return q.apply(this,arguments)}finally{b=X}}}}(u1)),u1}var ox;function GP(){return ox||(ox=1,l1.exports=WP()),l1.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lx;function qP(){if(lx)return Gr;lx=1;var c=lE(),t=GP();function n(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function o(e,r){u(e,r),u(e+"Capture",r)}function u(e,r){for(a[e]=r,e=0;e<r.length;e++)s.add(r[e])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},y={};function b(e){return p.call(y,e)?!0:p.call(v,e)?!1:m.test(e)?y[e]=!0:(v[e]=!0,!1)}function _(e,r,i,l){if(i!==null&&i.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return l?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function k(e,r,i,l){if(r===null||typeof r>"u"||_(e,r,i,l))return!0;if(l)return!1;if(i!==null)switch(i.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function x(e,r,i,l,f,g,w){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=l,this.attributeNamespace=f,this.mustUseProperty=i,this.propertyName=e,this.type=r,this.sanitizeURL=g,this.removeEmptyString=w}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){C[e]=new x(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];C[r]=new x(r,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){C[e]=new x(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){C[e]=new x(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){C[e]=new x(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){C[e]=new x(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){C[e]=new x(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){C[e]=new x(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){C[e]=new x(e,5,!1,e.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function F(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(N,F);C[r]=new x(r,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(N,F);C[r]=new x(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(N,F);C[r]=new x(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){C[e]=new x(e,1,!1,e.toLowerCase(),null,!1,!1)}),C.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){C[e]=new x(e,1,!1,e.toLowerCase(),null,!0,!0)});function D(e,r,i,l){var f=C.hasOwnProperty(r)?C[r]:null;(f!==null?f.type!==0:l||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(k(r,i,f,l)&&(i=null),l||f===null?b(r)&&(i===null?e.removeAttribute(r):e.setAttribute(r,""+i)):f.mustUseProperty?e[f.propertyName]=i===null?f.type===3?!1:"":i:(r=f.attributeName,l=f.attributeNamespace,i===null?e.removeAttribute(r):(f=f.type,i=f===3||f===4&&i===!0?"":""+i,l?e.setAttributeNS(l,r,i):e.setAttribute(r,i))))}var j=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),V=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),ee=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),de=Symbol.for("react.provider"),ce=Symbol.for("react.context"),Ne=Symbol.for("react.forward_ref"),Ae=Symbol.for("react.suspense"),Pe=Symbol.for("react.suspense_list"),Ze=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),q=Symbol.iterator;function te(e){return e===null||typeof e!="object"?null:(e=q&&e[q]||e["@@iterator"],typeof e=="function"?e:null)}var X=Object.assign,L;function $(e){if(L===void 0)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);L=r&&r[1]||""}return`
`+L+e}var ie=!1;function he(e,r){if(!e||ie)return"";ie=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(O){var l=O}Reflect.construct(e,[],r)}else{try{r.call()}catch(O){l=O}e.call(r.prototype)}else{try{throw Error()}catch(O){l=O}e()}}catch(O){if(O&&l&&typeof O.stack=="string"){for(var f=O.stack.split(`
`),g=l.stack.split(`
`),w=f.length-1,S=g.length-1;1<=w&&0<=S&&f[w]!==g[S];)S--;for(;1<=w&&0<=S;w--,S--)if(f[w]!==g[S]){if(w!==1||S!==1)do if(w--,S--,0>S||f[w]!==g[S]){var A=`
`+f[w].replace(" at new "," at ");return e.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",e.displayName)),A}while(1<=w&&0<=S);break}}}finally{ie=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?$(e):""}function ve(e){switch(e.tag){case 5:return $(e.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return e=he(e.type,!1),e;case 11:return e=he(e.type.render,!1),e;case 1:return e=he(e.type,!0),e;default:return""}}function pe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case G:return"Fragment";case V:return"Portal";case oe:return"Profiler";case ee:return"StrictMode";case Ae:return"Suspense";case Pe:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ce:return(e.displayName||"Context")+".Consumer";case de:return(e._context.displayName||"Context")+".Provider";case Ne:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ze:return r=e.displayName||null,r!==null?r:pe(e.type)||"Memo";case le:r=e._payload,e=e._init;try{return pe(e(r))}catch{}}return null}function ge(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(r);case 8:return r===ee?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Ce(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Me(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ht(e){var r=Me(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),l=""+e[r];if(!e.hasOwnProperty(r)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var f=i.get,g=i.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return f.call(this)},set:function(w){l=""+w,g.call(this,w)}}),Object.defineProperty(e,r,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(w){l=""+w},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function es(e){e._valueTracker||(e._valueTracker=ht(e))}function Vs(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var i=r.getValue(),l="";return e&&(l=Me(e)?e.checked?"true":"false":e.value),e=l,e!==i?(r.setValue(e),!0):!1}function Ws(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Aa(e,r){var i=r.checked;return X({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function yp(e,r){var i=r.defaultValue==null?"":r.defaultValue,l=r.checked!=null?r.checked:r.defaultChecked;i=Ce(r.value!=null?r.value:i),e._wrapperState={initialChecked:l,initialValue:i,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function wp(e,r){r=r.checked,r!=null&&D(e,"checked",r,!1)}function Su(e,r){wp(e,r);var i=Ce(r.value),l=r.type;if(i!=null)l==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?Eu(e,r.type,i):r.hasOwnProperty("defaultValue")&&Eu(e,r.type,Ce(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function bp(e,r,i){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var l=r.type;if(!(l!=="submit"&&l!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,i||r===e.value||(e.value=r),e.defaultValue=r}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Eu(e,r,i){(r!=="number"||Ws(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var ri=Array.isArray;function ts(e,r,i,l){if(e=e.options,r){r={};for(var f=0;f<i.length;f++)r["$"+i[f]]=!0;for(i=0;i<e.length;i++)f=r.hasOwnProperty("$"+e[i].value),e[i].selected!==f&&(e[i].selected=f),f&&l&&(e[i].defaultSelected=!0)}else{for(i=""+Ce(i),r=null,f=0;f<e.length;f++){if(e[f].value===i){e[f].selected=!0,l&&(e[f].defaultSelected=!0);return}r!==null||e[f].disabled||(r=e[f])}r!==null&&(r.selected=!0)}}function xu(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return X({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _p(e,r){var i=r.value;if(i==null){if(i=r.children,r=r.defaultValue,i!=null){if(r!=null)throw Error(n(92));if(ri(i)){if(1<i.length)throw Error(n(93));i=i[0]}r=i}r==null&&(r=""),i=r}e._wrapperState={initialValue:Ce(i)}}function Sp(e,r){var i=Ce(r.value),l=Ce(r.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),r.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),l!=null&&(e.defaultValue=""+l)}function Ep(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function xp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ku(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?xp(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ca,kp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,i,l,f){MSApp.execUnsafeLocalFunction(function(){return e(r,i,l,f)})}:e}(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(Ca=Ca||document.createElement("div"),Ca.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Ca.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function si(e,r){if(r){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=r;return}}e.textContent=r}var ii={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ab=["Webkit","ms","Moz","O"];Object.keys(ii).forEach(function(e){ab.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),ii[r]=ii[e]})});function Ap(e,r,i){return r==null||typeof r=="boolean"||r===""?"":i||typeof r!="number"||r===0||ii.hasOwnProperty(e)&&ii[e]?(""+r).trim():r+"px"}function Cp(e,r){e=e.style;for(var i in r)if(r.hasOwnProperty(i)){var l=i.indexOf("--")===0,f=Ap(i,r[i],l);i==="float"&&(i="cssFloat"),l?e.setProperty(i,f):e[i]=f}}var ob=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Au(e,r){if(r){if(ob[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function Cu(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tu=null;function Pu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ru=null,ns=null,rs=null;function Tp(e){if(e=Ci(e)){if(typeof Ru!="function")throw Error(n(280));var r=e.stateNode;r&&(r=Ka(r),Ru(e.stateNode,e.type,r))}}function Pp(e){ns?rs?rs.push(e):rs=[e]:ns=e}function Rp(){if(ns){var e=ns,r=rs;if(rs=ns=null,Tp(e),r)for(e=0;e<r.length;e++)Tp(r[e])}}function Lp(e,r){return e(r)}function Np(){}var Lu=!1;function Ip(e,r,i){if(Lu)return e(r,i);Lu=!0;try{return Lp(e,r,i)}finally{Lu=!1,(ns!==null||rs!==null)&&(Np(),Rp())}}function ai(e,r){var i=e.stateNode;if(i===null)return null;var l=Ka(i);if(l===null)return null;i=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(n(231,r,typeof i));return i}var Nu=!1;if(h)try{var oi={};Object.defineProperty(oi,"passive",{get:function(){Nu=!0}}),window.addEventListener("test",oi,oi),window.removeEventListener("test",oi,oi)}catch{Nu=!1}function lb(e,r,i,l,f,g,w,S,A){var O=Array.prototype.slice.call(arguments,3);try{r.apply(i,O)}catch(U){this.onError(U)}}var li=!1,Ta=null,Pa=!1,Iu=null,ub={onError:function(e){li=!0,Ta=e}};function cb(e,r,i,l,f,g,w,S,A){li=!1,Ta=null,lb.apply(ub,arguments)}function hb(e,r,i,l,f,g,w,S,A){if(cb.apply(this,arguments),li){if(li){var O=Ta;li=!1,Ta=null}else throw Error(n(198));Pa||(Pa=!0,Iu=O)}}function xr(e){var r=e,i=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(i=r.return),e=r.return;while(e)}return r.tag===3?i:null}function Mp(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function Op(e){if(xr(e)!==e)throw Error(n(188))}function db(e){var r=e.alternate;if(!r){if(r=xr(e),r===null)throw Error(n(188));return r!==e?null:e}for(var i=e,l=r;;){var f=i.return;if(f===null)break;var g=f.alternate;if(g===null){if(l=f.return,l!==null){i=l;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===i)return Op(f),e;if(g===l)return Op(f),r;g=g.sibling}throw Error(n(188))}if(i.return!==l.return)i=f,l=g;else{for(var w=!1,S=f.child;S;){if(S===i){w=!0,i=f,l=g;break}if(S===l){w=!0,l=f,i=g;break}S=S.sibling}if(!w){for(S=g.child;S;){if(S===i){w=!0,i=g,l=f;break}if(S===l){w=!0,l=g,i=f;break}S=S.sibling}if(!w)throw Error(n(189))}}if(i.alternate!==l)throw Error(n(190))}if(i.tag!==3)throw Error(n(188));return i.stateNode.current===i?e:r}function Dp(e){return e=db(e),e!==null?Fp(e):null}function Fp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=Fp(e);if(r!==null)return r;e=e.sibling}return null}var jp=t.unstable_scheduleCallback,$p=t.unstable_cancelCallback,fb=t.unstable_shouldYield,pb=t.unstable_requestPaint,We=t.unstable_now,gb=t.unstable_getCurrentPriorityLevel,Mu=t.unstable_ImmediatePriority,zp=t.unstable_UserBlockingPriority,Ra=t.unstable_NormalPriority,mb=t.unstable_LowPriority,Bp=t.unstable_IdlePriority,La=null,an=null;function vb(e){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(La,e,void 0,(e.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:bb,yb=Math.log,wb=Math.LN2;function bb(e){return e>>>=0,e===0?32:31-(yb(e)/wb|0)|0}var Na=64,Ia=4194304;function ui(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ma(e,r){var i=e.pendingLanes;if(i===0)return 0;var l=0,f=e.suspendedLanes,g=e.pingedLanes,w=i&268435455;if(w!==0){var S=w&~f;S!==0?l=ui(S):(g&=w,g!==0&&(l=ui(g)))}else w=i&~f,w!==0?l=ui(w):g!==0&&(l=ui(g));if(l===0)return 0;if(r!==0&&r!==l&&(r&f)===0&&(f=l&-l,g=r&-r,f>=g||f===16&&(g&4194240)!==0))return r;if((l&4)!==0&&(l|=i&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=l;0<r;)i=31-Kt(r),f=1<<i,l|=e[i],r&=~f;return l}function _b(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sb(e,r){for(var i=e.suspendedLanes,l=e.pingedLanes,f=e.expirationTimes,g=e.pendingLanes;0<g;){var w=31-Kt(g),S=1<<w,A=f[w];A===-1?((S&i)===0||(S&l)!==0)&&(f[w]=_b(S,r)):A<=r&&(e.expiredLanes|=S),g&=~S}}function Ou(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Up(){var e=Na;return Na<<=1,(Na&4194240)===0&&(Na=64),e}function Du(e){for(var r=[],i=0;31>i;i++)r.push(e);return r}function ci(e,r,i){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-Kt(r),e[r]=i}function Eb(e,r){var i=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<i;){var f=31-Kt(i),g=1<<f;r[f]=0,l[f]=-1,e[f]=-1,i&=~g}}function Fu(e,r){var i=e.entangledLanes|=r;for(e=e.entanglements;i;){var l=31-Kt(i),f=1<<l;f&r|e[l]&r&&(e[l]|=r),i&=~f}}var Re=0;function Hp(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Vp,ju,Wp,Gp,qp,$u=!1,Oa=[],Hn=null,Vn=null,Wn=null,hi=new Map,di=new Map,Gn=[],xb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xp(e,r){switch(e){case"focusin":case"focusout":Hn=null;break;case"dragenter":case"dragleave":Vn=null;break;case"mouseover":case"mouseout":Wn=null;break;case"pointerover":case"pointerout":hi.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":di.delete(r.pointerId)}}function fi(e,r,i,l,f,g){return e===null||e.nativeEvent!==g?(e={blockedOn:r,domEventName:i,eventSystemFlags:l,nativeEvent:g,targetContainers:[f]},r!==null&&(r=Ci(r),r!==null&&ju(r)),e):(e.eventSystemFlags|=l,r=e.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),e)}function kb(e,r,i,l,f){switch(r){case"focusin":return Hn=fi(Hn,e,r,i,l,f),!0;case"dragenter":return Vn=fi(Vn,e,r,i,l,f),!0;case"mouseover":return Wn=fi(Wn,e,r,i,l,f),!0;case"pointerover":var g=f.pointerId;return hi.set(g,fi(hi.get(g)||null,e,r,i,l,f)),!0;case"gotpointercapture":return g=f.pointerId,di.set(g,fi(di.get(g)||null,e,r,i,l,f)),!0}return!1}function Yp(e){var r=kr(e.target);if(r!==null){var i=xr(r);if(i!==null){if(r=i.tag,r===13){if(r=Mp(i),r!==null){e.blockedOn=r,qp(e.priority,function(){Wp(i)});return}}else if(r===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Da(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var i=Bu(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);Tu=l,i.target.dispatchEvent(l),Tu=null}else return r=Ci(i),r!==null&&ju(r),e.blockedOn=i,!1;r.shift()}return!0}function Kp(e,r,i){Da(e)&&i.delete(r)}function Ab(){$u=!1,Hn!==null&&Da(Hn)&&(Hn=null),Vn!==null&&Da(Vn)&&(Vn=null),Wn!==null&&Da(Wn)&&(Wn=null),hi.forEach(Kp),di.forEach(Kp)}function pi(e,r){e.blockedOn===r&&(e.blockedOn=null,$u||($u=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ab)))}function gi(e){function r(f){return pi(f,e)}if(0<Oa.length){pi(Oa[0],e);for(var i=1;i<Oa.length;i++){var l=Oa[i];l.blockedOn===e&&(l.blockedOn=null)}}for(Hn!==null&&pi(Hn,e),Vn!==null&&pi(Vn,e),Wn!==null&&pi(Wn,e),hi.forEach(r),di.forEach(r),i=0;i<Gn.length;i++)l=Gn[i],l.blockedOn===e&&(l.blockedOn=null);for(;0<Gn.length&&(i=Gn[0],i.blockedOn===null);)Yp(i),i.blockedOn===null&&Gn.shift()}var ss=j.ReactCurrentBatchConfig,Fa=!0;function Cb(e,r,i,l){var f=Re,g=ss.transition;ss.transition=null;try{Re=1,zu(e,r,i,l)}finally{Re=f,ss.transition=g}}function Tb(e,r,i,l){var f=Re,g=ss.transition;ss.transition=null;try{Re=4,zu(e,r,i,l)}finally{Re=f,ss.transition=g}}function zu(e,r,i,l){if(Fa){var f=Bu(e,r,i,l);if(f===null)sc(e,r,l,ja,i),Xp(e,l);else if(kb(f,e,r,i,l))l.stopPropagation();else if(Xp(e,l),r&4&&-1<xb.indexOf(e)){for(;f!==null;){var g=Ci(f);if(g!==null&&Vp(g),g=Bu(e,r,i,l),g===null&&sc(e,r,l,ja,i),g===f)break;f=g}f!==null&&l.stopPropagation()}else sc(e,r,l,null,i)}}var ja=null;function Bu(e,r,i,l){if(ja=null,e=Pu(l),e=kr(e),e!==null)if(r=xr(e),r===null)e=null;else if(i=r.tag,i===13){if(e=Mp(r),e!==null)return e;e=null}else if(i===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return ja=e,null}function Qp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gb()){case Mu:return 1;case zp:return 4;case Ra:case mb:return 16;case Bp:return 536870912;default:return 16}default:return 16}}var qn=null,Uu=null,$a=null;function Jp(){if($a)return $a;var e,r=Uu,i=r.length,l,f="value"in qn?qn.value:qn.textContent,g=f.length;for(e=0;e<i&&r[e]===f[e];e++);var w=i-e;for(l=1;l<=w&&r[i-l]===f[g-l];l++);return $a=f.slice(e,1<l?1-l:void 0)}function za(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function Ba(){return!0}function Zp(){return!1}function Nt(e){function r(i,l,f,g,w){this._reactName=i,this._targetInst=f,this.type=l,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(i=e[S],this[S]=i?i(g):g[S]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ba:Zp,this.isPropagationStopped=Zp,this}return X(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ba)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ba)},persist:function(){},isPersistent:Ba}),r}var is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hu=Nt(is),mi=X({},is,{view:0,detail:0}),Pb=Nt(mi),Vu,Wu,vi,Ua=X({},mi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vi&&(vi&&e.type==="mousemove"?(Vu=e.screenX-vi.screenX,Wu=e.screenY-vi.screenY):Wu=Vu=0,vi=e),Vu)},movementY:function(e){return"movementY"in e?e.movementY:Wu}}),eg=Nt(Ua),Rb=X({},Ua,{dataTransfer:0}),Lb=Nt(Rb),Nb=X({},mi,{relatedTarget:0}),Gu=Nt(Nb),Ib=X({},is,{animationName:0,elapsedTime:0,pseudoElement:0}),Mb=Nt(Ib),Ob=X({},is,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Db=Nt(Ob),Fb=X({},is,{data:0}),tg=Nt(Fb),jb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$b={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bb(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=zb[e])?!!r[e]:!1}function qu(){return Bb}var Ub=X({},mi,{key:function(e){if(e.key){var r=jb[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=za(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$b[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qu,charCode:function(e){return e.type==="keypress"?za(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?za(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hb=Nt(Ub),Vb=X({},Ua,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ng=Nt(Vb),Wb=X({},mi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qu}),Gb=Nt(Wb),qb=X({},is,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xb=Nt(qb),Yb=X({},Ua,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Kb=Nt(Yb),Qb=[9,13,27,32],Xu=h&&"CompositionEvent"in window,yi=null;h&&"documentMode"in document&&(yi=document.documentMode);var Jb=h&&"TextEvent"in window&&!yi,rg=h&&(!Xu||yi&&8<yi&&11>=yi),sg=" ",ig=!1;function ag(e,r){switch(e){case"keyup":return Qb.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function og(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var as=!1;function Zb(e,r){switch(e){case"compositionend":return og(r);case"keypress":return r.which!==32?null:(ig=!0,sg);case"textInput":return e=r.data,e===sg&&ig?null:e;default:return null}}function e_(e,r){if(as)return e==="compositionend"||!Xu&&ag(e,r)?(e=Jp(),$a=Uu=qn=null,as=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return rg&&r.locale!=="ko"?null:r.data;default:return null}}var t_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lg(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!t_[e.type]:r==="textarea"}function ug(e,r,i,l){Pp(l),r=qa(r,"onChange"),0<r.length&&(i=new Hu("onChange","change",null,i,l),e.push({event:i,listeners:r}))}var wi=null,bi=null;function n_(e){Cg(e,0)}function Ha(e){var r=hs(e);if(Vs(r))return e}function r_(e,r){if(e==="change")return r}var cg=!1;if(h){var Yu;if(h){var Ku="oninput"in document;if(!Ku){var hg=document.createElement("div");hg.setAttribute("oninput","return;"),Ku=typeof hg.oninput=="function"}Yu=Ku}else Yu=!1;cg=Yu&&(!document.documentMode||9<document.documentMode)}function dg(){wi&&(wi.detachEvent("onpropertychange",fg),bi=wi=null)}function fg(e){if(e.propertyName==="value"&&Ha(bi)){var r=[];ug(r,bi,e,Pu(e)),Ip(n_,r)}}function s_(e,r,i){e==="focusin"?(dg(),wi=r,bi=i,wi.attachEvent("onpropertychange",fg)):e==="focusout"&&dg()}function i_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ha(bi)}function a_(e,r){if(e==="click")return Ha(r)}function o_(e,r){if(e==="input"||e==="change")return Ha(r)}function l_(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var Qt=typeof Object.is=="function"?Object.is:l_;function _i(e,r){if(Qt(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var i=Object.keys(e),l=Object.keys(r);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var f=i[l];if(!p.call(r,f)||!Qt(e[f],r[f]))return!1}return!0}function pg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gg(e,r){var i=pg(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=r&&l>=r)return{node:i,offset:r-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=pg(i)}}function mg(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?mg(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function vg(){for(var e=window,r=Ws();r instanceof e.HTMLIFrameElement;){try{var i=typeof r.contentWindow.location.href=="string"}catch{i=!1}if(i)e=r.contentWindow;else break;r=Ws(e.document)}return r}function Qu(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function u_(e){var r=vg(),i=e.focusedElem,l=e.selectionRange;if(r!==i&&i&&i.ownerDocument&&mg(i.ownerDocument.documentElement,i)){if(l!==null&&Qu(i)){if(r=l.start,e=l.end,e===void 0&&(e=r),"selectionStart"in i)i.selectionStart=r,i.selectionEnd=Math.min(e,i.value.length);else if(e=(r=i.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var f=i.textContent.length,g=Math.min(l.start,f);l=l.end===void 0?g:Math.min(l.end,f),!e.extend&&g>l&&(f=l,l=g,g=f),f=gg(i,g);var w=gg(i,l);f&&w&&(e.rangeCount!==1||e.anchorNode!==f.node||e.anchorOffset!==f.offset||e.focusNode!==w.node||e.focusOffset!==w.offset)&&(r=r.createRange(),r.setStart(f.node,f.offset),e.removeAllRanges(),g>l?(e.addRange(r),e.extend(w.node,w.offset)):(r.setEnd(w.node,w.offset),e.addRange(r)))}}for(r=[],e=i;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<r.length;i++)e=r[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var c_=h&&"documentMode"in document&&11>=document.documentMode,os=null,Ju=null,Si=null,Zu=!1;function yg(e,r,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Zu||os==null||os!==Ws(l)||(l=os,"selectionStart"in l&&Qu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Si&&_i(Si,l)||(Si=l,l=qa(Ju,"onSelect"),0<l.length&&(r=new Hu("onSelect","select",null,r,i),e.push({event:r,listeners:l}),r.target=os)))}function Va(e,r){var i={};return i[e.toLowerCase()]=r.toLowerCase(),i["Webkit"+e]="webkit"+r,i["Moz"+e]="moz"+r,i}var ls={animationend:Va("Animation","AnimationEnd"),animationiteration:Va("Animation","AnimationIteration"),animationstart:Va("Animation","AnimationStart"),transitionend:Va("Transition","TransitionEnd")},ec={},wg={};h&&(wg=document.createElement("div").style,"AnimationEvent"in window||(delete ls.animationend.animation,delete ls.animationiteration.animation,delete ls.animationstart.animation),"TransitionEvent"in window||delete ls.transitionend.transition);function Wa(e){if(ec[e])return ec[e];if(!ls[e])return e;var r=ls[e],i;for(i in r)if(r.hasOwnProperty(i)&&i in wg)return ec[e]=r[i];return e}var bg=Wa("animationend"),_g=Wa("animationiteration"),Sg=Wa("animationstart"),Eg=Wa("transitionend"),xg=new Map,kg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xn(e,r){xg.set(e,r),o(r,[e])}for(var tc=0;tc<kg.length;tc++){var nc=kg[tc],h_=nc.toLowerCase(),d_=nc[0].toUpperCase()+nc.slice(1);Xn(h_,"on"+d_)}Xn(bg,"onAnimationEnd"),Xn(_g,"onAnimationIteration"),Xn(Sg,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(Eg,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ei="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ei));function Ag(e,r,i){var l=e.type||"unknown-event";e.currentTarget=i,hb(l,r,void 0,e),e.currentTarget=null}function Cg(e,r){r=(r&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],f=l.event;l=l.listeners;e:{var g=void 0;if(r)for(var w=l.length-1;0<=w;w--){var S=l[w],A=S.instance,O=S.currentTarget;if(S=S.listener,A!==g&&f.isPropagationStopped())break e;Ag(f,S,O),g=A}else for(w=0;w<l.length;w++){if(S=l[w],A=S.instance,O=S.currentTarget,S=S.listener,A!==g&&f.isPropagationStopped())break e;Ag(f,S,O),g=A}}}if(Pa)throw e=Iu,Pa=!1,Iu=null,e}function Oe(e,r){var i=r[cc];i===void 0&&(i=r[cc]=new Set);var l=e+"__bubble";i.has(l)||(Tg(r,e,2,!1),i.add(l))}function rc(e,r,i){var l=0;r&&(l|=4),Tg(i,e,l,r)}var Ga="_reactListening"+Math.random().toString(36).slice(2);function xi(e){if(!e[Ga]){e[Ga]=!0,s.forEach(function(i){i!=="selectionchange"&&(f_.has(i)||rc(i,!1,e),rc(i,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[Ga]||(r[Ga]=!0,rc("selectionchange",!1,r))}}function Tg(e,r,i,l){switch(Qp(r)){case 1:var f=Cb;break;case 4:f=Tb;break;default:f=zu}i=f.bind(null,r,i,e),f=void 0,!Nu||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?e.addEventListener(r,i,{capture:!0,passive:f}):e.addEventListener(r,i,!0):f!==void 0?e.addEventListener(r,i,{passive:f}):e.addEventListener(r,i,!1)}function sc(e,r,i,l,f){var g=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var w=l.tag;if(w===3||w===4){var S=l.stateNode.containerInfo;if(S===f||S.nodeType===8&&S.parentNode===f)break;if(w===4)for(w=l.return;w!==null;){var A=w.tag;if((A===3||A===4)&&(A=w.stateNode.containerInfo,A===f||A.nodeType===8&&A.parentNode===f))return;w=w.return}for(;S!==null;){if(w=kr(S),w===null)return;if(A=w.tag,A===5||A===6){l=g=w;continue e}S=S.parentNode}}l=l.return}Ip(function(){var O=g,U=Pu(i),H=[];e:{var B=xg.get(e);if(B!==void 0){var Y=Hu,Q=e;switch(e){case"keypress":if(za(i)===0)break e;case"keydown":case"keyup":Y=Hb;break;case"focusin":Q="focus",Y=Gu;break;case"focusout":Q="blur",Y=Gu;break;case"beforeblur":case"afterblur":Y=Gu;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=eg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Lb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=Gb;break;case bg:case _g:case Sg:Y=Mb;break;case Eg:Y=Xb;break;case"scroll":Y=Pb;break;case"wheel":Y=Kb;break;case"copy":case"cut":case"paste":Y=Db;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=ng}var J=(r&4)!==0,Ge=!J&&e==="scroll",I=J?B!==null?B+"Capture":null:B;J=[];for(var T=O,M;T!==null;){M=T;var W=M.stateNode;if(M.tag===5&&W!==null&&(M=W,I!==null&&(W=ai(T,I),W!=null&&J.push(ki(T,W,M)))),Ge)break;T=T.return}0<J.length&&(B=new Y(B,Q,null,i,U),H.push({event:B,listeners:J}))}}if((r&7)===0){e:{if(B=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",B&&i!==Tu&&(Q=i.relatedTarget||i.fromElement)&&(kr(Q)||Q[_n]))break e;if((Y||B)&&(B=U.window===U?U:(B=U.ownerDocument)?B.defaultView||B.parentWindow:window,Y?(Q=i.relatedTarget||i.toElement,Y=O,Q=Q?kr(Q):null,Q!==null&&(Ge=xr(Q),Q!==Ge||Q.tag!==5&&Q.tag!==6)&&(Q=null)):(Y=null,Q=O),Y!==Q)){if(J=eg,W="onMouseLeave",I="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(J=ng,W="onPointerLeave",I="onPointerEnter",T="pointer"),Ge=Y==null?B:hs(Y),M=Q==null?B:hs(Q),B=new J(W,T+"leave",Y,i,U),B.target=Ge,B.relatedTarget=M,W=null,kr(U)===O&&(J=new J(I,T+"enter",Q,i,U),J.target=M,J.relatedTarget=Ge,W=J),Ge=W,Y&&Q)t:{for(J=Y,I=Q,T=0,M=J;M;M=us(M))T++;for(M=0,W=I;W;W=us(W))M++;for(;0<T-M;)J=us(J),T--;for(;0<M-T;)I=us(I),M--;for(;T--;){if(J===I||I!==null&&J===I.alternate)break t;J=us(J),I=us(I)}J=null}else J=null;Y!==null&&Pg(H,B,Y,J,!1),Q!==null&&Ge!==null&&Pg(H,Ge,Q,J,!0)}}e:{if(B=O?hs(O):window,Y=B.nodeName&&B.nodeName.toLowerCase(),Y==="select"||Y==="input"&&B.type==="file")var Z=r_;else if(lg(B))if(cg)Z=o_;else{Z=i_;var ne=s_}else(Y=B.nodeName)&&Y.toLowerCase()==="input"&&(B.type==="checkbox"||B.type==="radio")&&(Z=a_);if(Z&&(Z=Z(e,O))){ug(H,Z,i,U);break e}ne&&ne(e,B,O),e==="focusout"&&(ne=B._wrapperState)&&ne.controlled&&B.type==="number"&&Eu(B,"number",B.value)}switch(ne=O?hs(O):window,e){case"focusin":(lg(ne)||ne.contentEditable==="true")&&(os=ne,Ju=O,Si=null);break;case"focusout":Si=Ju=os=null;break;case"mousedown":Zu=!0;break;case"contextmenu":case"mouseup":case"dragend":Zu=!1,yg(H,i,U);break;case"selectionchange":if(c_)break;case"keydown":case"keyup":yg(H,i,U)}var re;if(Xu)e:{switch(e){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else as?ag(e,i)&&(ue="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(ue="onCompositionStart");ue&&(rg&&i.locale!=="ko"&&(as||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&as&&(re=Jp()):(qn=U,Uu="value"in qn?qn.value:qn.textContent,as=!0)),ne=qa(O,ue),0<ne.length&&(ue=new tg(ue,e,null,i,U),H.push({event:ue,listeners:ne}),re?ue.data=re:(re=og(i),re!==null&&(ue.data=re)))),(re=Jb?Zb(e,i):e_(e,i))&&(O=qa(O,"onBeforeInput"),0<O.length&&(U=new tg("onBeforeInput","beforeinput",null,i,U),H.push({event:U,listeners:O}),U.data=re))}Cg(H,r)})}function ki(e,r,i){return{instance:e,listener:r,currentTarget:i}}function qa(e,r){for(var i=r+"Capture",l=[];e!==null;){var f=e,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=ai(e,i),g!=null&&l.unshift(ki(e,g,f)),g=ai(e,r),g!=null&&l.push(ki(e,g,f))),e=e.return}return l}function us(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Pg(e,r,i,l,f){for(var g=r._reactName,w=[];i!==null&&i!==l;){var S=i,A=S.alternate,O=S.stateNode;if(A!==null&&A===l)break;S.tag===5&&O!==null&&(S=O,f?(A=ai(i,g),A!=null&&w.unshift(ki(i,A,S))):f||(A=ai(i,g),A!=null&&w.push(ki(i,A,S)))),i=i.return}w.length!==0&&e.push({event:r,listeners:w})}var p_=/\r\n?/g,g_=/\u0000|\uFFFD/g;function Rg(e){return(typeof e=="string"?e:""+e).replace(p_,`
`).replace(g_,"")}function Xa(e,r,i){if(r=Rg(r),Rg(e)!==r&&i)throw Error(n(425))}function Ya(){}var ic=null,ac=null;function oc(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var lc=typeof setTimeout=="function"?setTimeout:void 0,m_=typeof clearTimeout=="function"?clearTimeout:void 0,Lg=typeof Promise=="function"?Promise:void 0,v_=typeof queueMicrotask=="function"?queueMicrotask:typeof Lg<"u"?function(e){return Lg.resolve(null).then(e).catch(y_)}:lc;function y_(e){setTimeout(function(){throw e})}function uc(e,r){var i=r,l=0;do{var f=i.nextSibling;if(e.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"){if(l===0){e.removeChild(f),gi(r);return}l--}else i!=="$"&&i!=="$?"&&i!=="$!"||l++;i=f}while(i);gi(r)}function Yn(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function Ng(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(r===0)return e;r--}else i==="/$"&&r++}e=e.previousSibling}return null}var cs=Math.random().toString(36).slice(2),on="__reactFiber$"+cs,Ai="__reactProps$"+cs,_n="__reactContainer$"+cs,cc="__reactEvents$"+cs,w_="__reactListeners$"+cs,b_="__reactHandles$"+cs;function kr(e){var r=e[on];if(r)return r;for(var i=e.parentNode;i;){if(r=i[_n]||i[on]){if(i=r.alternate,r.child!==null||i!==null&&i.child!==null)for(e=Ng(e);e!==null;){if(i=e[on])return i;e=Ng(e)}return r}e=i,i=e.parentNode}return null}function Ci(e){return e=e[on]||e[_n],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(n(33))}function Ka(e){return e[Ai]||null}var hc=[],ds=-1;function Kn(e){return{current:e}}function De(e){0>ds||(e.current=hc[ds],hc[ds]=null,ds--)}function Ie(e,r){ds++,hc[ds]=e.current,e.current=r}var Qn={},dt=Kn(Qn),St=Kn(!1),Ar=Qn;function fs(e,r){var i=e.type.contextTypes;if(!i)return Qn;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===r)return l.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in i)f[g]=r[g];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=f),f}function Et(e){return e=e.childContextTypes,e!=null}function Qa(){De(St),De(dt)}function Ig(e,r,i){if(dt.current!==Qn)throw Error(n(168));Ie(dt,r),Ie(St,i)}function Mg(e,r,i){var l=e.stateNode;if(r=r.childContextTypes,typeof l.getChildContext!="function")return i;l=l.getChildContext();for(var f in l)if(!(f in r))throw Error(n(108,ge(e)||"Unknown",f));return X({},i,l)}function Ja(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qn,Ar=dt.current,Ie(dt,e),Ie(St,St.current),!0}function Og(e,r,i){var l=e.stateNode;if(!l)throw Error(n(169));i?(e=Mg(e,r,Ar),l.__reactInternalMemoizedMergedChildContext=e,De(St),De(dt),Ie(dt,e)):De(St),Ie(St,i)}var Sn=null,Za=!1,dc=!1;function Dg(e){Sn===null?Sn=[e]:Sn.push(e)}function __(e){Za=!0,Dg(e)}function Jn(){if(!dc&&Sn!==null){dc=!0;var e=0,r=Re;try{var i=Sn;for(Re=1;e<i.length;e++){var l=i[e];do l=l(!0);while(l!==null)}Sn=null,Za=!1}catch(f){throw Sn!==null&&(Sn=Sn.slice(e+1)),jp(Mu,Jn),f}finally{Re=r,dc=!1}}return null}var ps=[],gs=0,eo=null,to=0,jt=[],$t=0,Cr=null,En=1,xn="";function Tr(e,r){ps[gs++]=to,ps[gs++]=eo,eo=e,to=r}function Fg(e,r,i){jt[$t++]=En,jt[$t++]=xn,jt[$t++]=Cr,Cr=e;var l=En;e=xn;var f=32-Kt(l)-1;l&=~(1<<f),i+=1;var g=32-Kt(r)+f;if(30<g){var w=f-f%5;g=(l&(1<<w)-1).toString(32),l>>=w,f-=w,En=1<<32-Kt(r)+f|i<<f|l,xn=g+e}else En=1<<g|i<<f|l,xn=e}function fc(e){e.return!==null&&(Tr(e,1),Fg(e,1,0))}function pc(e){for(;e===eo;)eo=ps[--gs],ps[gs]=null,to=ps[--gs],ps[gs]=null;for(;e===Cr;)Cr=jt[--$t],jt[$t]=null,xn=jt[--$t],jt[$t]=null,En=jt[--$t],jt[$t]=null}var It=null,Mt=null,$e=!1,Jt=null;function jg(e,r){var i=Ht(5,null,null,0);i.elementType="DELETED",i.stateNode=r,i.return=e,r=e.deletions,r===null?(e.deletions=[i],e.flags|=16):r.push(i)}function $g(e,r){switch(e.tag){case 5:var i=e.type;return r=r.nodeType!==1||i.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,It=e,Mt=Yn(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,It=e,Mt=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(i=Cr!==null?{id:En,overflow:xn}:null,e.memoizedState={dehydrated:r,treeContext:i,retryLane:1073741824},i=Ht(18,null,null,0),i.stateNode=r,i.return=e,e.child=i,It=e,Mt=null,!0):!1;default:return!1}}function gc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function mc(e){if($e){var r=Mt;if(r){var i=r;if(!$g(e,r)){if(gc(e))throw Error(n(418));r=Yn(i.nextSibling);var l=It;r&&$g(e,r)?jg(l,i):(e.flags=e.flags&-4097|2,$e=!1,It=e)}}else{if(gc(e))throw Error(n(418));e.flags=e.flags&-4097|2,$e=!1,It=e}}}function zg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;It=e}function no(e){if(e!==It)return!1;if(!$e)return zg(e),$e=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!oc(e.type,e.memoizedProps)),r&&(r=Mt)){if(gc(e))throw Bg(),Error(n(418));for(;r;)jg(e,r),r=Yn(r.nextSibling)}if(zg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(r===0){Mt=Yn(e.nextSibling);break e}r--}else i!=="$"&&i!=="$!"&&i!=="$?"||r++}e=e.nextSibling}Mt=null}}else Mt=It?Yn(e.stateNode.nextSibling):null;return!0}function Bg(){for(var e=Mt;e;)e=Yn(e.nextSibling)}function ms(){Mt=It=null,$e=!1}function vc(e){Jt===null?Jt=[e]:Jt.push(e)}var S_=j.ReactCurrentBatchConfig;function Ti(e,r,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(n(309));var l=i.stateNode}if(!l)throw Error(n(147,e));var f=l,g=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===g?r.ref:(r=function(w){var S=f.refs;w===null?delete S[g]:S[g]=w},r._stringRef=g,r)}if(typeof e!="string")throw Error(n(284));if(!i._owner)throw Error(n(290,e))}return e}function ro(e,r){throw e=Object.prototype.toString.call(r),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function Ug(e){var r=e._init;return r(e._payload)}function Hg(e){function r(I,T){if(e){var M=I.deletions;M===null?(I.deletions=[T],I.flags|=16):M.push(T)}}function i(I,T){if(!e)return null;for(;T!==null;)r(I,T),T=T.sibling;return null}function l(I,T){for(I=new Map;T!==null;)T.key!==null?I.set(T.key,T):I.set(T.index,T),T=T.sibling;return I}function f(I,T){return I=ar(I,T),I.index=0,I.sibling=null,I}function g(I,T,M){return I.index=M,e?(M=I.alternate,M!==null?(M=M.index,M<T?(I.flags|=2,T):M):(I.flags|=2,T)):(I.flags|=1048576,T)}function w(I){return e&&I.alternate===null&&(I.flags|=2),I}function S(I,T,M,W){return T===null||T.tag!==6?(T=oh(M,I.mode,W),T.return=I,T):(T=f(T,M),T.return=I,T)}function A(I,T,M,W){var Z=M.type;return Z===G?U(I,T,M.props.children,W,M.key):T!==null&&(T.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===le&&Ug(Z)===T.type)?(W=f(T,M.props),W.ref=Ti(I,T,M),W.return=I,W):(W=To(M.type,M.key,M.props,null,I.mode,W),W.ref=Ti(I,T,M),W.return=I,W)}function O(I,T,M,W){return T===null||T.tag!==4||T.stateNode.containerInfo!==M.containerInfo||T.stateNode.implementation!==M.implementation?(T=lh(M,I.mode,W),T.return=I,T):(T=f(T,M.children||[]),T.return=I,T)}function U(I,T,M,W,Z){return T===null||T.tag!==7?(T=Dr(M,I.mode,W,Z),T.return=I,T):(T=f(T,M),T.return=I,T)}function H(I,T,M){if(typeof T=="string"&&T!==""||typeof T=="number")return T=oh(""+T,I.mode,M),T.return=I,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case z:return M=To(T.type,T.key,T.props,null,I.mode,M),M.ref=Ti(I,null,T),M.return=I,M;case V:return T=lh(T,I.mode,M),T.return=I,T;case le:var W=T._init;return H(I,W(T._payload),M)}if(ri(T)||te(T))return T=Dr(T,I.mode,M,null),T.return=I,T;ro(I,T)}return null}function B(I,T,M,W){var Z=T!==null?T.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return Z!==null?null:S(I,T,""+M,W);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case z:return M.key===Z?A(I,T,M,W):null;case V:return M.key===Z?O(I,T,M,W):null;case le:return Z=M._init,B(I,T,Z(M._payload),W)}if(ri(M)||te(M))return Z!==null?null:U(I,T,M,W,null);ro(I,M)}return null}function Y(I,T,M,W,Z){if(typeof W=="string"&&W!==""||typeof W=="number")return I=I.get(M)||null,S(T,I,""+W,Z);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case z:return I=I.get(W.key===null?M:W.key)||null,A(T,I,W,Z);case V:return I=I.get(W.key===null?M:W.key)||null,O(T,I,W,Z);case le:var ne=W._init;return Y(I,T,M,ne(W._payload),Z)}if(ri(W)||te(W))return I=I.get(M)||null,U(T,I,W,Z,null);ro(T,W)}return null}function Q(I,T,M,W){for(var Z=null,ne=null,re=T,ue=T=0,it=null;re!==null&&ue<M.length;ue++){re.index>ue?(it=re,re=null):it=re.sibling;var _e=B(I,re,M[ue],W);if(_e===null){re===null&&(re=it);break}e&&re&&_e.alternate===null&&r(I,re),T=g(_e,T,ue),ne===null?Z=_e:ne.sibling=_e,ne=_e,re=it}if(ue===M.length)return i(I,re),$e&&Tr(I,ue),Z;if(re===null){for(;ue<M.length;ue++)re=H(I,M[ue],W),re!==null&&(T=g(re,T,ue),ne===null?Z=re:ne.sibling=re,ne=re);return $e&&Tr(I,ue),Z}for(re=l(I,re);ue<M.length;ue++)it=Y(re,I,ue,M[ue],W),it!==null&&(e&&it.alternate!==null&&re.delete(it.key===null?ue:it.key),T=g(it,T,ue),ne===null?Z=it:ne.sibling=it,ne=it);return e&&re.forEach(function(or){return r(I,or)}),$e&&Tr(I,ue),Z}function J(I,T,M,W){var Z=te(M);if(typeof Z!="function")throw Error(n(150));if(M=Z.call(M),M==null)throw Error(n(151));for(var ne=Z=null,re=T,ue=T=0,it=null,_e=M.next();re!==null&&!_e.done;ue++,_e=M.next()){re.index>ue?(it=re,re=null):it=re.sibling;var or=B(I,re,_e.value,W);if(or===null){re===null&&(re=it);break}e&&re&&or.alternate===null&&r(I,re),T=g(or,T,ue),ne===null?Z=or:ne.sibling=or,ne=or,re=it}if(_e.done)return i(I,re),$e&&Tr(I,ue),Z;if(re===null){for(;!_e.done;ue++,_e=M.next())_e=H(I,_e.value,W),_e!==null&&(T=g(_e,T,ue),ne===null?Z=_e:ne.sibling=_e,ne=_e);return $e&&Tr(I,ue),Z}for(re=l(I,re);!_e.done;ue++,_e=M.next())_e=Y(re,I,ue,_e.value,W),_e!==null&&(e&&_e.alternate!==null&&re.delete(_e.key===null?ue:_e.key),T=g(_e,T,ue),ne===null?Z=_e:ne.sibling=_e,ne=_e);return e&&re.forEach(function(t1){return r(I,t1)}),$e&&Tr(I,ue),Z}function Ge(I,T,M,W){if(typeof M=="object"&&M!==null&&M.type===G&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case z:e:{for(var Z=M.key,ne=T;ne!==null;){if(ne.key===Z){if(Z=M.type,Z===G){if(ne.tag===7){i(I,ne.sibling),T=f(ne,M.props.children),T.return=I,I=T;break e}}else if(ne.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===le&&Ug(Z)===ne.type){i(I,ne.sibling),T=f(ne,M.props),T.ref=Ti(I,ne,M),T.return=I,I=T;break e}i(I,ne);break}else r(I,ne);ne=ne.sibling}M.type===G?(T=Dr(M.props.children,I.mode,W,M.key),T.return=I,I=T):(W=To(M.type,M.key,M.props,null,I.mode,W),W.ref=Ti(I,T,M),W.return=I,I=W)}return w(I);case V:e:{for(ne=M.key;T!==null;){if(T.key===ne)if(T.tag===4&&T.stateNode.containerInfo===M.containerInfo&&T.stateNode.implementation===M.implementation){i(I,T.sibling),T=f(T,M.children||[]),T.return=I,I=T;break e}else{i(I,T);break}else r(I,T);T=T.sibling}T=lh(M,I.mode,W),T.return=I,I=T}return w(I);case le:return ne=M._init,Ge(I,T,ne(M._payload),W)}if(ri(M))return Q(I,T,M,W);if(te(M))return J(I,T,M,W);ro(I,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,T!==null&&T.tag===6?(i(I,T.sibling),T=f(T,M),T.return=I,I=T):(i(I,T),T=oh(M,I.mode,W),T.return=I,I=T),w(I)):i(I,T)}return Ge}var vs=Hg(!0),Vg=Hg(!1),so=Kn(null),io=null,ys=null,yc=null;function wc(){yc=ys=io=null}function bc(e){var r=so.current;De(so),e._currentValue=r}function _c(e,r,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),e===i)break;e=e.return}}function ws(e,r){io=e,yc=ys=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&r)!==0&&(xt=!0),e.firstContext=null)}function zt(e){var r=e._currentValue;if(yc!==e)if(e={context:e,memoizedValue:r,next:null},ys===null){if(io===null)throw Error(n(308));ys=e,io.dependencies={lanes:0,firstContext:e}}else ys=ys.next=e;return r}var Pr=null;function Sc(e){Pr===null?Pr=[e]:Pr.push(e)}function Wg(e,r,i,l){var f=r.interleaved;return f===null?(i.next=i,Sc(r)):(i.next=f.next,f.next=i),r.interleaved=i,kn(e,l)}function kn(e,r){e.lanes|=r;var i=e.alternate;for(i!==null&&(i.lanes|=r),i=e,e=e.return;e!==null;)e.childLanes|=r,i=e.alternate,i!==null&&(i.childLanes|=r),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Zn=!1;function Ec(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gg(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function An(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function er(e,r,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(we&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,kn(e,i)}return f=l.interleaved,f===null?(r.next=r,Sc(l)):(r.next=f.next,f.next=r),l.interleaved=r,kn(e,i)}function ao(e,r,i){if(r=r.updateQueue,r!==null&&(r=r.shared,(i&4194240)!==0)){var l=r.lanes;l&=e.pendingLanes,i|=l,r.lanes=i,Fu(e,i)}}function qg(e,r){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var f=null,g=null;if(i=i.firstBaseUpdate,i!==null){do{var w={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};g===null?f=g=w:g=g.next=w,i=i.next}while(i!==null);g===null?f=g=r:g=g.next=r}else f=g=r;i={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:l.shared,effects:l.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=r:e.next=r,i.lastBaseUpdate=r}function oo(e,r,i,l){var f=e.updateQueue;Zn=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var A=S,O=A.next;A.next=null,w===null?g=O:w.next=O,w=A;var U=e.alternate;U!==null&&(U=U.updateQueue,S=U.lastBaseUpdate,S!==w&&(S===null?U.firstBaseUpdate=O:S.next=O,U.lastBaseUpdate=A))}if(g!==null){var H=f.baseState;w=0,U=O=A=null,S=g;do{var B=S.lane,Y=S.eventTime;if((l&B)===B){U!==null&&(U=U.next={eventTime:Y,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var Q=e,J=S;switch(B=r,Y=i,J.tag){case 1:if(Q=J.payload,typeof Q=="function"){H=Q.call(Y,H,B);break e}H=Q;break e;case 3:Q.flags=Q.flags&-65537|128;case 0:if(Q=J.payload,B=typeof Q=="function"?Q.call(Y,H,B):Q,B==null)break e;H=X({},H,B);break e;case 2:Zn=!0}}S.callback!==null&&S.lane!==0&&(e.flags|=64,B=f.effects,B===null?f.effects=[S]:B.push(S))}else Y={eventTime:Y,lane:B,tag:S.tag,payload:S.payload,callback:S.callback,next:null},U===null?(O=U=Y,A=H):U=U.next=Y,w|=B;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;B=S,S=B.next,B.next=null,f.lastBaseUpdate=B,f.shared.pending=null}}while(!0);if(U===null&&(A=H),f.baseState=A,f.firstBaseUpdate=O,f.lastBaseUpdate=U,r=f.shared.interleaved,r!==null){f=r;do w|=f.lane,f=f.next;while(f!==r)}else g===null&&(f.shared.lanes=0);Nr|=w,e.lanes=w,e.memoizedState=H}}function Xg(e,r,i){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var l=e[r],f=l.callback;if(f!==null){if(l.callback=null,l=i,typeof f!="function")throw Error(n(191,f));f.call(l)}}}var Pi={},ln=Kn(Pi),Ri=Kn(Pi),Li=Kn(Pi);function Rr(e){if(e===Pi)throw Error(n(174));return e}function xc(e,r){switch(Ie(Li,r),Ie(Ri,e),Ie(ln,Pi),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ku(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=ku(r,e)}De(ln),Ie(ln,r)}function bs(){De(ln),De(Ri),De(Li)}function Yg(e){Rr(Li.current);var r=Rr(ln.current),i=ku(r,e.type);r!==i&&(Ie(Ri,e),Ie(ln,i))}function kc(e){Ri.current===e&&(De(ln),De(Ri))}var ze=Kn(0);function lo(e){for(var r=e;r!==null;){if(r.tag===13){var i=r.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ac=[];function Cc(){for(var e=0;e<Ac.length;e++)Ac[e]._workInProgressVersionPrimary=null;Ac.length=0}var uo=j.ReactCurrentDispatcher,Tc=j.ReactCurrentBatchConfig,Lr=0,Be=null,Qe=null,rt=null,co=!1,Ni=!1,Ii=0,E_=0;function ft(){throw Error(n(321))}function Pc(e,r){if(r===null)return!1;for(var i=0;i<r.length&&i<e.length;i++)if(!Qt(e[i],r[i]))return!1;return!0}function Rc(e,r,i,l,f,g){if(Lr=g,Be=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,uo.current=e===null||e.memoizedState===null?C_:T_,e=i(l,f),Ni){g=0;do{if(Ni=!1,Ii=0,25<=g)throw Error(n(301));g+=1,rt=Qe=null,r.updateQueue=null,uo.current=P_,e=i(l,f)}while(Ni)}if(uo.current=po,r=Qe!==null&&Qe.next!==null,Lr=0,rt=Qe=Be=null,co=!1,r)throw Error(n(300));return e}function Lc(){var e=Ii!==0;return Ii=0,e}function un(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Be.memoizedState=rt=e:rt=rt.next=e,rt}function Bt(){if(Qe===null){var e=Be.alternate;e=e!==null?e.memoizedState:null}else e=Qe.next;var r=rt===null?Be.memoizedState:rt.next;if(r!==null)rt=r,Qe=e;else{if(e===null)throw Error(n(310));Qe=e,e={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},rt===null?Be.memoizedState=rt=e:rt=rt.next=e}return rt}function Mi(e,r){return typeof r=="function"?r(e):r}function Nc(e){var r=Bt(),i=r.queue;if(i===null)throw Error(n(311));i.lastRenderedReducer=e;var l=Qe,f=l.baseQueue,g=i.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}l.baseQueue=f=g,i.pending=null}if(f!==null){g=f.next,l=l.baseState;var S=w=null,A=null,O=g;do{var U=O.lane;if((Lr&U)===U)A!==null&&(A=A.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),l=O.hasEagerState?O.eagerState:e(l,O.action);else{var H={lane:U,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};A===null?(S=A=H,w=l):A=A.next=H,Be.lanes|=U,Nr|=U}O=O.next}while(O!==null&&O!==g);A===null?w=l:A.next=S,Qt(l,r.memoizedState)||(xt=!0),r.memoizedState=l,r.baseState=w,r.baseQueue=A,i.lastRenderedState=l}if(e=i.interleaved,e!==null){f=e;do g=f.lane,Be.lanes|=g,Nr|=g,f=f.next;while(f!==e)}else f===null&&(i.lanes=0);return[r.memoizedState,i.dispatch]}function Ic(e){var r=Bt(),i=r.queue;if(i===null)throw Error(n(311));i.lastRenderedReducer=e;var l=i.dispatch,f=i.pending,g=r.memoizedState;if(f!==null){i.pending=null;var w=f=f.next;do g=e(g,w.action),w=w.next;while(w!==f);Qt(g,r.memoizedState)||(xt=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),i.lastRenderedState=g}return[g,l]}function Kg(){}function Qg(e,r){var i=Be,l=Bt(),f=r(),g=!Qt(l.memoizedState,f);if(g&&(l.memoizedState=f,xt=!0),l=l.queue,Mc(em.bind(null,i,l,e),[e]),l.getSnapshot!==r||g||rt!==null&&rt.memoizedState.tag&1){if(i.flags|=2048,Oi(9,Zg.bind(null,i,l,f,r),void 0,null),st===null)throw Error(n(349));(Lr&30)!==0||Jg(i,r,f)}return f}function Jg(e,r,i){e.flags|=16384,e={getSnapshot:r,value:i},r=Be.updateQueue,r===null?(r={lastEffect:null,stores:null},Be.updateQueue=r,r.stores=[e]):(i=r.stores,i===null?r.stores=[e]:i.push(e))}function Zg(e,r,i,l){r.value=i,r.getSnapshot=l,tm(r)&&nm(e)}function em(e,r,i){return i(function(){tm(r)&&nm(e)})}function tm(e){var r=e.getSnapshot;e=e.value;try{var i=r();return!Qt(e,i)}catch{return!0}}function nm(e){var r=kn(e,1);r!==null&&nn(r,e,1,-1)}function rm(e){var r=un();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:e},r.queue=e,e=e.dispatch=A_.bind(null,Be,e),[r.memoizedState,e]}function Oi(e,r,i,l){return e={tag:e,create:r,destroy:i,deps:l,next:null},r=Be.updateQueue,r===null?(r={lastEffect:null,stores:null},Be.updateQueue=r,r.lastEffect=e.next=e):(i=r.lastEffect,i===null?r.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,r.lastEffect=e)),e}function sm(){return Bt().memoizedState}function ho(e,r,i,l){var f=un();Be.flags|=e,f.memoizedState=Oi(1|r,i,void 0,l===void 0?null:l)}function fo(e,r,i,l){var f=Bt();l=l===void 0?null:l;var g=void 0;if(Qe!==null){var w=Qe.memoizedState;if(g=w.destroy,l!==null&&Pc(l,w.deps)){f.memoizedState=Oi(r,i,g,l);return}}Be.flags|=e,f.memoizedState=Oi(1|r,i,g,l)}function im(e,r){return ho(8390656,8,e,r)}function Mc(e,r){return fo(2048,8,e,r)}function am(e,r){return fo(4,2,e,r)}function om(e,r){return fo(4,4,e,r)}function lm(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function um(e,r,i){return i=i!=null?i.concat([e]):null,fo(4,4,lm.bind(null,r,e),i)}function Oc(){}function cm(e,r){var i=Bt();r=r===void 0?null:r;var l=i.memoizedState;return l!==null&&r!==null&&Pc(r,l[1])?l[0]:(i.memoizedState=[e,r],e)}function hm(e,r){var i=Bt();r=r===void 0?null:r;var l=i.memoizedState;return l!==null&&r!==null&&Pc(r,l[1])?l[0]:(e=e(),i.memoizedState=[e,r],e)}function dm(e,r,i){return(Lr&21)===0?(e.baseState&&(e.baseState=!1,xt=!0),e.memoizedState=i):(Qt(i,r)||(i=Up(),Be.lanes|=i,Nr|=i,e.baseState=!0),r)}function x_(e,r){var i=Re;Re=i!==0&&4>i?i:4,e(!0);var l=Tc.transition;Tc.transition={};try{e(!1),r()}finally{Re=i,Tc.transition=l}}function fm(){return Bt().memoizedState}function k_(e,r,i){var l=sr(e);if(i={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null},pm(e))gm(r,i);else if(i=Wg(e,r,i,l),i!==null){var f=wt();nn(i,e,l,f),mm(i,r,l)}}function A_(e,r,i){var l=sr(e),f={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null};if(pm(e))gm(r,f);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var w=r.lastRenderedState,S=g(w,i);if(f.hasEagerState=!0,f.eagerState=S,Qt(S,w)){var A=r.interleaved;A===null?(f.next=f,Sc(r)):(f.next=A.next,A.next=f),r.interleaved=f;return}}catch{}finally{}i=Wg(e,r,f,l),i!==null&&(f=wt(),nn(i,e,l,f),mm(i,r,l))}}function pm(e){var r=e.alternate;return e===Be||r!==null&&r===Be}function gm(e,r){Ni=co=!0;var i=e.pending;i===null?r.next=r:(r.next=i.next,i.next=r),e.pending=r}function mm(e,r,i){if((i&4194240)!==0){var l=r.lanes;l&=e.pendingLanes,i|=l,r.lanes=i,Fu(e,i)}}var po={readContext:zt,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},C_={readContext:zt,useCallback:function(e,r){return un().memoizedState=[e,r===void 0?null:r],e},useContext:zt,useEffect:im,useImperativeHandle:function(e,r,i){return i=i!=null?i.concat([e]):null,ho(4194308,4,lm.bind(null,r,e),i)},useLayoutEffect:function(e,r){return ho(4194308,4,e,r)},useInsertionEffect:function(e,r){return ho(4,2,e,r)},useMemo:function(e,r){var i=un();return r=r===void 0?null:r,e=e(),i.memoizedState=[e,r],e},useReducer:function(e,r,i){var l=un();return r=i!==void 0?i(r):r,l.memoizedState=l.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},l.queue=e,e=e.dispatch=k_.bind(null,Be,e),[l.memoizedState,e]},useRef:function(e){var r=un();return e={current:e},r.memoizedState=e},useState:rm,useDebugValue:Oc,useDeferredValue:function(e){return un().memoizedState=e},useTransition:function(){var e=rm(!1),r=e[0];return e=x_.bind(null,e[1]),un().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,i){var l=Be,f=un();if($e){if(i===void 0)throw Error(n(407));i=i()}else{if(i=r(),st===null)throw Error(n(349));(Lr&30)!==0||Jg(l,r,i)}f.memoizedState=i;var g={value:i,getSnapshot:r};return f.queue=g,im(em.bind(null,l,g,e),[e]),l.flags|=2048,Oi(9,Zg.bind(null,l,g,i,r),void 0,null),i},useId:function(){var e=un(),r=st.identifierPrefix;if($e){var i=xn,l=En;i=(l&~(1<<32-Kt(l)-1)).toString(32)+i,r=":"+r+"R"+i,i=Ii++,0<i&&(r+="H"+i.toString(32)),r+=":"}else i=E_++,r=":"+r+"r"+i.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},T_={readContext:zt,useCallback:cm,useContext:zt,useEffect:Mc,useImperativeHandle:um,useInsertionEffect:am,useLayoutEffect:om,useMemo:hm,useReducer:Nc,useRef:sm,useState:function(){return Nc(Mi)},useDebugValue:Oc,useDeferredValue:function(e){var r=Bt();return dm(r,Qe.memoizedState,e)},useTransition:function(){var e=Nc(Mi)[0],r=Bt().memoizedState;return[e,r]},useMutableSource:Kg,useSyncExternalStore:Qg,useId:fm,unstable_isNewReconciler:!1},P_={readContext:zt,useCallback:cm,useContext:zt,useEffect:Mc,useImperativeHandle:um,useInsertionEffect:am,useLayoutEffect:om,useMemo:hm,useReducer:Ic,useRef:sm,useState:function(){return Ic(Mi)},useDebugValue:Oc,useDeferredValue:function(e){var r=Bt();return Qe===null?r.memoizedState=e:dm(r,Qe.memoizedState,e)},useTransition:function(){var e=Ic(Mi)[0],r=Bt().memoizedState;return[e,r]},useMutableSource:Kg,useSyncExternalStore:Qg,useId:fm,unstable_isNewReconciler:!1};function Zt(e,r){if(e&&e.defaultProps){r=X({},r),e=e.defaultProps;for(var i in e)r[i]===void 0&&(r[i]=e[i]);return r}return r}function Dc(e,r,i,l){r=e.memoizedState,i=i(l,r),i=i==null?r:X({},r,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var go={isMounted:function(e){return(e=e._reactInternals)?xr(e)===e:!1},enqueueSetState:function(e,r,i){e=e._reactInternals;var l=wt(),f=sr(e),g=An(l,f);g.payload=r,i!=null&&(g.callback=i),r=er(e,g,f),r!==null&&(nn(r,e,f,l),ao(r,e,f))},enqueueReplaceState:function(e,r,i){e=e._reactInternals;var l=wt(),f=sr(e),g=An(l,f);g.tag=1,g.payload=r,i!=null&&(g.callback=i),r=er(e,g,f),r!==null&&(nn(r,e,f,l),ao(r,e,f))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var i=wt(),l=sr(e),f=An(i,l);f.tag=2,r!=null&&(f.callback=r),r=er(e,f,l),r!==null&&(nn(r,e,l,i),ao(r,e,l))}};function vm(e,r,i,l,f,g,w){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,g,w):r.prototype&&r.prototype.isPureReactComponent?!_i(i,l)||!_i(f,g):!0}function ym(e,r,i){var l=!1,f=Qn,g=r.contextType;return typeof g=="object"&&g!==null?g=zt(g):(f=Et(r)?Ar:dt.current,l=r.contextTypes,g=(l=l!=null)?fs(e,f):Qn),r=new r(i,g),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=go,e.stateNode=r,r._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=f,e.__reactInternalMemoizedMaskedChildContext=g),r}function wm(e,r,i,l){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(i,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(i,l),r.state!==e&&go.enqueueReplaceState(r,r.state,null)}function Fc(e,r,i,l){var f=e.stateNode;f.props=i,f.state=e.memoizedState,f.refs={},Ec(e);var g=r.contextType;typeof g=="object"&&g!==null?f.context=zt(g):(g=Et(r)?Ar:dt.current,f.context=fs(e,g)),f.state=e.memoizedState,g=r.getDerivedStateFromProps,typeof g=="function"&&(Dc(e,r,g,i),f.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(r=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),r!==f.state&&go.enqueueReplaceState(f,f.state,null),oo(e,i,f,l),f.state=e.memoizedState),typeof f.componentDidMount=="function"&&(e.flags|=4194308)}function _s(e,r){try{var i="",l=r;do i+=ve(l),l=l.return;while(l);var f=i}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:e,source:r,stack:f,digest:null}}function jc(e,r,i){return{value:e,source:null,stack:i??null,digest:r??null}}function $c(e,r){try{console.error(r.value)}catch(i){setTimeout(function(){throw i})}}var R_=typeof WeakMap=="function"?WeakMap:Map;function bm(e,r,i){i=An(-1,i),i.tag=3,i.payload={element:null};var l=r.value;return i.callback=function(){So||(So=!0,Zc=l),$c(e,r)},i}function _m(e,r,i){i=An(-1,i),i.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var f=r.value;i.payload=function(){return l(f)},i.callback=function(){$c(e,r)}}var g=e.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(i.callback=function(){$c(e,r),typeof l!="function"&&(nr===null?nr=new Set([this]):nr.add(this));var w=r.stack;this.componentDidCatch(r.value,{componentStack:w!==null?w:""})}),i}function Sm(e,r,i){var l=e.pingCache;if(l===null){l=e.pingCache=new R_;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(i)||(f.add(i),e=V_.bind(null,e,r,i),r.then(e,e))}function Em(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function xm(e,r,i,l,f){return(e.mode&1)===0?(e===r?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(r=An(-1,1),r.tag=2,er(i,r,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=f,e)}var L_=j.ReactCurrentOwner,xt=!1;function yt(e,r,i,l){r.child=e===null?Vg(r,null,i,l):vs(r,e.child,i,l)}function km(e,r,i,l,f){i=i.render;var g=r.ref;return ws(r,f),l=Rc(e,r,i,l,g,f),i=Lc(),e!==null&&!xt?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~f,Cn(e,r,f)):($e&&i&&fc(r),r.flags|=1,yt(e,r,l,f),r.child)}function Am(e,r,i,l,f){if(e===null){var g=i.type;return typeof g=="function"&&!ah(g)&&g.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(r.tag=15,r.type=g,Cm(e,r,g,l,f)):(e=To(i.type,null,l,r,r.mode,f),e.ref=r.ref,e.return=r,r.child=e)}if(g=e.child,(e.lanes&f)===0){var w=g.memoizedProps;if(i=i.compare,i=i!==null?i:_i,i(w,l)&&e.ref===r.ref)return Cn(e,r,f)}return r.flags|=1,e=ar(g,l),e.ref=r.ref,e.return=r,r.child=e}function Cm(e,r,i,l,f){if(e!==null){var g=e.memoizedProps;if(_i(g,l)&&e.ref===r.ref)if(xt=!1,r.pendingProps=l=g,(e.lanes&f)!==0)(e.flags&131072)!==0&&(xt=!0);else return r.lanes=e.lanes,Cn(e,r,f)}return zc(e,r,i,l,f)}function Tm(e,r,i){var l=r.pendingProps,f=l.children,g=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(Es,Ot),Ot|=i;else{if((i&1073741824)===0)return e=g!==null?g.baseLanes|i:i,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,Ie(Es,Ot),Ot|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=g!==null?g.baseLanes:i,Ie(Es,Ot),Ot|=l}else g!==null?(l=g.baseLanes|i,r.memoizedState=null):l=i,Ie(Es,Ot),Ot|=l;return yt(e,r,f,i),r.child}function Pm(e,r){var i=r.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(r.flags|=512,r.flags|=2097152)}function zc(e,r,i,l,f){var g=Et(i)?Ar:dt.current;return g=fs(r,g),ws(r,f),i=Rc(e,r,i,l,g,f),l=Lc(),e!==null&&!xt?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~f,Cn(e,r,f)):($e&&l&&fc(r),r.flags|=1,yt(e,r,i,f),r.child)}function Rm(e,r,i,l,f){if(Et(i)){var g=!0;Ja(r)}else g=!1;if(ws(r,f),r.stateNode===null)vo(e,r),ym(r,i,l),Fc(r,i,l,f),l=!0;else if(e===null){var w=r.stateNode,S=r.memoizedProps;w.props=S;var A=w.context,O=i.contextType;typeof O=="object"&&O!==null?O=zt(O):(O=Et(i)?Ar:dt.current,O=fs(r,O));var U=i.getDerivedStateFromProps,H=typeof U=="function"||typeof w.getSnapshotBeforeUpdate=="function";H||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(S!==l||A!==O)&&wm(r,w,l,O),Zn=!1;var B=r.memoizedState;w.state=B,oo(r,l,w,f),A=r.memoizedState,S!==l||B!==A||St.current||Zn?(typeof U=="function"&&(Dc(r,i,U,l),A=r.memoizedState),(S=Zn||vm(r,i,S,l,B,A,O))?(H||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(r.flags|=4194308)):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=A),w.props=l,w.state=A,w.context=O,l=S):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{w=r.stateNode,Gg(e,r),S=r.memoizedProps,O=r.type===r.elementType?S:Zt(r.type,S),w.props=O,H=r.pendingProps,B=w.context,A=i.contextType,typeof A=="object"&&A!==null?A=zt(A):(A=Et(i)?Ar:dt.current,A=fs(r,A));var Y=i.getDerivedStateFromProps;(U=typeof Y=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(S!==H||B!==A)&&wm(r,w,l,A),Zn=!1,B=r.memoizedState,w.state=B,oo(r,l,w,f);var Q=r.memoizedState;S!==H||B!==Q||St.current||Zn?(typeof Y=="function"&&(Dc(r,i,Y,l),Q=r.memoizedState),(O=Zn||vm(r,i,O,l,B,Q,A)||!1)?(U||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(l,Q,A),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(l,Q,A)),typeof w.componentDidUpdate=="function"&&(r.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof w.componentDidUpdate!="function"||S===e.memoizedProps&&B===e.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&B===e.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=Q),w.props=l,w.state=Q,w.context=A,l=O):(typeof w.componentDidUpdate!="function"||S===e.memoizedProps&&B===e.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&B===e.memoizedState||(r.flags|=1024),l=!1)}return Bc(e,r,i,l,g,f)}function Bc(e,r,i,l,f,g){Pm(e,r);var w=(r.flags&128)!==0;if(!l&&!w)return f&&Og(r,i,!1),Cn(e,r,g);l=r.stateNode,L_.current=r;var S=w&&typeof i.getDerivedStateFromError!="function"?null:l.render();return r.flags|=1,e!==null&&w?(r.child=vs(r,e.child,null,g),r.child=vs(r,null,S,g)):yt(e,r,S,g),r.memoizedState=l.state,f&&Og(r,i,!0),r.child}function Lm(e){var r=e.stateNode;r.pendingContext?Ig(e,r.pendingContext,r.pendingContext!==r.context):r.context&&Ig(e,r.context,!1),xc(e,r.containerInfo)}function Nm(e,r,i,l,f){return ms(),vc(f),r.flags|=256,yt(e,r,i,l),r.child}var Uc={dehydrated:null,treeContext:null,retryLane:0};function Hc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Im(e,r,i){var l=r.pendingProps,f=ze.current,g=!1,w=(r.flags&128)!==0,S;if((S=w)||(S=e!==null&&e.memoizedState===null?!1:(f&2)!==0),S?(g=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(f|=1),Ie(ze,f&1),e===null)return mc(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((r.mode&1)===0?r.lanes=1:e.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(w=l.children,e=l.fallback,g?(l=r.mode,g=r.child,w={mode:"hidden",children:w},(l&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Po(w,l,0,null),e=Dr(e,l,i,null),g.return=r,e.return=r,g.sibling=e,r.child=g,r.child.memoizedState=Hc(i),r.memoizedState=Uc,e):Vc(r,w));if(f=e.memoizedState,f!==null&&(S=f.dehydrated,S!==null))return N_(e,r,w,l,S,f,i);if(g){g=l.fallback,w=r.mode,f=e.child,S=f.sibling;var A={mode:"hidden",children:l.children};return(w&1)===0&&r.child!==f?(l=r.child,l.childLanes=0,l.pendingProps=A,r.deletions=null):(l=ar(f,A),l.subtreeFlags=f.subtreeFlags&14680064),S!==null?g=ar(S,g):(g=Dr(g,w,i,null),g.flags|=2),g.return=r,l.return=r,l.sibling=g,r.child=l,l=g,g=r.child,w=e.child.memoizedState,w=w===null?Hc(i):{baseLanes:w.baseLanes|i,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=e.childLanes&~i,r.memoizedState=Uc,l}return g=e.child,e=g.sibling,l=ar(g,{mode:"visible",children:l.children}),(r.mode&1)===0&&(l.lanes=i),l.return=r,l.sibling=null,e!==null&&(i=r.deletions,i===null?(r.deletions=[e],r.flags|=16):i.push(e)),r.child=l,r.memoizedState=null,l}function Vc(e,r){return r=Po({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function mo(e,r,i,l){return l!==null&&vc(l),vs(r,e.child,null,i),e=Vc(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function N_(e,r,i,l,f,g,w){if(i)return r.flags&256?(r.flags&=-257,l=jc(Error(n(422))),mo(e,r,w,l)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(g=l.fallback,f=r.mode,l=Po({mode:"visible",children:l.children},f,0,null),g=Dr(g,f,w,null),g.flags|=2,l.return=r,g.return=r,l.sibling=g,r.child=l,(r.mode&1)!==0&&vs(r,e.child,null,w),r.child.memoizedState=Hc(w),r.memoizedState=Uc,g);if((r.mode&1)===0)return mo(e,r,w,null);if(f.data==="$!"){if(l=f.nextSibling&&f.nextSibling.dataset,l)var S=l.dgst;return l=S,g=Error(n(419)),l=jc(g,l,void 0),mo(e,r,w,l)}if(S=(w&e.childLanes)!==0,xt||S){if(l=st,l!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(l.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,kn(e,f),nn(l,e,f,-1))}return ih(),l=jc(Error(n(421))),mo(e,r,w,l)}return f.data==="$?"?(r.flags|=128,r.child=e.child,r=W_.bind(null,e),f._reactRetry=r,null):(e=g.treeContext,Mt=Yn(f.nextSibling),It=r,$e=!0,Jt=null,e!==null&&(jt[$t++]=En,jt[$t++]=xn,jt[$t++]=Cr,En=e.id,xn=e.overflow,Cr=r),r=Vc(r,l.children),r.flags|=4096,r)}function Mm(e,r,i){e.lanes|=r;var l=e.alternate;l!==null&&(l.lanes|=r),_c(e.return,r,i)}function Wc(e,r,i,l,f){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:f}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=l,g.tail=i,g.tailMode=f)}function Om(e,r,i){var l=r.pendingProps,f=l.revealOrder,g=l.tail;if(yt(e,r,l.children,i),l=ze.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mm(e,i,r);else if(e.tag===19)Mm(e,i,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Ie(ze,l),(r.mode&1)===0)r.memoizedState=null;else switch(f){case"forwards":for(i=r.child,f=null;i!==null;)e=i.alternate,e!==null&&lo(e)===null&&(f=i),i=i.sibling;i=f,i===null?(f=r.child,r.child=null):(f=i.sibling,i.sibling=null),Wc(r,!1,f,i,g);break;case"backwards":for(i=null,f=r.child,r.child=null;f!==null;){if(e=f.alternate,e!==null&&lo(e)===null){r.child=f;break}e=f.sibling,f.sibling=i,i=f,f=e}Wc(r,!0,i,null,g);break;case"together":Wc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function vo(e,r){(r.mode&1)===0&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function Cn(e,r,i){if(e!==null&&(r.dependencies=e.dependencies),Nr|=r.lanes,(i&r.childLanes)===0)return null;if(e!==null&&r.child!==e.child)throw Error(n(153));if(r.child!==null){for(e=r.child,i=ar(e,e.pendingProps),r.child=i,i.return=r;e.sibling!==null;)e=e.sibling,i=i.sibling=ar(e,e.pendingProps),i.return=r;i.sibling=null}return r.child}function I_(e,r,i){switch(r.tag){case 3:Lm(r),ms();break;case 5:Yg(r);break;case 1:Et(r.type)&&Ja(r);break;case 4:xc(r,r.stateNode.containerInfo);break;case 10:var l=r.type._context,f=r.memoizedProps.value;Ie(so,l._currentValue),l._currentValue=f;break;case 13:if(l=r.memoizedState,l!==null)return l.dehydrated!==null?(Ie(ze,ze.current&1),r.flags|=128,null):(i&r.child.childLanes)!==0?Im(e,r,i):(Ie(ze,ze.current&1),e=Cn(e,r,i),e!==null?e.sibling:null);Ie(ze,ze.current&1);break;case 19:if(l=(i&r.childLanes)!==0,(e.flags&128)!==0){if(l)return Om(e,r,i);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ie(ze,ze.current),l)break;return null;case 22:case 23:return r.lanes=0,Tm(e,r,i)}return Cn(e,r,i)}var Dm,Gc,Fm,jm;Dm=function(e,r){for(var i=r.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Gc=function(){},Fm=function(e,r,i,l){var f=e.memoizedProps;if(f!==l){e=r.stateNode,Rr(ln.current);var g=null;switch(i){case"input":f=Aa(e,f),l=Aa(e,l),g=[];break;case"select":f=X({},f,{value:void 0}),l=X({},l,{value:void 0}),g=[];break;case"textarea":f=xu(e,f),l=xu(e,l),g=[];break;default:typeof f.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=Ya)}Au(i,l);var w;i=null;for(O in f)if(!l.hasOwnProperty(O)&&f.hasOwnProperty(O)&&f[O]!=null)if(O==="style"){var S=f[O];for(w in S)S.hasOwnProperty(w)&&(i||(i={}),i[w]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(a.hasOwnProperty(O)?g||(g=[]):(g=g||[]).push(O,null));for(O in l){var A=l[O];if(S=f!=null?f[O]:void 0,l.hasOwnProperty(O)&&A!==S&&(A!=null||S!=null))if(O==="style")if(S){for(w in S)!S.hasOwnProperty(w)||A&&A.hasOwnProperty(w)||(i||(i={}),i[w]="");for(w in A)A.hasOwnProperty(w)&&S[w]!==A[w]&&(i||(i={}),i[w]=A[w])}else i||(g||(g=[]),g.push(O,i)),i=A;else O==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,S=S?S.__html:void 0,A!=null&&S!==A&&(g=g||[]).push(O,A)):O==="children"?typeof A!="string"&&typeof A!="number"||(g=g||[]).push(O,""+A):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(a.hasOwnProperty(O)?(A!=null&&O==="onScroll"&&Oe("scroll",e),g||S===A||(g=[])):(g=g||[]).push(O,A))}i&&(g=g||[]).push("style",i);var O=g;(r.updateQueue=O)&&(r.flags|=4)}},jm=function(e,r,i,l){i!==l&&(r.flags|=4)};function Di(e,r){if(!$e)switch(e.tailMode){case"hidden":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function pt(e){var r=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(r)for(var f=e.child;f!==null;)i|=f.lanes|f.childLanes,l|=f.subtreeFlags&14680064,l|=f.flags&14680064,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)i|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=l,e.childLanes=i,r}function M_(e,r,i){var l=r.pendingProps;switch(pc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(r),null;case 1:return Et(r.type)&&Qa(),pt(r),null;case 3:return l=r.stateNode,bs(),De(St),De(dt),Cc(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(no(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Jt!==null&&(nh(Jt),Jt=null))),Gc(e,r),pt(r),null;case 5:kc(r);var f=Rr(Li.current);if(i=r.type,e!==null&&r.stateNode!=null)Fm(e,r,i,l,f),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!l){if(r.stateNode===null)throw Error(n(166));return pt(r),null}if(e=Rr(ln.current),no(r)){l=r.stateNode,i=r.type;var g=r.memoizedProps;switch(l[on]=r,l[Ai]=g,e=(r.mode&1)!==0,i){case"dialog":Oe("cancel",l),Oe("close",l);break;case"iframe":case"object":case"embed":Oe("load",l);break;case"video":case"audio":for(f=0;f<Ei.length;f++)Oe(Ei[f],l);break;case"source":Oe("error",l);break;case"img":case"image":case"link":Oe("error",l),Oe("load",l);break;case"details":Oe("toggle",l);break;case"input":yp(l,g),Oe("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!g.multiple},Oe("invalid",l);break;case"textarea":_p(l,g),Oe("invalid",l)}Au(i,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var S=g[w];w==="children"?typeof S=="string"?l.textContent!==S&&(g.suppressHydrationWarning!==!0&&Xa(l.textContent,S,e),f=["children",S]):typeof S=="number"&&l.textContent!==""+S&&(g.suppressHydrationWarning!==!0&&Xa(l.textContent,S,e),f=["children",""+S]):a.hasOwnProperty(w)&&S!=null&&w==="onScroll"&&Oe("scroll",l)}switch(i){case"input":es(l),bp(l,g,!0);break;case"textarea":es(l),Ep(l);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(l.onclick=Ya)}l=f,r.updateQueue=l,l!==null&&(r.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xp(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=w.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=w.createElement(i,{is:l.is}):(e=w.createElement(i),i==="select"&&(w=e,l.multiple?w.multiple=!0:l.size&&(w.size=l.size))):e=w.createElementNS(e,i),e[on]=r,e[Ai]=l,Dm(e,r,!1,!1),r.stateNode=e;e:{switch(w=Cu(i,l),i){case"dialog":Oe("cancel",e),Oe("close",e),f=l;break;case"iframe":case"object":case"embed":Oe("load",e),f=l;break;case"video":case"audio":for(f=0;f<Ei.length;f++)Oe(Ei[f],e);f=l;break;case"source":Oe("error",e),f=l;break;case"img":case"image":case"link":Oe("error",e),Oe("load",e),f=l;break;case"details":Oe("toggle",e),f=l;break;case"input":yp(e,l),f=Aa(e,l),Oe("invalid",e);break;case"option":f=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},f=X({},l,{value:void 0}),Oe("invalid",e);break;case"textarea":_p(e,l),f=xu(e,l),Oe("invalid",e);break;default:f=l}Au(i,f),S=f;for(g in S)if(S.hasOwnProperty(g)){var A=S[g];g==="style"?Cp(e,A):g==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&kp(e,A)):g==="children"?typeof A=="string"?(i!=="textarea"||A!=="")&&si(e,A):typeof A=="number"&&si(e,""+A):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(a.hasOwnProperty(g)?A!=null&&g==="onScroll"&&Oe("scroll",e):A!=null&&D(e,g,A,w))}switch(i){case"input":es(e),bp(e,l,!1);break;case"textarea":es(e),Ep(e);break;case"option":l.value!=null&&e.setAttribute("value",""+Ce(l.value));break;case"select":e.multiple=!!l.multiple,g=l.value,g!=null?ts(e,!!l.multiple,g,!1):l.defaultValue!=null&&ts(e,!!l.multiple,l.defaultValue,!0);break;default:typeof f.onClick=="function"&&(e.onclick=Ya)}switch(i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return pt(r),null;case 6:if(e&&r.stateNode!=null)jm(e,r,e.memoizedProps,l);else{if(typeof l!="string"&&r.stateNode===null)throw Error(n(166));if(i=Rr(Li.current),Rr(ln.current),no(r)){if(l=r.stateNode,i=r.memoizedProps,l[on]=r,(g=l.nodeValue!==i)&&(e=It,e!==null))switch(e.tag){case 3:Xa(l.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xa(l.nodeValue,i,(e.mode&1)!==0)}g&&(r.flags|=4)}else l=(i.nodeType===9?i:i.ownerDocument).createTextNode(l),l[on]=r,r.stateNode=l}return pt(r),null;case 13:if(De(ze),l=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($e&&Mt!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Bg(),ms(),r.flags|=98560,g=!1;else if(g=no(r),l!==null&&l.dehydrated!==null){if(e===null){if(!g)throw Error(n(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));g[on]=r}else ms(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;pt(r),g=!1}else Jt!==null&&(nh(Jt),Jt=null),g=!0;if(!g)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=i,r):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(r.child.flags|=8192,(r.mode&1)!==0&&(e===null||(ze.current&1)!==0?Je===0&&(Je=3):ih())),r.updateQueue!==null&&(r.flags|=4),pt(r),null);case 4:return bs(),Gc(e,r),e===null&&xi(r.stateNode.containerInfo),pt(r),null;case 10:return bc(r.type._context),pt(r),null;case 17:return Et(r.type)&&Qa(),pt(r),null;case 19:if(De(ze),g=r.memoizedState,g===null)return pt(r),null;if(l=(r.flags&128)!==0,w=g.rendering,w===null)if(l)Di(g,!1);else{if(Je!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(w=lo(e),w!==null){for(r.flags|=128,Di(g,!1),l=w.updateQueue,l!==null&&(r.updateQueue=l,r.flags|=4),r.subtreeFlags=0,l=i,i=r.child;i!==null;)g=i,e=l,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=e,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,e=w.dependencies,g.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Ie(ze,ze.current&1|2),r.child}e=e.sibling}g.tail!==null&&We()>xs&&(r.flags|=128,l=!0,Di(g,!1),r.lanes=4194304)}else{if(!l)if(e=lo(w),e!==null){if(r.flags|=128,l=!0,i=e.updateQueue,i!==null&&(r.updateQueue=i,r.flags|=4),Di(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!$e)return pt(r),null}else 2*We()-g.renderingStartTime>xs&&i!==1073741824&&(r.flags|=128,l=!0,Di(g,!1),r.lanes=4194304);g.isBackwards?(w.sibling=r.child,r.child=w):(i=g.last,i!==null?i.sibling=w:r.child=w,g.last=w)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=We(),r.sibling=null,i=ze.current,Ie(ze,l?i&1|2:i&1),r):(pt(r),null);case 22:case 23:return sh(),l=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(r.flags|=8192),l&&(r.mode&1)!==0?(Ot&1073741824)!==0&&(pt(r),r.subtreeFlags&6&&(r.flags|=8192)):pt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function O_(e,r){switch(pc(r),r.tag){case 1:return Et(r.type)&&Qa(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return bs(),De(St),De(dt),Cc(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 5:return kc(r),null;case 13:if(De(ze),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(n(340));ms()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return De(ze),null;case 4:return bs(),null;case 10:return bc(r.type._context),null;case 22:case 23:return sh(),null;case 24:return null;default:return null}}var yo=!1,gt=!1,D_=typeof WeakSet=="function"?WeakSet:Set,K=null;function Ss(e,r){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(l){Ue(e,r,l)}else i.current=null}function Od(e,r,i){try{i()}catch(l){Ue(e,r,l)}}var $m=!1;function F_(e,r){if(ic=Fa,e=vg(),Qu(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var f=l.anchorOffset,g=l.focusNode;l=l.focusOffset;try{i.nodeType,g.nodeType}catch{i=null;break e}var w=0,S=-1,A=-1,O=0,U=0,H=e,B=null;t:for(;;){for(var Y;H!==i||f!==0&&H.nodeType!==3||(S=w+f),H!==g||l!==0&&H.nodeType!==3||(A=w+l),H.nodeType===3&&(w+=H.nodeValue.length),(Y=H.firstChild)!==null;)B=H,H=Y;for(;;){if(H===e)break t;if(B===i&&++O===f&&(S=w),B===g&&++U===l&&(A=w),(Y=H.nextSibling)!==null)break;H=B,B=H.parentNode}H=Y}i=S===-1||A===-1?null:{start:S,end:A}}else i=null}i=i||{start:0,end:0}}else i=null;for(ac={focusedElem:e,selectionRange:i},Fa=!1,K=r;K!==null;)if(r=K,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,K=e;else for(;K!==null;){r=K;try{var Q=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(Q!==null){var J=Q.memoizedProps,Ge=Q.memoizedState,I=r.stateNode,T=I.getSnapshotBeforeUpdate(r.elementType===r.type?J:Zt(r.type,J),Ge);I.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var M=r.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(W){Ue(r,r.return,W)}if(e=r.sibling,e!==null){e.return=r.return,K=e;break}K=r.return}return Q=$m,$m=!1,Q}function Fi(e,r,i){var l=r.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var f=l=l.next;do{if((f.tag&e)===e){var g=f.destroy;f.destroy=void 0,g!==void 0&&Od(r,i,g)}f=f.next}while(f!==l)}}function wo(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var l=i.create;i.destroy=l()}i=i.next}while(i!==r)}}function qc(e){var r=e.ref;if(r!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof r=="function"?r(e):r.current=e}}function zm(e){var r=e.alternate;r!==null&&(e.alternate=null,zm(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[on],delete r[Ai],delete r[cc],delete r[w_],delete r[b_])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Bm(e){return e.tag===5||e.tag===3||e.tag===4}function Um(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Bm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xc(e,r,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,r?i.nodeType===8?i.parentNode.insertBefore(e,r):i.insertBefore(e,r):(i.nodeType===8?(r=i.parentNode,r.insertBefore(e,i)):(r=i,r.appendChild(e)),i=i._reactRootContainer,i!=null||r.onclick!==null||(r.onclick=Ya));else if(l!==4&&(e=e.child,e!==null))for(Xc(e,r,i),e=e.sibling;e!==null;)Xc(e,r,i),e=e.sibling}function Yc(e,r,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,r?i.insertBefore(e,r):i.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(Yc(e,r,i),e=e.sibling;e!==null;)Yc(e,r,i),e=e.sibling}var lt=null,en=!1;function tr(e,r,i){for(i=i.child;i!==null;)Hm(e,r,i),i=i.sibling}function Hm(e,r,i){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(La,i)}catch{}switch(i.tag){case 5:gt||Ss(i,r);case 6:var l=lt,f=en;lt=null,tr(e,r,i),lt=l,en=f,lt!==null&&(en?(e=lt,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):lt.removeChild(i.stateNode));break;case 18:lt!==null&&(en?(e=lt,i=i.stateNode,e.nodeType===8?uc(e.parentNode,i):e.nodeType===1&&uc(e,i),gi(e)):uc(lt,i.stateNode));break;case 4:l=lt,f=en,lt=i.stateNode.containerInfo,en=!0,tr(e,r,i),lt=l,en=f;break;case 0:case 11:case 14:case 15:if(!gt&&(l=i.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){f=l=l.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&Od(i,r,w),f=f.next}while(f!==l)}tr(e,r,i);break;case 1:if(!gt&&(Ss(i,r),l=i.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=i.memoizedProps,l.state=i.memoizedState,l.componentWillUnmount()}catch(S){Ue(i,r,S)}tr(e,r,i);break;case 21:tr(e,r,i);break;case 22:i.mode&1?(gt=(l=gt)||i.memoizedState!==null,tr(e,r,i),gt=l):tr(e,r,i);break;default:tr(e,r,i)}}function Vm(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new D_),r.forEach(function(l){var f=G_.bind(null,e,l);i.has(l)||(i.add(l),l.then(f,f))})}}function tn(e,r){var i=r.deletions;if(i!==null)for(var l=0;l<i.length;l++){var f=i[l];try{var g=e,w=r,S=w;e:for(;S!==null;){switch(S.tag){case 5:lt=S.stateNode,en=!1;break e;case 3:lt=S.stateNode.containerInfo,en=!0;break e;case 4:lt=S.stateNode.containerInfo,en=!0;break e}S=S.return}if(lt===null)throw Error(n(160));Hm(g,w,f),lt=null,en=!1;var A=f.alternate;A!==null&&(A.return=null),f.return=null}catch(O){Ue(f,r,O)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Wm(r,e),r=r.sibling}function Wm(e,r){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(tn(r,e),cn(e),l&4){try{Fi(3,e,e.return),wo(3,e)}catch(J){Ue(e,e.return,J)}try{Fi(5,e,e.return)}catch(J){Ue(e,e.return,J)}}break;case 1:tn(r,e),cn(e),l&512&&i!==null&&Ss(i,i.return);break;case 5:if(tn(r,e),cn(e),l&512&&i!==null&&Ss(i,i.return),e.flags&32){var f=e.stateNode;try{si(f,"")}catch(J){Ue(e,e.return,J)}}if(l&4&&(f=e.stateNode,f!=null)){var g=e.memoizedProps,w=i!==null?i.memoizedProps:g,S=e.type,A=e.updateQueue;if(e.updateQueue=null,A!==null)try{S==="input"&&g.type==="radio"&&g.name!=null&&wp(f,g),Cu(S,w);var O=Cu(S,g);for(w=0;w<A.length;w+=2){var U=A[w],H=A[w+1];U==="style"?Cp(f,H):U==="dangerouslySetInnerHTML"?kp(f,H):U==="children"?si(f,H):D(f,U,H,O)}switch(S){case"input":Su(f,g);break;case"textarea":Sp(f,g);break;case"select":var B=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var Y=g.value;Y!=null?ts(f,!!g.multiple,Y,!1):B!==!!g.multiple&&(g.defaultValue!=null?ts(f,!!g.multiple,g.defaultValue,!0):ts(f,!!g.multiple,g.multiple?[]:"",!1))}f[Ai]=g}catch(J){Ue(e,e.return,J)}}break;case 6:if(tn(r,e),cn(e),l&4){if(e.stateNode===null)throw Error(n(162));f=e.stateNode,g=e.memoizedProps;try{f.nodeValue=g}catch(J){Ue(e,e.return,J)}}break;case 3:if(tn(r,e),cn(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{gi(r.containerInfo)}catch(J){Ue(e,e.return,J)}break;case 4:tn(r,e),cn(e);break;case 13:tn(r,e),cn(e),f=e.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Jc=We())),l&4&&Vm(e);break;case 22:if(U=i!==null&&i.memoizedState!==null,e.mode&1?(gt=(O=gt)||U,tn(r,e),gt=O):tn(r,e),cn(e),l&8192){if(O=e.memoizedState!==null,(e.stateNode.isHidden=O)&&!U&&(e.mode&1)!==0)for(K=e,U=e.child;U!==null;){for(H=K=U;K!==null;){switch(B=K,Y=B.child,B.tag){case 0:case 11:case 14:case 15:Fi(4,B,B.return);break;case 1:Ss(B,B.return);var Q=B.stateNode;if(typeof Q.componentWillUnmount=="function"){l=B,i=B.return;try{r=l,Q.props=r.memoizedProps,Q.state=r.memoizedState,Q.componentWillUnmount()}catch(J){Ue(l,i,J)}}break;case 5:Ss(B,B.return);break;case 22:if(B.memoizedState!==null){Xm(H);continue}}Y!==null?(Y.return=B,K=Y):Xm(H)}U=U.sibling}e:for(U=null,H=e;;){if(H.tag===5){if(U===null){U=H;try{f=H.stateNode,O?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(S=H.stateNode,A=H.memoizedProps.style,w=A!=null&&A.hasOwnProperty("display")?A.display:null,S.style.display=Ap("display",w))}catch(J){Ue(e,e.return,J)}}}else if(H.tag===6){if(U===null)try{H.stateNode.nodeValue=O?"":H.memoizedProps}catch(J){Ue(e,e.return,J)}}else if((H.tag!==22&&H.tag!==23||H.memoizedState===null||H===e)&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===e)break e;for(;H.sibling===null;){if(H.return===null||H.return===e)break e;U===H&&(U=null),H=H.return}U===H&&(U=null),H.sibling.return=H.return,H=H.sibling}}break;case 19:tn(r,e),cn(e),l&4&&Vm(e);break;case 21:break;default:tn(r,e),cn(e)}}function cn(e){var r=e.flags;if(r&2){try{e:{for(var i=e.return;i!==null;){if(Bm(i)){var l=i;break e}i=i.return}throw Error(n(160))}switch(l.tag){case 5:var f=l.stateNode;l.flags&32&&(si(f,""),l.flags&=-33);var g=Um(e);Yc(e,g,f);break;case 3:case 4:var w=l.stateNode.containerInfo,S=Um(e);Xc(e,S,w);break;default:throw Error(n(161))}}catch(A){Ue(e,e.return,A)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function j_(e,r,i){K=e,Gm(e)}function Gm(e,r,i){for(var l=(e.mode&1)!==0;K!==null;){var f=K,g=f.child;if(f.tag===22&&l){var w=f.memoizedState!==null||yo;if(!w){var S=f.alternate,A=S!==null&&S.memoizedState!==null||gt;S=yo;var O=gt;if(yo=w,(gt=A)&&!O)for(K=f;K!==null;)w=K,A=w.child,w.tag===22&&w.memoizedState!==null?Ym(f):A!==null?(A.return=w,K=A):Ym(f);for(;g!==null;)K=g,Gm(g),g=g.sibling;K=f,yo=S,gt=O}qm(e)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,K=g):qm(e)}}function qm(e){for(;K!==null;){var r=K;if((r.flags&8772)!==0){var i=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:gt||wo(5,r);break;case 1:var l=r.stateNode;if(r.flags&4&&!gt)if(i===null)l.componentDidMount();else{var f=r.elementType===r.type?i.memoizedProps:Zt(r.type,i.memoizedProps);l.componentDidUpdate(f,i.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var g=r.updateQueue;g!==null&&Xg(r,g,l);break;case 3:var w=r.updateQueue;if(w!==null){if(i=null,r.child!==null)switch(r.child.tag){case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}Xg(r,w,i)}break;case 5:var S=r.stateNode;if(i===null&&r.flags&4){i=S;var A=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&i.focus();break;case"img":A.src&&(i.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var O=r.alternate;if(O!==null){var U=O.memoizedState;if(U!==null){var H=U.dehydrated;H!==null&&gi(H)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}gt||r.flags&512&&qc(r)}catch(B){Ue(r,r.return,B)}}if(r===e){K=null;break}if(i=r.sibling,i!==null){i.return=r.return,K=i;break}K=r.return}}function Xm(e){for(;K!==null;){var r=K;if(r===e){K=null;break}var i=r.sibling;if(i!==null){i.return=r.return,K=i;break}K=r.return}}function Ym(e){for(;K!==null;){var r=K;try{switch(r.tag){case 0:case 11:case 15:var i=r.return;try{wo(4,r)}catch(A){Ue(r,i,A)}break;case 1:var l=r.stateNode;if(typeof l.componentDidMount=="function"){var f=r.return;try{l.componentDidMount()}catch(A){Ue(r,f,A)}}var g=r.return;try{qc(r)}catch(A){Ue(r,g,A)}break;case 5:var w=r.return;try{qc(r)}catch(A){Ue(r,w,A)}}}catch(A){Ue(r,r.return,A)}if(r===e){K=null;break}var S=r.sibling;if(S!==null){S.return=r.return,K=S;break}K=r.return}}var $_=Math.ceil,bo=j.ReactCurrentDispatcher,Kc=j.ReactCurrentOwner,Ut=j.ReactCurrentBatchConfig,we=0,st=null,Xe=null,ut=0,Ot=0,Es=Kn(0),Je=0,ji=null,Nr=0,_o=0,Qc=0,$i=null,kt=null,Jc=0,xs=1/0,Tn=null,So=!1,Zc=null,nr=null,Eo=!1,rr=null,xo=0,zi=0,eh=null,ko=-1,Ao=0;function wt(){return(we&6)!==0?We():ko!==-1?ko:ko=We()}function sr(e){return(e.mode&1)===0?1:(we&2)!==0&&ut!==0?ut&-ut:S_.transition!==null?(Ao===0&&(Ao=Up()),Ao):(e=Re,e!==0||(e=window.event,e=e===void 0?16:Qp(e.type)),e)}function nn(e,r,i,l){if(50<zi)throw zi=0,eh=null,Error(n(185));ci(e,i,l),((we&2)===0||e!==st)&&(e===st&&((we&2)===0&&(_o|=i),Je===4&&ir(e,ut)),At(e,l),i===1&&we===0&&(r.mode&1)===0&&(xs=We()+500,Za&&Jn()))}function At(e,r){var i=e.callbackNode;Sb(e,r);var l=Ma(e,e===st?ut:0);if(l===0)i!==null&&$p(i),e.callbackNode=null,e.callbackPriority=0;else if(r=l&-l,e.callbackPriority!==r){if(i!=null&&$p(i),r===1)e.tag===0?__(Qm.bind(null,e)):Dg(Qm.bind(null,e)),v_(function(){(we&6)===0&&Jn()}),i=null;else{switch(Hp(l)){case 1:i=Mu;break;case 4:i=zp;break;case 16:i=Ra;break;case 536870912:i=Bp;break;default:i=Ra}i=iv(i,Km.bind(null,e))}e.callbackPriority=r,e.callbackNode=i}}function Km(e,r){if(ko=-1,Ao=0,(we&6)!==0)throw Error(n(327));var i=e.callbackNode;if(ks()&&e.callbackNode!==i)return null;var l=Ma(e,e===st?ut:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||r)r=Co(e,l);else{r=l;var f=we;we|=2;var g=Zm();(st!==e||ut!==r)&&(Tn=null,xs=We()+500,Mr(e,r));do try{U_();break}catch(S){Jm(e,S)}while(!0);wc(),bo.current=g,we=f,Xe!==null?r=0:(st=null,ut=0,r=Je)}if(r!==0){if(r===2&&(f=Ou(e),f!==0&&(l=f,r=th(e,f))),r===1)throw i=ji,Mr(e,0),ir(e,l),At(e,We()),i;if(r===6)ir(e,l);else{if(f=e.current.alternate,(l&30)===0&&!z_(f)&&(r=Co(e,l),r===2&&(g=Ou(e),g!==0&&(l=g,r=th(e,g))),r===1))throw i=ji,Mr(e,0),ir(e,l),At(e,We()),i;switch(e.finishedWork=f,e.finishedLanes=l,r){case 0:case 1:throw Error(n(345));case 2:Or(e,kt,Tn);break;case 3:if(ir(e,l),(l&130023424)===l&&(r=Jc+500-We(),10<r)){if(Ma(e,0)!==0)break;if(f=e.suspendedLanes,(f&l)!==l){wt(),e.pingedLanes|=e.suspendedLanes&f;break}e.timeoutHandle=lc(Or.bind(null,e,kt,Tn),r);break}Or(e,kt,Tn);break;case 4:if(ir(e,l),(l&4194240)===l)break;for(r=e.eventTimes,f=-1;0<l;){var w=31-Kt(l);g=1<<w,w=r[w],w>f&&(f=w),l&=~g}if(l=f,l=We()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*$_(l/1960))-l,10<l){e.timeoutHandle=lc(Or.bind(null,e,kt,Tn),l);break}Or(e,kt,Tn);break;case 5:Or(e,kt,Tn);break;default:throw Error(n(329))}}}return At(e,We()),e.callbackNode===i?Km.bind(null,e):null}function th(e,r){var i=$i;return e.current.memoizedState.isDehydrated&&(Mr(e,r).flags|=256),e=Co(e,r),e!==2&&(r=kt,kt=i,r!==null&&nh(r)),e}function nh(e){kt===null?kt=e:kt.push.apply(kt,e)}function z_(e){for(var r=e;;){if(r.flags&16384){var i=r.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var l=0;l<i.length;l++){var f=i[l],g=f.getSnapshot;f=f.value;try{if(!Qt(g(),f))return!1}catch{return!1}}}if(i=r.child,r.subtreeFlags&16384&&i!==null)i.return=r,r=i;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ir(e,r){for(r&=~Qc,r&=~_o,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var i=31-Kt(r),l=1<<i;e[i]=-1,r&=~l}}function Qm(e){if((we&6)!==0)throw Error(n(327));ks();var r=Ma(e,0);if((r&1)===0)return At(e,We()),null;var i=Co(e,r);if(e.tag!==0&&i===2){var l=Ou(e);l!==0&&(r=l,i=th(e,l))}if(i===1)throw i=ji,Mr(e,0),ir(e,r),At(e,We()),i;if(i===6)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,Or(e,kt,Tn),At(e,We()),null}function rh(e,r){var i=we;we|=1;try{return e(r)}finally{we=i,we===0&&(xs=We()+500,Za&&Jn())}}function Ir(e){rr!==null&&rr.tag===0&&(we&6)===0&&ks();var r=we;we|=1;var i=Ut.transition,l=Re;try{if(Ut.transition=null,Re=1,e)return e()}finally{Re=l,Ut.transition=i,we=r,(we&6)===0&&Jn()}}function sh(){Ot=Es.current,De(Es)}function Mr(e,r){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,m_(i)),Xe!==null)for(i=Xe.return;i!==null;){var l=i;switch(pc(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&Qa();break;case 3:bs(),De(St),De(dt),Cc();break;case 5:kc(l);break;case 4:bs();break;case 13:De(ze);break;case 19:De(ze);break;case 10:bc(l.type._context);break;case 22:case 23:sh()}i=i.return}if(st=e,Xe=e=ar(e.current,null),ut=Ot=r,Je=0,ji=null,Qc=_o=Nr=0,kt=$i=null,Pr!==null){for(r=0;r<Pr.length;r++)if(i=Pr[r],l=i.interleaved,l!==null){i.interleaved=null;var f=l.next,g=i.pending;if(g!==null){var w=g.next;g.next=f,l.next=w}i.pending=l}Pr=null}return e}function Jm(e,r){do{var i=Xe;try{if(wc(),uo.current=po,co){for(var l=Be.memoizedState;l!==null;){var f=l.queue;f!==null&&(f.pending=null),l=l.next}co=!1}if(Lr=0,rt=Qe=Be=null,Ni=!1,Ii=0,Kc.current=null,i===null||i.return===null){Je=1,ji=r,Xe=null;break}e:{var g=e,w=i.return,S=i,A=r;if(r=ut,S.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var O=A,U=S,H=U.tag;if((U.mode&1)===0&&(H===0||H===11||H===15)){var B=U.alternate;B?(U.updateQueue=B.updateQueue,U.memoizedState=B.memoizedState,U.lanes=B.lanes):(U.updateQueue=null,U.memoizedState=null)}var Y=Em(w);if(Y!==null){Y.flags&=-257,xm(Y,w,S,g,r),Y.mode&1&&Sm(g,O,r),r=Y,A=O;var Q=r.updateQueue;if(Q===null){var J=new Set;J.add(A),r.updateQueue=J}else Q.add(A);break e}else{if((r&1)===0){Sm(g,O,r),ih();break e}A=Error(n(426))}}else if($e&&S.mode&1){var Ge=Em(w);if(Ge!==null){(Ge.flags&65536)===0&&(Ge.flags|=256),xm(Ge,w,S,g,r),vc(_s(A,S));break e}}g=A=_s(A,S),Je!==4&&(Je=2),$i===null?$i=[g]:$i.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,r&=-r,g.lanes|=r;var I=bm(g,A,r);qg(g,I);break e;case 1:S=A;var T=g.type,M=g.stateNode;if((g.flags&128)===0&&(typeof T.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(nr===null||!nr.has(M)))){g.flags|=65536,r&=-r,g.lanes|=r;var W=_m(g,S,r);qg(g,W);break e}}g=g.return}while(g!==null)}tv(i)}catch(Z){r=Z,Xe===i&&i!==null&&(Xe=i=i.return);continue}break}while(!0)}function Zm(){var e=bo.current;return bo.current=po,e===null?po:e}function ih(){(Je===0||Je===3||Je===2)&&(Je=4),st===null||(Nr&268435455)===0&&(_o&268435455)===0||ir(st,ut)}function Co(e,r){var i=we;we|=2;var l=Zm();(st!==e||ut!==r)&&(Tn=null,Mr(e,r));do try{B_();break}catch(f){Jm(e,f)}while(!0);if(wc(),we=i,bo.current=l,Xe!==null)throw Error(n(261));return st=null,ut=0,Je}function B_(){for(;Xe!==null;)ev(Xe)}function U_(){for(;Xe!==null&&!fb();)ev(Xe)}function ev(e){var r=sv(e.alternate,e,Ot);e.memoizedProps=e.pendingProps,r===null?tv(e):Xe=r,Kc.current=null}function tv(e){var r=e;do{var i=r.alternate;if(e=r.return,(r.flags&32768)===0){if(i=M_(i,r,Ot),i!==null){Xe=i;return}}else{if(i=O_(i,r),i!==null){i.flags&=32767,Xe=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Je=6,Xe=null;return}}if(r=r.sibling,r!==null){Xe=r;return}Xe=r=e}while(r!==null);Je===0&&(Je=5)}function Or(e,r,i){var l=Re,f=Ut.transition;try{Ut.transition=null,Re=1,H_(e,r,i,l)}finally{Ut.transition=f,Re=l}return null}function H_(e,r,i,l){do ks();while(rr!==null);if((we&6)!==0)throw Error(n(327));i=e.finishedWork;var f=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var g=i.lanes|i.childLanes;if(Eb(e,g),e===st&&(Xe=st=null,ut=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||Eo||(Eo=!0,iv(Ra,function(){return ks(),null})),g=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||g){g=Ut.transition,Ut.transition=null;var w=Re;Re=1;var S=we;we|=4,Kc.current=null,F_(e,i),Wm(i,e),u_(ac),Fa=!!ic,ac=ic=null,e.current=i,j_(i),pb(),we=S,Re=w,Ut.transition=g}else e.current=i;if(Eo&&(Eo=!1,rr=e,xo=f),g=e.pendingLanes,g===0&&(nr=null),vb(i.stateNode),At(e,We()),r!==null)for(l=e.onRecoverableError,i=0;i<r.length;i++)f=r[i],l(f.value,{componentStack:f.stack,digest:f.digest});if(So)throw So=!1,e=Zc,Zc=null,e;return(xo&1)!==0&&e.tag!==0&&ks(),g=e.pendingLanes,(g&1)!==0?e===eh?zi++:(zi=0,eh=e):zi=0,Jn(),null}function ks(){if(rr!==null){var e=Hp(xo),r=Ut.transition,i=Re;try{if(Ut.transition=null,Re=16>e?16:e,rr===null)var l=!1;else{if(e=rr,rr=null,xo=0,(we&6)!==0)throw Error(n(331));var f=we;for(we|=4,K=e.current;K!==null;){var g=K,w=g.child;if((K.flags&16)!==0){var S=g.deletions;if(S!==null){for(var A=0;A<S.length;A++){var O=S[A];for(K=O;K!==null;){var U=K;switch(U.tag){case 0:case 11:case 15:Fi(8,U,g)}var H=U.child;if(H!==null)H.return=U,K=H;else for(;K!==null;){U=K;var B=U.sibling,Y=U.return;if(zm(U),U===O){K=null;break}if(B!==null){B.return=Y,K=B;break}K=Y}}}var Q=g.alternate;if(Q!==null){var J=Q.child;if(J!==null){Q.child=null;do{var Ge=J.sibling;J.sibling=null,J=Ge}while(J!==null)}}K=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,K=w;else e:for(;K!==null;){if(g=K,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Fi(9,g,g.return)}var I=g.sibling;if(I!==null){I.return=g.return,K=I;break e}K=g.return}}var T=e.current;for(K=T;K!==null;){w=K;var M=w.child;if((w.subtreeFlags&2064)!==0&&M!==null)M.return=w,K=M;else e:for(w=T;K!==null;){if(S=K,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:wo(9,S)}}catch(Z){Ue(S,S.return,Z)}if(S===w){K=null;break e}var W=S.sibling;if(W!==null){W.return=S.return,K=W;break e}K=S.return}}if(we=f,Jn(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(La,e)}catch{}l=!0}return l}finally{Re=i,Ut.transition=r}}return!1}function nv(e,r,i){r=_s(i,r),r=bm(e,r,1),e=er(e,r,1),r=wt(),e!==null&&(ci(e,1,r),At(e,r))}function Ue(e,r,i){if(e.tag===3)nv(e,e,i);else for(;r!==null;){if(r.tag===3){nv(r,e,i);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(nr===null||!nr.has(l))){e=_s(i,e),e=_m(r,e,1),r=er(r,e,1),e=wt(),r!==null&&(ci(r,1,e),At(r,e));break}}r=r.return}}function V_(e,r,i){var l=e.pingCache;l!==null&&l.delete(r),r=wt(),e.pingedLanes|=e.suspendedLanes&i,st===e&&(ut&i)===i&&(Je===4||Je===3&&(ut&130023424)===ut&&500>We()-Jc?Mr(e,0):Qc|=i),At(e,r)}function rv(e,r){r===0&&((e.mode&1)===0?r=1:(r=Ia,Ia<<=1,(Ia&130023424)===0&&(Ia=4194304)));var i=wt();e=kn(e,r),e!==null&&(ci(e,r,i),At(e,i))}function W_(e){var r=e.memoizedState,i=0;r!==null&&(i=r.retryLane),rv(e,i)}function G_(e,r){var i=0;switch(e.tag){case 13:var l=e.stateNode,f=e.memoizedState;f!==null&&(i=f.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(n(314))}l!==null&&l.delete(r),rv(e,i)}var sv;sv=function(e,r,i){if(e!==null)if(e.memoizedProps!==r.pendingProps||St.current)xt=!0;else{if((e.lanes&i)===0&&(r.flags&128)===0)return xt=!1,I_(e,r,i);xt=(e.flags&131072)!==0}else xt=!1,$e&&(r.flags&1048576)!==0&&Fg(r,to,r.index);switch(r.lanes=0,r.tag){case 2:var l=r.type;vo(e,r),e=r.pendingProps;var f=fs(r,dt.current);ws(r,i),f=Rc(null,r,l,e,f,i);var g=Lc();return r.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Et(l)?(g=!0,Ja(r)):g=!1,r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Ec(r),f.updater=go,r.stateNode=f,f._reactInternals=r,Fc(r,l,e,i),r=Bc(null,r,l,!0,g,i)):(r.tag=0,$e&&g&&fc(r),yt(null,r,f,i),r=r.child),r;case 16:l=r.elementType;e:{switch(vo(e,r),e=r.pendingProps,f=l._init,l=f(l._payload),r.type=l,f=r.tag=X_(l),e=Zt(l,e),f){case 0:r=zc(null,r,l,e,i);break e;case 1:r=Rm(null,r,l,e,i);break e;case 11:r=km(null,r,l,e,i);break e;case 14:r=Am(null,r,l,Zt(l.type,e),i);break e}throw Error(n(306,l,""))}return r;case 0:return l=r.type,f=r.pendingProps,f=r.elementType===l?f:Zt(l,f),zc(e,r,l,f,i);case 1:return l=r.type,f=r.pendingProps,f=r.elementType===l?f:Zt(l,f),Rm(e,r,l,f,i);case 3:e:{if(Lm(r),e===null)throw Error(n(387));l=r.pendingProps,g=r.memoizedState,f=g.element,Gg(e,r),oo(r,l,null,i);var w=r.memoizedState;if(l=w.element,g.isDehydrated)if(g={element:l,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){f=_s(Error(n(423)),r),r=Nm(e,r,l,i,f);break e}else if(l!==f){f=_s(Error(n(424)),r),r=Nm(e,r,l,i,f);break e}else for(Mt=Yn(r.stateNode.containerInfo.firstChild),It=r,$e=!0,Jt=null,i=Vg(r,null,l,i),r.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(ms(),l===f){r=Cn(e,r,i);break e}yt(e,r,l,i)}r=r.child}return r;case 5:return Yg(r),e===null&&mc(r),l=r.type,f=r.pendingProps,g=e!==null?e.memoizedProps:null,w=f.children,oc(l,f)?w=null:g!==null&&oc(l,g)&&(r.flags|=32),Pm(e,r),yt(e,r,w,i),r.child;case 6:return e===null&&mc(r),null;case 13:return Im(e,r,i);case 4:return xc(r,r.stateNode.containerInfo),l=r.pendingProps,e===null?r.child=vs(r,null,l,i):yt(e,r,l,i),r.child;case 11:return l=r.type,f=r.pendingProps,f=r.elementType===l?f:Zt(l,f),km(e,r,l,f,i);case 7:return yt(e,r,r.pendingProps,i),r.child;case 8:return yt(e,r,r.pendingProps.children,i),r.child;case 12:return yt(e,r,r.pendingProps.children,i),r.child;case 10:e:{if(l=r.type._context,f=r.pendingProps,g=r.memoizedProps,w=f.value,Ie(so,l._currentValue),l._currentValue=w,g!==null)if(Qt(g.value,w)){if(g.children===f.children&&!St.current){r=Cn(e,r,i);break e}}else for(g=r.child,g!==null&&(g.return=r);g!==null;){var S=g.dependencies;if(S!==null){w=g.child;for(var A=S.firstContext;A!==null;){if(A.context===l){if(g.tag===1){A=An(-1,i&-i),A.tag=2;var O=g.updateQueue;if(O!==null){O=O.shared;var U=O.pending;U===null?A.next=A:(A.next=U.next,U.next=A),O.pending=A}}g.lanes|=i,A=g.alternate,A!==null&&(A.lanes|=i),_c(g.return,i,r),S.lanes|=i;break}A=A.next}}else if(g.tag===10)w=g.type===r.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(n(341));w.lanes|=i,S=w.alternate,S!==null&&(S.lanes|=i),_c(w,i,r),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===r){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}yt(e,r,f.children,i),r=r.child}return r;case 9:return f=r.type,l=r.pendingProps.children,ws(r,i),f=zt(f),l=l(f),r.flags|=1,yt(e,r,l,i),r.child;case 14:return l=r.type,f=Zt(l,r.pendingProps),f=Zt(l.type,f),Am(e,r,l,f,i);case 15:return Cm(e,r,r.type,r.pendingProps,i);case 17:return l=r.type,f=r.pendingProps,f=r.elementType===l?f:Zt(l,f),vo(e,r),r.tag=1,Et(l)?(e=!0,Ja(r)):e=!1,ws(r,i),ym(r,l,f),Fc(r,l,f,i),Bc(null,r,l,!0,e,i);case 19:return Om(e,r,i);case 22:return Tm(e,r,i)}throw Error(n(156,r.tag))};function iv(e,r){return jp(e,r)}function q_(e,r,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(e,r,i,l){return new q_(e,r,i,l)}function ah(e){return e=e.prototype,!(!e||!e.isReactComponent)}function X_(e){if(typeof e=="function")return ah(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ne)return 11;if(e===Ze)return 14}return 2}function ar(e,r){var i=e.alternate;return i===null?(i=Ht(e.tag,r,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=r,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,r=e.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function To(e,r,i,l,f,g){var w=2;if(l=e,typeof e=="function")ah(e)&&(w=1);else if(typeof e=="string")w=5;else e:switch(e){case G:return Dr(i.children,f,g,r);case ee:w=8,f|=8;break;case oe:return e=Ht(12,i,r,f|2),e.elementType=oe,e.lanes=g,e;case Ae:return e=Ht(13,i,r,f),e.elementType=Ae,e.lanes=g,e;case Pe:return e=Ht(19,i,r,f),e.elementType=Pe,e.lanes=g,e;case ae:return Po(i,f,g,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case de:w=10;break e;case ce:w=9;break e;case Ne:w=11;break e;case Ze:w=14;break e;case le:w=16,l=null;break e}throw Error(n(130,e==null?e:typeof e,""))}return r=Ht(w,i,r,f),r.elementType=e,r.type=l,r.lanes=g,r}function Dr(e,r,i,l){return e=Ht(7,e,l,r),e.lanes=i,e}function Po(e,r,i,l){return e=Ht(22,e,l,r),e.elementType=ae,e.lanes=i,e.stateNode={isHidden:!1},e}function oh(e,r,i){return e=Ht(6,e,null,r),e.lanes=i,e}function lh(e,r,i){return r=Ht(4,e.children!==null?e.children:[],e.key,r),r.lanes=i,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function Y_(e,r,i,l,f){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Du(0),this.expirationTimes=Du(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Du(0),this.identifierPrefix=l,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function uh(e,r,i,l,f,g,w,S,A){return e=new Y_(e,r,i,S,A),r===1?(r=1,g===!0&&(r|=8)):r=0,g=Ht(3,null,null,r),e.current=g,g.stateNode=e,g.memoizedState={element:l,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ec(g),e}function K_(e,r,i){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V,key:l==null?null:""+l,children:e,containerInfo:r,implementation:i}}function av(e){if(!e)return Qn;e=e._reactInternals;e:{if(xr(e)!==e||e.tag!==1)throw Error(n(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Et(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(e.tag===1){var i=e.type;if(Et(i))return Mg(e,i,r)}return r}function ov(e,r,i,l,f,g,w,S,A){return e=uh(i,l,!0,e,f,g,w,S,A),e.context=av(null),i=e.current,l=wt(),f=sr(i),g=An(l,f),g.callback=r??null,er(i,g,f),e.current.lanes=f,ci(e,f,l),At(e,l),e}function Ro(e,r,i,l){var f=r.current,g=wt(),w=sr(f);return i=av(i),r.context===null?r.context=i:r.pendingContext=i,r=An(g,w),r.payload={element:e},l=l===void 0?null:l,l!==null&&(r.callback=l),e=er(f,r,w),e!==null&&(nn(e,f,w,g),ao(e,f,w)),w}function Lo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function lv(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<r?i:r}}function ch(e,r){lv(e,r),(e=e.alternate)&&lv(e,r)}function Q_(){return null}var uv=typeof reportError=="function"?reportError:function(e){console.error(e)};function hh(e){this._internalRoot=e}No.prototype.render=hh.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(n(409));Ro(e,r,null,null)},No.prototype.unmount=hh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;Ir(function(){Ro(null,e,null,null)}),r[_n]=null}};function No(e){this._internalRoot=e}No.prototype.unstable_scheduleHydration=function(e){if(e){var r=Gp();e={blockedOn:null,target:e,priority:r};for(var i=0;i<Gn.length&&r!==0&&r<Gn[i].priority;i++);Gn.splice(i,0,e),i===0&&Yp(e)}};function dh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Io(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cv(){}function J_(e,r,i,l,f){if(f){if(typeof l=="function"){var g=l;l=function(){var O=Lo(w);g.call(O)}}var w=ov(r,l,e,0,null,!1,!1,"",cv);return e._reactRootContainer=w,e[_n]=w.current,xi(e.nodeType===8?e.parentNode:e),Ir(),w}for(;f=e.lastChild;)e.removeChild(f);if(typeof l=="function"){var S=l;l=function(){var O=Lo(A);S.call(O)}}var A=uh(e,0,!1,null,null,!1,!1,"",cv);return e._reactRootContainer=A,e[_n]=A.current,xi(e.nodeType===8?e.parentNode:e),Ir(function(){Ro(r,A,i,l)}),A}function Mo(e,r,i,l,f){var g=i._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var S=f;f=function(){var A=Lo(w);S.call(A)}}Ro(r,w,e,f)}else w=J_(i,r,e,f,l);return Lo(w)}Vp=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var i=ui(r.pendingLanes);i!==0&&(Fu(r,i|1),At(r,We()),(we&6)===0&&(xs=We()+500,Jn()))}break;case 13:Ir(function(){var l=kn(e,1);if(l!==null){var f=wt();nn(l,e,1,f)}}),ch(e,1)}},ju=function(e){if(e.tag===13){var r=kn(e,134217728);if(r!==null){var i=wt();nn(r,e,134217728,i)}ch(e,134217728)}},Wp=function(e){if(e.tag===13){var r=sr(e),i=kn(e,r);if(i!==null){var l=wt();nn(i,e,r,l)}ch(e,r)}},Gp=function(){return Re},qp=function(e,r){var i=Re;try{return Re=e,r()}finally{Re=i}},Ru=function(e,r,i){switch(r){case"input":if(Su(e,i),r=i.name,i.type==="radio"&&r!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<i.length;r++){var l=i[r];if(l!==e&&l.form===e.form){var f=Ka(l);if(!f)throw Error(n(90));Vs(l),Su(l,f)}}}break;case"textarea":Sp(e,i);break;case"select":r=i.value,r!=null&&ts(e,!!i.multiple,r,!1)}},Lp=rh,Np=Ir;var Z_={usingClientEntryPoint:!1,Events:[Ci,hs,Ka,Pp,Rp,rh]},Bi={findFiberByHostInstance:kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},e1={bundleType:Bi.bundleType,version:Bi.version,rendererPackageName:Bi.rendererPackageName,rendererConfig:Bi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Dp(e),e===null?null:e.stateNode},findFiberByHostInstance:Bi.findFiberByHostInstance||Q_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oo.isDisabled&&Oo.supportsFiber)try{La=Oo.inject(e1),an=Oo}catch{}}return Gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z_,Gr.createPortal=function(e,r){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dh(r))throw Error(n(200));return K_(e,r,null,i)},Gr.createRoot=function(e,r){if(!dh(e))throw Error(n(299));var i=!1,l="",f=uv;return r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(f=r.onRecoverableError)),r=uh(e,1,!1,null,null,i,!1,l,f),e[_n]=r.current,xi(e.nodeType===8?e.parentNode:e),new hh(r)},Gr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=Dp(r),e=e===null?null:e.stateNode,e},Gr.flushSync=function(e){return Ir(e)},Gr.hydrate=function(e,r,i){if(!Io(r))throw Error(n(200));return Mo(null,e,r,!0,i)},Gr.hydrateRoot=function(e,r,i){if(!dh(e))throw Error(n(405));var l=i!=null&&i.hydratedSources||null,f=!1,g="",w=uv;if(i!=null&&(i.unstable_strictMode===!0&&(f=!0),i.identifierPrefix!==void 0&&(g=i.identifierPrefix),i.onRecoverableError!==void 0&&(w=i.onRecoverableError)),r=ov(r,null,e,1,i??null,f,!1,g,w),e[_n]=r.current,xi(e),l)for(e=0;e<l.length;e++)i=l[e],f=i._getVersion,f=f(i._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[i,f]:r.mutableSourceEagerHydrationData.push(i,f);return new No(r)},Gr.render=function(e,r,i){if(!Io(r))throw Error(n(200));return Mo(null,e,r,!1,i)},Gr.unmountComponentAtNode=function(e){if(!Io(e))throw Error(n(40));return e._reactRootContainer?(Ir(function(){Mo(null,null,e,!1,function(){e._reactRootContainer=null,e[_n]=null})}),!0):!1},Gr.unstable_batchedUpdates=rh,Gr.unstable_renderSubtreeIntoContainer=function(e,r,i,l){if(!Io(i))throw Error(n(200));if(e==null||e._reactInternals===void 0)throw Error(n(38));return Mo(e,r,i,!1,l)},Gr.version="18.3.1-next-f1338f8080-20240426",Gr}var ux;function Pk(){if(ux)return o1.exports;ux=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(t){console.error(t)}}return c(),o1.exports=qP(),o1.exports}var cx;function XP(){if(cx)return T0;cx=1;var c=Pk();return T0.createRoot=c.createRoot,T0.hydrateRoot=c.hydrateRoot,T0}var YP=XP();const KP=oE(YP);Pk();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hv(){return Hv=Object.assign?Object.assign.bind():function(c){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(c[s]=n[s])}return c},Hv.apply(this,arguments)}var hu;(function(c){c.Pop="POP",c.Push="PUSH",c.Replace="REPLACE"})(hu||(hu={}));const hx="popstate";function QP(c){c===void 0&&(c={});function t(s,a){let{pathname:o,search:u,hash:h}=s.location;return T1("",{pathname:o,search:u,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:ww(a)}return ZP(t,n,null,c)}function wn(c,t){if(c===!1||c===null||typeof c>"u")throw new Error(t)}function Rk(c,t){if(!c){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function JP(){return Math.random().toString(36).substr(2,8)}function dx(c,t){return{usr:c.state,key:c.key,idx:t}}function T1(c,t,n,s){return n===void 0&&(n=null),Hv({pathname:typeof c=="string"?c:c.pathname,search:"",hash:""},typeof t=="string"?mp(t):t,{state:n,key:t&&t.key||s||JP()})}function ww(c){let{pathname:t="/",search:n="",hash:s=""}=c;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function mp(c){let t={};if(c){let n=c.indexOf("#");n>=0&&(t.hash=c.substr(n),c=c.substr(0,n));let s=c.indexOf("?");s>=0&&(t.search=c.substr(s),c=c.substr(0,s)),c&&(t.pathname=c)}return t}function ZP(c,t,n,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:o=!1}=s,u=a.history,h=hu.Pop,p=null,m=v();m==null&&(m=0,u.replaceState(Hv({},u.state,{idx:m}),""));function v(){return(u.state||{idx:null}).idx}function y(){h=hu.Pop;let C=v(),N=C==null?null:C-m;m=C,p&&p({action:h,location:x.location,delta:N})}function b(C,N){h=hu.Push;let F=T1(x.location,C,N);m=v()+1;let D=dx(F,m),j=x.createHref(F);try{u.pushState(D,"",j)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;a.location.assign(j)}o&&p&&p({action:h,location:x.location,delta:1})}function _(C,N){h=hu.Replace;let F=T1(x.location,C,N);m=v();let D=dx(F,m),j=x.createHref(F);u.replaceState(D,"",j),o&&p&&p({action:h,location:x.location,delta:0})}function k(C){let N=a.location.origin!=="null"?a.location.origin:a.location.href,F=typeof C=="string"?C:ww(C);return F=F.replace(/ $/,"%20"),wn(N,"No window.location.(origin|href) available to create URL for href: "+F),new URL(F,N)}let x={get action(){return h},get location(){return c(a,u)},listen(C){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(hx,y),p=C,()=>{a.removeEventListener(hx,y),p=null}},createHref(C){return t(a,C)},createURL:k,encodeLocation(C){let N=k(C);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:b,replace:_,go(C){return u.go(C)}};return x}var fx;(function(c){c.data="data",c.deferred="deferred",c.redirect="redirect",c.error="error"})(fx||(fx={}));function eR(c,t,n){return n===void 0&&(n="/"),tR(c,t,n)}function tR(c,t,n,s){let a=typeof t=="string"?mp(t):t,o=uE(a.pathname||"/",n);if(o==null)return null;let u=Lk(c);nR(u);let h=null;for(let p=0;h==null&&p<u.length;++p){let m=pR(o);h=hR(u[p],m)}return h}function Lk(c,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let a=(o,u,h)=>{let p={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};p.relativePath.startsWith("/")&&(wn(p.relativePath.startsWith(s),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(s.length));let m=fu([s,p.relativePath]),v=n.concat(p);o.children&&o.children.length>0&&(wn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),Lk(o.children,t,v,m)),!(o.path==null&&!o.index)&&t.push({path:m,score:uR(m,o.index),routesMeta:v})};return c.forEach((o,u)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))a(o,u);else for(let p of Nk(o.path))a(o,u,p)}),t}function Nk(c){let t=c.split("/");if(t.length===0)return[];let[n,...s]=t,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let u=Nk(s.join("/")),h=[];return h.push(...u.map(p=>p===""?o:[o,p].join("/"))),a&&h.push(...u),h.map(p=>c.startsWith("/")&&p===""?"/":p)}function nR(c){c.sort((t,n)=>t.score!==n.score?n.score-t.score:cR(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const rR=/^:[\w-]+$/,sR=3,iR=2,aR=1,oR=10,lR=-2,px=c=>c==="*";function uR(c,t){let n=c.split("/"),s=n.length;return n.some(px)&&(s+=lR),t&&(s+=iR),n.filter(a=>!px(a)).reduce((a,o)=>a+(rR.test(o)?sR:o===""?aR:oR),s)}function cR(c,t){return c.length===t.length&&c.slice(0,-1).every((s,a)=>s===t[a])?c[c.length-1]-t[t.length-1]:0}function hR(c,t,n){let{routesMeta:s}=c,a={},o="/",u=[];for(let h=0;h<s.length;++h){let p=s[h],m=h===s.length-1,v=o==="/"?t:t.slice(o.length)||"/",y=dR({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},v),b=p.route;if(!y)return null;Object.assign(a,y.params),u.push({params:a,pathname:fu([o,y.pathname]),pathnameBase:yR(fu([o,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(o=fu([o,y.pathnameBase]))}return u}function dR(c,t){typeof c=="string"&&(c={path:c,caseSensitive:!1,end:!0});let[n,s]=fR(c.path,c.caseSensitive,c.end),a=t.match(n);if(!a)return null;let o=a[0],u=o.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:s.reduce((m,v,y)=>{let{paramName:b,isOptional:_}=v;if(b==="*"){let x=h[y]||"";u=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const k=h[y];return _&&!k?m[b]=void 0:m[b]=(k||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:u,pattern:c}}function fR(c,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Rk(c==="*"||!c.endsWith("*")||c.endsWith("/*"),'Route path "'+c+'" will be treated as if it were '+('"'+c.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+c.replace(/\*$/,"/*")+'".'));let s=[],a="^"+c.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,p)=>(s.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return c.endsWith("*")?(s.push({paramName:"*"}),a+=c==="*"||c==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":c!==""&&c!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function pR(c){try{return c.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Rk(!1,'The URL path "'+c+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),c}}function uE(c,t){if(t==="/")return c;if(!c.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=c.charAt(n);return s&&s!=="/"?null:c.slice(n)||"/"}function gR(c,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:a=""}=typeof c=="string"?mp(c):c;return{pathname:n?n.startsWith("/")?n:mR(n,t):t,search:wR(s),hash:bR(a)}}function mR(c,t){let n=t.replace(/\/+$/,"").split("/");return c.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function c1(c,t,n,s){return"Cannot include a '"+c+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vR(c){return c.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Ik(c,t){let n=vR(c);return t?n.map((s,a)=>a===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Mk(c,t,n,s){s===void 0&&(s=!1);let a;typeof c=="string"?a=mp(c):(a=Hv({},c),wn(!a.pathname||!a.pathname.includes("?"),c1("?","pathname","search",a)),wn(!a.pathname||!a.pathname.includes("#"),c1("#","pathname","hash",a)),wn(!a.search||!a.search.includes("#"),c1("#","search","hash",a)));let o=c===""||a.pathname==="",u=o?"/":a.pathname,h;if(u==null)h=n;else{let y=t.length-1;if(!s&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),y-=1;a.pathname=b.join("/")}h=y>=0?t[y]:"/"}let p=gR(a,h),m=u&&u!=="/"&&u.endsWith("/"),v=(o||u===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(m||v)&&(p.pathname+="/"),p}const fu=c=>c.join("/").replace(/\/\/+/g,"/"),yR=c=>c.replace(/\/+$/,"").replace(/^\/*/,"/"),wR=c=>!c||c==="?"?"":c.startsWith("?")?c:"?"+c,bR=c=>!c||c==="#"?"":c.startsWith("#")?c:"#"+c;function _R(c){return c!=null&&typeof c.status=="number"&&typeof c.statusText=="string"&&typeof c.internal=="boolean"&&"data"in c}const Ok=["post","put","patch","delete"];new Set(Ok);const SR=["get",...Ok];new Set(SR);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vv(){return Vv=Object.assign?Object.assign.bind():function(c){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(c[s]=n[s])}return c},Vv.apply(this,arguments)}const cE=me.createContext(null),ER=me.createContext(null),Ld=me.createContext(null),Qw=me.createContext(null),bu=me.createContext({outlet:null,matches:[],isDataRoute:!1}),Dk=me.createContext(null);function xR(c,t){let{relative:n}=t===void 0?{}:t;y0()||wn(!1);let{basename:s,navigator:a}=me.useContext(Ld),{hash:o,pathname:u,search:h}=$k(c,{relative:n}),p=u;return s!=="/"&&(p=u==="/"?s:fu([s,u])),a.createHref({pathname:p,search:h,hash:o})}function y0(){return me.useContext(Qw)!=null}function Jw(){return y0()||wn(!1),me.useContext(Qw).location}function Fk(c){me.useContext(Ld).static||me.useLayoutEffect(c)}function kR(){let{isDataRoute:c}=me.useContext(bu);return c?jR():AR()}function AR(){y0()||wn(!1);let c=me.useContext(cE),{basename:t,future:n,navigator:s}=me.useContext(Ld),{matches:a}=me.useContext(bu),{pathname:o}=Jw(),u=JSON.stringify(Ik(a,n.v7_relativeSplatPath)),h=me.useRef(!1);return Fk(()=>{h.current=!0}),me.useCallback(function(m,v){if(v===void 0&&(v={}),!h.current)return;if(typeof m=="number"){s.go(m);return}let y=Mk(m,JSON.parse(u),o,v.relative==="path");c==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:fu([t,y.pathname])),(v.replace?s.replace:s.push)(y,v.state,v)},[t,s,u,o,c])}function jk(){let{matches:c}=me.useContext(bu),t=c[c.length-1];return t?t.params:{}}function $k(c,t){let{relative:n}=t===void 0?{}:t,{future:s}=me.useContext(Ld),{matches:a}=me.useContext(bu),{pathname:o}=Jw(),u=JSON.stringify(Ik(a,s.v7_relativeSplatPath));return me.useMemo(()=>Mk(c,JSON.parse(u),o,n==="path"),[c,u,o,n])}function CR(c,t){return TR(c,t)}function TR(c,t,n,s){y0()||wn(!1);let{navigator:a,static:o}=me.useContext(Ld),{matches:u}=me.useContext(bu),h=u[u.length-1],p=h?h.params:{};h&&h.pathname;let m=h?h.pathnameBase:"/";h&&h.route;let v=Jw(),y;if(t){var b;let N=typeof t=="string"?mp(t):t;m==="/"||(b=N.pathname)!=null&&b.startsWith(m)||wn(!1),y=N}else y=v;let _=y.pathname||"/",k=_;if(m!=="/"){let N=m.replace(/^\//,"").split("/");k="/"+_.replace(/^\//,"").split("/").slice(N.length).join("/")}let x=eR(c,{pathname:k}),C=IR(x&&x.map(N=>Object.assign({},N,{params:Object.assign({},p,N.params),pathname:fu([m,a.encodeLocation?a.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?m:fu([m,a.encodeLocation?a.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),u,n,s);return t&&C?me.createElement(Qw.Provider,{value:{location:Vv({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:hu.Pop}},C):C}function PR(){let c=FR(),t=_R(c)?c.status+" "+c.statusText:c instanceof Error?c.message:JSON.stringify(c),n=c instanceof Error?c.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return me.createElement(me.Fragment,null,me.createElement("h2",null,"Unexpected Application Error!"),me.createElement("h3",{style:{fontStyle:"italic"}},t),n?me.createElement("pre",{style:a},n):null,null)}const RR=me.createElement(PR,null);class LR extends me.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?me.createElement(bu.Provider,{value:this.props.routeContext},me.createElement(Dk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function NR(c){let{routeContext:t,match:n,children:s}=c,a=me.useContext(cE);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),me.createElement(bu.Provider,{value:t},s)}function IR(c,t,n,s){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),c==null){var o;if(!n)return null;if(n.errors)c=n.matches;else if((o=s)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)c=n.matches;else return null}let u=c,h=(a=n)==null?void 0:a.errors;if(h!=null){let v=u.findIndex(y=>y.route.id&&(h==null?void 0:h[y.route.id])!==void 0);v>=0||wn(!1),u=u.slice(0,Math.min(u.length,v+1))}let p=!1,m=-1;if(n&&s&&s.v7_partialHydration)for(let v=0;v<u.length;v++){let y=u[v];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(m=v),y.route.id){let{loaderData:b,errors:_}=n,k=y.route.loader&&b[y.route.id]===void 0&&(!_||_[y.route.id]===void 0);if(y.route.lazy||k){p=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((v,y,b)=>{let _,k=!1,x=null,C=null;n&&(_=h&&y.route.id?h[y.route.id]:void 0,x=y.route.errorElement||RR,p&&(m<0&&b===0?($R("route-fallback"),k=!0,C=null):m===b&&(k=!0,C=y.route.hydrateFallbackElement||null)));let N=t.concat(u.slice(0,b+1)),F=()=>{let D;return _?D=x:k?D=C:y.route.Component?D=me.createElement(y.route.Component,null):y.route.element?D=y.route.element:D=v,me.createElement(NR,{match:y,routeContext:{outlet:v,matches:N,isDataRoute:n!=null},children:D})};return n&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?me.createElement(LR,{location:n.location,revalidation:n.revalidation,component:x,error:_,children:F(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):F()},null)}var zk=function(c){return c.UseBlocker="useBlocker",c.UseRevalidator="useRevalidator",c.UseNavigateStable="useNavigate",c}(zk||{}),Bk=function(c){return c.UseBlocker="useBlocker",c.UseLoaderData="useLoaderData",c.UseActionData="useActionData",c.UseRouteError="useRouteError",c.UseNavigation="useNavigation",c.UseRouteLoaderData="useRouteLoaderData",c.UseMatches="useMatches",c.UseRevalidator="useRevalidator",c.UseNavigateStable="useNavigate",c.UseRouteId="useRouteId",c}(Bk||{});function MR(c){let t=me.useContext(cE);return t||wn(!1),t}function OR(c){let t=me.useContext(ER);return t||wn(!1),t}function DR(c){let t=me.useContext(bu);return t||wn(!1),t}function Uk(c){let t=DR(),n=t.matches[t.matches.length-1];return n.route.id||wn(!1),n.route.id}function FR(){var c;let t=me.useContext(Dk),n=OR(),s=Uk();return t!==void 0?t:(c=n.errors)==null?void 0:c[s]}function jR(){let{router:c}=MR(zk.UseNavigateStable),t=Uk(Bk.UseNavigateStable),n=me.useRef(!1);return Fk(()=>{n.current=!0}),me.useCallback(function(a,o){o===void 0&&(o={}),n.current&&(typeof a=="number"?c.navigate(a):c.navigate(a,Vv({fromRouteId:t},o)))},[c,t])}const gx={};function $R(c,t,n){gx[c]||(gx[c]=!0)}function zR(c,t){c==null||c.v7_startTransition,c==null||c.v7_relativeSplatPath}function _l(c){wn(!1)}function BR(c){let{basename:t="/",children:n=null,location:s,navigationType:a=hu.Pop,navigator:o,static:u=!1,future:h}=c;y0()&&wn(!1);let p=t.replace(/^\/*/,"/"),m=me.useMemo(()=>({basename:p,navigator:o,static:u,future:Vv({v7_relativeSplatPath:!1},h)}),[p,h,o,u]);typeof s=="string"&&(s=mp(s));let{pathname:v="/",search:y="",hash:b="",state:_=null,key:k="default"}=s,x=me.useMemo(()=>{let C=uE(v,p);return C==null?null:{location:{pathname:C,search:y,hash:b,state:_,key:k},navigationType:a}},[p,v,y,b,_,k,a]);return x==null?null:me.createElement(Ld.Provider,{value:m},me.createElement(Qw.Provider,{children:n,value:x}))}function UR(c){let{children:t,location:n}=c;return CR(P1(t),n)}new Promise(()=>{});function P1(c,t){t===void 0&&(t=[]);let n=[];return me.Children.forEach(c,(s,a)=>{if(!me.isValidElement(s))return;let o=[...t,a];if(s.type===me.Fragment){n.push.apply(n,P1(s.props.children,o));return}s.type!==_l&&wn(!1),!s.props.index||!s.props.children||wn(!1);let u={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(u.children=P1(s.props.children,o)),n.push(u)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function R1(){return R1=Object.assign?Object.assign.bind():function(c){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(c[s]=n[s])}return c},R1.apply(this,arguments)}function HR(c,t){if(c==null)return{};var n={},s=Object.keys(c),a,o;for(o=0;o<s.length;o++)a=s[o],!(t.indexOf(a)>=0)&&(n[a]=c[a]);return n}function VR(c){return!!(c.metaKey||c.altKey||c.ctrlKey||c.shiftKey)}function WR(c,t){return c.button===0&&(!t||t==="_self")&&!VR(c)}const GR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],qR="6";try{window.__reactRouterVersion=qR}catch{}const XR="startTransition",mx=VP[XR];function YR(c){let{basename:t,children:n,future:s,window:a}=c,o=me.useRef();o.current==null&&(o.current=QP({window:a,v5Compat:!0}));let u=o.current,[h,p]=me.useState({action:u.action,location:u.location}),{v7_startTransition:m}=s||{},v=me.useCallback(y=>{m&&mx?mx(()=>p(y)):p(y)},[p,m]);return me.useLayoutEffect(()=>u.listen(v),[u,v]),me.useEffect(()=>zR(s),[s]),me.createElement(BR,{basename:t,children:n,location:h.location,navigationType:h.action,navigator:u,future:s})}const KR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Er=me.forwardRef(function(t,n){let{onClick:s,relative:a,reloadDocument:o,replace:u,state:h,target:p,to:m,preventScrollReset:v,viewTransition:y}=t,b=HR(t,GR),{basename:_}=me.useContext(Ld),k,x=!1;if(typeof m=="string"&&QR.test(m)&&(k=m,KR))try{let D=new URL(window.location.href),j=m.startsWith("//")?new URL(D.protocol+m):new URL(m),z=uE(j.pathname,_);j.origin===D.origin&&z!=null?m=z+j.search+j.hash:x=!0}catch{}let C=xR(m,{relative:a}),N=JR(m,{replace:u,state:h,target:p,preventScrollReset:v,relative:a,viewTransition:y});function F(D){s&&s(D),D.defaultPrevented||N(D)}return me.createElement("a",R1({},b,{href:k||C,onClick:x||o?s:F,ref:n,target:p}))});var vx;(function(c){c.UseScrollRestoration="useScrollRestoration",c.UseSubmit="useSubmit",c.UseSubmitFetcher="useSubmitFetcher",c.UseFetcher="useFetcher",c.useViewTransitionState="useViewTransitionState"})(vx||(vx={}));var yx;(function(c){c.UseFetcher="useFetcher",c.UseFetchers="useFetchers",c.UseScrollRestoration="useScrollRestoration"})(yx||(yx={}));function JR(c,t){let{target:n,replace:s,state:a,preventScrollReset:o,relative:u,viewTransition:h}=t===void 0?{}:t,p=kR(),m=Jw(),v=$k(c,{relative:u});return me.useCallback(y=>{if(WR(y,n)){y.preventDefault();let b=s!==void 0?s:ww(m)===ww(v);p(c,{replace:b,state:a,preventScrollReset:o,relative:u,viewTransition:h})}},[m,p,v,s,a,n,c,o,u,h])}function ZR(){return se.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-10",children:se.jsxs("div",{className:"text-center mt-10",children:[se.jsx("h1",{className:"text-5xl font-bold tracking-widest mb-10",children:"Check out the latest comic!"}),se.jsxs("div",{className:"latest-comic mb-16",children:[se.jsx(Er,{to:"./comic",children:se.jsx("img",{src:"/assets/comic/COVER.png",alt:"Cover",className:"mx-auto w-72 mb-6"})}),se.jsx("h2",{className:"text-3xl mt-6 font-bold",children:"The only man who answered the call..."}),se.jsx("p",{className:"mt-2 text-gray-400 max-w-xl mx-auto",children:"Discover Josh's journey with aliens in a black & white sci-fi webcomic."})]}),se.jsxs("div",{className:"bg-white text-black p-6 rounded max-w-md mx-auto mb-10",children:[se.jsx("h2",{className:"text-xl font-bold",children:"🛸 Featured Merch Drop"}),se.jsx("p",{className:"mb-2 text-sm",children:"Josh's Black Sweatshirt is now available"}),se.jsx(Er,{to:"/product/black-sweatshirt",className:"inline-block bg-black text-white px-4 py-2 rounded mt-2 hover:bg-gray-800 transition",children:"View Product"})]}),se.jsx("div",{className:"",children:se.jsx(Er,{to:"./Broadcast",children:se.jsx("h2",{className:"text-xl font-bold",children:"🛸 Click here for a surprise"})})})]})})}const eL="modulepreload",tL=function(c){return"/"+c},wx={},fp=function(t,n,s){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));a=Promise.allSettled(n.map(p=>{if(p=tL(p),p in wx)return;wx[p]=!0;const m=p.endsWith(".css"),v=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${v}`))return;const y=document.createElement("link");if(y.rel=m?"stylesheet":eL,m||(y.as="script"),y.crossOrigin="",y.href=p,h&&y.setAttribute("nonce",h),document.head.appendChild(y),m)return new Promise((b,_)=>{y.addEventListener("load",b),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return a.then(u=>{for(const h of u||[])h.status==="rejected"&&o(h.reason);return t().catch(o)})},nL=c=>{let t;return c?t=c:typeof fetch>"u"?t=(...n)=>fp(async()=>{const{default:s}=await Promise.resolve().then(()=>vp);return{default:s}},void 0).then(({default:s})=>s(...n)):t=fetch,(...n)=>t(...n)};class hE extends Error{constructor(t,n="FunctionsError",s){super(t),this.name=n,this.context=s}}class rL extends hE{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class sL extends hE{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class iL extends hE{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var L1;(function(c){c.Any="any",c.ApNortheast1="ap-northeast-1",c.ApNortheast2="ap-northeast-2",c.ApSouth1="ap-south-1",c.ApSoutheast1="ap-southeast-1",c.ApSoutheast2="ap-southeast-2",c.CaCentral1="ca-central-1",c.EuCentral1="eu-central-1",c.EuWest1="eu-west-1",c.EuWest2="eu-west-2",c.EuWest3="eu-west-3",c.SaEast1="sa-east-1",c.UsEast1="us-east-1",c.UsWest1="us-west-1",c.UsWest2="us-west-2"})(L1||(L1={}));var aL=function(c,t,n,s){function a(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function h(v){try{m(s.next(v))}catch(y){u(y)}}function p(v){try{m(s.throw(v))}catch(y){u(y)}}function m(v){v.done?o(v.value):a(v.value).then(h,p)}m((s=s.apply(c,t||[])).next())})};class oL{constructor(t,{headers:n={},customFetch:s,region:a=L1.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=nL(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var s;return aL(this,void 0,void 0,function*(){try{const{headers:a,method:o,body:u}=n;let h={},{region:p}=n;p||(p=this.region),p&&p!=="any"&&(h["x-region"]=p);let m;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",m=u):typeof u=="string"?(h["Content-Type"]="text/plain",m=u):typeof FormData<"u"&&u instanceof FormData?m=u:(h["Content-Type"]="application/json",m=JSON.stringify(u)));const v=yield this.fetch(`${this.url}/${t}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:m}).catch(k=>{throw new rL(k)}),y=v.headers.get("x-relay-error");if(y&&y==="true")throw new sL(v);if(!v.ok)throw new iL(v);let b=((s=v.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return b==="application/json"?_=yield v.json():b==="application/octet-stream"?_=yield v.blob():b==="text/event-stream"?_=v:b==="multipart/form-data"?_=yield v.formData():_=yield v.text(),{data:_,error:null}}catch(a){return{data:null,error:a}}})}}var Mn={},Dd={},Fd={},jd={},$d={},zd={},lL=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},pp=lL();const uL=pp.fetch,Hk=pp.fetch.bind(pp),Vk=pp.Headers,cL=pp.Request,hL=pp.Response,vp=Object.freeze(Object.defineProperty({__proto__:null,Headers:Vk,Request:cL,Response:hL,default:Hk,fetch:uL},Symbol.toStringTag,{value:"Module"})),dL=$P(vp);var P0={},bx;function Wk(){if(bx)return P0;bx=1,Object.defineProperty(P0,"__esModule",{value:!0});class c extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return P0.default=c,P0}var _x;function Gk(){if(_x)return zd;_x=1;var c=zd&&zd.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(zd,"__esModule",{value:!0});const t=c(dL),n=c(Wk());class s{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,u){return this.headers=Object.assign({},this.headers),this.headers[o]=u,this}then(o,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const h=this.fetch;let p=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var v,y,b;let _=null,k=null,x=null,C=m.status,N=m.statusText;if(m.ok){if(this.method!=="HEAD"){const z=await m.text();z===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?k=z:k=JSON.parse(z))}const D=(v=this.headers.Prefer)===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),j=(y=m.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");D&&j&&j.length>1&&(x=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(_={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,x=null,C=406,N="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const D=await m.text();try{_=JSON.parse(D),Array.isArray(_)&&m.status===404&&(k=[],_=null,C=200,N="OK")}catch{m.status===404&&D===""?(C=204,N="No Content"):_={message:D}}if(_&&this.isMaybeSingle&&(!((b=_==null?void 0:_.details)===null||b===void 0)&&b.includes("0 rows"))&&(_=null,C=200,N="OK"),_&&this.shouldThrowOnError)throw new n.default(_)}return{error:_,data:k,count:x,status:C,statusText:N}});return this.shouldThrowOnError||(p=p.catch(m=>{var v,y,b;return{error:{message:`${(v=m==null?void 0:m.name)!==null&&v!==void 0?v:"FetchError"}: ${m==null?void 0:m.message}`,details:`${(y=m==null?void 0:m.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(b=m==null?void 0:m.code)!==null&&b!==void 0?b:""}`},data:null,count:null,status:0,statusText:""}})),p.then(o,u)}returns(){return this}overrideTypes(){return this}}return zd.default=s,zd}var Sx;function qk(){if(Sx)return $d;Sx=1;var c=$d&&$d.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty($d,"__esModule",{value:!0});const t=c(Gk());class n extends t.default{select(a){let o=!1;const u=(a??"*").split("").map(h=>/\s/.test(h)&&!o?"":(h==='"'&&(o=!o),h)).join("");return this.url.searchParams.set("select",u),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(a,{ascending:o=!0,nullsFirst:u,foreignTable:h,referencedTable:p=h}={}){const m=p?`${p}.order`:"order",v=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${v?`${v},`:""}${a}.${o?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:u=o}={}){const h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${a}`),this}range(a,o,{foreignTable:u,referencedTable:h=u}={}){const p=typeof h>"u"?"offset":`${h}.offset`,m=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(p,`${a}`),this.url.searchParams.set(m,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:a=!1,verbose:o=!1,settings:u=!1,buffers:h=!1,wal:p=!1,format:m="text"}={}){var v;const y=[a?"analyze":null,o?"verbose":null,u?"settings":null,h?"buffers":null,p?"wal":null].filter(Boolean).join("|"),b=(v=this.headers.Accept)!==null&&v!==void 0?v:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${m}; for="${b}"; options=${y};`,m==="json"?this:this}rollback(){var a;return((a=this.headers.Prefer)!==null&&a!==void 0?a:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return $d.default=n,$d}var Ex;function dE(){if(Ex)return jd;Ex=1;var c=jd&&jd.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(jd,"__esModule",{value:!0});const t=c(qk());class n extends t.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}in(a,o){const u=Array.from(new Set(o)).map(h=>typeof h=="string"&&new RegExp("[,()]").test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(a,`in.(${u})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:u,type:h}={}){let p="";h==="plain"?p="pl":h==="phrase"?p="ph":h==="websearch"&&(p="w");const m=u===void 0?"":`(${u})`;return this.url.searchParams.append(a,`${p}fts${m}.${o}`),this}match(a){return Object.entries(a).forEach(([o,u])=>{this.url.searchParams.append(o,`eq.${u}`)}),this}not(a,o,u){return this.url.searchParams.append(a,`not.${o}.${u}`),this}or(a,{foreignTable:o,referencedTable:u=o}={}){const h=u?`${u}.or`:"or";return this.url.searchParams.append(h,`(${a})`),this}filter(a,o,u){return this.url.searchParams.append(a,`${o}.${u}`),this}}return jd.default=n,jd}var xx;function Xk(){if(xx)return Fd;xx=1;var c=Fd&&Fd.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Fd,"__esModule",{value:!0});const t=c(dE());class n{constructor(a,{headers:o={},schema:u,fetch:h}){this.url=a,this.headers=o,this.schema=u,this.fetch=h}select(a,{head:o=!1,count:u}={}){const h=o?"HEAD":"GET";let p=!1;const m=(a??"*").split("").map(v=>/\s/.test(v)&&!p?"":(v==='"'&&(p=!p),v)).join("");return this.url.searchParams.set("select",m),u&&(this.headers.Prefer=`count=${u}`),new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(a,{count:o,defaultToNull:u=!0}={}){const h="POST",p=[];if(this.headers.Prefer&&p.push(this.headers.Prefer),o&&p.push(`count=${o}`),u||p.push("missing=default"),this.headers.Prefer=p.join(","),Array.isArray(a)){const m=a.reduce((v,y)=>v.concat(Object.keys(y)),[]);if(m.length>0){const v=[...new Set(m)].map(y=>`"${y}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}upsert(a,{onConflict:o,ignoreDuplicates:u=!1,count:h,defaultToNull:p=!0}={}){const m="POST",v=[`resolution=${u?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&v.push(this.headers.Prefer),h&&v.push(`count=${h}`),p||v.push("missing=default"),this.headers.Prefer=v.join(","),Array.isArray(a)){const y=a.reduce((b,_)=>b.concat(Object.keys(_)),[]);if(y.length>0){const b=[...new Set(y)].map(_=>`"${_}"`);this.url.searchParams.set("columns",b.join(","))}}return new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(a,{count:o}={}){const u="PATCH",h=[];return this.headers.Prefer&&h.push(this.headers.Prefer),o&&h.push(`count=${o}`),this.headers.Prefer=h.join(","),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}delete({count:a}={}){const o="DELETE",u=[];return a&&u.push(`count=${a}`),this.headers.Prefer&&u.unshift(this.headers.Prefer),this.headers.Prefer=u.join(","),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Fd.default=n,Fd}var fv={},pv={},kx;function fL(){return kx||(kx=1,Object.defineProperty(pv,"__esModule",{value:!0}),pv.version=void 0,pv.version="0.0.0-automated"),pv}var Ax;function pL(){if(Ax)return fv;Ax=1,Object.defineProperty(fv,"__esModule",{value:!0}),fv.DEFAULT_HEADERS=void 0;const c=fL();return fv.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${c.version}`},fv}var Cx;function gL(){if(Cx)return Dd;Cx=1;var c=Dd&&Dd.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Dd,"__esModule",{value:!0});const t=c(Xk()),n=c(dE()),s=pL();class a{constructor(u,{headers:h={},schema:p,fetch:m}={}){this.url=u,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),h),this.schemaName=p,this.fetch=m}from(u){const h=new URL(`${this.url}/${u}`);return new t.default(h,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new a(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,h={},{head:p=!1,get:m=!1,count:v}={}){let y;const b=new URL(`${this.url}/rpc/${u}`);let _;p||m?(y=p?"HEAD":"GET",Object.entries(h).filter(([x,C])=>C!==void 0).map(([x,C])=>[x,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([x,C])=>{b.searchParams.append(x,C)})):(y="POST",_=h);const k=Object.assign({},this.headers);return v&&(k.Prefer=`count=${v}`),new n.default({method:y,url:b,headers:k,schema:this.schemaName,body:_,fetch:this.fetch,allowEmpty:!1})}}return Dd.default=a,Dd}var Tx;function mL(){if(Tx)return Mn;Tx=1;var c=Mn&&Mn.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.PostgrestError=Mn.PostgrestBuilder=Mn.PostgrestTransformBuilder=Mn.PostgrestFilterBuilder=Mn.PostgrestQueryBuilder=Mn.PostgrestClient=void 0;const t=c(gL());Mn.PostgrestClient=t.default;const n=c(Xk());Mn.PostgrestQueryBuilder=n.default;const s=c(dE());Mn.PostgrestFilterBuilder=s.default;const a=c(qk());Mn.PostgrestTransformBuilder=a.default;const o=c(Gk());Mn.PostgrestBuilder=o.default;const u=c(Wk());return Mn.PostgrestError=u.default,Mn.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:o.default,PostgrestError:u.default},Mn}var vL=mL();const yL=oE(vL),{PostgrestClient:wL,PostgrestQueryBuilder:fM,PostgrestFilterBuilder:pM,PostgrestTransformBuilder:gM,PostgrestBuilder:mM,PostgrestError:vM}=yL,bL="2.11.2",_L={"X-Client-Info":`realtime-js/${bL}`},SL="1.0.0",Yk=1e4,EL=1e3;var rf;(function(c){c[c.connecting=0]="connecting",c[c.open=1]="open",c[c.closing=2]="closing",c[c.closed=3]="closed"})(rf||(rf={}));var As;(function(c){c.closed="closed",c.errored="errored",c.joined="joined",c.joining="joining",c.leaving="leaving"})(As||(As={}));var ta;(function(c){c.close="phx_close",c.error="phx_error",c.join="phx_join",c.reply="phx_reply",c.leave="phx_leave",c.access_token="access_token"})(ta||(ta={}));var N1;(function(c){c.websocket="websocket"})(N1||(N1={}));var yh;(function(c){c.Connecting="connecting",c.Open="open",c.Closing="closing",c.Closed="closed"})(yh||(yh={}));class xL{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),s=new TextDecoder;return this._decodeBroadcast(t,n,s)}_decodeBroadcast(t,n,s){const a=n.getUint8(1),o=n.getUint8(2);let u=this.HEADER_LENGTH+2;const h=s.decode(t.slice(u,u+a));u=u+a;const p=s.decode(t.slice(u,u+o));u=u+o;const m=JSON.parse(s.decode(t.slice(u,t.byteLength)));return{ref:null,topic:h,event:p,payload:m}}}class Kk{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Dt;(function(c){c.abstime="abstime",c.bool="bool",c.date="date",c.daterange="daterange",c.float4="float4",c.float8="float8",c.int2="int2",c.int4="int4",c.int4range="int4range",c.int8="int8",c.int8range="int8range",c.json="json",c.jsonb="jsonb",c.money="money",c.numeric="numeric",c.oid="oid",c.reltime="reltime",c.text="text",c.time="time",c.timestamp="timestamp",c.timestamptz="timestamptz",c.timetz="timetz",c.tsrange="tsrange",c.tstzrange="tstzrange"})(Dt||(Dt={}));const Px=(c,t,n={})=>{var s;const a=(s=n.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(t).reduce((o,u)=>(o[u]=kL(u,c,t,a),o),{})},kL=(c,t,n,s)=>{const a=t.find(h=>h.name===c),o=a==null?void 0:a.type,u=n[c];return o&&!s.includes(o)?Qk(o,u):I1(u)},Qk=(c,t)=>{if(c.charAt(0)==="_"){const n=c.slice(1,c.length);return PL(t,n)}switch(c){case Dt.bool:return AL(t);case Dt.float4:case Dt.float8:case Dt.int2:case Dt.int4:case Dt.int8:case Dt.numeric:case Dt.oid:return CL(t);case Dt.json:case Dt.jsonb:return TL(t);case Dt.timestamp:return RL(t);case Dt.abstime:case Dt.date:case Dt.daterange:case Dt.int4range:case Dt.int8range:case Dt.money:case Dt.reltime:case Dt.text:case Dt.time:case Dt.timestamptz:case Dt.timetz:case Dt.tsrange:case Dt.tstzrange:return I1(t);default:return I1(t)}},I1=c=>c,AL=c=>{switch(c){case"t":return!0;case"f":return!1;default:return c}},CL=c=>{if(typeof c=="string"){const t=parseFloat(c);if(!Number.isNaN(t))return t}return c},TL=c=>{if(typeof c=="string")try{return JSON.parse(c)}catch(t){return console.log(`JSON parse error: ${t}`),c}return c},PL=(c,t)=>{if(typeof c!="string")return c;const n=c.length-1,s=c[n];if(c[0]==="{"&&s==="}"){let o;const u=c.slice(1,n);try{o=JSON.parse("["+u+"]")}catch{o=u?u.split(","):[]}return o.map(h=>Qk(t,h))}return c},RL=c=>typeof c=="string"?c.replace(" ","T"):c,Jk=c=>{let t=c;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class h1{constructor(t,n,s={},a=Yk){this.channel=t,this.event=n,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var s;return this._hasReceived(t)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Rx;(function(c){c.SYNC="sync",c.JOIN="join",c.LEAVE="leave"})(Rx||(Rx={}));class Fv{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:o,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Fv.syncState(this.state,a,o,u),this.pendingDiffs.forEach(p=>{this.state=Fv.syncDiff(this.state,p,o,u)}),this.pendingDiffs=[],h()}),this.channel._on(s.diff,{},a=>{const{onJoin:o,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Fv.syncDiff(this.state,a,o,u),h())}),this.onJoin((a,o,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:u})}),this.onLeave((a,o,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,s,a){const o=this.cloneDeep(t),u=this.transformState(n),h={},p={};return this.map(o,(m,v)=>{u[m]||(p[m]=v)}),this.map(u,(m,v)=>{const y=o[m];if(y){const b=v.map(C=>C.presence_ref),_=y.map(C=>C.presence_ref),k=v.filter(C=>_.indexOf(C.presence_ref)<0),x=y.filter(C=>b.indexOf(C.presence_ref)<0);k.length>0&&(h[m]=k),x.length>0&&(p[m]=x)}else h[m]=v}),this.syncDiff(o,{joins:h,leaves:p},s,a)}static syncDiff(t,n,s,a){const{joins:o,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(o,(h,p)=>{var m;const v=(m=t[h])!==null&&m!==void 0?m:[];if(t[h]=this.cloneDeep(p),v.length>0){const y=t[h].map(_=>_.presence_ref),b=v.filter(_=>y.indexOf(_.presence_ref)<0);t[h].unshift(...b)}s(h,v,p)}),this.map(u,(h,p)=>{let m=t[h];if(!m)return;const v=p.map(y=>y.presence_ref);m=m.filter(y=>v.indexOf(y.presence_ref)<0),t[h]=m,a(h,m,p),m.length===0&&delete t[h]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(s=>n(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,s)=>{const a=t[s];return"metas"in a?n[s]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[s]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Lx;(function(c){c.ALL="*",c.INSERT="INSERT",c.UPDATE="UPDATE",c.DELETE="DELETE"})(Lx||(Lx={}));var Nx;(function(c){c.BROADCAST="broadcast",c.PRESENCE="presence",c.POSTGRES_CHANGES="postgres_changes",c.SYSTEM="system"})(Nx||(Nx={}));var $o;(function(c){c.SUBSCRIBED="SUBSCRIBED",c.TIMED_OUT="TIMED_OUT",c.CLOSED="CLOSED",c.CHANNEL_ERROR="CHANNEL_ERROR"})($o||($o={}));class fE{constructor(t,n={config:{}},s){this.topic=t,this.params=n,this.socket=s,this.bindings={},this.state=As.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new h1(this,ta.join,this.params,this.timeout),this.rejoinTimer=new Kk(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=As.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=As.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=As.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=As.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ta.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new Fv(this),this.broadcastEndpointURL=Jk(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var s,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:u,private:h}}=this.params;this._onError(v=>t==null?void 0:t($o.CHANNEL_ERROR,v)),this._onClose(()=>t==null?void 0:t($o.CLOSED));const p={},m={broadcast:o,presence:u,postgres_changes:(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(v=>v.filter))!==null&&a!==void 0?a:[],private:h};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:m},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:v})=>{var y;if(this.socket.setAuth(),v===void 0){t==null||t($o.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,_=(y=b==null?void 0:b.length)!==null&&y!==void 0?y:0,k=[];for(let x=0;x<_;x++){const C=b[x],{filter:{event:N,schema:F,table:D,filter:j}}=C,z=v&&v[x];if(z&&z.event===N&&z.schema===F&&z.table===D&&z.filter===j)k.push(Object.assign(Object.assign({},C),{id:z.id}));else{this.unsubscribe(),t==null||t($o.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,t&&t($o.SUBSCRIBED);return}}).receive("error",v=>{t==null||t($o.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{t==null||t($o.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,s){return this._on(t,n,s)}async send(t,n={}){var s,a;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:u}=t,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:u,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=m.body)===null||a===void 0?void 0:a.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var u,h,p;const m=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((p=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||p===void 0)&&p.ack)&&o("ok"),m.receive("ok",()=>o("ok")),m.receive("error",()=>o("error")),m.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=As.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ta.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const a=new h1(this,ta.leave,{},t);a.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}async _fetchWithTimeout(t,n,s){const a=new AbortController,o=setTimeout(()=>a.abort(),s),u=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(o),u}_push(t,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new h1(this,t,n,s);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,n,s){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,s){var a,o;const u=t.toLocaleLowerCase(),{close:h,error:p,leave:m,join:v}=ta;if(s&&[h,p,m,v].indexOf(u)>=0&&s!==this._joinRef())return;let b=this._onMessage(u,n,s);if(n&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(_=>{var k,x,C;return((k=_.filter)===null||k===void 0?void 0:k.event)==="*"||((C=(x=_.filter)===null||x===void 0?void 0:x.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===u}).map(_=>_.callback(b,s)):(o=this.bindings[u])===null||o===void 0||o.filter(_=>{var k,x,C,N,F,D;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in _){const j=_.id,z=(k=_.filter)===null||k===void 0?void 0:k.event;return j&&((x=n.ids)===null||x===void 0?void 0:x.includes(j))&&(z==="*"||(z==null?void 0:z.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const j=(F=(N=_==null?void 0:_.filter)===null||N===void 0?void 0:N.event)===null||F===void 0?void 0:F.toLocaleLowerCase();return j==="*"||j===((D=n==null?void 0:n.event)===null||D===void 0?void 0:D.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===u}).map(_=>{if(typeof b=="object"&&"ids"in b){const k=b.data,{schema:x,table:C,commit_timestamp:N,type:F,errors:D}=k;b=Object.assign(Object.assign({},{schema:x,table:C,commit_timestamp:N,eventType:F,new:{},old:{},errors:D}),this._getPayloadRecords(k))}_.callback(b,s)})}_isClosed(){return this.state===As.closed}_isJoined(){return this.state===As.joined}_isJoining(){return this.state===As.joining}_isLeaving(){return this.state===As.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,s){const a=t.toLocaleLowerCase(),o={type:a,filter:n,callback:s};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(t,n){const s=t.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&fE.isEqual(a.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const s in t)if(t[s]!==n[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ta.close,{},t)}_onError(t){this._on(ta.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=As.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Px(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Px(t.columns,t.old_record)),n}}const LL=()=>{},NL=typeof WebSocket<"u",IL=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ML{constructor(t,n){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=_L,this.params={},this.timeout=Yk,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=LL,this.conn=null,this.sendBuffer=[],this.serializer=new xL,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let u;return o?u=o:typeof fetch>"u"?u=(...h)=>fp(async()=>{const{default:p}=await Promise.resolve().then(()=>vp);return{default:p}},void 0).then(({default:p})=>p(...h)):u=fetch,(...h)=>u(...h)},this.endPoint=`${t}/${N1.websocket}`,this.httpEndpoint=Jk(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const a=(s=n==null?void 0:n.params)===null||s===void 0?void 0:s.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(o,u)=>u(JSON.stringify(o)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Kk(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(NL){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new OL(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),fp(async()=>{const{default:t}=await import("./browser-0ntjgwbr.js").then(n=>n.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:SL}))}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),t}log(t,n,s){this.logger(t,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case rf.connecting:return yh.Connecting;case rf.open:return yh.Open;case rf.closing:return yh.Closing;default:return yh.Closed}}isConnected(){return this.connectionState()===yh.Open}channel(t,n={config:{}}){const s=new fE(`realtime:${t}`,n,this);return this.channels.push(s),s}push(t){const{topic:n,event:s,payload:a,ref:o}=t,u=()=>{this.encode(t,h=>{var p;(p=this.conn)===null||p===void 0||p.send(h)})};this.log("push",`${n} ${s} (${o})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){let n=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let s=null;try{s=JSON.parse(atob(n.split(".")[1]))}catch{}if(s&&s.exp&&!(Math.floor(Date.now()/1e3)-s.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${s.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${s.exp}`);this.accessTokenValue=n,this.channels.forEach(a=>{n&&a.updateJoinPayload({access_token:n}),a.joinedOnce&&a._isJoined()&&a._push(ta.access_token,{access_token:n})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(EL,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:s,event:a,payload:o,ref:u}=n;u&&u===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${s} ${a} ${u&&"("+u+")"||""}`,o),this.channels.filter(h=>h._isMember(s)).forEach(h=>h._trigger(a,o,u)),this.stateChangeCallbacks.message.forEach(h=>h(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(ta.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const s=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${s}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const s=new Blob([IL],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}}class OL{constructor(t,n,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=rf.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=s.close}}class pE extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Un(c){return typeof c=="object"&&c!==null&&"__isStorageError"in c}class DL extends pE{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class M1 extends pE{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var FL=function(c,t,n,s){function a(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function h(v){try{m(s.next(v))}catch(y){u(y)}}function p(v){try{m(s.throw(v))}catch(y){u(y)}}function m(v){v.done?o(v.value):a(v.value).then(h,p)}m((s=s.apply(c,t||[])).next())})};const Zk=c=>{let t;return c?t=c:typeof fetch>"u"?t=(...n)=>fp(async()=>{const{default:s}=await Promise.resolve().then(()=>vp);return{default:s}},void 0).then(({default:s})=>s(...n)):t=fetch,(...n)=>t(...n)},jL=()=>FL(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield fp(()=>Promise.resolve().then(()=>vp),void 0)).Response:Response}),O1=c=>{if(Array.isArray(c))return c.map(n=>O1(n));if(typeof c=="function"||c!==Object(c))return c;const t={};return Object.entries(c).forEach(([n,s])=>{const a=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[a]=O1(s)}),t};var Nd=function(c,t,n,s){function a(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function h(v){try{m(s.next(v))}catch(y){u(y)}}function p(v){try{m(s.throw(v))}catch(y){u(y)}}function m(v){v.done?o(v.value):a(v.value).then(h,p)}m((s=s.apply(c,t||[])).next())})};const d1=c=>c.msg||c.message||c.error_description||c.error||JSON.stringify(c),$L=(c,t,n)=>Nd(void 0,void 0,void 0,function*(){const s=yield jL();c instanceof s&&!(n!=null&&n.noResolveJson)?c.json().then(a=>{t(new DL(d1(a),c.status||500))}).catch(a=>{t(new M1(d1(a),a))}):t(new M1(d1(c),c))}),zL=(c,t,n,s)=>{const a={method:c,headers:(t==null?void 0:t.headers)||{}};return c==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s&&(a.body=JSON.stringify(s)),Object.assign(Object.assign({},a),n))};function w0(c,t,n,s,a,o){return Nd(this,void 0,void 0,function*(){return new Promise((u,h)=>{c(n,zL(t,s,a,o)).then(p=>{if(!p.ok)throw p;return s!=null&&s.noResolveJson?p:p.json()}).then(p=>u(p)).catch(p=>$L(p,h,s))})})}function bw(c,t,n,s){return Nd(this,void 0,void 0,function*(){return w0(c,"GET",t,n,s)})}function kl(c,t,n,s,a){return Nd(this,void 0,void 0,function*(){return w0(c,"POST",t,s,a,n)})}function BL(c,t,n,s,a){return Nd(this,void 0,void 0,function*(){return w0(c,"PUT",t,s,a,n)})}function UL(c,t,n,s){return Nd(this,void 0,void 0,function*(){return w0(c,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function eA(c,t,n,s,a){return Nd(this,void 0,void 0,function*(){return w0(c,"DELETE",t,s,a,n)})}var qr=function(c,t,n,s){function a(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function h(v){try{m(s.next(v))}catch(y){u(y)}}function p(v){try{m(s.throw(v))}catch(y){u(y)}}function m(v){v.done?o(v.value):a(v.value).then(h,p)}m((s=s.apply(c,t||[])).next())})};const HL={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ix={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class VL{constructor(t,n={},s,a){this.url=t,this.headers=n,this.bucketId=s,this.fetch=Zk(a)}uploadOrUpdate(t,n,s,a){return qr(this,void 0,void 0,function*(){try{let o;const u=Object.assign(Object.assign({},Ix),a);let h=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const p=u.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),p&&o.append("metadata",this.encodeMetadata(p)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.append("cacheControl",u.cacheControl),p&&o.append("metadata",this.encodeMetadata(p))):(o=s,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,p&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),a!=null&&a.headers&&(h=Object.assign(Object.assign({},h),a.headers));const m=this._removeEmptyFolders(n),v=this._getFinalPath(m),y=yield this.fetch(`${this.url}/object/${v}`,Object.assign({method:t,body:o,headers:h},u!=null&&u.duplex?{duplex:u.duplex}:{})),b=yield y.json();return y.ok?{data:{path:m,id:b.Id,fullPath:b.Key},error:null}:{data:null,error:b}}catch(o){if(Un(o))return{data:null,error:o};throw o}})}upload(t,n,s){return qr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,s)})}uploadToSignedUrl(t,n,s,a){return qr(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),u=this._getFinalPath(o),h=new URL(this.url+`/object/upload/sign/${u}`);h.searchParams.set("token",n);try{let p;const m=Object.assign({upsert:Ix.upsert},a),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&s instanceof Blob?(p=new FormData,p.append("cacheControl",m.cacheControl),p.append("",s)):typeof FormData<"u"&&s instanceof FormData?(p=s,p.append("cacheControl",m.cacheControl)):(p=s,v["cache-control"]=`max-age=${m.cacheControl}`,v["content-type"]=m.contentType);const y=yield this.fetch(h.toString(),{method:"PUT",body:p,headers:v}),b=yield y.json();return y.ok?{data:{path:o,fullPath:b.Key},error:null}:{data:null,error:b}}catch(p){if(Un(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(t,n){return qr(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const o=yield kl(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),u=new URL(this.url+o.url),h=u.searchParams.get("token");if(!h)throw new pE("No token returned by API");return{data:{signedUrl:u.toString(),path:t,token:h},error:null}}catch(s){if(Un(s))return{data:null,error:s};throw s}})}update(t,n,s){return qr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,s)})}move(t,n,s){return qr(this,void 0,void 0,function*(){try{return{data:yield kl(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Un(a))return{data:null,error:a};throw a}})}copy(t,n,s){return qr(this,void 0,void 0,function*(){try{return{data:{path:(yield kl(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Un(a))return{data:null,error:a};throw a}})}createSignedUrl(t,n,s){return qr(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),o=yield kl(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const u=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${u}`)},{data:o,error:null}}catch(a){if(Un(a))return{data:null,error:a};throw a}})}createSignedUrls(t,n,s){return qr(this,void 0,void 0,function*(){try{const a=yield kl(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${o}`):null})),error:null}}catch(a){if(Un(a))return{data:null,error:a};throw a}})}download(t,n){return qr(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),u=o?`?${o}`:"";try{const h=this._getFinalPath(t);return{data:yield(yield bw(this.fetch,`${this.url}/${a}/${h}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(Un(h))return{data:null,error:h};throw h}})}info(t){return qr(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const s=yield bw(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:O1(s),error:null}}catch(s){if(Un(s))return{data:null,error:s};throw s}})}exists(t){return qr(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield UL(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Un(s)&&s instanceof M1){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,n){const s=this._getFinalPath(t),a=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&a.push(o);const h=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",p=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});p!==""&&a.push(p);let m=a.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${s}${m}`)}}}remove(t){return qr(this,void 0,void 0,function*(){try{return{data:yield eA(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Un(n))return{data:null,error:n};throw n}})}list(t,n,s){return qr(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},HL),n),{prefix:t||""});return{data:yield kl(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(Un(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const WL="2.7.1",GL={"X-Client-Info":`storage-js/${WL}`};var Bd=function(c,t,n,s){function a(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function h(v){try{m(s.next(v))}catch(y){u(y)}}function p(v){try{m(s.throw(v))}catch(y){u(y)}}function m(v){v.done?o(v.value):a(v.value).then(h,p)}m((s=s.apply(c,t||[])).next())})};class qL{constructor(t,n={},s){this.url=t,this.headers=Object.assign(Object.assign({},GL),n),this.fetch=Zk(s)}listBuckets(){return Bd(this,void 0,void 0,function*(){try{return{data:yield bw(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Un(t))return{data:null,error:t};throw t}})}getBucket(t){return Bd(this,void 0,void 0,function*(){try{return{data:yield bw(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Un(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Bd(this,void 0,void 0,function*(){try{return{data:yield kl(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Un(s))return{data:null,error:s};throw s}})}updateBucket(t,n){return Bd(this,void 0,void 0,function*(){try{return{data:yield BL(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Un(s))return{data:null,error:s};throw s}})}emptyBucket(t){return Bd(this,void 0,void 0,function*(){try{return{data:yield kl(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Un(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Bd(this,void 0,void 0,function*(){try{return{data:yield eA(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Un(n))return{data:null,error:n};throw n}})}}class XL extends qL{constructor(t,n={},s){super(t,n,s)}from(t){return new VL(this.url,this.headers,t,this.fetch)}}const YL="2.49.4";let wv="";typeof Deno<"u"?wv="deno":typeof document<"u"?wv="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wv="react-native":wv="node";const KL={"X-Client-Info":`supabase-js-${wv}/${YL}`},QL={headers:KL},JL={schema:"public"},ZL={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e2={};var t2=function(c,t,n,s){function a(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function h(v){try{m(s.next(v))}catch(y){u(y)}}function p(v){try{m(s.throw(v))}catch(y){u(y)}}function m(v){v.done?o(v.value):a(v.value).then(h,p)}m((s=s.apply(c,t||[])).next())})};const n2=c=>{let t;return c?t=c:typeof fetch>"u"?t=Hk:t=fetch,(...n)=>t(...n)},r2=()=>typeof Headers>"u"?Vk:Headers,s2=(c,t,n)=>{const s=n2(n),a=r2();return(o,u)=>t2(void 0,void 0,void 0,function*(){var h;const p=(h=yield t())!==null&&h!==void 0?h:c;let m=new a(u==null?void 0:u.headers);return m.has("apikey")||m.set("apikey",c),m.has("Authorization")||m.set("Authorization",`Bearer ${p}`),s(o,Object.assign(Object.assign({},u),{headers:m}))})};var i2=function(c,t,n,s){function a(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function h(v){try{m(s.next(v))}catch(y){u(y)}}function p(v){try{m(s.throw(v))}catch(y){u(y)}}function m(v){v.done?o(v.value):a(v.value).then(h,p)}m((s=s.apply(c,t||[])).next())})};function a2(c){return c.replace(/\/$/,"")}function o2(c,t){const{db:n,auth:s,realtime:a,global:o}=c,{db:u,auth:h,realtime:p,global:m}=t,v={db:Object.assign(Object.assign({},u),n),auth:Object.assign(Object.assign({},h),s),realtime:Object.assign(Object.assign({},p),a),global:Object.assign(Object.assign({},m),o),accessToken:()=>i2(this,void 0,void 0,function*(){return""})};return c.accessToken?v.accessToken=c.accessToken:delete v.accessToken,v}const tA="2.69.1",Wd=30*1e3,D1=3,f1=D1*Wd,l2="http://localhost:9999",u2="supabase.auth.token",c2={"X-Client-Info":`gotrue-js/${tA}`},F1="X-Supabase-Api-Version",nA={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},h2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,d2=6e5;class gE extends Error{constructor(t,n,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function Ye(c){return typeof c=="object"&&c!==null&&"__isAuthError"in c}class f2 extends gE{constructor(t,n,s){super(t,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function p2(c){return Ye(c)&&c.name==="AuthApiError"}class rA extends gE{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class _u extends gE{constructor(t,n,s,a){super(t,s,a),this.name=n,this.status=s}}class Sl extends _u{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function g2(c){return Ye(c)&&c.name==="AuthSessionMissingError"}class p1 extends _u{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class R0 extends _u{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class L0 extends _u{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function m2(c){return Ye(c)&&c.name==="AuthImplicitGrantRedirectError"}class Mx extends _u{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class j1 extends _u{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function g1(c){return Ye(c)&&c.name==="AuthRetryableFetchError"}class Ox extends _u{constructor(t,n,s){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class jv extends _u{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Dx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Fx=` 	
\r=`.split(""),v2=(()=>{const c=new Array(128);for(let t=0;t<c.length;t+=1)c[t]=-1;for(let t=0;t<Fx.length;t+=1)c[Fx[t].charCodeAt(0)]=-2;for(let t=0;t<Dx.length;t+=1)c[Dx[t].charCodeAt(0)]=t;return c})();function sA(c,t,n){const s=v2[c];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(c)}"`)}}function jx(c){const t=[],n=u=>{t.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=u=>{b2(u,s,n)};for(let u=0;u<c.length;u+=1)sA(c.charCodeAt(u),a,o);return t.join("")}function y2(c,t){if(c<=127){t(c);return}else if(c<=2047){t(192|c>>6),t(128|c&63);return}else if(c<=65535){t(224|c>>12),t(128|c>>6&63),t(128|c&63);return}else if(c<=1114111){t(240|c>>18),t(128|c>>12&63),t(128|c>>6&63),t(128|c&63);return}throw new Error(`Unrecognized Unicode codepoint: ${c.toString(16)}`)}function w2(c,t){for(let n=0;n<c.length;n+=1){let s=c.charCodeAt(n);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(c.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}y2(s,t)}}function b2(c,t,n){if(t.utf8seq===0){if(c<=127){n(c);return}for(let s=1;s<6;s+=1)if((c>>7-s&1)===0){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=c&31;else if(t.utf8seq===3)t.codepoint=c&15;else if(t.utf8seq===4)t.codepoint=c&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(c<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|c&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function _2(c){const t=[],n={queue:0,queuedBits:0},s=a=>{t.push(a)};for(let a=0;a<c.length;a+=1)sA(c.charCodeAt(a),n,s);return new Uint8Array(t)}function S2(c){const t=[];return w2(c,n=>t.push(n)),new Uint8Array(t)}function E2(c){return Math.round(Date.now()/1e3)+c}function x2(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){const t=Math.random()*16|0;return(c=="x"?t:t&3|8).toString(16)})}const oa=()=>typeof window<"u"&&typeof document<"u",fh={tested:!1,writable:!1},$v=()=>{if(!oa())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fh.tested)return fh.writable;const c=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(c,c),globalThis.localStorage.removeItem(c),fh.tested=!0,fh.writable=!0}catch{fh.tested=!0,fh.writable=!1}return fh.writable};function k2(c){const t={},n=new URL(c);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,o)=>{t[o]=a})}catch{}return n.searchParams.forEach((s,a)=>{t[a]=s}),t}const iA=c=>{let t;return c?t=c:typeof fetch>"u"?t=(...n)=>fp(async()=>{const{default:s}=await Promise.resolve().then(()=>vp);return{default:s}},void 0).then(({default:s})=>s(...n)):t=fetch,(...n)=>t(...n)},A2=c=>typeof c=="object"&&c!==null&&"status"in c&&"ok"in c&&"json"in c&&typeof c.json=="function",aA=async(c,t,n)=>{await c.setItem(t,JSON.stringify(n))},N0=async(c,t)=>{const n=await c.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},I0=async(c,t)=>{await c.removeItem(t)};class Zw{constructor(){this.promise=new Zw.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Zw.promiseConstructor=Promise;function m1(c){const t=c.split(".");if(t.length!==3)throw new jv("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!h2.test(t[s]))throw new jv("JWT not in base64url format");return{header:JSON.parse(jx(t[0])),payload:JSON.parse(jx(t[1])),signature:_2(t[2]),raw:{header:t[0],payload:t[1]}}}async function C2(c){return await new Promise(t=>{setTimeout(()=>t(null),c)})}function T2(c,t){return new Promise((s,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const u=await c(o);if(!t(o,null,u)){s(u);return}}catch(u){if(!t(o,u)){a(u);return}}})()})}function P2(c){return("0"+c.toString(16)).substr(-2)}function R2(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let a="";for(let o=0;o<56;o++)a+=n.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(t),Array.from(t,P2).join("")}async function L2(c){const n=new TextEncoder().encode(c),s=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(s);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function N2(c){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),c;const n=await L2(c);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ud(c,t,n=!1){const s=R2();let a=s;n&&(a+="/PASSWORD_RECOVERY"),await aA(c,`${t}-code-verifier`,a);const o=await N2(s);return[o,s===o?"plain":"s256"]}const I2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function M2(c){const t=c.headers.get(F1);if(!t||!t.match(I2))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function O2(c){if(!c)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(c<=t)throw new Error("JWT has expired")}function D2(c){switch(c){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var F2=function(c,t){var n={};for(var s in c)Object.prototype.hasOwnProperty.call(c,s)&&t.indexOf(s)<0&&(n[s]=c[s]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(c);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(c,s[a])&&(n[s[a]]=c[s[a]]);return n};const ph=c=>c.msg||c.message||c.error_description||c.error||JSON.stringify(c),j2=[502,503,504];async function $x(c){var t;if(!A2(c))throw new j1(ph(c),0);if(j2.includes(c.status))throw new j1(ph(c),c.status);let n;try{n=await c.json()}catch(o){throw new rA(ph(o),o)}let s;const a=M2(c);if(a&&a.getTime()>=nA["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new Ox(ph(n),c.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new Sl}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,u)=>o&&typeof u=="string",!0))throw new Ox(ph(n),c.status,n.weak_password.reasons);throw new f2(ph(n),c.status||500,s)}const $2=(c,t,n,s)=>{const a={method:c,headers:(t==null?void 0:t.headers)||{}};return c==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),n))};async function ot(c,t,n,s){var a;const o=Object.assign({},s==null?void 0:s.headers);o[F1]||(o[F1]=nA["2024-01-01"].name),s!=null&&s.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const u=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(u.redirect_to=s.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",p=await z2(c,t,n+h,{headers:o,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(p):{data:Object.assign({},p),error:null}}async function z2(c,t,n,s,a,o){const u=$2(t,s,a,o);let h;try{h=await c(n,Object.assign({},u))}catch(p){throw console.error(p),new j1(ph(p),0)}if(h.ok||await $x(h),s!=null&&s.noResolveJson)return h;try{return await h.json()}catch(p){await $x(p)}}function El(c){var t;let n=null;V2(c)&&(n=Object.assign({},c),c.expires_at||(n.expires_at=E2(c.expires_in)));const s=(t=c.user)!==null&&t!==void 0?t:c;return{data:{session:n,user:s},error:null}}function zx(c){const t=El(c);return!t.error&&c.weak_password&&typeof c.weak_password=="object"&&Array.isArray(c.weak_password.reasons)&&c.weak_password.reasons.length&&c.weak_password.message&&typeof c.weak_password.message=="string"&&c.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(t.data.weak_password=c.weak_password),t}function Al(c){var t;return{data:{user:(t=c.user)!==null&&t!==void 0?t:c},error:null}}function B2(c){return{data:c,error:null}}function U2(c){const{action_link:t,email_otp:n,hashed_token:s,redirect_to:a,verification_type:o}=c,u=F2(c,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:t,email_otp:n,hashed_token:s,redirect_to:a,verification_type:o},p=Object.assign({},u);return{data:{properties:h,user:p},error:null}}function H2(c){return c}function V2(c){return c.access_token&&c.refresh_token&&c.expires_in}var W2=function(c,t){var n={};for(var s in c)Object.prototype.hasOwnProperty.call(c,s)&&t.indexOf(s)<0&&(n[s]=c[s]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(c);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(c,s[a])&&(n[s[a]]=c[s[a]]);return n};class G2{constructor({url:t="",headers:n={},fetch:s}){this.url=t,this.headers=n,this.fetch=iA(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n="global"){try{return await ot(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ye(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,n={}){try{return await ot(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Al})}catch(s){if(Ye(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:n}=t,s=W2(t,["options"]),a=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await ot(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:U2,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ye(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await ot(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Al})}catch(n){if(Ye(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,s,a,o,u,h,p;try{const m={nextPage:null,lastPage:0,total:0},v=await ot(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:H2});if(v.error)throw v.error;const y=await v.json(),b=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,_=(p=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&p!==void 0?p:[];return _.length>0&&(_.forEach(k=>{const x=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(k.split(";")[1].split("=")[1]);m[`${C}Page`]=x}),m.total=parseInt(b)),{data:Object.assign(Object.assign({},y),m),error:null}}catch(m){if(Ye(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){try{return await ot(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Al})}catch(n){if(Ye(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){try{return await ot(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Al})}catch(s){if(Ye(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,n=!1){try{return await ot(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Al})}catch(s){if(Ye(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){try{const{data:n,error:s}=await ot(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:s}}catch(n){if(Ye(n))return{data:null,error:n};throw n}}async _deleteFactor(t){try{return{data:await ot(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ye(n))return{data:null,error:n};throw n}}}const q2={getItem:c=>$v()?globalThis.localStorage.getItem(c):null,setItem:(c,t)=>{$v()&&globalThis.localStorage.setItem(c,t)},removeItem:c=>{$v()&&globalThis.localStorage.removeItem(c)}};function Bx(c={}){return{getItem:t=>c[t]||null,setItem:(t,n)=>{c[t]=n},removeItem:t=>{delete c[t]}}}function X2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Hd={debug:!!(globalThis&&$v()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class oA extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Y2 extends oA{}async function K2(c,t,n){Hd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",c,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Hd.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",c)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(c,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Hd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",c,a.name);try{return await n()}finally{Hd.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",c,a.name)}}else{if(t===0)throw Hd.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",c),new Y2(`Acquiring an exclusive Navigator LockManager lock "${c}" immediately failed`);if(Hd.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}X2();const Q2={url:l2,storageKey:u2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:c2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ux(c,t,n){return await n()}class Wv{constructor(t){var n,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Wv.nextInstanceID,Wv.nextInstanceID+=1,this.instanceID>0&&oa()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Q2),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new G2({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=iA(a.fetch),this.lock=a.lock||Ux,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:oa()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=K2:this.lock=Ux,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:$v()?this.storage=q2:(this.memoryStorage={},this.storage=Bx(this.memoryStorage)):(this.memoryStorage={},this.storage=Bx(this.memoryStorage)),oa()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${tA}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=k2(window.location.href);let s="none";if(this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce"),oa()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:o}=await this._getSessionFromURL(n,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),m2(o)){const p=(t=o.details)===null||t===void 0?void 0:t.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:u,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ye(n)?{error:n}:{error:new rA("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,s,a;try{const o=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:El}),{data:u,error:h}=o;if(h||!u)return{data:{user:null,session:null},error:h};const p=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(o){if(Ye(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var n,s,a;try{let o;if("email"in t){const{email:v,password:y,options:b}=t;let _=null,k=null;this.flowType==="pkce"&&([_,k]=await Ud(this.storage,this.storageKey)),o=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:v,password:y,data:(n=b==null?void 0:b.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:_,code_challenge_method:k},xform:El})}else if("phone"in t){const{phone:v,password:y,options:b}=t;o=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:y,data:(s=b==null?void 0:b.data)!==null&&s!==void 0?s:{},channel:(a=b==null?void 0:b.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:El})}else throw new R0("You must provide either an email or phone number and a password");const{data:u,error:h}=o;if(h||!u)return{data:{user:null,session:null},error:h};const p=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(o){if(Ye(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:u,options:h}=t;n=await ot(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:zx})}else if("phone"in t){const{phone:o,password:u,options:h}=t;n=await ot(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:zx})}else throw new R0("You must provide either an email or phone number and a password");const{data:s,error:a}=n;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new p1}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(n){if(Ye(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,s,a,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const n=await N0(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(n??"").split("/");try{const{data:o,error:u}=await ot(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:El});if(await I0(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new p1}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:u})}catch(o){if(Ye(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:n,provider:s,token:a,access_token:o,nonce:u}=t,h=await ot(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:o,nonce:u,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:El}),{data:p,error:m}=h;return m?{data:{user:null,session:null},error:m}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new p1}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:m})}catch(n){if(Ye(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,s,a,o,u;try{if("email"in t){const{email:h,options:p}=t;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await Ud(this.storage,this.storageKey));const{error:y}=await ot(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},create_user:(s=p==null?void 0:p.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:v},redirectTo:p==null?void 0:p.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in t){const{phone:h,options:p}=t,{data:m,error:v}=await ot(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=p==null?void 0:p.data)!==null&&a!==void 0?a:{},create_user:(o=p==null?void 0:p.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(u=p==null?void 0:p.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:v}}throw new R0("You must provide either an email or phone number.")}catch(h){if(Ye(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(t){var n,s;try{let a,o;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:h}=await ot(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:El});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const p=u.session,m=u.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(a){if(Ye(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var n,s,a;try{let o=null,u=null;return this.flowType==="pkce"&&([o,u]=await Ud(this.storage,this.storageKey)),await ot(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:u}),headers:this.headers,xform:B2})}catch(o){if(Ye(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:s}=t;if(s)throw s;if(!n)throw new Sl;const{error:a}=await ot(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(Ye(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:s,type:a,options:o}=t,{error:u}=await ot(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in t){const{phone:s,type:a,options:o}=t,{data:u,error:h}=await ot(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new R0("You must provide either an email or phone number and a type")}catch(n){if(Ye(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await N0(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<f1:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.storage.isServer){let u=this.suppressGetSessionWarning;t=new Proxy(t,{get:(p,m,v)=>(!u&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(p,m,v))})}return{data:{session:t},error:null}}const{session:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ot(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Al}):await this._useSession(async n=>{var s,a,o;const{data:u,error:h}=n;if(h)throw h;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Sl}:await ot(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:Al})})}catch(n){if(Ye(n))return g2(n)&&(await this._removeSession(),await I0(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async s=>{const{data:a,error:o}=s;if(o)throw o;if(!a.session)throw new Sl;const u=a.session;let h=null,p=null;this.flowType==="pkce"&&t.email!=null&&([h,p]=await Ud(this.storage,this.storageKey));const{data:m,error:v}=await ot(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:h,code_challenge_method:p}),jwt:u.access_token,xform:Al});if(v)throw v;return u.user=m.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(s){if(Ye(s))return{data:{user:null},error:s};throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Sl;const n=Date.now()/1e3;let s=n,a=!0,o=null;const{payload:u}=m1(t.access_token);if(u.exp&&(s=u.exp,a=s<=n),a){const{session:h,error:p}=await this._callRefreshToken(t.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!h)return{data:{user:null,session:null},error:null};o=h}else{const{data:h,error:p}=await this._getUser(t.access_token);if(p)throw p;o={access_token:t.access_token,refresh_token:t.refresh_token,user:h.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(Ye(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var s;if(!t){const{data:u,error:h}=n;if(h)throw h;t=(s=u.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new Sl;const{session:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ye(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!oa())throw new L0("No browser detected.");if(t.error||t.error_description||t.error_code)throw new L0(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Mx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new L0("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Mx("No code detected.");const{data:F,error:D}=await this._exchangeCodeForSession(t.code);if(D)throw D;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:F.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:o,refresh_token:u,expires_in:h,expires_at:p,token_type:m}=t;if(!o||!h||!u||!m)throw new L0("No session defined in URL");const v=Math.round(Date.now()/1e3),y=parseInt(h);let b=v+y;p&&(b=parseInt(p));const _=b-v;_*1e3<=Wd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${y}s`);const k=b-y;v-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,b,v):v-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,b,v);const{data:x,error:C}=await this._getUser(o);if(C)throw C;const N={provider_token:s,provider_refresh_token:a,access_token:o,expires_in:y,expires_at:b,refresh_token:u,token_type:m,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:N,redirectType:t.type},error:null}}catch(s){if(Ye(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await N0(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:a,error:o}=n;if(o)return{error:o};const u=(s=a.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:h}=await this.admin.signOut(u,t);if(h&&!(p2(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return t!=="others"&&(await this._removeSession(),await I0(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=x2(),s={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async n=>{var s,a;try{const{data:{session:o},error:u}=n;if(u)throw u;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Ud(this.storage,this.storageKey,!0));try{return await ot(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(Ye(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Ye(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:s,error:a}=await this._useSession(async o=>{var u,h,p,m,v;const{data:y,error:b}=o;if(b)throw b;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=t.options)===null||h===void 0?void 0:h.scopes,queryParams:(p=t.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await ot(this.fetch,"GET",_,{headers:this.headers,jwt:(v=(m=y.session)===null||m===void 0?void 0:m.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return oa()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:t.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(Ye(s))return{data:{provider:t.provider,url:null},error:s};throw s}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var s,a;const{data:o,error:u}=n;if(u)throw u;return await ot(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(Ye(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await T2(async a=>(a>0&&await C2(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await ot(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:El})),(a,o)=>{const u=200*Math.pow(2,a);return o&&g1(o)&&Date.now()+u-s<Wd})}catch(s){if(this._debug(n,"error",s),Ye(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",s),oa()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await N0(this.storage,this.storageKey);if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<f1;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${f1}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),g1(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var n,s;if(!t)throw new Sl;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Zw;const{data:o,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!o.session)throw new Sl;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const h={session:o.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(o){if(this._debug(a,"error",o),Ye(o)){const u={session:null,error:o};return g1(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,s=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(t,n)}catch(p){o.push(p)}});if(await Promise.all(u),o.length>0){for(let h=0;h<o.length;h+=1)console.error(o[h]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await aA(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await I0(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&oa()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Wd);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-t)/Wd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Wd}ms, refresh threshold is ${D1} ticks`),a<=D1&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof oA)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!oa()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,s){const a=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,u]=await Ud(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(h.toString())}if(s!=null&&s.queryParams){const o=new URLSearchParams(s.queryParams);a.push(o.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var s;const{data:a,error:o}=n;return o?{data:null,error:o}:await ot(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(Ye(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var s,a;const{data:o,error:u}=n;if(u)return{data:null,error:u};const h=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:p,error:m}=await ot(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return m?{data:null,error:m}:(t.factorType==="totp"&&(!((a=p==null?void 0:p.totp)===null||a===void 0)&&a.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(n){if(Ye(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:o}=n;if(o)return{data:null,error:o};const{data:u,error:h}=await ot(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:h})})}catch(n){if(Ye(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:o}=n;return o?{data:null,error:o}:await ot(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(Ye(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:s}=await this._challenge({factorId:t.factorId});return s?{data:null,error:s}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const s=(t==null?void 0:t.factors)||[],a=s.filter(u=>u.factor_type==="totp"&&u.status==="verified"),o=s.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:s,totp:a,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,s;const{data:{session:a},error:o}=t;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=m1(a.access_token);let h=null;u.aal&&(h=u.aal);let p=h;((s=(n=a.user.factors)===null||n===void 0?void 0:n.filter(y=>y.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(p="aal2");const v=u.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(t,n={keys:[]}){let s=n.keys.find(u=>u.kid===t);if(s||(s=this.jwks.keys.find(u=>u.kid===t),s&&this.jwks_cached_at+d2>Date.now()))return s;const{data:a,error:o}=await ot(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;if(!a.keys||a.keys.length===0)throw new jv("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),s=a.keys.find(u=>u.kid===t),!s)throw new jv("No matching signing key found in JWKS");return s}async getClaims(t,n={keys:[]}){try{let s=t;if(!s){const{data:_,error:k}=await this.getSession();if(k||!_.session)return{data:null,error:k};s=_.session.access_token}const{header:a,payload:o,signature:u,raw:{header:h,payload:p}}=m1(s);if(O2(o.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:_}=await this.getUser(s);if(_)throw _;return{data:{claims:o,header:a,signature:u},error:null}}const m=D2(a.alg),v=await this.fetchJwk(a.kid,n),y=await crypto.subtle.importKey("jwk",v,m,!0,["verify"]);if(!await crypto.subtle.verify(m,y,u,S2(`${h}.${p}`)))throw new jv("Invalid JWT signature");return{data:{claims:o,header:a,signature:u},error:null}}catch(s){if(Ye(s))return{data:null,error:s};throw s}}}Wv.nextInstanceID=0;const J2=Wv;class Z2 extends J2{constructor(t){super(t)}}var eN=function(c,t,n,s){function a(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function h(v){try{m(s.next(v))}catch(y){u(y)}}function p(v){try{m(s.throw(v))}catch(y){u(y)}}function m(v){v.done?o(v.value):a(v.value).then(h,p)}m((s=s.apply(c,t||[])).next())})};class tN{constructor(t,n,s){var a,o,u;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const h=a2(t);this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const p=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,m={db:JL,realtime:e2,auth:Object.assign(Object.assign({},ZL),{storageKey:p}),global:QL},v=o2(s??{},m);this.storageKey=(a=v.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=v.global.headers)!==null&&o!==void 0?o:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(y,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=v.auth)!==null&&u!==void 0?u:{},this.headers,v.global.fetch),this.fetch=s2(n,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new wL(`${h}/rest/v1`,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),v.accessToken||this._listenForAuthEvents()}get functions(){return new oL(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new XL(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},s={}){return this.rest.rpc(t,n,s)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return eN(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(n=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:s,storage:a,storageKey:o,flowType:u,lock:h,debug:p},m,v){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Z2({url:this.authUrl,headers:Object.assign(Object.assign({},y),m),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:s,storage:a,flowType:u,lock:h,debug:p,fetch:v,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new ML(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,s)=>{this._handleTokenChanged(n,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(t,n,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const nN=(c,t,n)=>new tN(c,t,n),rN="https://zigiuudlksfggexvwepd.supabase.co",sN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InppZ2l1dWRsa3NmZ2dleHZ3ZXBkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ2NzA2NzUsImV4cCI6MjA2MDI0NjY3NX0.m2TYg18ZJNVqCdDCeCYF-ZvrZgpwwFlL5YSFV6cN7Ng",$1=nN(rN,sN);function iN(){const[c,t]=me.useState([]);return me.useEffect(()=>{(async()=>{const{data:s,error:a}=await $1.from("comics").select("*").order("date",{ascending:!1});a?console.error("Failed to fetch comics:",a):t(s)})()},[]),se.jsxs("div",{className:"p-6",children:[se.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"📚 Latest Comics"}),se.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:c.map(n=>se.jsxs(Er,{to:`/comic/${n.id}`,className:"bg-zinc-900 border border-zinc-700 p-4 rounded-xl shadow-md hover:shadow-xl hover:border-white transition-all duration-300 transform hover:scale-105",children:[se.jsx("img",{src:n.cover,alt:n.title,className:"w-full h-auto max-h-[600px] object-contain rounded-md"}),se.jsxs("h2",{className:"text-lg font-bold mt-3 text-white text-center",children:["Title: ",n.title]}),se.jsxs("p",{className:"text-gray-400 text-sm text-center",children:["Author: ",n.author]}),se.jsxs("p",{className:"text-gray-400 text-sm text-center",children:["Date: ",n.date]}),se.jsxs("p",{className:"text-gray-400 text-sm text-center",children:["Genre: ",n.category]})]},n.id))})]})}const lA={"black-sweatshirt":{name:"Black Sweatshirt",image:"/assets/merch/black_sweatshirt.png",description:"Fade into the shadows like a UFO at night. Cozy and bold, this black sweatshirt is a must-have for undercover intergalactic operatives.",hostedButtonId:"9GX2P52VCBXSG"},"white-shirt":{name:"White Shirt",image:"/assets/merch/white_shirt.png",description:"Clean. Crisp. Cosmic. The white tee that says: 'I answered the call… and all I got was abducted.'",hostedButtonId:"R3E6REKYNW4TA"},"green-sweatshirt":{name:"Green Sweatshirt",image:"/assets/merch/green_sweatshirt.png",description:"Stay warm while decoding alien transmissions. This green sweatshirt is subtle enough to wear on Earth — or Mars.",hostedButtonId:"9GX2P52VCBXSG"},"black-shirt":{name:"Black Shirt",image:"/assets/merch/black_shirt.png",description:"Minimalist, mysterious, and made for those who speak in ancient alien frequencies. Looks great under a tin foil hat.",hostedButtonId:"R3E6REKYNW4TA"}};function aN(){return se.jsxs("div",{className:"p-10 bg-black min-h-screen",children:[se.jsx("h1",{className:"text-white text-4xl font-bold text-center mb-10",children:"🛍️ The Galactic Merch Store"}),se.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-10",children:Object.entries(lA).map(([c,t])=>se.jsxs("div",{className:"bg-white text-black rounded-lg overflow-hidden shadow-lg transform transition duration-300 hover:scale-105 hover:shadow-2xl",children:[se.jsx("img",{src:t.image,alt:t.name,className:"h-64 w-full object-contain bg-black p-4"}),se.jsxs("div",{className:"p-4",children:[se.jsx("h2",{className:"text-lg font-bold",children:t.name}),se.jsxs("p",{className:"text-sm text-gray-600 mt-2 mb-4",children:[t.description.slice(0,60),"..."]}),se.jsx(Er,{to:`/product/${c}`,className:"inline-block bg-black text-white px-4 py-2 rounded hover:bg-gray-800 transition",children:"View Product"})]})]},c))})]})}function oN(){return se.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-10",children:se.jsxs("div",{className:"max-w-2xl mx-auto mt-10 px-4",children:[se.jsx("h2",{className:"text-2xl font-bold",children:"About the Comic"}),se.jsx("p",{className:"mt-4 text-gray-400",children:"Josh is just your average language teacher... until the aliens called. Follow his mysterious black-and-white journey as the only human who can understand an extraterrestrial transmission. Will he survive? Will he teach the aliens verbs?"})]})})}const lN="/assets/icon-B82D9isC.png",uN="/assets/allo-DroSCh0Y.mp3";function cN(){const[c,t]=me.useState(!1),n=()=>{new Audio(uN).play()},s=()=>{t(!c)};return se.jsxs("header",{className:"bg-black text-white p-4 border-b border-gray-700",children:[se.jsxs("div",{className:"flex justify-between items-center",children:[se.jsxs("div",{className:"flex items-center",children:[se.jsx("img",{src:lN,alt:"Site Logo",className:"h-16 w-16 mr-2 cursor-pointer",onClick:n}),se.jsx(Er,{to:"/",className:"text-2xl font-bold tracking-widest",children:se.jsx("span",{className:"text-2xl font-bold tracking-widest",children:"TendoComic"})})]}),se.jsxs("nav",{className:"hidden md:flex space-x-6 text-sm uppercase",children:[se.jsx(Er,{to:"/",children:"Home"}),se.jsx(Er,{to:"/comic",children:"Comic"}),se.jsx(Er,{to:"/shop",children:"Shop"}),se.jsx(Er,{to:"/about",children:"About"}),se.jsx(Er,{to:"/broadcast",children:"Broadcast"})]}),se.jsx("button",{className:"md:hidden text-2xl",onClick:s,children:c?"✖":"☰"})]}),c&&se.jsxs("nav",{className:"flex flex-col space-y-4 mt-4 text-center text-sm uppercase md:hidden",children:[se.jsx(Er,{to:"/",onClick:()=>t(!1),children:"Home"}),se.jsx(Er,{to:"/comic",onClick:()=>t(!1),children:"Comic"}),se.jsx(Er,{to:"/shop",onClick:()=>t(!1),children:"Shop"}),se.jsx(Er,{to:"/about",onClick:()=>t(!1),children:"About"}),se.jsx(Er,{to:"/broadcast",onClick:()=>t(!1),children:"Broadcast"})]})]})}function hN(){const{id:c}=jk(),t=lA[c];return me.useEffect(()=>{const n=setInterval(()=>{window.paypal&&window.paypal.HostedButtons&&(t!=null&&t.hostedButtonId)&&(clearInterval(n),window.paypal.HostedButtons({hostedButtonId:t.hostedButtonId}).render(`#paypal-container-${t.hostedButtonId}`))},300)},[t]),t?se.jsxs("div",{className:"max-w-xl mx-auto text-center mt-10",children:[se.jsx("h2",{className:"text-3xl font-bold",children:t.name}),se.jsx("img",{src:t.image,alt:t.name,className:"w-full my-6 rounded"}),se.jsx("p",{className:"mb-6 text-gray-300",children:t.description}),se.jsx("div",{id:`paypal-container-${t.hostedButtonId}`})]}):se.jsx("p",{className:"text-center mt-10",children:"Product not found"})}function dN(){return se.jsxs("footer",{className:"bg-black text-gray-400 py-8 border-t border-gray-700 text-center text-sm",children:[se.jsxs("div",{className:"mb-3",children:[se.jsx("a",{href:"https://discord.gg/t5CpXaK7QY",target:"_blank",rel:"noopener noreferrer",className:"mx-2 hover:text-white transition",children:"Discord"}),"|",se.jsx("a",{href:"https://www.instagram.com/bruce.wayne39",target:"_blank",rel:"noopener noreferrer",className:"mx-2 hover:text-white transition",children:"Instagram"}),"|",se.jsx("a",{href:"mailto:contact@tendocomic.me",className:"mx-2 hover:text-white transition",children:"Email"})]}),se.jsxs("p",{className:"text-xs text-gray-500",children:["© ",new Date().getFullYear()," TendoComic. All rights reserved."]})]})}function fN(){return se.jsxs("div",{className:"relative z-0 pt-24 px-4 min-h-screen bg-black text-white",children:[se.jsx("h1",{className:"text-3xl text-center mb-8",children:"Live Broadcast 🎥"}),se.jsx("div",{className:"relative w-full aspect-video max-w-7xl mx-auto overflow-hidden rounded-2xl shadow-xl",children:se.jsx("video",{className:"absolute top-0 left-0 w-full h-full object-cover",src:"/assets/videos/UFO.mp4",autoPlay:!0,loop:!0,playsInline:!0})})]})}var zv={};zv.d=(c,t)=>{for(var n in t)zv.o(t,n)&&!zv.o(c,n)&&Object.defineProperty(c,n,{enumerable:!0,get:t[n]})};zv.o=(c,t)=>Object.prototype.hasOwnProperty.call(c,t);var je=globalThis.pdfjsLib={};zv.d(je,{AbortException:()=>pu,AnnotationEditorLayer:()=>JS,AnnotationEditorParamsType:()=>ct,AnnotationEditorType:()=>He,AnnotationEditorUIManager:()=>Td,AnnotationLayer:()=>CS,AnnotationMode:()=>Cl,AnnotationType:()=>gn,ColorPicker:()=>Cw,DOMSVGFactory:()=>kw,DrawLayer:()=>tE,FeatureTest:()=>mr,GlobalWorkerOptions:()=>gl,ImageKind:()=>B0,InvalidPDFException:()=>B1,MathClamp:()=>Hr,OPS:()=>_w,OutputScale:()=>wl,PDFDataRangeTransport:()=>hC,PDFDateString:()=>bE,PDFWorker:()=>af,PasswordResponses:()=>mN,PermissionFlag:()=>gN,PixelsPerInch:()=>gu,RenderingCancelledException:()=>yE,ResponseException:()=>Sw,SignatureExtractor:()=>ml,SupportedImageMimeTypes:()=>H1,TextLayer:()=>Gv,TouchManager:()=>xw,Util:()=>Te,VerbosityLevel:()=>eb,XfaLayer:()=>fC,build:()=>jI,createValidAbsoluteUrl:()=>bN,fetchData:()=>_0,getDocument:()=>CI,getFilenameFromUrl:()=>PN,getPdfFilenameFromUrl:()=>RN,getUuid:()=>hA,getXfaPageViewport:()=>LN,isDataScheme:()=>rb,isPdfFile:()=>wE,isValidExplicitDest:()=>LI,noContextMenu:()=>ra,normalizeUnicode:()=>AN,setLayerDimensions:()=>Cd,shadow:()=>at,stopEvent:()=>mn,version:()=>FI});const dr=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),uA=[1,0,0,1,0,0],z1=[.001,0,0,.001,0,0],v1=1.35,Bs={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Cl={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},pN="pdfjs_internal_editor_",He={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},ct={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},gN={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},vr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},B0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},gn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Gd={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},eb={ERRORS:0,WARNINGS:1,INFOS:5},_w={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},M0={moveTo:0,lineTo:1,curveTo:2,closePath:3},mN={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let tb=eb.WARNINGS;function vN(c){Number.isInteger(c)&&(tb=c)}function yN(){return tb}function nb(c){tb>=eb.INFOS&&console.log(`Info: ${c}`)}function Ve(c){tb>=eb.WARNINGS&&console.log(`Warning: ${c}`)}function Rt(c){throw new Error(c)}function vn(c,t){c||Rt(t)}function wN(c){switch(c==null?void 0:c.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function bN(c,t=null,n=null){if(!c)return null;if(n&&typeof c=="string"){if(n.addDefaultProtocol&&c.startsWith("www.")){const a=c.match(/\./g);(a==null?void 0:a.length)>=2&&(c=`http://${c}`)}if(n.tryConvertEncoding)try{c=kN(c)}catch{}}const s=t?URL.parse(c,t):URL.parse(c);return wN(s)?s:null}function at(c,t,n,s=!1){return Object.defineProperty(c,t,{value:n,enumerable:!s,configurable:!0,writable:!1}),n}const Id=function(){function t(n,s){this.message=n,this.name=s}return t.prototype=new Error,t.constructor=t,t}();class Hx extends Id{constructor(t,n){super(t,"PasswordException"),this.code=n}}class y1 extends Id{constructor(t,n){super(t,"UnknownErrorException"),this.details=n}}class B1 extends Id{constructor(t){super(t,"InvalidPDFException")}}class Sw extends Id{constructor(t,n,s){super(t,"ResponseException"),this.status=n,this.missing=s}}class _N extends Id{constructor(t){super(t,"FormatError")}}class pu extends Id{constructor(t){super(t,"AbortException")}}function cA(c){(typeof c!="object"||(c==null?void 0:c.length)===void 0)&&Rt("Invalid argument for bytesToString");const t=c.length,n=8192;if(t<n)return String.fromCharCode.apply(null,c);const s=[];for(let a=0;a<t;a+=n){const o=Math.min(a+n,t),u=c.subarray(a,o);s.push(String.fromCharCode.apply(null,u))}return s.join("")}function b0(c){typeof c!="string"&&Rt("Invalid argument for stringToBytes");const t=c.length,n=new Uint8Array(t);for(let s=0;s<t;++s)n[s]=c.charCodeAt(s)&255;return n}function SN(c){return String.fromCharCode(c>>24&255,c>>16&255,c>>8&255,c&255)}function mE(c){const t=Object.create(null);for(const[n,s]of c)t[n]=s;return t}function EN(){const c=new Uint8Array(4);return c[0]=1,new Uint32Array(c.buffer,0,1)[0]===1}function xN(){try{return new Function(""),!0}catch{return!1}}class mr{static get isLittleEndian(){return at(this,"isLittleEndian",EN())}static get isEvalSupported(){return at(this,"isEvalSupported",xN())}static get isOffscreenCanvasSupported(){return at(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return at(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){if(typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"){const{platform:t,userAgent:n}=navigator;return at(this,"platform",{isAndroid:n.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:n.includes("Firefox")})}return at(this,"platform",{isAndroid:!1,isLinux:!1,isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,n;return at(this,"isCSSRoundSupported",(n=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:n.call(t,"width: round(1.5px, 1px)"))}}const w1=Array.from(Array(256).keys(),c=>c.toString(16).padStart(2,"0"));var vl,U0,U1;class Te{static makeHexColor(t,n,s){return`#${w1[t]}${w1[n]}${w1[s]}`}static transform(t,n){return[t[0]*n[0]+t[2]*n[1],t[1]*n[0]+t[3]*n[1],t[0]*n[2]+t[2]*n[3],t[1]*n[2]+t[3]*n[3],t[0]*n[4]+t[2]*n[5]+t[4],t[1]*n[4]+t[3]*n[5]+t[5]]}static applyTransform(t,n){const s=t[0]*n[0]+t[1]*n[2]+n[4],a=t[0]*n[1]+t[1]*n[3]+n[5];return[s,a]}static applyInverseTransform(t,n){const s=n[0]*n[3]-n[1]*n[2],a=(t[0]*n[3]-t[1]*n[2]+n[2]*n[5]-n[4]*n[3])/s,o=(-t[0]*n[1]+t[1]*n[0]+n[4]*n[1]-n[5]*n[0])/s;return[a,o]}static getAxialAlignedBoundingBox(t,n){const s=this.applyTransform(t,n),a=this.applyTransform(t.slice(2,4),n),o=this.applyTransform([t[0],t[3]],n),u=this.applyTransform([t[2],t[1]],n);return[Math.min(s[0],a[0],o[0],u[0]),Math.min(s[1],a[1],o[1],u[1]),Math.max(s[0],a[0],o[0],u[0]),Math.max(s[1],a[1],o[1],u[1])]}static inverseTransform(t){const n=t[0]*t[3]-t[1]*t[2];return[t[3]/n,-t[1]/n,-t[2]/n,t[0]/n,(t[2]*t[5]-t[4]*t[3])/n,(t[4]*t[1]-t[5]*t[0])/n]}static singularValueDecompose2dScale(t){const n=[t[0],t[2],t[1],t[3]],s=t[0]*n[0]+t[1]*n[2],a=t[0]*n[1]+t[1]*n[3],o=t[2]*n[0]+t[3]*n[2],u=t[2]*n[1]+t[3]*n[3],h=(s+u)/2,p=Math.sqrt((s+u)**2-4*(s*u-o*a))/2,m=h+p||1,v=h-p||1;return[Math.sqrt(m),Math.sqrt(v)]}static normalizeRect(t){const n=t.slice(0);return t[0]>t[2]&&(n[0]=t[2],n[2]=t[0]),t[1]>t[3]&&(n[1]=t[3],n[3]=t[1]),n}static intersect(t,n){const s=Math.max(Math.min(t[0],t[2]),Math.min(n[0],n[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(n[0],n[2]));if(s>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(n[1],n[3])),u=Math.min(Math.max(t[1],t[3]),Math.max(n[1],n[3]));return o>u?null:[s,o,a,u]}static pointBoundingBox(t,n,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],n),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],n)}static rectBoundingBox(t,n,s,a,o){o[0]=Math.min(o[0],t,s),o[1]=Math.min(o[1],n,a),o[2]=Math.max(o[2],t,s),o[3]=Math.max(o[3],n,a)}static bezierBoundingBox(t,n,s,a,o,u,h,p,m){m[0]=Math.min(m[0],t,h),m[1]=Math.min(m[1],n,p),m[2]=Math.max(m[2],t,h),m[3]=Math.max(m[3],n,p),R(this,vl,U1).call(this,t,s,o,h,n,a,u,p,3*(-t+3*(s-o)+h),6*(t-2*s+o),3*(s-t),m),R(this,vl,U1).call(this,t,s,o,h,n,a,u,p,3*(-n+3*(a-u)+p),6*(n-2*a+u),3*(a-n),m)}}vl=new WeakSet,U0=function(t,n,s,a,o,u,h,p,m,v){if(m<=0||m>=1)return;const y=1-m,b=m*m,_=b*m,k=y*(y*(y*t+3*m*n)+3*b*s)+_*a,x=y*(y*(y*o+3*m*u)+3*b*h)+_*p;v[0]=Math.min(v[0],k),v[1]=Math.min(v[1],x),v[2]=Math.max(v[2],k),v[3]=Math.max(v[3],x)},U1=function(t,n,s,a,o,u,h,p,m,v,y,b){if(Math.abs(m)<1e-12){Math.abs(v)>=1e-12&&R(this,vl,U0).call(this,t,n,s,a,o,u,h,p,-y/v,b);return}const _=v**2-4*y*m;if(_<0)return;const k=Math.sqrt(_),x=2*m;R(this,vl,U0).call(this,t,n,s,a,o,u,h,p,(-v+k)/x,b),R(this,vl,U0).call(this,t,n,s,a,o,u,h,p,(-v-k)/x,b)},P(Te,vl);function kN(c){return decodeURIComponent(escape(c))}let b1=null,Vx=null;function AN(c){return b1||(b1=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Vx=new Map([["ﬅ","ſt"]])),c.replaceAll(b1,(t,n,s)=>n?n.normalize("NFKC"):Vx.get(s))}function hA(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const c=new Uint8Array(32);return crypto.getRandomValues(c),cA(c)}const vE="pdfjs_internal_id_";function CN(c,t,n){if(!Array.isArray(n)||n.length<2)return!1;const[s,a,...o]=n;if(!c(s)&&!Number.isInteger(s)||!t(a))return!1;const u=o.length;let h=!0;switch(a.name){case"XYZ":if(u<2||u>3)return!1;break;case"Fit":case"FitB":return u===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(u>1)return!1;break;case"FitR":if(u!==4)return!1;h=!1;break;default:return!1}for(const p of o)if(!(typeof p=="number"||h&&p===null))return!1;return!0}function Hr(c,t,n){return Math.min(Math.max(c,t),n)}function dA(c){return Uint8Array.prototype.toBase64?c.toBase64():btoa(cA(c))}function TN(c){return Uint8Array.fromBase64?Uint8Array.fromBase64(c):b0(atob(c))}typeof Promise.try!="function"&&(Promise.try=function(c,...t){return new Promise(n=>{n(c(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(c){return c.reduce((t,n)=>t+n,0)});const Do="http://www.w3.org/2000/svg",wh=class wh{};Ee(wh,"CSS",96),Ee(wh,"PDF",72),Ee(wh,"PDF_TO_CSS_UNITS",wh.CSS/wh.PDF);let gu=wh;async function _0(c,t="text"){if(qd(c,document.baseURI)){const n=await fetch(c);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,s)=>{const a=new XMLHttpRequest;a.open("GET",c,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":n(a.response);return}n(a.responseText);return}s(new Error(a.statusText))}},a.send(null)})}class S0{constructor({viewBox:t,userUnit:n,scale:s,rotation:a,offsetX:o=0,offsetY:u=0,dontFlip:h=!1}){this.viewBox=t,this.userUnit=n,this.scale=s,this.rotation=a,this.offsetX=o,this.offsetY=u,s*=n;const p=(t[2]+t[0])/2,m=(t[3]+t[1])/2;let v,y,b,_;switch(a%=360,a<0&&(a+=360),a){case 180:v=-1,y=0,b=0,_=1;break;case 90:v=0,y=1,b=1,_=0;break;case 270:v=0,y=-1,b=-1,_=0;break;case 0:v=1,y=0,b=0,_=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(b=-b,_=-_);let k,x,C,N;v===0?(k=Math.abs(m-t[1])*s+o,x=Math.abs(p-t[0])*s+u,C=(t[3]-t[1])*s,N=(t[2]-t[0])*s):(k=Math.abs(p-t[0])*s+o,x=Math.abs(m-t[1])*s+u,C=(t[2]-t[0])*s,N=(t[3]-t[1])*s),this.transform=[v*s,y*s,b*s,_*s,k-v*s*p-b*s*m,x-y*s*p-_*s*m],this.width=C,this.height=N}get rawDims(){const t=this.viewBox;return at(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:n=this.rotation,offsetX:s=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new S0({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:n,offsetX:s,offsetY:a,dontFlip:o})}convertToViewportPoint(t,n){return Te.applyTransform([t,n],this.transform)}convertToViewportRectangle(t){const n=Te.applyTransform([t[0],t[1]],this.transform),s=Te.applyTransform([t[2],t[3]],this.transform);return[n[0],n[1],s[0],s[1]]}convertToPdfPoint(t,n){return Te.applyInverseTransform([t,n],this.transform)}}class yE extends Id{constructor(t,n=0){super(t,"RenderingCancelledException"),this.extraDelay=n}}function rb(c){const t=c.length;let n=0;for(;n<t&&c[n].trim()==="";)n++;return c.substring(n,n+5).toLowerCase()==="data:"}function wE(c){return typeof c=="string"&&/\.pdf$/i.test(c)}function PN(c){return[c]=c.split(/[#?]/,1),c.substring(c.lastIndexOf("/")+1)}function RN(c,t="document.pdf"){if(typeof c!="string")return t;if(rb(c))return Ve('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,a=n.exec(c);let o=s.exec(a[1])||s.exec(a[2])||s.exec(a[3]);if(o&&(o=o[0],o.includes("%")))try{o=s.exec(decodeURIComponent(o))[0]}catch{}return o||t}class Wx{constructor(){Ee(this,"started",Object.create(null));Ee(this,"times",[])}time(t){t in this.started&&Ve(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Ve(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let n=0;for(const{name:s}of this.times)n=Math.max(s.length,n);for(const{name:s,start:a,end:o}of this.times)t.push(`${s.padEnd(n)} ${o-a}ms
`);return t.join("")}}function qd(c,t){const n=t?URL.parse(c,t):URL.parse(c);return(n==null?void 0:n.protocol)==="http:"||(n==null?void 0:n.protocol)==="https:"}function ra(c){c.preventDefault()}function mn(c){c.preventDefault(),c.stopPropagation()}var Xv;class bE{static toDateObject(t){if(!t||typeof t!="string")return null;d(this,Xv)||E(this,Xv,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const n=d(this,Xv).exec(t);if(!n)return null;const s=parseInt(n[1],10);let a=parseInt(n[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(n[3],10);o=o>=1&&o<=31?o:1;let u=parseInt(n[4],10);u=u>=0&&u<=23?u:0;let h=parseInt(n[5],10);h=h>=0&&h<=59?h:0;let p=parseInt(n[6],10);p=p>=0&&p<=59?p:0;const m=n[7]||"Z";let v=parseInt(n[8],10);v=v>=0&&v<=23?v:0;let y=parseInt(n[9],10)||0;return y=y>=0&&y<=59?y:0,m==="-"?(u+=v,h+=y):m==="+"&&(u-=v,h-=y),new Date(Date.UTC(s,a,o,u,h,p))}}Xv=new WeakMap,P(bE,Xv);function LN(c,{scale:t=1,rotation:n=0}){const{width:s,height:a}=c.attributes.style,o=[0,0,parseInt(s),parseInt(a)];return new S0({viewBox:o,userUnit:1,scale:t,rotation:n})}function _E(c){if(c.startsWith("#")){const t=parseInt(c.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return c.startsWith("rgb(")?c.slice(4,-1).split(",").map(t=>parseInt(t)):c.startsWith("rgba(")?c.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Ve(`Not a valid color format: "${c}"`),[0,0,0])}function NN(c){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const n of c.keys()){t.style.color=n;const s=window.getComputedStyle(t).color;c.set(n,_E(s))}t.remove()}function qt(c){const{a:t,b:n,c:s,d:a,e:o,f:u}=c.getTransform();return[t,n,s,a,o,u]}function ia(c){const{a:t,b:n,c:s,d:a,e:o,f:u}=c.getTransform().invertSelf();return[t,n,s,a,o,u]}function Cd(c,t,n=!1,s=!0){if(t instanceof S0){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:u}=c,h=mr.isCSSRoundSupported,p=`var(--total-scale-factor) * ${a}px`,m=`var(--total-scale-factor) * ${o}px`,v=h?`round(down, ${p}, var(--scale-round-x))`:`calc(${p})`,y=h?`round(down, ${m}, var(--scale-round-y))`:`calc(${m})`;!n||t.rotation%180===0?(u.width=v,u.height=y):(u.width=y,u.height=v)}s&&c.setAttribute("data-main-rotation",t.rotation)}class wl{constructor(){const{pixelRatio:t}=wl;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,n,s,a){let o=1/0,u=1/0,h=1/0;s>0&&(o=Math.sqrt(s/(t*n))),a!==-1&&(u=a/t,h=a/n);const p=Math.min(o,u,h);return this.sx>p||this.sy>p?(this.sx=p,this.sy=p,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}}const H1=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Tl,_h,qs,Pl,Yv,of,Kv,Rw,fA,gr,pA,gA,bv,mA,H0;const zo=class zo{constructor(t){P(this,gr);P(this,Tl,null);P(this,_h,null);P(this,qs);P(this,Pl,null);P(this,Yv,null);P(this,of,null);E(this,qs,t),d(zo,Kv)||E(zo,Kv,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=E(this,Tl,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const n=d(this,qs)._uiManager._signal;t.addEventListener("contextmenu",ra,{signal:n}),t.addEventListener("pointerdown",R(zo,Rw,fA),{signal:n});const s=E(this,Pl,document.createElement("div"));s.className="buttons",t.append(s);const a=d(this,qs).toolbarPosition;if(a){const{style:o}=t,u=d(this,qs)._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*u}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return R(this,gr,mA).call(this),t}get div(){return d(this,Tl)}hide(){var t;d(this,Tl).classList.add("hidden"),(t=d(this,_h))==null||t.hideDropdown()}show(){var t;d(this,Tl).classList.remove("hidden"),(t=d(this,Yv))==null||t.shown()}async addAltText(t){const n=await t.render();R(this,gr,bv).call(this,n),d(this,Pl).prepend(n,d(this,gr,H0)),E(this,Yv,t)}addColorPicker(t){E(this,_h,t);const n=t.renderButton();R(this,gr,bv).call(this,n),d(this,Pl).prepend(n,d(this,gr,H0))}async addEditSignatureButton(t){const n=E(this,of,await t.renderEditButton(d(this,qs)));R(this,gr,bv).call(this,n),d(this,Pl).prepend(n,d(this,gr,H0))}updateEditSignatureButton(t){d(this,of)&&(d(this,of).title=t)}remove(){var t;d(this,Tl).remove(),(t=d(this,_h))==null||t.destroy(),E(this,_h,null)}};Tl=new WeakMap,_h=new WeakMap,qs=new WeakMap,Pl=new WeakMap,Yv=new WeakMap,of=new WeakMap,Kv=new WeakMap,Rw=new WeakSet,fA=function(t){t.stopPropagation()},gr=new WeakSet,pA=function(t){d(this,qs)._focusEventsAllowed=!1,mn(t)},gA=function(t){d(this,qs)._focusEventsAllowed=!0,mn(t)},bv=function(t){const n=d(this,qs)._uiManager._signal;t.addEventListener("focusin",R(this,gr,pA).bind(this),{capture:!0,signal:n}),t.addEventListener("focusout",R(this,gr,gA).bind(this),{capture:!0,signal:n}),t.addEventListener("contextmenu",ra,{signal:n})},mA=function(){const{editorType:t,_uiManager:n}=d(this,qs),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",d(zo,Kv)[t]),R(this,gr,bv).call(this,s),s.addEventListener("click",a=>{n.delete()},{signal:n._signal}),d(this,Pl).append(s)},H0=function(){const t=document.createElement("div");return t.className="divider",t},P(zo,Rw),P(zo,Kv,null);let V1=zo;var Qv,Sh,Eh,mu,vA,yA,wA;class IN{constructor(t){P(this,mu);P(this,Qv,null);P(this,Sh,null);P(this,Eh);E(this,Eh,t)}show(t,n,s){const[a,o]=R(this,mu,yA).call(this,n,s),{style:u}=d(this,Sh)||E(this,Sh,R(this,mu,vA).call(this));t.append(d(this,Sh)),u.insetInlineEnd=`${100*a}%`,u.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){d(this,Sh).remove()}}Qv=new WeakMap,Sh=new WeakMap,Eh=new WeakMap,mu=new WeakSet,vA=function(){const t=E(this,Sh,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",ra,{signal:d(this,Eh)._signal});const n=E(this,Qv,document.createElement("div"));return n.className="buttons",t.append(n),R(this,mu,wA).call(this),t},yA=function(t,n){let s=0,a=0;for(const o of t){const u=o.y+o.height;if(u<s)continue;const h=o.x+(n?o.width:0);if(u>s){a=h,s=u;continue}n?h>a&&(a=h):h<a&&(a=h)}return[n?1-a:a,s]},wA=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const n=document.createElement("span");t.append(n),n.className="visuallyHidden",n.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=d(this,Eh)._signal;t.addEventListener("contextmenu",ra,{signal:s}),t.addEventListener("click",()=>{d(this,Eh).highlightSelection("floating_button")},{signal:s}),d(this,Qv).append(t)};function SE(c,t,n){for(const s of n)t.addEventListener(s,c[s].bind(c))}var Lw;class MN{constructor(){P(this,Lw,0)}get id(){return`${pN}${Fr(this,Lw)._++}`}}Lw=new WeakMap;var lf,Jv,wr,uf,V0;const PE=class PE{constructor(){P(this,uf);P(this,lf,hA());P(this,Jv,0);P(this,wr,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(s.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return at(this,"_isSVGFittingCanvas",o)}async getFromFile(t){const{lastModified:n,name:s,size:a,type:o}=t;return R(this,uf,V0).call(this,`${n}_${s}_${a}_${o}`,t)}async getFromUrl(t){return R(this,uf,V0).call(this,t,t)}async getFromBlob(t,n){const s=await n;return R(this,uf,V0).call(this,t,s)}async getFromId(t){d(this,wr)||E(this,wr,new Map);const n=d(this,wr).get(t);if(!n)return null;if(n.bitmap)return n.refCounter+=1,n;if(n.file)return this.getFromFile(n.file);if(n.blobPromise){const{blobPromise:s}=n;return delete n.blobPromise,this.getFromBlob(n.id,s)}return this.getFromUrl(n.url)}getFromCanvas(t,n){d(this,wr)||E(this,wr,new Map);let s=d(this,wr).get(t);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const a=new OffscreenCanvas(n.width,n.height);return a.getContext("2d").drawImage(n,0,0),s={bitmap:a.transferToImageBitmap(),id:`image_${d(this,lf)}_${Fr(this,Jv)._++}`,refCounter:1,isSvg:!1},d(this,wr).set(t,s),d(this,wr).set(s.id,s),s}getSvgUrl(t){const n=d(this,wr).get(t);return n!=null&&n.isSvg?n.svgUrl:null}deleteId(t){var a;d(this,wr)||E(this,wr,new Map);const n=d(this,wr).get(t);if(!n||(n.refCounter-=1,n.refCounter!==0))return;const{bitmap:s}=n;if(!n.url&&!n.file){const o=new OffscreenCanvas(s.width,s.height);o.getContext("bitmaprenderer").transferFromImageBitmap(s),n.blobPromise=o.convertToBlob()}(a=s.close)==null||a.call(s),n.bitmap=null}isValidId(t){return t.startsWith(`image_${d(this,lf)}_`)}};lf=new WeakMap,Jv=new WeakMap,wr=new WeakMap,uf=new WeakSet,V0=async function(t,n){d(this,wr)||E(this,wr,new Map);let s=d(this,wr).get(t);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${d(this,lf)}_${Fr(this,Jv)._++}`,refCounter:0,isSvg:!1});let a;if(typeof n=="string"?(s.url=n,a=await _0(n,"blob")):n instanceof File?a=s.file=n:n instanceof Blob&&(a=n),a.type==="image/svg+xml"){const o=PE._isSVGFittingCanvas,u=new FileReader,h=new Image,p=new Promise((m,v)=>{h.onload=()=>{s.bitmap=h,s.isSvg=!0,m()},u.onload=async()=>{const y=s.svgUrl=u.result;h.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},h.onerror=u.onerror=v});u.readAsDataURL(a),await p}else s.bitmap=await createImageBitmap(a);s.refCounter=1}catch(a){Ve(a),s=null}return d(this,wr).set(t,s),s&&d(this,wr).set(s.id,s),s};let W1=PE;var hn,Rl,Zv,rn;class ON{constructor(t=128){P(this,hn,[]);P(this,Rl,!1);P(this,Zv);P(this,rn,-1);E(this,Zv,t)}add({cmd:t,undo:n,post:s,mustExec:a,type:o=NaN,overwriteIfSameType:u=!1,keepUndo:h=!1}){if(a&&t(),d(this,Rl))return;const p={cmd:t,undo:n,post:s,type:o};if(d(this,rn)===-1){d(this,hn).length>0&&(d(this,hn).length=0),E(this,rn,0),d(this,hn).push(p);return}if(u&&d(this,hn)[d(this,rn)].type===o){h&&(p.undo=d(this,hn)[d(this,rn)].undo),d(this,hn)[d(this,rn)]=p;return}const m=d(this,rn)+1;m===d(this,Zv)?d(this,hn).splice(0,1):(E(this,rn,m),m<d(this,hn).length&&d(this,hn).splice(m)),d(this,hn).push(p)}undo(){if(d(this,rn)===-1)return;E(this,Rl,!0);const{undo:t,post:n}=d(this,hn)[d(this,rn)];t(),n==null||n(),E(this,Rl,!1),E(this,rn,d(this,rn)-1)}redo(){if(d(this,rn)<d(this,hn).length-1){E(this,rn,d(this,rn)+1),E(this,Rl,!0);const{cmd:t,post:n}=d(this,hn)[d(this,rn)];t(),n==null||n(),E(this,Rl,!1)}}hasSomethingToUndo(){return d(this,rn)!==-1}hasSomethingToRedo(){return d(this,rn)<d(this,hn).length-1}cleanType(t){if(d(this,rn)!==-1){for(let n=d(this,rn);n>=0;n--)if(d(this,hn)[n].type!==t){d(this,hn).splice(n+1,d(this,rn)-n),E(this,rn,n);return}d(this,hn).length=0,E(this,rn,-1)}}destroy(){E(this,hn,null)}}hn=new WeakMap,Rl=new WeakMap,Zv=new WeakMap,rn=new WeakMap;var Nw,bA;class E0{constructor(t){P(this,Nw);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:n}=mr.platform;for(const[s,a,o={}]of t)for(const u of s){const h=u.startsWith("mac+");n&&h?(this.callbacks.set(u.slice(4),{callback:a,options:o}),this.allKeys.add(u.split("+").at(-1))):!n&&!h&&(this.callbacks.set(u,{callback:a,options:o}),this.allKeys.add(u.split("+").at(-1)))}}exec(t,n){if(!this.allKeys.has(n.key))return;const s=this.callbacks.get(R(this,Nw,bA).call(this,n));if(!s)return;const{callback:a,options:{bubbles:o=!1,args:u=[],checker:h=null}}=s;h&&!h(t,n)||(a.bind(t,...u,n)(),o||mn(n))}}Nw=new WeakSet,bA=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const n=this.buffer.join("+");return this.buffer.length=0,n};const Iw=class Iw{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return NN(t),at(this,"_colors",t)}convert(t){const n=_E(t);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[s,a]of this._colors)if(a.every((o,u)=>o===n[u]))return Iw._colorsMapping.get(s);return n}getHexCode(t){const n=this._colors.get(t);return n?Te.makeHexColor(...n):t}};Ee(Iw,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let G1=Iw;var cf,Ts,Ln,lr,hf,Uo,df,Xs,Ll,xh,ff,kh,ua,Hi,Ah,ey,ty,pf,ny,ca,Nl,gf,Il,ha,Mw,Ml,ry,Ol,Ch,Th,Dl,sy,On,Ct,Ho,Fl,Ph,iy,ay,jl,da,Vo,oy,Ys,fe,W0,q1,_A,SA,G0,EA,xA,kA,X1,AA,Y1,K1,CA,jr,Fo,TA,PA,Q1,RA,_v,J1;const tf=class tf{constructor(t,n,s,a,o,u,h,p,m,v,y,b,_,k){P(this,fe);P(this,cf,new AbortController);P(this,Ts,null);P(this,Ln,new Map);P(this,lr,new Map);P(this,hf,null);P(this,Uo,null);P(this,df,null);P(this,Xs,new ON);P(this,Ll,null);P(this,xh,null);P(this,ff,0);P(this,kh,new Set);P(this,ua,null);P(this,Hi,null);P(this,Ah,new Set);Ee(this,"_editorUndoBar",null);P(this,ey,!1);P(this,ty,!1);P(this,pf,!1);P(this,ny,null);P(this,ca,null);P(this,Nl,null);P(this,gf,null);P(this,Il,!1);P(this,ha,null);P(this,Mw,new MN);P(this,Ml,!1);P(this,ry,!1);P(this,Ol,null);P(this,Ch,null);P(this,Th,null);P(this,Dl,null);P(this,sy,null);P(this,On,He.NONE);P(this,Ct,new Set);P(this,Ho,null);P(this,Fl,null);P(this,Ph,null);P(this,iy,null);P(this,ay,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});P(this,jl,[0,0]);P(this,da,null);P(this,Vo,null);P(this,oy,null);P(this,Ys,null);const x=this._signal=d(this,cf).signal;E(this,Vo,t),E(this,oy,n),E(this,hf,s),E(this,Fl,a),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:x}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:x}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:x}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:x}),o._on("setpreference",this.onSetPreference.bind(this),{signal:x}),o._on("switchannotationeditorparams",C=>this.updateParams(C.type,C.value),{signal:x}),R(this,fe,EA).call(this),R(this,fe,CA).call(this),R(this,fe,X1).call(this),E(this,Uo,u.annotationStorage),E(this,ny,u.filterFactory),E(this,Ph,h),E(this,gf,p||null),E(this,ey,m),E(this,ty,v),E(this,pf,y),E(this,sy,b||null),this.viewParameters={realScale:gu.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=_||null,this._supportsPinchToZoom=k!==!1}static get _keyboardManager(){const t=tf.prototype,n=u=>d(u,Vo).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&u.hasSomethingToControl(),s=(u,{target:h})=>{if(h instanceof HTMLInputElement){const{type:p}=h;return p!=="text"&&p!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return at(this,"_keyboardManager",new E0([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(u,{target:h})=>!(h instanceof HTMLButtonElement)&&d(u,Vo).contains(h)&&!u.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(u,{target:h})=>!(h instanceof HTMLButtonElement)&&d(u,Vo).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:n}]]))}destroy(){var t,n,s,a,o,u,h,p;(t=d(this,Ys))==null||t.resolve(),E(this,Ys,null),(n=d(this,cf))==null||n.abort(),E(this,cf,null),this._signal=null;for(const m of d(this,lr).values())m.destroy();d(this,lr).clear(),d(this,Ln).clear(),d(this,Ah).clear(),(s=d(this,Dl))==null||s.clear(),E(this,Ts,null),d(this,Ct).clear(),d(this,Xs).destroy(),(a=d(this,hf))==null||a.destroy(),(o=d(this,Fl))==null||o.destroy(),(u=d(this,ha))==null||u.hide(),E(this,ha,null),(h=d(this,Th))==null||h.destroy(),E(this,Th,null),d(this,ca)&&(clearTimeout(d(this,ca)),E(this,ca,null)),d(this,da)&&(clearTimeout(d(this,da)),E(this,da,null)),(p=this._editorUndoBar)==null||p.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return d(this,sy)}get useNewAltTextFlow(){return d(this,ty)}get useNewAltTextWhenAddingImage(){return d(this,pf)}get hcmFilter(){return at(this,"hcmFilter",d(this,Ph)?d(this,ny).addHCMFilter(d(this,Ph).foreground,d(this,Ph).background):"none")}get direction(){return at(this,"direction",getComputedStyle(d(this,Vo)).direction)}get highlightColors(){return at(this,"highlightColors",d(this,gf)?new Map(d(this,gf).split(",").map(t=>t.split("=").map(n=>n.trim()))):null)}get highlightColorNames(){return at(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),E(this,xh,t)}setMainHighlightColorPicker(t){E(this,Th,t)}editAltText(t,n=!1){var s;(s=d(this,hf))==null||s.editAltText(this,t,n)}getSignature(t){var n;(n=d(this,Fl))==null||n.getSignature({uiManager:this,editor:t})}get signatureManager(){return d(this,Fl)}switchToMode(t,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,n){this._eventBus.dispatch("setpreference",{source:this,name:t,value:n})}onSetPreference({name:t,value:n}){switch(t){case"enableNewAltTextWhenAddingImage":E(this,pf,n);break}}onPageChanging({pageNumber:t}){E(this,ff,t-1)}focusMainContainer(){d(this,Vo).focus()}findParent(t,n){for(const s of d(this,lr).values()){const{x:a,y:o,width:u,height:h}=s.div.getBoundingClientRect();if(t>=a&&t<=a+u&&n>=o&&n<=o+h)return s}return null}disableUserSelect(t=!1){d(this,oy).classList.toggle("noUserSelect",t)}addShouldRescale(t){d(this,Ah).add(t)}removeShouldRescale(t){d(this,Ah).delete(t)}onScaleChanging({scale:t}){var n;this.commitOrRemove(),this.viewParameters.realScale=t*gu.PDF_TO_CSS_UNITS;for(const s of d(this,Ah))s.onScaleChanging();(n=d(this,xh))==null||n.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:s,anchorOffset:a,focusNode:o,focusOffset:u}=n,h=n.toString(),m=R(this,fe,W0).call(this,n).closest(".textLayer"),v=this.getSelectionBoxes(m);if(!v)return;n.empty();const y=R(this,fe,q1).call(this,m),b=d(this,On)===He.NONE,_=()=>{y==null||y.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:v,anchorNode:s,anchorOffset:a,focusNode:o,focusOffset:u,text:h}),b&&this.showAllEditors("highlight",!0,!0)};if(b){this.switchToMode(He.HIGHLIGHT,_);return}_()}addToAnnotationStorage(t){!t.isEmpty()&&d(this,Uo)&&!d(this,Uo).has(t.id)&&d(this,Uo).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,d(this,Il)&&(E(this,Il,!1),R(this,fe,G0).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const n of d(this,Ct))if(n.div.contains(t)){E(this,Ch,[n,t]),n._focusEventsAllowed=!1;break}}focus(){if(!d(this,Ch))return;const[t,n]=d(this,Ch);E(this,Ch,null),n.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}addEditListeners(){R(this,fe,X1).call(this),R(this,fe,Y1).call(this)}removeEditListeners(){R(this,fe,AA).call(this),R(this,fe,K1).call(this)}dragOver(t){for(const{type:n}of t.dataTransfer.items)for(const s of d(this,Hi))if(s.isHandlingMimeForPasting(n)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const n of t.dataTransfer.items)for(const s of d(this,Hi))if(s.isHandlingMimeForPasting(n.type)){s.paste(n,this.currentLayer),t.preventDefault();return}}copy(t){var s;if(t.preventDefault(),(s=d(this,Ts))==null||s.commitOrRemove(),!this.hasSelection)return;const n=[];for(const a of d(this,Ct)){const o=a.serialize(!0);o&&n.push(o)}n.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:n}=t;for(const o of n.items)for(const u of d(this,Hi))if(u.isHandlingMimeForPasting(o.type)){u.paste(o,this.currentLayer);return}let s=n.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){Ve(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const p of s){const m=await a.deserialize(p);if(!m)return;o.push(m)}const u=()=>{for(const p of o)R(this,fe,Q1).call(this,p);R(this,fe,J1).call(this,o)},h=()=>{for(const p of o)p.remove()};this.addCommands({cmd:u,undo:h,mustExec:!0})}catch(o){Ve(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),d(this,On)!==He.NONE&&!this.isEditorHandlingKeyboard&&tf._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,d(this,Il)&&(E(this,Il,!1),R(this,fe,G0).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(R(this,fe,xA).call(this),R(this,fe,Y1).call(this),R(this,fe,jr).call(this,{isEditing:d(this,On)!==He.NONE,isEmpty:R(this,fe,_v).call(this),hasSomethingToUndo:d(this,Xs).hasSomethingToUndo(),hasSomethingToRedo:d(this,Xs).hasSomethingToRedo(),hasSelectedEditor:!1})):(R(this,fe,kA).call(this),R(this,fe,K1).call(this),R(this,fe,jr).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!d(this,Hi)){E(this,Hi,t);for(const n of d(this,Hi))R(this,fe,Fo).call(this,n.defaultPropertiesToUpdate)}}getId(){return d(this,Mw).id}get currentLayer(){return d(this,lr).get(d(this,ff))}getLayer(t){return d(this,lr).get(t)}get currentPageIndex(){return d(this,ff)}addLayer(t){d(this,lr).set(t.pageIndex,t),d(this,Ml)?t.enable():t.disable()}removeLayer(t){d(this,lr).delete(t.pageIndex)}async updateMode(t,n=null,s=!1){var a,o;if(d(this,On)!==t&&!(d(this,Ys)&&(await d(this,Ys).promise,!d(this,Ys)))){if(E(this,Ys,Promise.withResolvers()),E(this,On,t),t===He.NONE){this.setEditingState(!1),R(this,fe,PA).call(this),(a=this._editorUndoBar)==null||a.hide(),d(this,Ys).resolve();return}t===He.SIGNATURE&&await((o=d(this,Fl))==null?void 0:o.loadSignatures()),this.setEditingState(!0),await R(this,fe,TA).call(this),this.unselectAll();for(const u of d(this,lr).values())u.updateMode(t);if(!n){s&&this.addNewEditorFromKeyboard(),d(this,Ys).resolve();return}for(const u of d(this,Ln).values())u.annotationElementId===n?(this.setSelected(u),u.enterInEditMode()):u.unselect();d(this,Ys).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==d(this,On)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,n){var s;if(d(this,Hi)){switch(t){case ct.CREATE:this.currentLayer.addNewEditor(n);return;case ct.HIGHLIGHT_DEFAULT_COLOR:(s=d(this,Th))==null||s.updateColor(n);break;case ct.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(d(this,iy)||E(this,iy,new Map)).set(t,n),this.showAllEditors("highlight",n);break}for(const a of d(this,Ct))a.updateParams(t,n);for(const a of d(this,Hi))a.updateDefaultParams(t,n)}}showAllEditors(t,n,s=!1){var o;for(const u of d(this,Ln).values())u.editorType===t&&u.show(n);(((o=d(this,iy))==null?void 0:o.get(ct.HIGHLIGHT_SHOW_ALL))??!0)!==n&&R(this,fe,Fo).call(this,[[ct.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(t=!1){if(d(this,ry)!==t){E(this,ry,t);for(const n of d(this,lr).values())t?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",t)}}getEditors(t){const n=[];for(const s of d(this,Ln).values())s.pageIndex===t&&n.push(s);return n}getEditor(t){return d(this,Ln).get(t)}addEditor(t){d(this,Ln).set(t.id,t)}removeEditor(t){var n,s;t.div.contains(document.activeElement)&&(d(this,ca)&&clearTimeout(d(this,ca)),E(this,ca,setTimeout(()=>{this.focusMainContainer(),E(this,ca,null)},0))),d(this,Ln).delete(t.id),t.annotationElementId&&((n=d(this,Dl))==null||n.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!d(this,kh).has(t.annotationElementId))&&((s=d(this,Uo))==null||s.remove(t.id))}addDeletedAnnotationElement(t){d(this,kh).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return d(this,kh).has(t)}removeDeletedAnnotationElement(t){d(this,kh).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){d(this,Ts)!==t&&(E(this,Ts,t),t&&R(this,fe,Fo).call(this,t.propertiesToUpdate))}updateUI(t){d(this,fe,RA)===t&&R(this,fe,Fo).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){R(this,fe,Fo).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(d(this,Ct).has(t)){d(this,Ct).delete(t),t.unselect(),R(this,fe,jr).call(this,{hasSelectedEditor:this.hasSelection});return}d(this,Ct).add(t),t.select(),R(this,fe,Fo).call(this,t.propertiesToUpdate),R(this,fe,jr).call(this,{hasSelectedEditor:!0})}setSelected(t){var n;(n=d(this,xh))==null||n.commitOrRemove();for(const s of d(this,Ct))s!==t&&s.unselect();d(this,Ct).clear(),d(this,Ct).add(t),t.select(),R(this,fe,Fo).call(this,t.propertiesToUpdate),R(this,fe,jr).call(this,{hasSelectedEditor:!0})}isSelected(t){return d(this,Ct).has(t)}get firstSelectedEditor(){return d(this,Ct).values().next().value}unselect(t){t.unselect(),d(this,Ct).delete(t),R(this,fe,jr).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return d(this,Ct).size!==0}get isEnterHandled(){return d(this,Ct).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;d(this,Xs).undo(),R(this,fe,jr).call(this,{hasSomethingToUndo:d(this,Xs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:R(this,fe,_v).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){d(this,Xs).redo(),R(this,fe,jr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:d(this,Xs).hasSomethingToRedo(),isEmpty:R(this,fe,_v).call(this)})}addCommands(t){d(this,Xs).add(t),R(this,fe,jr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:R(this,fe,_v).call(this)})}cleanUndoStack(t){d(this,Xs).cleanType(t)}delete(){var o;this.commitOrRemove();const t=(o=this.currentLayer)==null?void 0:o.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const n=t?[t]:[...d(this,Ct)],s=()=>{var u;(u=this._editorUndoBar)==null||u.show(a,n.length===1?n[0].editorType:n.length);for(const h of n)h.remove()},a=()=>{for(const u of n)R(this,fe,Q1).call(this,u)};this.addCommands({cmd:s,undo:a,mustExec:!0})}commitOrRemove(){var t;(t=d(this,Ts))==null||t.commitOrRemove()}hasSomethingToControl(){return d(this,Ts)||this.hasSelection}selectAll(){for(const t of d(this,Ct))t.commit();R(this,fe,J1).call(this,d(this,Ln).values())}unselectAll(){var t;if(!(d(this,Ts)&&(d(this,Ts).commitOrRemove(),d(this,On)!==He.NONE))&&!((t=d(this,xh))!=null&&t.commitOrRemove())&&this.hasSelection){for(const n of d(this,Ct))n.unselect();d(this,Ct).clear(),R(this,fe,jr).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,n,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;d(this,jl)[0]+=t,d(this,jl)[1]+=n;const[a,o]=d(this,jl),u=[...d(this,Ct)],h=1e3;d(this,da)&&clearTimeout(d(this,da)),E(this,da,setTimeout(()=>{E(this,da,null),d(this,jl)[0]=d(this,jl)[1]=0,this.addCommands({cmd:()=>{for(const p of u)d(this,Ln).has(p.id)&&(p.translateInPage(a,o),p.translationDone())},undo:()=>{for(const p of u)d(this,Ln).has(p.id)&&(p.translateInPage(-a,-o),p.translationDone())},mustExec:!1})},h));for(const p of u)p.translateInPage(t,n),p.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),E(this,ua,new Map);for(const t of d(this,Ct))d(this,ua).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!d(this,ua))return!1;this.disableUserSelect(!1);const t=d(this,ua);E(this,ua,null);let n=!1;for(const[{x:a,y:o,pageIndex:u},h]of t)h.newX=a,h.newY=o,h.newPageIndex=u,n||(n=a!==h.savedX||o!==h.savedY||u!==h.savedPageIndex);if(!n)return!1;const s=(a,o,u,h)=>{if(d(this,Ln).has(a.id)){const p=d(this,lr).get(h);p?a._setParentAndPosition(p,o,u):(a.pageIndex=h,a.x=o,a.y=u)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:u,newPageIndex:h}]of t)s(a,o,u,h)},undo:()=>{for(const[a,{savedX:o,savedY:u,savedPageIndex:h}]of t)s(a,o,u,h)},mustExec:!0}),!0}dragSelectedEditors(t,n){if(d(this,ua))for(const s of d(this,ua).keys())s.drag(t,n)}rebuild(t){if(t.parent===null){const n=this.getLayer(t.pageIndex);n?(n.changeParent(t),n.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||d(this,Ct).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return d(this,Ts)===t}getActive(){return d(this,Ts)}getMode(){return d(this,On)}get imageManager(){return at(this,"imageManager",new W1)}getSelectionBoxes(t){if(!t)return null;const n=document.getSelection();for(let m=0,v=n.rangeCount;m<v;m++)if(!t.contains(n.getRangeAt(m).commonAncestorContainer))return null;const{x:s,y:a,width:o,height:u}=t.getBoundingClientRect();let h;switch(t.getAttribute("data-main-rotation")){case"90":h=(m,v,y,b)=>({x:(v-a)/u,y:1-(m+y-s)/o,width:b/u,height:y/o});break;case"180":h=(m,v,y,b)=>({x:1-(m+y-s)/o,y:1-(v+b-a)/u,width:y/o,height:b/u});break;case"270":h=(m,v,y,b)=>({x:1-(v+b-a)/u,y:(m-s)/o,width:b/u,height:y/o});break;default:h=(m,v,y,b)=>({x:(m-s)/o,y:(v-a)/u,width:y/o,height:b/u});break}const p=[];for(let m=0,v=n.rangeCount;m<v;m++){const y=n.getRangeAt(m);if(!y.collapsed)for(const{x:b,y:_,width:k,height:x}of y.getClientRects())k===0||x===0||p.push(h(b,_,k,x))}return p.length===0?null:p}addChangedExistingAnnotation({annotationElementId:t,id:n}){(d(this,df)||E(this,df,new Map)).set(t,n)}removeChangedExistingAnnotation({annotationElementId:t}){var n;(n=d(this,df))==null||n.delete(t)}renderAnnotationElement(t){var a;const n=(a=d(this,df))==null?void 0:a.get(t.data.id);if(!n)return;const s=d(this,Uo).getRawValue(n);s&&(d(this,On)===He.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,n,s){var o;const a=(o=d(this,Dl))==null?void 0:o.get(t);a&&(a.setCanvas(n,s),d(this,Dl).delete(t))}addMissingCanvas(t,n){(d(this,Dl)||E(this,Dl,new Map)).set(t,n)}};cf=new WeakMap,Ts=new WeakMap,Ln=new WeakMap,lr=new WeakMap,hf=new WeakMap,Uo=new WeakMap,df=new WeakMap,Xs=new WeakMap,Ll=new WeakMap,xh=new WeakMap,ff=new WeakMap,kh=new WeakMap,ua=new WeakMap,Hi=new WeakMap,Ah=new WeakMap,ey=new WeakMap,ty=new WeakMap,pf=new WeakMap,ny=new WeakMap,ca=new WeakMap,Nl=new WeakMap,gf=new WeakMap,Il=new WeakMap,ha=new WeakMap,Mw=new WeakMap,Ml=new WeakMap,ry=new WeakMap,Ol=new WeakMap,Ch=new WeakMap,Th=new WeakMap,Dl=new WeakMap,sy=new WeakMap,On=new WeakMap,Ct=new WeakMap,Ho=new WeakMap,Fl=new WeakMap,Ph=new WeakMap,iy=new WeakMap,ay=new WeakMap,jl=new WeakMap,da=new WeakMap,Vo=new WeakMap,oy=new WeakMap,Ys=new WeakMap,fe=new WeakSet,W0=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},q1=function(t){const{currentLayer:n}=this;if(n.hasTextLayer(t))return n;for(const s of d(this,lr).values())if(s.hasTextLayer(t))return s;return null},_A=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=R(this,fe,W0).call(this,t).closest(".textLayer"),a=this.getSelectionBoxes(s);a&&(d(this,ha)||E(this,ha,new IN(this)),d(this,ha).show(s,a,this.direction==="ltr"))},SA=function(){var o,u,h;const t=document.getSelection();if(!t||t.isCollapsed){d(this,Ho)&&((o=d(this,ha))==null||o.hide(),E(this,Ho,null),R(this,fe,jr).call(this,{hasSelectedText:!1}));return}const{anchorNode:n}=t;if(n===d(this,Ho))return;const a=R(this,fe,W0).call(this,t).closest(".textLayer");if(!a){d(this,Ho)&&((u=d(this,ha))==null||u.hide(),E(this,Ho,null),R(this,fe,jr).call(this,{hasSelectedText:!1}));return}if((h=d(this,ha))==null||h.hide(),E(this,Ho,n),R(this,fe,jr).call(this,{hasSelectedText:!0}),!(d(this,On)!==He.HIGHLIGHT&&d(this,On)!==He.NONE)&&(d(this,On)===He.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),E(this,Il,this.isShiftKeyDown),!this.isShiftKeyDown)){const p=d(this,On)===He.HIGHLIGHT?R(this,fe,q1).call(this,a):null;p==null||p.toggleDrawing();const m=new AbortController,v=this.combinedSignal(m),y=b=>{b.type==="pointerup"&&b.button!==0||(m.abort(),p==null||p.toggleDrawing(!0),b.type==="pointerup"&&R(this,fe,G0).call(this,"main_toolbar"))};window.addEventListener("pointerup",y,{signal:v}),window.addEventListener("blur",y,{signal:v})}},G0=function(t=""){d(this,On)===He.HIGHLIGHT?this.highlightSelection(t):d(this,ey)&&R(this,fe,_A).call(this)},EA=function(){document.addEventListener("selectionchange",R(this,fe,SA).bind(this),{signal:this._signal})},xA=function(){if(d(this,Nl))return;E(this,Nl,new AbortController);const t=this.combinedSignal(d(this,Nl));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},kA=function(){var t;(t=d(this,Nl))==null||t.abort(),E(this,Nl,null)},X1=function(){if(d(this,Ol))return;E(this,Ol,new AbortController);const t=this.combinedSignal(d(this,Ol));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},AA=function(){var t;(t=d(this,Ol))==null||t.abort(),E(this,Ol,null)},Y1=function(){if(d(this,Ll))return;E(this,Ll,new AbortController);const t=this.combinedSignal(d(this,Ll));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},K1=function(){var t;(t=d(this,Ll))==null||t.abort(),E(this,Ll,null)},CA=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},jr=function(t){Object.entries(t).some(([s,a])=>d(this,ay)[s]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(d(this,ay),t)}),d(this,On)===He.HIGHLIGHT&&t.hasSelectedEditor===!1&&R(this,fe,Fo).call(this,[[ct.HIGHLIGHT_FREE,!0]]))},Fo=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},TA=async function(){if(!d(this,Ml)){E(this,Ml,!0);const t=[];for(const n of d(this,lr).values())t.push(n.enable());await Promise.all(t);for(const n of d(this,Ln).values())n.enable()}},PA=function(){if(this.unselectAll(),d(this,Ml)){E(this,Ml,!1);for(const t of d(this,lr).values())t.disable();for(const t of d(this,Ln).values())t.disable()}},Q1=function(t){const n=d(this,lr).get(t.pageIndex);n?n.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},RA=function(){let t=null;for(t of d(this,Ct));return t},_v=function(){if(d(this,Ln).size===0)return!0;if(d(this,Ln).size===1)for(const t of d(this,Ln).values())return t.isEmpty();return!1},J1=function(t){for(const n of d(this,Ct))n.unselect();d(this,Ct).clear();for(const n of t)n.isEmpty()||(d(this,Ct).add(n),n.select());R(this,fe,jr).call(this,{hasSelectedEditor:this.hasSelection})},Ee(tf,"TRANSLATE_SMALL",1),Ee(tf,"TRANSLATE_BIG",10);let Td=tf;var Dn,fa,Vi,mf,pa,Ps,vf,ga,Kr,Wo,Rh,ma,$l,na,Sv,q0;const $r=class $r{constructor(t){P(this,na);P(this,Dn,null);P(this,fa,!1);P(this,Vi,null);P(this,mf,null);P(this,pa,null);P(this,Ps,null);P(this,vf,!1);P(this,ga,null);P(this,Kr,null);P(this,Wo,null);P(this,Rh,null);P(this,ma,!1);E(this,Kr,t),E(this,ma,t._uiManager.useNewAltTextFlow),d($r,$l)||E($r,$l,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){$r._l10n??($r._l10n=t)}async render(){const t=E(this,Vi,document.createElement("button"));t.className="altText",t.tabIndex="0";const n=E(this,mf,document.createElement("span"));t.append(n),d(this,ma)?(t.classList.add("new"),t.setAttribute("data-l10n-id",d($r,$l).missing),n.setAttribute("data-l10n-id",d($r,$l)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=d(this,Kr)._uiManager._signal;t.addEventListener("contextmenu",ra,{signal:s}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const a=o=>{o.preventDefault(),d(this,Kr)._uiManager.editAltText(d(this,Kr)),d(this,ma)&&d(this,Kr)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:d(this,na,Sv)}})};return t.addEventListener("click",a,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(E(this,vf,!0),a(o))},{signal:s}),await R(this,na,q0).call(this),t}finish(){d(this,Vi)&&(d(this,Vi).focus({focusVisible:d(this,vf)}),E(this,vf,!1))}isEmpty(){return d(this,ma)?d(this,Dn)===null:!d(this,Dn)&&!d(this,fa)}hasData(){return d(this,ma)?d(this,Dn)!==null||!!d(this,Wo):this.isEmpty()}get guessedText(){return d(this,Wo)}async setGuessedText(t){d(this,Dn)===null&&(E(this,Wo,t),E(this,Rh,await $r._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),R(this,na,q0).call(this))}toggleAltTextBadge(t=!1){var n;if(!d(this,ma)||d(this,Dn)){(n=d(this,ga))==null||n.remove(),E(this,ga,null);return}if(!d(this,ga)){const s=E(this,ga,document.createElement("div"));s.className="noAltTextBadge",d(this,Kr).div.append(s)}d(this,ga).classList.toggle("hidden",!t)}serialize(t){let n=d(this,Dn);return!t&&d(this,Wo)===n&&(n=d(this,Rh)),{altText:n,decorative:d(this,fa),guessedText:d(this,Wo),textWithDisclaimer:d(this,Rh)}}get data(){return{altText:d(this,Dn),decorative:d(this,fa)}}set data({altText:t,decorative:n,guessedText:s,textWithDisclaimer:a,cancel:o=!1}){s&&(E(this,Wo,s),E(this,Rh,a)),!(d(this,Dn)===t&&d(this,fa)===n)&&(o||(E(this,Dn,t),E(this,fa,n)),R(this,na,q0).call(this))}toggle(t=!1){d(this,Vi)&&(!t&&d(this,Ps)&&(clearTimeout(d(this,Ps)),E(this,Ps,null)),d(this,Vi).disabled=!t)}shown(){d(this,Kr)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:d(this,na,Sv)}})}destroy(){var t,n;(t=d(this,Vi))==null||t.remove(),E(this,Vi,null),E(this,mf,null),E(this,pa,null),(n=d(this,ga))==null||n.remove(),E(this,ga,null)}};Dn=new WeakMap,fa=new WeakMap,Vi=new WeakMap,mf=new WeakMap,pa=new WeakMap,Ps=new WeakMap,vf=new WeakMap,ga=new WeakMap,Kr=new WeakMap,Wo=new WeakMap,Rh=new WeakMap,ma=new WeakMap,$l=new WeakMap,na=new WeakSet,Sv=function(){return d(this,Dn)&&"added"||d(this,Dn)===null&&this.guessedText&&"review"||"missing"},q0=async function(){var a,o,u;const t=d(this,Vi);if(!t)return;if(d(this,ma)){if(t.classList.toggle("done",!!d(this,Dn)),t.setAttribute("data-l10n-id",d($r,$l)[d(this,na,Sv)]),(a=d(this,mf))==null||a.setAttribute("data-l10n-id",d($r,$l)[`${d(this,na,Sv)}-label`]),!d(this,Dn)){(o=d(this,pa))==null||o.remove();return}}else{if(!d(this,Dn)&&!d(this,fa)){t.classList.remove("done"),(u=d(this,pa))==null||u.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=d(this,pa);if(!n){E(this,pa,n=document.createElement("span")),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${d(this,Kr).id}`;const h=100,p=d(this,Kr)._uiManager._signal;p.addEventListener("abort",()=>{clearTimeout(d(this,Ps)),E(this,Ps,null)},{once:!0}),t.addEventListener("mouseenter",()=>{E(this,Ps,setTimeout(()=>{E(this,Ps,null),d(this,pa).classList.add("show"),d(this,Kr)._reportTelemetry({action:"alt_text_tooltip"})},h))},{signal:p}),t.addEventListener("mouseleave",()=>{var m;d(this,Ps)&&(clearTimeout(d(this,Ps)),E(this,Ps,null)),(m=d(this,pa))==null||m.classList.remove("show")},{signal:p})}d(this,fa)?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=d(this,Dn)),n.parentNode||t.append(n);const s=d(this,Kr).getElementForAltText();s==null||s.setAttribute("aria-describedby",n.id)},P($r,$l,null),Ee($r,"_l10n",null);let Ew=$r;var yf,Lh,ly,uy,cy,hy,dy,Go,Nh,qo,Ih,zl,vu,LA,NA,IA;const RE=class RE{constructor({container:t,isPinchingDisabled:n=null,isPinchingStopped:s=null,onPinchStart:a=null,onPinching:o=null,onPinchEnd:u=null,signal:h}){P(this,vu);P(this,yf);P(this,Lh,!1);P(this,ly,null);P(this,uy);P(this,cy);P(this,hy);P(this,dy);P(this,Go,null);P(this,Nh);P(this,qo,null);P(this,Ih);P(this,zl,null);E(this,yf,t),E(this,ly,s),E(this,uy,n),E(this,cy,a),E(this,hy,o),E(this,dy,u),E(this,Ih,new AbortController),E(this,Nh,AbortSignal.any([h,d(this,Ih).signal])),t.addEventListener("touchstart",R(this,vu,LA).bind(this),{passive:!1,signal:d(this,Nh)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/wl.pixelRatio}destroy(){var t,n;(t=d(this,Ih))==null||t.abort(),E(this,Ih,null),(n=d(this,Go))==null||n.abort(),E(this,Go,null)}};yf=new WeakMap,Lh=new WeakMap,ly=new WeakMap,uy=new WeakMap,cy=new WeakMap,hy=new WeakMap,dy=new WeakMap,Go=new WeakMap,Nh=new WeakMap,qo=new WeakMap,Ih=new WeakMap,zl=new WeakMap,vu=new WeakSet,LA=function(t){var a,o,u;if((a=d(this,uy))!=null&&a.call(this))return;if(t.touches.length===1){if(d(this,Go))return;const h=E(this,Go,new AbortController),p=AbortSignal.any([d(this,Nh),h.signal]),m=d(this,yf),v={capture:!0,signal:p,passive:!1},y=b=>{var _;b.pointerType==="touch"&&((_=d(this,Go))==null||_.abort(),E(this,Go,null))};m.addEventListener("pointerdown",b=>{b.pointerType==="touch"&&(mn(b),y(b))},v),m.addEventListener("pointerup",y,v),m.addEventListener("pointercancel",y,v);return}if(!d(this,zl)){E(this,zl,new AbortController);const h=AbortSignal.any([d(this,Nh),d(this,zl).signal]),p=d(this,yf),m={signal:h,capture:!1,passive:!1};p.addEventListener("touchmove",R(this,vu,NA).bind(this),m);const v=R(this,vu,IA).bind(this);p.addEventListener("touchend",v,m),p.addEventListener("touchcancel",v,m),m.capture=!0,p.addEventListener("pointerdown",mn,m),p.addEventListener("pointermove",mn,m),p.addEventListener("pointercancel",mn,m),p.addEventListener("pointerup",mn,m),(o=d(this,cy))==null||o.call(this)}if(mn(t),t.touches.length!==2||(u=d(this,ly))!=null&&u.call(this)){E(this,qo,null);return}let[n,s]=t.touches;n.identifier>s.identifier&&([n,s]=[s,n]),E(this,qo,{touch0X:n.screenX,touch0Y:n.screenY,touch1X:s.screenX,touch1Y:s.screenY})},NA=function(t){var j;if(!d(this,qo)||t.touches.length!==2)return;mn(t);let[n,s]=t.touches;n.identifier>s.identifier&&([n,s]=[s,n]);const{screenX:a,screenY:o}=n,{screenX:u,screenY:h}=s,p=d(this,qo),{touch0X:m,touch0Y:v,touch1X:y,touch1Y:b}=p,_=y-m,k=b-v,x=u-a,C=h-o,N=Math.hypot(x,C)||1,F=Math.hypot(_,k)||1;if(!d(this,Lh)&&Math.abs(F-N)<=RE.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(p.touch0X=a,p.touch0Y=o,p.touch1X=u,p.touch1Y=h,!d(this,Lh)){E(this,Lh,!0);return}const D=[(a+u)/2,(o+h)/2];(j=d(this,hy))==null||j.call(this,D,F,N)},IA=function(t){var n;t.touches.length>=2||(d(this,zl).abort(),E(this,zl,null),(n=d(this,dy))==null||n.call(this),d(this,qo)&&(mn(t),E(this,qo,null),E(this,Lh,!1)))};let xw=RE;var Mh,Wi,Vt,wf,Bl,fy,Oh,ur,Dh,Xo,Ul,py,Fh,Rs,gy,jh,Yo,va,bf,_f,Ks,$h,my,Ow,Fe,Z1,vy,eS,X0,MA,OA,tS,Y0,nS,DA,FA,jA,rS,$A,sS,zA,BA,UA,iS,Ev;const Ke=class Ke{constructor(t){P(this,Fe);P(this,Mh,null);P(this,Wi,null);P(this,Vt,null);P(this,wf,!1);P(this,Bl,null);P(this,fy,"");P(this,Oh,!1);P(this,ur,null);P(this,Dh,null);P(this,Xo,null);P(this,Ul,null);P(this,py,"");P(this,Fh,!1);P(this,Rs,null);P(this,gy,!1);P(this,jh,!1);P(this,Yo,!1);P(this,va,null);P(this,bf,0);P(this,_f,0);P(this,Ks,null);P(this,$h,null);Ee(this,"_isCopy",!1);Ee(this,"_editToolbar",null);Ee(this,"_initialOptions",Object.create(null));Ee(this,"_initialData",null);Ee(this,"_isVisible",!0);Ee(this,"_uiManager",null);Ee(this,"_focusEventsAllowed",!0);P(this,my,!1);P(this,Ow,Ke._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:n,rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:u}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,a],this.pageTranslation=[o,u];const[h,p]=this.parentDimensions;this.x=t.x/h,this.y=t.y/p,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Ke.prototype._resizeWithKeyboard,n=Td.TRANSLATE_SMALL,s=Td.TRANSLATE_BIG;return at(this,"_resizerKeyboardManager",new E0([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],Ke.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return at(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const n=new DN({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});n.annotationElementId=t.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(t,n){if(Ke._l10n??(Ke._l10n=t),Ke._l10nResizer||(Ke._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ke._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);Ke._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,n){Rt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return d(this,my)}set _isDraggable(t){var n;E(this,my,t),(n=this.div)==null||n.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(t*2),this.y+=this.width*t/(n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(t*2),this.y-=this.width*t/(n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=d(this,Ow)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):R(this,Fe,Ev).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(d(this,Fh)?E(this,Fh,!1):this.parent.setSelected(this))}focusout(t){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const n=t.relatedTarget;n!=null&&n.closest(`#${this.id}`)||(t.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,n,s,a){const[o,u]=this.parentDimensions;[s,a]=this.screenToPageTranslation(s,a),this.x=(t+s)/o,this.y=(n+a)/u,this.fixAndSetPosition()}_moveAfterPaste(t,n){const[s,a]=this.parentDimensions;this.setAt(t*s,n*a,this.width*s,this.height*a),this._onTranslated()}translate(t,n){R(this,Fe,Z1).call(this,this.parentDimensions,t,n)}translateInPage(t,n){d(this,Rs)||E(this,Rs,[this.x,this.y,this.width,this.height]),R(this,Fe,Z1).call(this,this.pageDimensions,t,n),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,n){d(this,Rs)||E(this,Rs,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[a,o]}=this;if(this.x+=t/a,this.y+=n/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:u,y:h}=this;const[p,m]=this.getBaseTranslation();u+=p,h+=m;const{style:v}=s;v.left=`${(100*u).toFixed(2)}%`,v.top=`${(100*h).toFixed(2)}%`,this._onTranslating(u,h),s.scrollIntoView({block:"nearest"})}_onTranslating(t,n){}_onTranslated(t,n){}get _hasBeenMoved(){return!!d(this,Rs)&&(d(this,Rs)[0]!==this.x||d(this,Rs)[1]!==this.y)}get _hasBeenResized(){return!!d(this,Rs)&&(d(this,Rs)[2]!==this.width||d(this,Rs)[3]!==this.height)}getBaseTranslation(){const[t,n]=this.parentDimensions,{_borderLineWidth:s}=Ke,a=s/t,o=s/n;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:n},pageDimensions:[s,a]}=this;let{x:o,y:u,width:h,height:p}=this;if(h*=s,p*=a,o*=s,u*=a,this._mustFixPosition)switch(t){case 0:o=Hr(o,0,s-h),u=Hr(u,0,a-p);break;case 90:o=Hr(o,0,s-p),u=Hr(u,h,a);break;case 180:o=Hr(o,h,s),u=Hr(u,p,a);break;case 270:o=Hr(o,p,s),u=Hr(u,0,a-h);break}this.x=o/=s,this.y=u/=a;const[m,v]=this.getBaseTranslation();o+=m,u+=v,n.left=`${(100*o).toFixed(2)}%`,n.top=`${(100*u).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,n){var s;return R(s=Ke,vy,eS).call(s,t,n,this.parentRotation)}pageTranslationToScreen(t,n){var s;return R(s=Ke,vy,eS).call(s,t,n,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[n,s]}=this;return[n*t,s*t]}setDims(t,n){const[s,a]=this.parentDimensions,{style:o}=this.div;o.width=`${(100*t/s).toFixed(2)}%`,d(this,Oh)||(o.height=`${(100*n/a).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:n,width:s}=t,a=s.endsWith("%"),o=!d(this,Oh)&&n.endsWith("%");if(a&&o)return;const[u,h]=this.parentDimensions;a||(t.width=`${(100*parseFloat(s)/u).toFixed(2)}%`),!d(this,Oh)&&!o&&(t.height=`${(100*parseFloat(n)/h).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=d(this,Vt))==null||t.finish()}async addEditToolbar(){return this._editToolbar||d(this,jh)?this._editToolbar:(this._editToolbar=new V1(this),this.div.append(this._editToolbar.render()),d(this,Vt)&&await this._editToolbar.addAltText(d(this,Vt)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=d(this,Vt))==null||t.destroy())}addContainer(t){var s;const n=(s=this._editToolbar)==null?void 0:s.div;n?n.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){d(this,Vt)||(Ew.initialize(Ke._l10n),E(this,Vt,new Ew(this)),d(this,Mh)&&(d(this,Vt).data=d(this,Mh),E(this,Mh,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=d(this,Vt))==null?void 0:t.data}set altTextData(t){d(this,Vt)&&(d(this,Vt).data=t)}get guessedAltText(){var t;return(t=d(this,Vt))==null?void 0:t.guessedText}async setGuessedAltText(t){var n;await((n=d(this,Vt))==null?void 0:n.setGuessedText(t))}serializeAltText(t){var n;return(n=d(this,Vt))==null?void 0:n.serialize(t)}hasAltText(){return!!d(this,Vt)&&!d(this,Vt).isEmpty()}hasAltTextData(){var t;return((t=d(this,Vt))==null?void 0:t.hasData())??!1}render(){var u;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=d(this,wf)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),R(this,Fe,sS).call(this);const[n,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/n).toFixed(2)}%`,t.style.maxHeight=`${(100*n/s).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),SE(this,t,["keydown","pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(d(this,$h)||E(this,$h,new xw({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:R(this,Fe,DA).bind(this),onPinching:R(this,Fe,FA).bind(this),onPinchEnd:R(this,Fe,jA).bind(this),signal:this._uiManager._signal}))),(u=this._uiManager._editorUndoBar)==null||u.hide(),t}pointerdown(t){const{isMac:n}=mr.platform;if(t.button!==0||t.ctrlKey&&n){t.preventDefault();return}if(E(this,Fh,!0),this._isDraggable){R(this,Fe,$A).call(this,t);return}R(this,Fe,rS).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){d(this,va)&&clearTimeout(d(this,va)),E(this,va,setTimeout(()=>{var t;E(this,va,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,n,s){t.changeParent(this),this.x=n,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,n,s=this.rotation){const a=this.parentScale,[o,u]=this.pageDimensions,[h,p]=this.pageTranslation,m=t/a,v=n/a,y=this.x*o,b=this.y*u,_=this.width*o,k=this.height*u;switch(s){case 0:return[y+m+h,u-b-v-k+p,y+m+_+h,u-b-v+p];case 90:return[y+v+h,u-b+m+p,y+v+k+h,u-b+m+_+p];case 180:return[y-m-_+h,u-b+v+p,y-m+h,u-b+v+k+p];case 270:return[y-v-k+h,u-b-m-_+p,y-v+h,u-b-m+p];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,n){const[s,a,o,u]=t,h=o-s,p=u-a;switch(this.rotation){case 0:return[s,n-u,h,p];case 90:return[s,n-a,p,h];case 180:return[o,n-a,h,p];case 270:return[o,n-u,p,h];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){E(this,jh,!0)}disableEditMode(){E(this,jh,!1)}isInEditMode(){return d(this,jh)}shouldGetKeyboardEvents(){return d(this,Yo)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:n,bottom:s,right:a}=this.getClientDimensions(),{innerHeight:o,innerWidth:u}=window;return n<u&&a>0&&t<o&&s>0}rebuild(){R(this,Fe,sS).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,n=null){Rt("An editor must be serializable")}static async deserialize(t,n,s){const a=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:s});a.rotation=t.rotation,E(a,Mh,t.accessibilityData),a._isCopy=t.isCopy||!1;const[o,u]=a.pageDimensions,[h,p,m,v]=a.getRectInCurrentCoords(t.rect,u);return a.x=h/o,a.y=p/u,a.width=m/o,a.height=v/u,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,n;if((t=d(this,Ul))==null||t.abort(),E(this,Ul,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),d(this,va)&&(clearTimeout(d(this,va)),E(this,va,null)),R(this,Fe,Ev).call(this),this.removeEditToolbar(),d(this,Ks)){for(const s of d(this,Ks).values())clearTimeout(s);E(this,Ks,null)}this.parent=null,(n=d(this,$h))==null||n.destroy(),E(this,$h,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(R(this,Fe,MA).call(this),d(this,ur).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),E(this,Xo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const n=d(this,ur).children;if(!d(this,Wi)){E(this,Wi,Array.from(n));const u=R(this,Fe,zA).bind(this),h=R(this,Fe,BA).bind(this),p=this._uiManager._signal;for(const m of d(this,Wi)){const v=m.getAttribute("data-resizer-name");m.setAttribute("role","spinbutton"),m.addEventListener("keydown",u,{signal:p}),m.addEventListener("blur",h,{signal:p}),m.addEventListener("focus",R(this,Fe,UA).bind(this,v),{signal:p}),m.setAttribute("data-l10n-id",Ke._l10nResizer[v])}}const s=d(this,Wi)[0];let a=0;for(const u of n){if(u===s)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(d(this,Wi).length/4);if(o!==a){if(o<a)for(let h=0;h<a-o;h++)d(this,ur).append(d(this,ur).firstChild);else if(o>a)for(let h=0;h<o-a;h++)d(this,ur).firstChild.before(d(this,ur).lastChild);let u=0;for(const h of n){const m=d(this,Wi)[u++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",Ke._l10nResizer[m])}}R(this,Fe,iS).call(this,0),E(this,Yo,!0),d(this,ur).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,n){d(this,Yo)&&R(this,Fe,nS).call(this,d(this,py),{deltaX:t,deltaY:n,fromKeyboard:!0})}_stopResizingWithKeyboard(){R(this,Fe,Ev).call(this),this.div.focus()}select(){var t,n,s;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var a,o;(a=this.div)!=null&&a.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(n=this._editToolbar)==null||n.show(),(s=d(this,Vt))==null||s.toggleAltTextBadge(!1)}unselect(){var t,n,s,a,o;(t=d(this,ur))==null||t.classList.add("hidden"),(n=this.div)==null||n.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(a=this._editToolbar)==null||a.hide(),(o=d(this,Vt))==null||o.toggleAltTextBadge(!0)}updateParams(t,n){}disableEditing(){}enableEditing(){}enterInEditMode(){}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return d(this,gy)}set isEditing(t){E(this,gy,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,n){E(this,Oh,!0);const s=t/n,{style:a}=this.div;a.aspectRatio=s,a.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,n=!1){if(n){d(this,Ks)||E(this,Ks,new Map);const{action:s}=t;let a=d(this,Ks).get(s);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),d(this,Ks).delete(s),d(this,Ks).size===0&&E(this,Ks,null)},Ke._telemetryTimeout),d(this,Ks).set(s,a);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),E(this,wf,!1)}disable(){this.div&&(this.div.tabIndex=-1),E(this,wf,!0)}renderAnnotationElement(t){let n=t.container.querySelector(".annotationContent");if(!n)n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),t.container.prepend(n);else if(n.nodeName==="CANVAS"){const s=n;n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),s.before(n)}return n}resetAnnotationElement(t){const{firstChild:n}=t.container;(n==null?void 0:n.nodeName)==="DIV"&&n.classList.contains("annotationContent")&&n.remove()}};Mh=new WeakMap,Wi=new WeakMap,Vt=new WeakMap,wf=new WeakMap,Bl=new WeakMap,fy=new WeakMap,Oh=new WeakMap,ur=new WeakMap,Dh=new WeakMap,Xo=new WeakMap,Ul=new WeakMap,py=new WeakMap,Fh=new WeakMap,Rs=new WeakMap,gy=new WeakMap,jh=new WeakMap,Yo=new WeakMap,va=new WeakMap,bf=new WeakMap,_f=new WeakMap,Ks=new WeakMap,$h=new WeakMap,my=new WeakMap,Ow=new WeakMap,Fe=new WeakSet,Z1=function([t,n],s,a){[s,a]=this.screenToPageTranslation(s,a),this.x+=s/t,this.y+=a/n,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},vy=new WeakSet,eS=function(t,n,s){switch(s){case 90:return[n,-t];case 180:return[-t,-n];case 270:return[-n,t];default:return[t,n]}},X0=function(t){switch(t){case 90:{const[n,s]=this.pageDimensions;return[0,-n/s,s/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,s]=this.pageDimensions;return[0,n/s,-s/n,0]}default:return[1,0,0,1]}},MA=function(){if(d(this,ur))return;E(this,ur,document.createElement("div")),d(this,ur).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],n=this._uiManager._signal;for(const s of t){const a=document.createElement("div");d(this,ur).append(a),a.classList.add("resizer",s),a.setAttribute("data-resizer-name",s),a.addEventListener("pointerdown",R(this,Fe,OA).bind(this,s),{signal:n}),a.addEventListener("contextmenu",ra,{signal:n}),a.tabIndex=-1}this.div.prepend(d(this,ur))},OA=function(t,n){var v;n.preventDefault();const{isMac:s}=mr.platform;if(n.button!==0||n.ctrlKey&&s)return;(v=d(this,Vt))==null||v.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,E(this,Dh,[n.screenX,n.screenY]);const o=new AbortController,u=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",R(this,Fe,nS).bind(this,t),{passive:!0,capture:!0,signal:u}),window.addEventListener("touchmove",mn,{passive:!1,signal:u}),window.addEventListener("contextmenu",ra,{signal:u}),E(this,Xo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const h=this.parent.div.style.cursor,p=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const m=()=>{var y;o.abort(),this.parent.togglePointerEvents(!0),(y=d(this,Vt))==null||y.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=h,this.div.style.cursor=p,R(this,Fe,Y0).call(this)};window.addEventListener("pointerup",m,{signal:u}),window.addEventListener("blur",m,{signal:u})},tS=function(t,n,s,a){this.width=s,this.height=a,this.x=t,this.y=n;const[o,u]=this.parentDimensions;this.setDims(o*s,u*a),this.fixAndSetPosition(),this._onResized()},Y0=function(){if(!d(this,Xo))return;const{savedX:t,savedY:n,savedWidth:s,savedHeight:a}=d(this,Xo);E(this,Xo,null);const o=this.x,u=this.y,h=this.width,p=this.height;o===t&&u===n&&h===s&&p===a||this.addCommands({cmd:R(this,Fe,tS).bind(this,o,u,h,p),undo:R(this,Fe,tS).bind(this,t,n,s,a),mustExec:!0})},nS=function(t,n){const[s,a]=this.parentDimensions,o=this.x,u=this.y,h=this.width,p=this.height,m=Ke.MIN_SIZE/s,v=Ke.MIN_SIZE/a,y=R(this,Fe,X0).call(this,this.rotation),b=(le,ae)=>[y[0]*le+y[2]*ae,y[1]*le+y[3]*ae],_=R(this,Fe,X0).call(this,360-this.rotation),k=(le,ae)=>[_[0]*le+_[2]*ae,_[1]*le+_[3]*ae];let x,C,N=!1,F=!1;switch(t){case"topLeft":N=!0,x=(le,ae)=>[0,0],C=(le,ae)=>[le,ae];break;case"topMiddle":x=(le,ae)=>[le/2,0],C=(le,ae)=>[le/2,ae];break;case"topRight":N=!0,x=(le,ae)=>[le,0],C=(le,ae)=>[0,ae];break;case"middleRight":F=!0,x=(le,ae)=>[le,ae/2],C=(le,ae)=>[0,ae/2];break;case"bottomRight":N=!0,x=(le,ae)=>[le,ae],C=(le,ae)=>[0,0];break;case"bottomMiddle":x=(le,ae)=>[le/2,ae],C=(le,ae)=>[le/2,0];break;case"bottomLeft":N=!0,x=(le,ae)=>[0,ae],C=(le,ae)=>[le,0];break;case"middleLeft":F=!0,x=(le,ae)=>[0,ae/2],C=(le,ae)=>[le,ae/2];break}const D=x(h,p),j=C(h,p);let z=b(...j);const V=Ke._round(o+z[0]),G=Ke._round(u+z[1]);let ee=1,oe=1,de,ce;if(n.fromKeyboard)({deltaX:de,deltaY:ce}=n);else{const{screenX:le,screenY:ae}=n,[q,te]=d(this,Dh);[de,ce]=this.screenToPageTranslation(le-q,ae-te),d(this,Dh)[0]=le,d(this,Dh)[1]=ae}if([de,ce]=k(de/s,ce/a),N){const le=Math.hypot(h,p);ee=oe=Math.max(Math.min(Math.hypot(j[0]-D[0]-de,j[1]-D[1]-ce)/le,1/h,1/p),m/h,v/p)}else F?ee=Hr(Math.abs(j[0]-D[0]-de),m,1)/h:oe=Hr(Math.abs(j[1]-D[1]-ce),v,1)/p;const Ne=Ke._round(h*ee),Ae=Ke._round(p*oe);z=b(...C(Ne,Ae));const Pe=V-z[0],Ze=G-z[1];d(this,Rs)||E(this,Rs,[this.x,this.y,this.width,this.height]),this.width=Ne,this.height=Ae,this.x=Pe,this.y=Ze,this.setDims(s*Ne,a*Ae),this.fixAndSetPosition(),this._onResizing()},DA=function(){var t;E(this,Xo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=d(this,Vt))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},FA=function(t,n,s){let o=.7*(s/n)+1-.7;if(o===1)return;const u=R(this,Fe,X0).call(this,this.rotation),h=(V,G)=>[u[0]*V+u[2]*G,u[1]*V+u[3]*G],[p,m]=this.parentDimensions,v=this.x,y=this.y,b=this.width,_=this.height,k=Ke.MIN_SIZE/p,x=Ke.MIN_SIZE/m;o=Math.max(Math.min(o,1/b,1/_),k/b,x/_);const C=Ke._round(b*o),N=Ke._round(_*o);if(C===b&&N===_)return;d(this,Rs)||E(this,Rs,[v,y,b,_]);const F=h(b/2,_/2),D=Ke._round(v+F[0]),j=Ke._round(y+F[1]),z=h(C/2,N/2);this.x=D-z[0],this.y=j-z[1],this.width=C,this.height=N,this.setDims(p*C,m*N),this.fixAndSetPosition(),this._onResizing()},jA=function(){var t;(t=d(this,Vt))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),R(this,Fe,Y0).call(this)},rS=function(t){const{isMac:n}=mr.platform;t.ctrlKey&&!n||t.shiftKey||t.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)},$A=function(t){const{isSelected:n}=this;this._uiManager.setUpDragSession();let s=!1;const a=new AbortController,o=this._uiManager.combinedSignal(a),u={capture:!0,passive:!1,signal:o},h=m=>{a.abort(),E(this,Bl,null),E(this,Fh,!1),this._uiManager.endDragSession()||R(this,Fe,rS).call(this,m),s&&this._onStopDragging()};n&&(E(this,bf,t.clientX),E(this,_f,t.clientY),E(this,Bl,t.pointerId),E(this,fy,t.pointerType),window.addEventListener("pointermove",m=>{s||(s=!0,this._onStartDragging());const{clientX:v,clientY:y,pointerId:b}=m;if(b!==d(this,Bl)){mn(m);return}const[_,k]=this.screenToPageTranslation(v-d(this,bf),y-d(this,_f));E(this,bf,v),E(this,_f,y),this._uiManager.dragSelectedEditors(_,k)},u),window.addEventListener("touchmove",mn,u),window.addEventListener("pointerdown",m=>{m.pointerType===d(this,fy)&&(d(this,$h)||m.isPrimary)&&h(m),mn(m)},u));const p=m=>{if(!d(this,Bl)||d(this,Bl)===m.pointerId){h(m);return}mn(m)};window.addEventListener("pointerup",p,{signal:o}),window.addEventListener("blur",p,{signal:o})},sS=function(){if(d(this,Ul)||!this.div)return;E(this,Ul,new AbortController);const t=this._uiManager.combinedSignal(d(this,Ul));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},zA=function(t){Ke._resizerKeyboardManager.exec(this,t)},BA=function(t){var n;d(this,Yo)&&((n=t.relatedTarget)==null?void 0:n.parentNode)!==d(this,ur)&&R(this,Fe,Ev).call(this)},UA=function(t){E(this,py,d(this,Yo)?t:"")},iS=function(t){if(d(this,Wi))for(const n of d(this,Wi))n.tabIndex=t},Ev=function(){E(this,Yo,!1),R(this,Fe,iS).call(this,-1),R(this,Fe,Y0).call(this)},P(Ke,vy),Ee(Ke,"_l10n",null),Ee(Ke,"_l10nResizer",null),Ee(Ke,"_borderLineWidth",-1),Ee(Ke,"_colorManager",new G1),Ee(Ke,"_zIndex",1),Ee(Ke,"_telemetryTimeout",1e3);let Yt=Ke;class DN extends Yt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Gx=3285377520,Gs=4294901760,aa=65535;class HA{constructor(t){this.h1=t?t&4294967295:Gx,this.h2=t?t&4294967295:Gx}update(t){let n,s;if(typeof t=="string"){n=new Uint8Array(t.length*2),s=0;for(let x=0,C=t.length;x<C;x++){const N=t.charCodeAt(x);N<=255?n[s++]=N:(n[s++]=N>>>8,n[s++]=N&255)}}else if(ArrayBuffer.isView(t))n=t.slice(),s=n.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=s>>2,o=s-a*4,u=new Uint32Array(n.buffer,0,a);let h=0,p=0,m=this.h1,v=this.h2;const y=3432918353,b=461845907,_=y&aa,k=b&aa;for(let x=0;x<a;x++)x&1?(h=u[x],h=h*y&Gs|h*_&aa,h=h<<15|h>>>17,h=h*b&Gs|h*k&aa,m^=h,m=m<<13|m>>>19,m=m*5+3864292196):(p=u[x],p=p*y&Gs|p*_&aa,p=p<<15|p>>>17,p=p*b&Gs|p*k&aa,v^=p,v=v<<13|v>>>19,v=v*5+3864292196);switch(h=0,o){case 3:h^=n[a*4+2]<<16;case 2:h^=n[a*4+1]<<8;case 1:h^=n[a*4],h=h*y&Gs|h*_&aa,h=h<<15|h>>>17,h=h*b&Gs|h*k&aa,a&1?m^=h:v^=h}this.h1=m,this.h2=v}hexdigest(){let t=this.h1,n=this.h2;return t^=n>>>1,t=t*3981806797&Gs|t*36045&aa,n=n*4283543511&Gs|((n<<16|t>>>16)*2950163797&Gs)>>>16,t^=n>>>1,t=t*444984403&Gs|t*60499&aa,n=n*3301882366&Gs|((n<<16|t>>>16)*3120437893&Gs)>>>16,t^=n>>>1,(t>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}const aS=Object.freeze({map:null,hash:"",transfer:void 0});var zh,Bh,Fn,Dw,VA;class EE{constructor(){P(this,Dw);P(this,zh,!1);P(this,Bh,null);P(this,Fn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,n){const s=d(this,Fn).get(t);return s===void 0?n:Object.assign(n,s)}getRawValue(t){return d(this,Fn).get(t)}remove(t){if(d(this,Fn).delete(t),d(this,Fn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const n of d(this,Fn).values())if(n instanceof Yt)return;this.onAnnotationEditor(null)}}setValue(t,n){const s=d(this,Fn).get(t);let a=!1;if(s!==void 0)for(const[o,u]of Object.entries(n))s[o]!==u&&(a=!0,s[o]=u);else a=!0,d(this,Fn).set(t,n);a&&R(this,Dw,VA).call(this),n instanceof Yt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(n.constructor._type)}has(t){return d(this,Fn).has(t)}getAll(){return d(this,Fn).size>0?mE(d(this,Fn)):null}setAll(t){for(const[n,s]of Object.entries(t))this.setValue(n,s)}get size(){return d(this,Fn).size}resetModified(){d(this,zh)&&(E(this,zh,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new WA(this)}get serializable(){if(d(this,Fn).size===0)return aS;const t=new Map,n=new HA,s=[],a=Object.create(null);let o=!1;for(const[u,h]of d(this,Fn)){const p=h instanceof Yt?h.serialize(!1,a):h;p&&(t.set(u,p),n.update(`${u}:${JSON.stringify(p)}`),o||(o=!!p.bitmap))}if(o)for(const u of t.values())u.bitmap&&s.push(u.bitmap);return t.size>0?{map:t,hash:n.hexdigest(),transfer:s}:aS}get editorStats(){let t=null;const n=new Map;for(const s of d(this,Fn).values()){if(!(s instanceof Yt))continue;const a=s.telemetryFinalData;if(!a)continue;const{type:o}=a;n.has(o)||n.set(o,Object.getPrototypeOf(s).constructor),t||(t=Object.create(null));const u=t[o]||(t[o]=new Map);for(const[h,p]of Object.entries(a)){if(h==="type")continue;let m=u.get(h);m||(m=new Map,u.set(h,m));const v=m.get(p)??0;m.set(p,v+1)}}for(const[s,a]of n)t[s]=a.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){E(this,Bh,null)}get modifiedIds(){if(d(this,Bh))return d(this,Bh);const t=[];for(const n of d(this,Fn).values())!(n instanceof Yt)||!n.annotationElementId||!n.serialize()||t.push(n.annotationElementId);return E(this,Bh,{ids:new Set(t),hash:t.join(",")})}}zh=new WeakMap,Bh=new WeakMap,Fn=new WeakMap,Dw=new WeakSet,VA=function(){d(this,zh)||(E(this,zh,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var yy;class WA extends EE{constructor(n){super();P(this,yy);const{map:s,hash:a,transfer:o}=n.serializable,u=structuredClone(s,o?{transfer:o}:null);E(this,yy,{map:u,hash:a,transfer:o})}get print(){Rt("Should not call PrintAnnotationStorage.print")}get serializable(){return d(this,yy)}get modifiedIds(){return at(this,"modifiedIds",{ids:new Set,hash:""})}}yy=new WeakMap;var Sf;class FN{constructor({ownerDocument:t=globalThis.document,styleElement:n=null}){P(this,Sf,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(t,n.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),d(this,Sf).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:n,_inspectFont:s}){if(!(!t||d(this,Sf).has(t.loadedName))){if(vn(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:o,style:u}=t,h=new FontFace(a,o,u);this.addNativeFontFace(h);try{await h.load(),d(this,Sf).add(a),s==null||s(t)}catch{Ve(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(h)}return}Rt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(a){throw Ve(`Failed to load font '${s.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const n=t.createFontFaceRule();if(n){if(this.insertRule(n),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const a=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){var n;const t=!!((n=this._document)!=null&&n.fonts);return at(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return at(this,"isSyncFontLoadingSupported",dr||mr.platform.isFirefox)}_queueLoadingCallback(t){function n(){for(vn(!a.done,"completeRequest() cannot be called twice."),a.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,a={done:!1,complete:n,callback:t};return s.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return at(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,n){function s(j,z){return j.charCodeAt(z)<<24|j.charCodeAt(z+1)<<16|j.charCodeAt(z+2)<<8|j.charCodeAt(z+3)&255}function a(j,z,V,G){const ee=j.substring(0,z),oe=j.substring(z+V);return ee+G+oe}let o,u;const h=this._document.createElement("canvas");h.width=1,h.height=1;const p=h.getContext("2d");let m=0;function v(j,z){if(++m>30){Ve("Load test font never loaded."),z();return}if(p.font="30px "+j,p.fillText(".",0,20),p.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(v.bind(null,j,z))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=a(b,976,y.length,y);const k=16,x=1482184792;let C=s(b,k);for(o=0,u=y.length-3;o<u;o+=4)C=C-x+s(y,o)|0;o<y.length&&(C=C-x+s(y+"XXX",o)|0),b=a(b,k,4,SN(C));const N=`url(data:font/opentype;base64,${btoa(b)});`,F=`@font-face {font-family:"${y}";src:${N}}`;this.insertRule(F);const D=this._document.createElement("div");D.style.visibility="hidden",D.style.width=D.style.height="10px",D.style.position="absolute",D.style.top=D.style.left="0px";for(const j of[t.loadedName,y]){const z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=j,D.append(z)}this._document.body.append(D),v(y,()=>{D.remove(),n.complete()})}}Sf=new WeakMap;class jN{constructor(t,n=null){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this._inspectFont=n}createNativeFontFace(){var n;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(n=this._inspectFont)==null||n.call(this,this),t}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${dA(this.data)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let a=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(a+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${a}src:${t}}`}return(s=this._inspectFont)==null||s.call(this,this,t),n}getPathGenerator(t,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];const s=this.loadedName+"_path_"+n;let a;try{a=t.get(s)}catch(u){Ve(`getPathGenerator - ignoring character: "${u}".`)}const o=new Path2D(a||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[n]=o}}const O0={DATA:1,ERROR:2},pn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function qx(){}function Xr(c){if(c instanceof pu||c instanceof B1||c instanceof Hx||c instanceof Sw||c instanceof y1)return c;switch(c instanceof Error||typeof c=="object"&&c!==null||Rt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),c.name){case"AbortException":return new pu(c.message);case"InvalidPDFException":return new B1(c.message);case"PasswordException":return new Hx(c.message,c.code);case"ResponseException":return new Sw(c.message,c.status,c.missing);case"UnknownErrorException":return new y1(c.message,c.details)}return new y1(c.message,c.toString())}var Ef,ni,GA,qA,XA,K0;class xv{constructor(t,n,s){P(this,ni);P(this,Ef,new AbortController);this.sourceName=t,this.targetName=n,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",R(this,ni,GA).bind(this),{signal:d(this,Ef).signal})}on(t,n){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=n}send(t,n,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:n},s)}sendWithPromise(t,n,s){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:n},s)}catch(u){o.reject(u)}return o.promise}sendWithStream(t,n,s,a){const o=this.streamId++,u=this.sourceName,h=this.targetName,p=this.comObj;return new ReadableStream({start:m=>{const v=Promise.withResolvers();return this.streamControllers[o]={controller:m,startCall:v,pullCall:null,cancelCall:null,isClosed:!1},p.postMessage({sourceName:u,targetName:h,action:t,streamId:o,data:n,desiredSize:m.desiredSize},a),v.promise},pull:m=>{const v=Promise.withResolvers();return this.streamControllers[o].pullCall=v,p.postMessage({sourceName:u,targetName:h,stream:pn.PULL,streamId:o,desiredSize:m.desiredSize}),v.promise},cancel:m=>{vn(m instanceof Error,"cancel must have a valid reason");const v=Promise.withResolvers();return this.streamControllers[o].cancelCall=v,this.streamControllers[o].isClosed=!0,p.postMessage({sourceName:u,targetName:h,stream:pn.CANCEL,streamId:o,reason:Xr(m)}),v.promise}},s)}destroy(){var t;(t=d(this,Ef))==null||t.abort(),E(this,Ef,null)}}Ef=new WeakMap,ni=new WeakSet,GA=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){R(this,ni,XA).call(this,t);return}if(t.callback){const s=t.callbackId,a=this.callbackCapabilities[s];if(!a)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===O0.DATA)a.resolve(t.data);else if(t.callback===O0.ERROR)a.reject(Xr(t.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[t.action];if(!n)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,a=t.sourceName,o=this.comObj;Promise.try(n,t.data).then(function(u){o.postMessage({sourceName:s,targetName:a,callback:O0.DATA,callbackId:t.callbackId,data:u})},function(u){o.postMessage({sourceName:s,targetName:a,callback:O0.ERROR,callbackId:t.callbackId,reason:Xr(u)})});return}if(t.streamId){R(this,ni,qA).call(this,t);return}n(t.data)},qA=function(t){const n=t.streamId,s=this.sourceName,a=t.sourceName,o=this.comObj,u=this,h=this.actionHandler[t.action],p={enqueue(m,v=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=v,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:a,stream:pn.ENQUEUE,streamId:n,chunk:m},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:a,stream:pn.CLOSE,streamId:n}),delete u.streamSinks[n])},error(m){vn(m instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:a,stream:pn.ERROR,streamId:n,reason:Xr(m)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};p.sinkCapability.resolve(),p.ready=p.sinkCapability.promise,this.streamSinks[n]=p,Promise.try(h,t.data,p).then(function(){o.postMessage({sourceName:s,targetName:a,stream:pn.START_COMPLETE,streamId:n,success:!0})},function(m){o.postMessage({sourceName:s,targetName:a,stream:pn.START_COMPLETE,streamId:n,reason:Xr(m)})})},XA=function(t){const n=t.streamId,s=this.sourceName,a=t.sourceName,o=this.comObj,u=this.streamControllers[n],h=this.streamSinks[n];switch(t.stream){case pn.START_COMPLETE:t.success?u.startCall.resolve():u.startCall.reject(Xr(t.reason));break;case pn.PULL_COMPLETE:t.success?u.pullCall.resolve():u.pullCall.reject(Xr(t.reason));break;case pn.PULL:if(!h){o.postMessage({sourceName:s,targetName:a,stream:pn.PULL_COMPLETE,streamId:n,success:!0});break}h.desiredSize<=0&&t.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=t.desiredSize,Promise.try(h.onPull||qx).then(function(){o.postMessage({sourceName:s,targetName:a,stream:pn.PULL_COMPLETE,streamId:n,success:!0})},function(m){o.postMessage({sourceName:s,targetName:a,stream:pn.PULL_COMPLETE,streamId:n,reason:Xr(m)})});break;case pn.ENQUEUE:if(vn(u,"enqueue should have stream controller"),u.isClosed)break;u.controller.enqueue(t.chunk);break;case pn.CLOSE:if(vn(u,"close should have stream controller"),u.isClosed)break;u.isClosed=!0,u.controller.close(),R(this,ni,K0).call(this,u,n);break;case pn.ERROR:vn(u,"error should have stream controller"),u.controller.error(Xr(t.reason)),R(this,ni,K0).call(this,u,n);break;case pn.CANCEL_COMPLETE:t.success?u.cancelCall.resolve():u.cancelCall.reject(Xr(t.reason)),R(this,ni,K0).call(this,u,n);break;case pn.CANCEL:if(!h)break;const p=Xr(t.reason);Promise.try(h.onCancel||qx,p).then(function(){o.postMessage({sourceName:s,targetName:a,stream:pn.CANCEL_COMPLETE,streamId:n,success:!0})},function(m){o.postMessage({sourceName:s,targetName:a,stream:pn.CANCEL_COMPLETE,streamId:n,reason:Xr(m)})}),h.sinkCapability.reject(p),h.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}},K0=async function(t,n){var s,a,o;await Promise.allSettled([(s=t.startCall)==null?void 0:s.promise,(a=t.pullCall)==null?void 0:a.promise,(o=t.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[n]};var wy;class YA{constructor({enableHWA:t=!1}){P(this,wy,!1);E(this,wy,t)}create(t,n){if(t<=0||n<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,n);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!d(this,wy)})}}reset(t,n,s){if(!t.canvas)throw new Error("Canvas is not specified");if(n<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=n,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,n){Rt("Abstract method `_createCanvas` called.")}}wy=new WeakMap;class $N extends YA{constructor({ownerDocument:t=globalThis.document,enableHWA:n=!1}){super({enableHWA:n}),this._document=t}_createCanvas(t,n){const s=this._document.createElement("canvas");return s.width=t,s.height=n,s}}class KA{constructor({baseUrl:t=null,isCompressed:n=!0}){this.baseUrl=t,this.isCompressed=n}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(n).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})}async _fetch(t){Rt("Abstract method `_fetch` called.")}}class Xx extends KA{async _fetch(t){const n=await _0(t,this.isCompressed?"arraybuffer":"text");return n instanceof ArrayBuffer?new Uint8Array(n):b0(n)}}class QA{addFilter(t){return"none"}addHCMFilter(t,n){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,n,s,a,o){return"none"}destroy(t=!1){}}var Uh,xf,Ko,Qo,br,Hh,Vh,ye,yr,kv,Xd,Q0,Yd,JA,oS,Kd,Av,Cv,lS,Tv;class zN extends QA{constructor({docId:n,ownerDocument:s=globalThis.document}){super();P(this,ye);P(this,Uh);P(this,xf);P(this,Ko);P(this,Qo);P(this,br);P(this,Hh);P(this,Vh,0);E(this,Qo,n),E(this,br,s)}addFilter(n){if(!n)return"none";let s=d(this,ye,yr).get(n);if(s)return s;const[a,o,u]=R(this,ye,Q0).call(this,n),h=n.length===1?a:`${a}${o}${u}`;if(s=d(this,ye,yr).get(h),s)return d(this,ye,yr).set(n,s),s;const p=`g_${d(this,Qo)}_transfer_map_${Fr(this,Vh)._++}`,m=R(this,ye,Yd).call(this,p);d(this,ye,yr).set(n,m),d(this,ye,yr).set(h,m);const v=R(this,ye,Kd).call(this,p);return R(this,ye,Cv).call(this,a,o,u,v),m}addHCMFilter(n,s){var k;const a=`${n}-${s}`,o="base";let u=d(this,ye,kv).get(o);if((u==null?void 0:u.key)===a||(u?((k=u.filter)==null||k.remove(),u.key=a,u.url="none",u.filter=null):(u={key:a,url:"none",filter:null},d(this,ye,kv).set(o,u)),!n||!s))return u.url;const h=R(this,ye,Tv).call(this,n);n=Te.makeHexColor(...h);const p=R(this,ye,Tv).call(this,s);if(s=Te.makeHexColor(...p),d(this,ye,Xd).style.color="",n==="#000000"&&s==="#ffffff"||n===s)return u.url;const m=new Array(256);for(let x=0;x<=255;x++){const C=x/255;m[x]=C<=.03928?C/12.92:((C+.055)/1.055)**2.4}const v=m.join(","),y=`g_${d(this,Qo)}_hcm_filter`,b=u.filter=R(this,ye,Kd).call(this,y);R(this,ye,Cv).call(this,v,v,v,b),R(this,ye,oS).call(this,b);const _=(x,C)=>{const N=h[x]/255,F=p[x]/255,D=new Array(C+1);for(let j=0;j<=C;j++)D[j]=N+j/C*(F-N);return D.join(",")};return R(this,ye,Cv).call(this,_(0,5),_(1,5),_(2,5),b),u.url=R(this,ye,Yd).call(this,y),u.url}addAlphaFilter(n){let s=d(this,ye,yr).get(n);if(s)return s;const[a]=R(this,ye,Q0).call(this,[n]),o=`alpha_${a}`;if(s=d(this,ye,yr).get(o),s)return d(this,ye,yr).set(n,s),s;const u=`g_${d(this,Qo)}_alpha_map_${Fr(this,Vh)._++}`,h=R(this,ye,Yd).call(this,u);d(this,ye,yr).set(n,h),d(this,ye,yr).set(o,h);const p=R(this,ye,Kd).call(this,u);return R(this,ye,lS).call(this,a,p),h}addLuminosityFilter(n){let s=d(this,ye,yr).get(n||"luminosity");if(s)return s;let a,o;if(n?([a]=R(this,ye,Q0).call(this,[n]),o=`luminosity_${a}`):o="luminosity",s=d(this,ye,yr).get(o),s)return d(this,ye,yr).set(n,s),s;const u=`g_${d(this,Qo)}_luminosity_map_${Fr(this,Vh)._++}`,h=R(this,ye,Yd).call(this,u);d(this,ye,yr).set(n,h),d(this,ye,yr).set(o,h);const p=R(this,ye,Kd).call(this,u);return R(this,ye,JA).call(this,p),n&&R(this,ye,lS).call(this,a,p),h}addHighlightHCMFilter(n,s,a,o,u){var F;const h=`${s}-${a}-${o}-${u}`;let p=d(this,ye,kv).get(n);if((p==null?void 0:p.key)===h||(p?((F=p.filter)==null||F.remove(),p.key=h,p.url="none",p.filter=null):(p={key:h,url:"none",filter:null},d(this,ye,kv).set(n,p)),!s||!a))return p.url;const[m,v]=[s,a].map(R(this,ye,Tv).bind(this));let y=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),b=Math.round(.2126*v[0]+.7152*v[1]+.0722*v[2]),[_,k]=[o,u].map(R(this,ye,Tv).bind(this));b<y&&([y,b,_,k]=[b,y,k,_]),d(this,ye,Xd).style.color="";const x=(D,j,z)=>{const V=new Array(256),G=(b-y)/z,ee=D/255,oe=(j-D)/(255*z);let de=0;for(let ce=0;ce<=z;ce++){const Ne=Math.round(y+ce*G),Ae=ee+ce*oe;for(let Pe=de;Pe<=Ne;Pe++)V[Pe]=Ae;de=Ne+1}for(let ce=de;ce<256;ce++)V[ce]=V[de-1];return V.join(",")},C=`g_${d(this,Qo)}_hcm_${n}_filter`,N=p.filter=R(this,ye,Kd).call(this,C);return R(this,ye,oS).call(this,N),R(this,ye,Cv).call(this,x(_[0],k[0],5),x(_[1],k[1],5),x(_[2],k[2],5),N),p.url=R(this,ye,Yd).call(this,C),p.url}destroy(n=!1){var s,a,o,u;n&&((s=d(this,Hh))!=null&&s.size)||((a=d(this,Ko))==null||a.parentNode.parentNode.remove(),E(this,Ko,null),(o=d(this,xf))==null||o.clear(),E(this,xf,null),(u=d(this,Hh))==null||u.clear(),E(this,Hh,null),E(this,Vh,0))}}Uh=new WeakMap,xf=new WeakMap,Ko=new WeakMap,Qo=new WeakMap,br=new WeakMap,Hh=new WeakMap,Vh=new WeakMap,ye=new WeakSet,yr=function(){return d(this,xf)||E(this,xf,new Map)},kv=function(){return d(this,Hh)||E(this,Hh,new Map)},Xd=function(){if(!d(this,Ko)){const n=d(this,br).createElement("div"),{style:s}=n;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const a=d(this,br).createElementNS(Do,"svg");a.setAttribute("width",0),a.setAttribute("height",0),E(this,Ko,d(this,br).createElementNS(Do,"defs")),n.append(a),a.append(d(this,Ko)),d(this,br).body.append(n)}return d(this,Ko)},Q0=function(n){if(n.length===1){const m=n[0],v=new Array(256);for(let b=0;b<256;b++)v[b]=m[b]/255;const y=v.join(",");return[y,y,y]}const[s,a,o]=n,u=new Array(256),h=new Array(256),p=new Array(256);for(let m=0;m<256;m++)u[m]=s[m]/255,h[m]=a[m]/255,p[m]=o[m]/255;return[u.join(","),h.join(","),p.join(",")]},Yd=function(n){if(d(this,Uh)===void 0){E(this,Uh,"");const s=d(this,br).URL;s!==d(this,br).baseURI&&(rb(s)?Ve('#createUrl: ignore "data:"-URL for performance reasons.'):E(this,Uh,s.split("#",1)[0]))}return`url(${d(this,Uh)}#${n})`},JA=function(n){const s=d(this,br).createElementNS(Do,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),n.append(s)},oS=function(n){const s=d(this,br).createElementNS(Do,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),n.append(s)},Kd=function(n){const s=d(this,br).createElementNS(Do,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",n),d(this,ye,Xd).append(s),s},Av=function(n,s,a){const o=d(this,br).createElementNS(Do,s);o.setAttribute("type","discrete"),o.setAttribute("tableValues",a),n.append(o)},Cv=function(n,s,a,o){const u=d(this,br).createElementNS(Do,"feComponentTransfer");o.append(u),R(this,ye,Av).call(this,u,"feFuncR",n),R(this,ye,Av).call(this,u,"feFuncG",s),R(this,ye,Av).call(this,u,"feFuncB",a)},lS=function(n,s){const a=d(this,br).createElementNS(Do,"feComponentTransfer");s.append(a),R(this,ye,Av).call(this,a,"feFuncA",n)},Tv=function(n){return d(this,ye,Xd).style.color=n,_E(getComputedStyle(d(this,ye,Xd)).getPropertyValue("color"))};class ZA{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${t}`;return this._fetch(n).catch(s=>{throw new Error(`Unable to load font data at: ${n}`)})}async _fetch(t){Rt("Abstract method `_fetch` called.")}}class Yx extends ZA{async _fetch(t){const n=await _0(t,"arraybuffer");return new Uint8Array(n)}}class eC{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const n=`${this.baseUrl}${t}`;return this._fetch(n).catch(s=>{throw new Error(`Unable to load wasm data at: ${n}`)})}async _fetch(t){Rt("Abstract method `_fetch` called.")}}class Kx extends eC{async _fetch(t){const n=await _0(t,"arraybuffer");return new Uint8Array(n)}}dr&&Ve("Please use the `legacy` build in Node.js environments.");async function xE(c){const n=await process.getBuiltinModule("fs").promises.readFile(c);return new Uint8Array(n)}class BN extends QA{}class UN extends YA{_createCanvas(t,n){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,n)}}class HN extends KA{async _fetch(t){return xE(t)}}class VN extends ZA{async _fetch(t){return xE(t)}}class WN extends eC{async _fetch(t){return xE(t)}}const fr={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function uS(c,t){if(!t)return;const n=t[2]-t[0],s=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],n,s),c.clip(a)}class kE{isModifyingCurrentTransform(){return!1}getPattern(){Rt("Abstract method `getPattern` called.")}}class GN extends kE{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let n;this._type==="axial"?n=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(n=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)n.addColorStop(s[0],s[1]);return n}getPattern(t,n,s,a){let o;if(a===fr.STROKE||a===fr.FILL){const u=n.current.getClippedPathBoundingBox(a,qt(t))||[0,0,0,0],h=Math.ceil(u[2]-u[0])||1,p=Math.ceil(u[3]-u[1])||1,m=n.cachedCanvases.getCanvas("pattern",h,p),v=m.context;v.clearRect(0,0,v.canvas.width,v.canvas.height),v.beginPath(),v.rect(0,0,v.canvas.width,v.canvas.height),v.translate(-u[0],-u[1]),s=Te.transform(s,[1,0,0,1,u[0],u[1]]),v.transform(...n.baseTransform),this.matrix&&v.transform(...this.matrix),uS(v,this._bbox),v.fillStyle=this._createGradient(v),v.fill(),o=t.createPattern(m.canvas,"no-repeat");const y=new DOMMatrix(s);o.setTransform(y)}else uS(t,this._bbox),o=this._createGradient(t);return o}}function _1(c,t,n,s,a,o,u,h){const p=t.coords,m=t.colors,v=c.data,y=c.width*4;let b;p[n+1]>p[s+1]&&(b=n,n=s,s=b,b=o,o=u,u=b),p[s+1]>p[a+1]&&(b=s,s=a,a=b,b=u,u=h,h=b),p[n+1]>p[s+1]&&(b=n,n=s,s=b,b=o,o=u,u=b);const _=(p[n]+t.offsetX)*t.scaleX,k=(p[n+1]+t.offsetY)*t.scaleY,x=(p[s]+t.offsetX)*t.scaleX,C=(p[s+1]+t.offsetY)*t.scaleY,N=(p[a]+t.offsetX)*t.scaleX,F=(p[a+1]+t.offsetY)*t.scaleY;if(k>=F)return;const D=m[o],j=m[o+1],z=m[o+2],V=m[u],G=m[u+1],ee=m[u+2],oe=m[h],de=m[h+1],ce=m[h+2],Ne=Math.round(k),Ae=Math.round(F);let Pe,Ze,le,ae,q,te,X,L;for(let $=Ne;$<=Ae;$++){if($<C){const ge=$<k?0:(k-$)/(k-C);Pe=_-(_-x)*ge,Ze=D-(D-V)*ge,le=j-(j-G)*ge,ae=z-(z-ee)*ge}else{let ge;$>F?ge=1:C===F?ge=0:ge=(C-$)/(C-F),Pe=x-(x-N)*ge,Ze=V-(V-oe)*ge,le=G-(G-de)*ge,ae=ee-(ee-ce)*ge}let ie;$<k?ie=0:$>F?ie=1:ie=(k-$)/(k-F),q=_-(_-N)*ie,te=D-(D-oe)*ie,X=j-(j-de)*ie,L=z-(z-ce)*ie;const he=Math.round(Math.min(Pe,q)),ve=Math.round(Math.max(Pe,q));let pe=y*$+he*4;for(let ge=he;ge<=ve;ge++)ie=(Pe-ge)/(Pe-q),ie<0?ie=0:ie>1&&(ie=1),v[pe++]=Ze-(Ze-te)*ie|0,v[pe++]=le-(le-X)*ie|0,v[pe++]=ae-(ae-L)*ie|0,v[pe++]=255}}function qN(c,t,n){const s=t.coords,a=t.colors;let o,u;switch(t.type){case"lattice":const h=t.verticesPerRow,p=Math.floor(s.length/h)-1,m=h-1;for(o=0;o<p;o++){let v=o*h;for(let y=0;y<m;y++,v++)_1(c,n,s[v],s[v+1],s[v+h],a[v],a[v+1],a[v+h]),_1(c,n,s[v+h+1],s[v+1],s[v+h],a[v+h+1],a[v+1],a[v+h])}break;case"triangles":for(o=0,u=s.length;o<u;o+=3)_1(c,n,s[o],s[o+1],s[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class XN extends kE{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,n,s){const h=Math.floor(this._bounds[0]),p=Math.floor(this._bounds[1]),m=Math.ceil(this._bounds[2])-h,v=Math.ceil(this._bounds[3])-p,y=Math.min(Math.ceil(Math.abs(m*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(v*t[1]*1.1)),3e3),_=m/y,k=v/b,x={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-p,scaleX:1/_,scaleY:1/k},C=y+2*2,N=b+2*2,F=s.getCanvas("mesh",C,N),D=F.context,j=D.createImageData(y,b);if(n){const V=j.data;for(let G=0,ee=V.length;G<ee;G+=4)V[G]=n[0],V[G+1]=n[1],V[G+2]=n[2],V[G+3]=255}for(const V of this._figures)qN(j,V,x);return D.putImageData(j,2,2),{canvas:F.canvas,offsetX:h-2*_,offsetY:p-2*k,scaleX:_,scaleY:k}}isModifyingCurrentTransform(){return!0}getPattern(t,n,s,a){uS(t,this._bbox);let o;if(a===fr.SHADING)o=Te.singularValueDecompose2dScale(qt(t));else if(o=Te.singularValueDecompose2dScale(n.baseTransform),this.matrix){const h=Te.singularValueDecompose2dScale(this.matrix);o=[o[0]*h[0],o[1]*h[1]]}const u=this._createMeshCanvas(o,a===fr.SHADING?null:this._background,n.cachedCanvases);return a!==fr.SHADING&&(t.setTransform(...n.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(u.offsetX,u.offsetY),t.scale(u.scaleX,u.scaleY),t.createPattern(u.canvas,"no-repeat")}}class YN extends kE{getPattern(){return"hotpink"}}function KN(c){switch(c[0]){case"RadialAxial":return new GN(c);case"Mesh":return new XN(c);case"Dummy":return new YN}throw new Error(`Unknown IR type: ${c[0]}`)}const Qx={COLORED:1,UNCOLORED:2},Fw=class Fw{constructor(t,n,s,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=a}createPatternCanvas(t){const{bbox:n,operatorList:s,paintType:a,tilingType:o,color:u,canvasGraphicsFactory:h}=this;let{xstep:p,ystep:m}=this;p=Math.abs(p),m=Math.abs(m),nb("TilingType: "+o);const v=n[0],y=n[1],b=n[2],_=n[3],k=b-v,x=_-y,C=Te.singularValueDecompose2dScale(this.matrix),N=Te.singularValueDecompose2dScale(this.baseTransform),F=C[0]*N[0],D=C[1]*N[1];let j=k,z=x,V=!1,G=!1;const ee=Math.ceil(p*F),oe=Math.ceil(m*D),de=Math.ceil(k*F),ce=Math.ceil(x*D);ee>=de?j=p:V=!0,oe>=ce?z=m:G=!0;const Ne=this.getSizeAndScale(j,this.ctx.canvas.width,F),Ae=this.getSizeAndScale(z,this.ctx.canvas.height,D),Pe=t.cachedCanvases.getCanvas("pattern",Ne.size,Ae.size),Ze=Pe.context,le=h.createCanvasGraphics(Ze);if(le.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(le,a,u),Ze.translate(-Ne.scale*v,-Ae.scale*y),le.transform(Ne.scale,0,0,Ae.scale,0,0),Ze.save(),this.clipBbox(le,v,y,b,_),le.baseTransform=qt(le.ctx),le.executeOperatorList(s),le.endDrawing(),Ze.restore(),V||G){const ae=Pe.canvas;V&&(j=p),G&&(z=m);const q=this.getSizeAndScale(j,this.ctx.canvas.width,F),te=this.getSizeAndScale(z,this.ctx.canvas.height,D),X=q.size,L=te.size,$=t.cachedCanvases.getCanvas("pattern-workaround",X,L),ie=$.context,he=V?Math.floor(k/p):0,ve=G?Math.floor(x/m):0;for(let pe=0;pe<=he;pe++)for(let ge=0;ge<=ve;ge++)ie.drawImage(ae,X*pe,L*ge,X,L,0,0,X,L);return{canvas:$.canvas,scaleX:q.scale,scaleY:te.scale,offsetX:v,offsetY:y}}return{canvas:Pe.canvas,scaleX:Ne.scale,scaleY:Ae.scale,offsetX:v,offsetY:y}}getSizeAndScale(t,n,s){const a=Math.max(Fw.MAX_PATTERN_SIZE,n);let o=Math.ceil(t*s);return o>=a?o=a:s=o/t,{scale:s,size:o}}clipBbox(t,n,s,a,o){const u=a-n,h=o-s;t.ctx.rect(n,s,u,h),t.current.updateRectMinMax(qt(t.ctx),[n,s,a,o]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,n,s){const a=t.ctx,o=t.current;switch(n){case Qx.COLORED:const u=this.ctx;a.fillStyle=u.fillStyle,a.strokeStyle=u.strokeStyle,o.fillColor=u.fillStyle,o.strokeColor=u.strokeStyle;break;case Qx.UNCOLORED:const h=Te.makeHexColor(s[0],s[1],s[2]);a.fillStyle=h,a.strokeStyle=h,o.fillColor=h,o.strokeColor=h;break;default:throw new _N(`Unsupported paint type: ${n}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,n,s,a){let o=s;a!==fr.SHADING&&(o=Te.transform(o,n.baseTransform),this.matrix&&(o=Te.transform(o,this.matrix)));const u=this.createPatternCanvas(n);let h=new DOMMatrix(o);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const p=t.createPattern(u.canvas,"repeat");return p.setTransform(h),p}};Ee(Fw,"MAX_PATTERN_SIZE",3e3);let cS=Fw;function QN({src:c,srcPos:t=0,dest:n,width:s,height:a,nonBlackColor:o=4294967295,inverseDecode:u=!1}){const h=mr.isLittleEndian?4278190080:255,[p,m]=u?[o,h]:[h,o],v=s>>3,y=s&7,b=c.length;n=new Uint32Array(n.buffer);let _=0;for(let k=0;k<a;k++){for(const C=t+v;t<C;t++){const N=t<b?c[t]:255;n[_++]=N&128?m:p,n[_++]=N&64?m:p,n[_++]=N&32?m:p,n[_++]=N&16?m:p,n[_++]=N&8?m:p,n[_++]=N&4?m:p,n[_++]=N&2?m:p,n[_++]=N&1?m:p}if(y===0)continue;const x=t<b?c[t++]:255;for(let C=0;C<y;C++)n[_++]=x&1<<7-C?m:p}return{srcPos:t,destPos:_}}const Jx=16,Zx=100,JN=15,ek=10,tk=1e3,Zr=16,S1=new DOMMatrix;function ZN(c,t){if(c._removeMirroring)throw new Error("Context is already forwarding operations.");c.__originalSave=c.save,c.__originalRestore=c.restore,c.__originalRotate=c.rotate,c.__originalScale=c.scale,c.__originalTranslate=c.translate,c.__originalTransform=c.transform,c.__originalSetTransform=c.setTransform,c.__originalResetTransform=c.resetTransform,c.__originalClip=c.clip,c.__originalMoveTo=c.moveTo,c.__originalLineTo=c.lineTo,c.__originalBezierCurveTo=c.bezierCurveTo,c.__originalRect=c.rect,c.__originalClosePath=c.closePath,c.__originalBeginPath=c.beginPath,c._removeMirroring=()=>{c.save=c.__originalSave,c.restore=c.__originalRestore,c.rotate=c.__originalRotate,c.scale=c.__originalScale,c.translate=c.__originalTranslate,c.transform=c.__originalTransform,c.setTransform=c.__originalSetTransform,c.resetTransform=c.__originalResetTransform,c.clip=c.__originalClip,c.moveTo=c.__originalMoveTo,c.lineTo=c.__originalLineTo,c.bezierCurveTo=c.__originalBezierCurveTo,c.rect=c.__originalRect,c.closePath=c.__originalClosePath,c.beginPath=c.__originalBeginPath,delete c._removeMirroring},c.save=function(){t.save(),this.__originalSave()},c.restore=function(){t.restore(),this.__originalRestore()},c.translate=function(s,a){t.translate(s,a),this.__originalTranslate(s,a)},c.scale=function(s,a){t.scale(s,a),this.__originalScale(s,a)},c.transform=function(s,a,o,u,h,p){t.transform(s,a,o,u,h,p),this.__originalTransform(s,a,o,u,h,p)},c.setTransform=function(s,a,o,u,h,p){t.setTransform(s,a,o,u,h,p),this.__originalSetTransform(s,a,o,u,h,p)},c.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},c.rotate=function(s){t.rotate(s),this.__originalRotate(s)},c.clip=function(s){t.clip(s),this.__originalClip(s)},c.moveTo=function(n,s){t.moveTo(n,s),this.__originalMoveTo(n,s)},c.lineTo=function(n,s){t.lineTo(n,s),this.__originalLineTo(n,s)},c.bezierCurveTo=function(n,s,a,o,u,h){t.bezierCurveTo(n,s,a,o,u,h),this.__originalBezierCurveTo(n,s,a,o,u,h)},c.rect=function(n,s,a,o){t.rect(n,s,a,o),this.__originalRect(n,s,a,o)},c.closePath=function(){t.closePath(),this.__originalClosePath()},c.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class eI{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,n,s){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,n,s)):(a=this.canvasFactory.create(n,s),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const n=this.cache[t];this.canvasFactory.destroy(n),delete this.cache[t]}}}function D0(c,t,n,s,a,o,u,h,p,m){const[v,y,b,_,k,x]=qt(c);if(y===0&&b===0){const F=u*v+k,D=Math.round(F),j=h*_+x,z=Math.round(j),V=(u+p)*v+k,G=Math.abs(Math.round(V)-D)||1,ee=(h+m)*_+x,oe=Math.abs(Math.round(ee)-z)||1;return c.setTransform(Math.sign(v),0,0,Math.sign(_),D,z),c.drawImage(t,n,s,a,o,0,0,G,oe),c.setTransform(v,y,b,_,k,x),[G,oe]}if(v===0&&_===0){const F=h*b+k,D=Math.round(F),j=u*y+x,z=Math.round(j),V=(h+m)*b+k,G=Math.abs(Math.round(V)-D)||1,ee=(u+p)*y+x,oe=Math.abs(Math.round(ee)-z)||1;return c.setTransform(0,Math.sign(y),Math.sign(b),0,D,z),c.drawImage(t,n,s,a,o,0,0,oe,G),c.setTransform(v,y,b,_,k,x),[oe,G]}c.drawImage(t,n,s,a,o,u,h,p,m);const C=Math.hypot(v,y),N=Math.hypot(b,_);return[C*p,N*m]}function tI(c){const{width:t,height:n}=c;if(t>tk||n>tk)return null;const s=1e3,a=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=t+1,u=new Uint8Array(o*(n+1));let h,p,m;const v=t+7&-8,y=new Uint8Array(v*n);let b=0;for(const V of c.data){let G=128;for(;G>0;)y[b++]=V&G?0:255,G>>=1}let _=0;for(b=0,y[b]!==0&&(u[0]=1,++_),p=1;p<t;p++)y[b]!==y[b+1]&&(u[p]=y[b]?2:1,++_),b++;for(y[b]!==0&&(u[p]=2,++_),h=1;h<n;h++){b=h*v,m=h*o,y[b-v]!==y[b]&&(u[m]=y[b]?1:8,++_);let V=(y[b]?4:0)+(y[b-v]?8:0);for(p=1;p<t;p++)V=(V>>2)+(y[b+1]?4:0)+(y[b-v+1]?8:0),a[V]&&(u[m+p]=a[V],++_),b++;if(y[b-v]!==y[b]&&(u[m+p]=y[b]?2:4,++_),_>s)return null}for(b=v*(n-1),m=h*o,y[b]!==0&&(u[m]=8,++_),p=1;p<t;p++)y[b]!==y[b+1]&&(u[m+p]=y[b]?4:8,++_),b++;if(y[b]!==0&&(u[m+p]=4,++_),_>s)return null;const k=new Int32Array([0,o,-1,0,-o,0,0,0,1]),x=new Path2D,{a:C,b:N,c:F,d:D,e:j,f:z}=new DOMMatrix().scaleSelf(1/t,-1/n).translateSelf(0,-n);for(h=0;_&&h<=n;h++){let V=h*o;const G=V+t;for(;V<G&&!u[V];)V++;if(V===G)continue;let ee=V%o,oe=h;x.moveTo(C*ee+F*oe+j,N*ee+D*oe+z);const de=V;let ce=u[V];do{const Ne=k[ce];do V+=Ne;while(!u[V]);const Ae=u[V];Ae!==5&&Ae!==10?(ce=Ae,u[V]=0):(ce=Ae&51*ce>>4,u[V]&=ce>>2|ce<<2),ee=V%o,oe=V/o|0,x.lineTo(C*ee+F*oe+j,N*ee+D*oe+z),u[V]||--_}while(de!==V);--h}return x}class nk{constructor(t,n){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=uA,this.textMatrixScale=1,this.fontMatrix=z1,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=vr.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,n])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}updateRectMinMax(t,n){const s=Te.applyTransform(n,t),a=Te.applyTransform(n.slice(2),t),o=Te.applyTransform([n[0],n[3]],t),u=Te.applyTransform([n[2],n[1]],t);this.minX=Math.min(this.minX,s[0],a[0],o[0],u[0]),this.minY=Math.min(this.minY,s[1],a[1],o[1],u[1]),this.maxX=Math.max(this.maxX,s[0],a[0],o[0],u[0]),this.maxY=Math.max(this.maxY,s[1],a[1],o[1],u[1])}getPathBoundingBox(t=fr.FILL,n=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(t===fr.STROKE){n||Rt("Stroke bounding box must include transform.");const a=Te.singularValueDecompose2dScale(n),o=a[0]*this.lineWidth/2,u=a[1]*this.lineWidth/2;s[0]-=o,s[1]-=u,s[2]+=o,s[3]+=u}return s}updateClipFromPath(){const t=Te.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=fr.FILL,n=null){return Te.intersect(this.clipBox,this.getPathBoundingBox(t,n))}}function rk(c,t){if(t instanceof ImageData){c.putImageData(t,0,0);return}const n=t.height,s=t.width,a=n%Zr,o=(n-a)/Zr,u=a===0?o:o+1,h=c.createImageData(s,Zr);let p=0,m;const v=t.data,y=h.data;let b,_,k,x;if(t.kind===B0.GRAYSCALE_1BPP){const C=v.byteLength,N=new Uint32Array(y.buffer,0,y.byteLength>>2),F=N.length,D=s+7>>3,j=4294967295,z=mr.isLittleEndian?4278190080:255;for(b=0;b<u;b++){for(k=b<o?Zr:a,m=0,_=0;_<k;_++){const V=C-p;let G=0;const ee=V>D?s:V*8-7,oe=ee&-8;let de=0,ce=0;for(;G<oe;G+=8)ce=v[p++],N[m++]=ce&128?j:z,N[m++]=ce&64?j:z,N[m++]=ce&32?j:z,N[m++]=ce&16?j:z,N[m++]=ce&8?j:z,N[m++]=ce&4?j:z,N[m++]=ce&2?j:z,N[m++]=ce&1?j:z;for(;G<ee;G++)de===0&&(ce=v[p++],de=128),N[m++]=ce&de?j:z,de>>=1}for(;m<F;)N[m++]=0;c.putImageData(h,0,b*Zr)}}else if(t.kind===B0.RGBA_32BPP){for(_=0,x=s*Zr*4,b=0;b<o;b++)y.set(v.subarray(p,p+x)),p+=x,c.putImageData(h,0,_),_+=Zr;b<u&&(x=s*a*4,y.set(v.subarray(p,p+x)),c.putImageData(h,0,_))}else if(t.kind===B0.RGB_24BPP)for(k=Zr,x=s*k,b=0;b<u;b++){for(b>=o&&(k=a,x=s*k),m=0,_=x;_--;)y[m++]=v[p++],y[m++]=v[p++],y[m++]=v[p++],y[m++]=255;c.putImageData(h,0,b*Zr)}else throw new Error(`bad image kind: ${t.kind}`)}function sk(c,t){if(t.bitmap){c.drawImage(t.bitmap,0,0);return}const n=t.height,s=t.width,a=n%Zr,o=(n-a)/Zr,u=a===0?o:o+1,h=c.createImageData(s,Zr);let p=0;const m=t.data,v=h.data;for(let y=0;y<u;y++){const b=y<o?Zr:a;({srcPos:p}=QN({src:m,srcPos:p,dest:v,width:s,height:b,nonBlackColor:0})),c.putImageData(h,0,y*Zr)}}function gv(c,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of n)c[s]!==void 0&&(t[s]=c[s]);c.setLineDash!==void 0&&(t.setLineDash(c.getLineDash()),t.lineDashOffset=c.lineDashOffset)}function F0(c){if(c.strokeStyle=c.fillStyle="#000000",c.fillRule="nonzero",c.globalAlpha=1,c.lineWidth=1,c.lineCap="butt",c.lineJoin="miter",c.miterLimit=10,c.globalCompositeOperation="source-over",c.font="10px sans-serif",c.setLineDash!==void 0&&(c.setLineDash([]),c.lineDashOffset=0),!dr){const{filter:t}=c;t!=="none"&&t!==""&&(c.filter="none")}}function ik(c,t){if(t)return!0;const n=Te.singularValueDecompose2dScale(c);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const s=Math.fround(wl.pixelRatio*gu.PDF_TO_CSS_UNITS);return n[0]<=s&&n[1]<=s}const nI=["butt","round","square"],rI=["miter","round","bevel"],sI={},ak={};var sa,hS,dS,fS;const LE=class LE{constructor(t,n,s,a,o,{optionalContentConfig:u,markedContentStack:h=null},p,m){P(this,sa);this.ctx=t,this.current=new nk(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=s,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=u,this.cachedCanvases=new eI(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=p,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=m,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,n=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):n}beginDrawing({transform:t,viewport:n,transparency:s=!1,background:a=null}){const o=this.ctx.canvas.width,u=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,u),this.ctx.fillStyle=h,s){const p=this.cachedCanvases.getCanvas("transparent",o,u);this.compositeCtx=this.ctx,this.transparentCanvas=p.canvas,this.ctx=p.context,this.ctx.save(),this.ctx.transform(...qt(this.compositeCtx))}this.ctx.save(),F0(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=qt(this.ctx)}executeOperatorList(t,n,s,a){const o=t.argsArray,u=t.fnArray;let h=n||0;const p=o.length;if(p===h)return h;const m=p-h>ek&&typeof s=="function",v=m?Date.now()+JN:0;let y=0;const b=this.commonObjs,_=this.objs;let k;for(;;){if(a!==void 0&&h===a.nextBreakPoint)return a.breakIt(h,s),h;if(k=u[h],k!==_w.dependency)this[k].apply(this,o[h]);else for(const x of o[h]){const C=x.startsWith("g_")?b:_;if(!C.has(x))return C.get(x,s),h}if(h++,h===p)return h;if(m&&++y>ek){if(Date.now()>v)return s(),h;y=0}}}endDrawing(){R(this,sa,hS).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const n of t.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);t.clear()}this._cachedBitmapsMap.clear(),R(this,sa,dS).call(this)}_scaleImage(t,n){const s=t.width??t.displayWidth,a=t.height??t.displayHeight;let o=Math.max(Math.hypot(n[0],n[1]),1),u=Math.max(Math.hypot(n[2],n[3]),1),h=s,p=a,m="prescale1",v,y;for(;o>2&&h>1||u>2&&p>1;){let b=h,_=p;o>2&&h>1&&(b=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),o/=h/b),u>2&&p>1&&(_=p>=16384?Math.floor(p/2)-1||1:Math.ceil(p)/2,u/=p/_),v=this.cachedCanvases.getCanvas(m,b,_),y=v.context,y.clearRect(0,0,b,_),y.drawImage(t,0,0,h,p,0,0,b,_),t=v.canvas,h=b,p=_,m=m==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:h,paintHeight:p}}_createMaskCanvas(t){const n=this.ctx,{width:s,height:a}=t,o=this.current.fillColor,u=this.current.patternFill,h=qt(n);let p,m,v,y;if((t.bitmap||t.data)&&t.count>1){const ee=t.bitmap||t.data.buffer;m=JSON.stringify(u?h:[h.slice(0,4),o]),p=this._cachedBitmapsMap.get(ee),p||(p=new Map,this._cachedBitmapsMap.set(ee,p));const oe=p.get(m);if(oe&&!u){const de=Math.round(Math.min(h[0],h[2])+h[4]),ce=Math.round(Math.min(h[1],h[3])+h[5]);return{canvas:oe,offsetX:de,offsetY:ce}}v=oe}v||(y=this.cachedCanvases.getCanvas("maskCanvas",s,a),sk(y.context,t));let b=Te.transform(h,[1/s,0,0,-1/a,0,0]);b=Te.transform(b,[1,0,0,1,0,-a]);const[_,k,x,C]=Te.getAxialAlignedBoundingBox([0,0,s,a],b),N=Math.round(x-_)||1,F=Math.round(C-k)||1,D=this.cachedCanvases.getCanvas("fillCanvas",N,F),j=D.context,z=_,V=k;j.translate(-z,-V),j.transform(...b),v||(v=this._scaleImage(y.canvas,ia(j)),v=v.img,p&&u&&p.set(m,v)),j.imageSmoothingEnabled=ik(qt(j),t.interpolate),D0(j,v,0,0,v.width,v.height,0,0,s,a),j.globalCompositeOperation="source-in";const G=Te.transform(ia(j),[1,0,0,1,-z,-V]);return j.fillStyle=u?o.getPattern(n,this,G,fr.FILL):o,j.fillRect(0,0,s,a),p&&!u&&(this.cachedCanvases.delete("fillCanvas"),p.set(m,D.canvas)),{canvas:D.canvas,offsetX:Math.round(z),offsetY:Math.round(V)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=nI[t]}setLineJoin(t){this.ctx.lineJoin=rI[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,n){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=n)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[n,s]of t)switch(n){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(s,t,n);this.suspendedCtx=this.ctx;const o=this.ctx=a.context;o.setTransform(this.suspendedCtx.getTransform()),gv(this.suspendedCtx,o),ZN(o,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),gv(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,n,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,n,s,a){const o=a[0],u=a[1],h=a[2]-o,p=a[3]-u;h===0||p===0||(this.genericComposeSMask(n.context,s,h,p,n.subtype,n.backdrop,n.transferMap,o,u,n.offsetX,n.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,n,s,a,o,u,h,p,m,v,y){let b=t.canvas,_=p-v,k=m-y;if(u){const C=Te.makeHexColor(...u);if(_<0||k<0||_+s>b.width||k+a>b.height){const N=this.cachedCanvases.getCanvas("maskExtension",s,a),F=N.context;F.drawImage(b,-_,-k),F.globalCompositeOperation="destination-atop",F.fillStyle=C,F.fillRect(0,0,s,a),F.globalCompositeOperation="source-over",b=N.canvas,_=k=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const N=new Path2D;N.rect(_,k,s,a),t.clip(N),t.globalCompositeOperation="destination-atop",t.fillStyle=C,t.fillRect(_,k,s,a),t.restore()}}n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),o==="Alpha"&&h?n.filter=this.filterFactory.addAlphaFilter(h):o==="Luminosity"&&(n.filter=this.filterFactory.addLuminosityFilter(h));const x=new Path2D;x.rect(p,m,s,a),n.clip(x),n.globalCompositeOperation="destination-in",n.drawImage(b,_,k,s,a,p,m,s,a),n.restore()}save(){this.inSMaskMode&&gv(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&gv(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,n,s,a,o,u){this.ctx.transform(t,n,s,a,o,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,n,s){let[a]=n;if(!s){a||(a=n[0]=new Path2D),this[t](a);return}if(!(a instanceof Path2D)){const o=n[0]=new Path2D;for(let u=0,h=a.length;u<h;)switch(a[u++]){case M0.moveTo:o.moveTo(a[u++],a[u++]);break;case M0.lineTo:o.lineTo(a[u++],a[u++]);break;case M0.curveTo:o.bezierCurveTo(a[u++],a[u++],a[u++],a[u++],a[u++],a[u++]);break;case M0.closePath:o.closePath();break;default:Ve(`Unrecognized drawing path operator: ${a[u-1]}`);break}a=o}this.current.updateRectMinMax(qt(this.ctx),s),this[t](a)}closePath(){this.ctx.closePath()}stroke(t,n=!0){const s=this.ctx,a=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&(a!=null&&a.getPattern)){const o=a.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=a.getPattern(s,this,ia(s),fr.STROKE),o){const u=new Path2D;u.addPath(t,s.getTransform().invertSelf().multiplySelf(o)),t=u}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);n&&this.consumePath(t,this.current.getClippedPathBoundingBox(fr.STROKE,qt(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,n=!0){const s=this.ctx,a=this.current.fillColor,o=this.current.patternFill;let u=!1;if(o){const p=a.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=a.getPattern(s,this,ia(s),fr.FILL),p){const m=new Path2D;m.addPath(t,s.getTransform().invertSelf().multiplySelf(p)),t=m}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),u&&s.restore(),n&&this.consumePath(t,h)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}clip(){this.pendingClip=sI}eoClip(){this.pendingClip=ak}beginText(){this.current.textMatrix=uA,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,n=this.ctx;if(t===void 0){n.beginPath();return}const s=new Path2D,a=n.getTransform().invertSelf();for(const{transform:o,x:u,y:h,fontSize:p,path:m}of t)s.addPath(m,new DOMMatrix(o).preMultiplySelf(a).translate(u,h).scale(p,-p));n.clip(s),n.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,n){var v;const s=this.commonObjs.get(t),a=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=s.fontMatrix||z1,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&Ve("Invalid font matrix for font "+t),n<0?(n=-n,a.fontDirection=-1):a.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const o=s.loadedName||"sans-serif",u=((v=s.systemFontInfo)==null?void 0:v.css)||`"${o}", ${s.fallbackName}`;let h="normal";s.black?h="900":s.bold&&(h="bold");const p=s.italic?"italic":"normal";let m=n;n<Jx?m=Jx:n>Zx&&(m=Zx),this.current.fontSizeScale=n/m,this.ctx.font=`${p} ${h} ${m}px ${u}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,n){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,n){this.setLeading(-n),this.moveText(t,n)}setTextMatrix(t,n,s,a,o,u){this.current.textMatrix=[t,n,s,a,o,u],this.current.textMatrixScale=Math.hypot(t,n),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,n,s,a,o){const u=this.ctx,h=this.current,p=h.font,m=h.textRenderingMode,v=h.fontSize/h.fontSizeScale,y=m&vr.FILL_STROKE_MASK,b=!!(m&vr.ADD_TO_PATH_FLAG),_=h.patternFill&&!p.missingFile,k=h.patternStroke&&!p.missingFile;let x;if((p.disableFontFace||b||_||k)&&(x=p.getPathGenerator(this.commonObjs,t)),p.disableFontFace||_||k){u.save(),u.translate(n,s),u.scale(v,-v);let C;if((y===vr.FILL||y===vr.FILL_STROKE)&&(a?(C=u.getTransform(),u.setTransform(...a),u.fill(R(this,sa,fS).call(this,x,C,a))):u.fill(x)),y===vr.STROKE||y===vr.FILL_STROKE)if(o){C||(C=u.getTransform()),u.setTransform(...o);const{a:N,b:F,c:D,d:j}=C,z=Te.inverseTransform(o),V=Te.transform([N,F,D,j,0,0],z),[G,ee]=Te.singularValueDecompose2dScale(V);u.lineWidth*=Math.max(G,ee)/v,u.stroke(R(this,sa,fS).call(this,x,C,o))}else u.lineWidth/=v,u.stroke(x);u.restore()}else(y===vr.FILL||y===vr.FILL_STROKE)&&u.fillText(t,n,s),(y===vr.STROKE||y===vr.FILL_STROKE)&&u.strokeText(t,n,s);b&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:qt(u),x:n,y:s,fontSize:v,path:x})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const n=t.getImageData(0,0,10,10).data;let s=!1;for(let a=3;a<n.length;a+=4)if(n[a]>0&&n[a]<255){s=!0;break}return at(this,"isFontSubpixelAAEnabled",s)}showText(t){const n=this.current,s=n.font;if(s.isType3Font)return this.showType3Text(t);const a=n.fontSize;if(a===0)return;const o=this.ctx,u=n.fontSizeScale,h=n.charSpacing,p=n.wordSpacing,m=n.fontDirection,v=n.textHScale*m,y=t.length,b=s.vertical,_=b?1:-1,k=s.defaultVMetrics,x=a*n.fontMatrix[0],C=n.textRenderingMode===vr.FILL&&!s.disableFontFace&&!n.patternFill;o.save(),o.transform(...n.textMatrix),o.translate(n.x,n.y+n.textRise),m>0?o.scale(v,-1):o.scale(v,1);let N,F;if(n.patternFill){o.save();const G=n.fillColor.getPattern(o,this,ia(o),fr.FILL);N=qt(o),o.restore(),o.fillStyle=G}if(n.patternStroke){o.save();const G=n.strokeColor.getPattern(o,this,ia(o),fr.STROKE);F=qt(o),o.restore(),o.strokeStyle=G}let D=n.lineWidth;const j=n.textMatrixScale;if(j===0||D===0){const G=n.textRenderingMode&vr.FILL_STROKE_MASK;(G===vr.STROKE||G===vr.FILL_STROKE)&&(D=this.getSinglePixelWidth())}else D/=j;if(u!==1&&(o.scale(u,u),D/=u),o.lineWidth=D,s.isInvalidPDFjsFont){const G=[];let ee=0;for(const oe of t)G.push(oe.unicode),ee+=oe.width;o.fillText(G.join(""),0,0),n.x+=ee*x*v,o.restore(),this.compose();return}let z=0,V;for(V=0;V<y;++V){const G=t[V];if(typeof G=="number"){z+=_*G*a/1e3;continue}let ee=!1;const oe=(G.isSpace?p:0)+h,de=G.fontChar,ce=G.accent;let Ne,Ae,Pe=G.width;if(b){const le=G.vmetric||k,ae=-(G.vmetric?le[1]:Pe*.5)*x,q=le[2]*x;Pe=le?-le[0]:Pe,Ne=ae/u,Ae=(z+q)/u}else Ne=z/u,Ae=0;if(s.remeasure&&Pe>0){const le=o.measureText(de).width*1e3/a*u;if(Pe<le&&this.isFontSubpixelAAEnabled){const ae=Pe/le;ee=!0,o.save(),o.scale(ae,1),Ne/=ae}else Pe!==le&&(Ne+=(Pe-le)/2e3*a/u)}if(this.contentVisible&&(G.isInFont||s.missingFile)){if(C&&!ce)o.fillText(de,Ne,Ae);else if(this.paintChar(de,Ne,Ae,N,F),ce){const le=Ne+a*ce.offset.x/u,ae=Ae-a*ce.offset.y/u;this.paintChar(ce.fontChar,le,ae,N,F)}}const Ze=b?Pe*x-oe*m:Pe*x+oe*m;z+=Ze,ee&&o.restore()}b?n.y-=z:n.x+=z*v,o.restore(),this.compose()}showType3Text(t){const n=this.ctx,s=this.current,a=s.font,o=s.fontSize,u=s.fontDirection,h=a.vertical?1:-1,p=s.charSpacing,m=s.wordSpacing,v=s.textHScale*u,y=s.fontMatrix||z1,b=t.length,_=s.textRenderingMode===vr.INVISIBLE;let k,x,C,N;if(!(_||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),n.transform(...s.textMatrix),n.translate(s.x,s.y+s.textRise),n.scale(v,u),k=0;k<b;++k){if(x=t[k],typeof x=="number"){N=h*x*o/1e3,this.ctx.translate(N,0),s.x+=N*v;continue}const F=(x.isSpace?m:0)+p,D=a.charProcOperatorList[x.operatorListId];D?this.contentVisible&&(this.processingType3=x,this.save(),n.scale(o,o),n.transform(...y),this.executeOperatorList(D),this.restore()):Ve(`Type3 character "${x.operatorListId}" is not available.`),C=Te.applyTransform([x.width,0],y)[0]*o+F,n.translate(C,0),s.x+=C*v}n.restore(),this.processingType3=null}}setCharWidth(t,n){}setCharWidthAndBounds(t,n,s,a,o,u){this.ctx.rect(s,a,o-s,u-a),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let n;if(t[0]==="TilingPattern"){const s=this.baseTransform||qt(this.ctx),a={createCanvasGraphics:o=>new LE(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};n=new cS(t,this.ctx,a,s)}else n=this._getPattern(t[1],t[2]);return n}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,n,s){this.ctx.strokeStyle=this.current.strokeColor=Te.makeHexColor(t,n,s),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,n,s){this.ctx.fillStyle=this.current.fillColor=Te.makeHexColor(t,n,s),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,n=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=KN(this.getObject(t)),this.cachedPatterns.set(t,s)),n&&(s.matrix=n),s}shadingFill(t){if(!this.contentVisible)return;const n=this.ctx;this.save();const s=this._getPattern(t);n.fillStyle=s.getPattern(n,this,ia(n),fr.SHADING);const a=ia(n);if(a){const{width:o,height:u}=n.canvas,[h,p,m,v]=Te.getAxialAlignedBoundingBox([0,0,o,u],a);this.ctx.fillRect(h,p,m-h,v-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Rt("Should not call beginInlineImage")}beginImageData(){Rt("Should not call beginImageData")}paintFormXObjectBegin(t,n){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=qt(this.ctx),n)){const s=n[2]-n[0],a=n[3]-n[1];this.ctx.rect(n[0],n[1],s,a),this.current.updateRectMinMax(qt(this.ctx),n),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||nb("TODO: Support non-isolated groups."),t.knockout&&Ve("Knockout groups not supported.");const s=qt(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=Te.getAxialAlignedBoundingBox(t.bbox,qt(n));const o=[0,0,n.canvas.width,n.canvas.height];a=Te.intersect(a,o)||[0,0,0,0];const u=Math.floor(a[0]),h=Math.floor(a[1]),p=Math.max(Math.ceil(a[2])-u,1),m=Math.max(Math.ceil(a[3])-h,1);this.current.startNewPathAndClipBox([0,0,p,m]);let v="groupAt"+this.groupLevel;t.smask&&(v+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(v,p,m),b=y.context;b.translate(-u,-h),b.transform(...s);let _=new Path2D;const[k,x,C,N]=t.bbox;if(_.rect(k,x,C-k,N-x),t.matrix){const F=new Path2D;F.addPath(_,new DOMMatrix(t.matrix)),_=F}b.clip(_),t.smask?this.smaskStack.push({canvas:y.canvas,context:b,offsetX:u,offsetY:h,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(n.setTransform(1,0,0,1,0,0),n.translate(u,h),n.save()),gv(n,b),this.ctx=b,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const a=qt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...a);const o=Te.getAxialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],a);this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,n,s,a,o){if(R(this,sa,hS).call(this),F0(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const u=n[2]-n[0],h=n[3]-n[1];if(o&&this.annotationCanvasMap){s=s.slice(),s[4]-=n[0],s[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=u,n[3]=h;const[p,m]=Te.singularValueDecompose2dScale(qt(this.ctx)),{viewportScale:v}=this,y=Math.ceil(u*this.outputScaleX*v),b=Math.ceil(h*this.outputScaleY*v);this.annotationCanvas=this.canvasFactory.create(y,b);const{canvas:_,context:k}=this.annotationCanvas;this.annotationCanvasMap.set(t,_),this.annotationCanvas.savedCtx=this.ctx,this.ctx=k,this.ctx.save(),this.ctx.setTransform(p,0,0,-m,0,h*m),F0(this.ctx)}else F0(this.ctx),this.endPath(),this.ctx.rect(n[0],n[1],u,h),this.ctx.clip(),this.ctx.beginPath()}this.current=new nk(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...a)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),R(this,sa,dS).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const n=t.count;t=this.getObject(t.data,t),t.count=n;const s=this.ctx,a=this.processingType3;if(a&&(a.compiled===void 0&&(a.compiled=tI(t)),a.compiled)){s.fill(a.compiled);return}const o=this._createMaskCanvas(t),u=o.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(u,o.offsetX,o.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,n,s=0,a=0,o,u){if(!this.contentVisible)return;t=this.getObject(t.data,t);const h=this.ctx;h.save();const p=qt(h);h.transform(n,s,a,o,0,0);const m=this._createMaskCanvas(t);h.setTransform(1,0,0,1,m.offsetX-p[4],m.offsetY-p[5]);for(let v=0,y=u.length;v<y;v+=2){const b=Te.transform(p,[n,s,a,o,u[v],u[v+1]]),[_,k]=Te.applyTransform([0,0],b);h.drawImage(m.canvas,_,k)}h.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const n=this.ctx,s=this.current.fillColor,a=this.current.patternFill;for(const o of t){const{data:u,width:h,height:p,transform:m}=o,v=this.cachedCanvases.getCanvas("maskCanvas",h,p),y=v.context;y.save();const b=this.getObject(u,o);sk(y,b),y.globalCompositeOperation="source-in",y.fillStyle=a?s.getPattern(y,this,ia(n),fr.FILL):s,y.fillRect(0,0,h,p),y.restore(),n.save(),n.transform(...m),n.scale(1,-1),D0(n,v.canvas,0,0,h,p,0,-1,1,1),n.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const n=this.getObject(t);if(!n){Ve("Dependent image isn't ready yet");return}this.paintInlineImageXObject(n)}paintImageXObjectRepeat(t,n,s,a){if(!this.contentVisible)return;const o=this.getObject(t);if(!o){Ve("Dependent image isn't ready yet");return}const u=o.width,h=o.height,p=[];for(let m=0,v=a.length;m<v;m+=2)p.push({transform:[n,0,0,s,a[m],a[m+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(o,p)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:n,width:s,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",s,a),u=o.context;return u.filter=this.current.transferMaps,u.drawImage(n,0,0),u.filter="none",o.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const n=t.width,s=t.height,a=this.ctx;if(this.save(),!dr){const{filter:h}=a;h!=="none"&&h!==""&&(a.filter="none")}a.scale(1/n,-1/s);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const p=this.cachedCanvases.getCanvas("inlineImage",n,s).context;rk(p,t),o=this.applyTransferMapsToCanvas(p)}const u=this._scaleImage(o,ia(a));a.imageSmoothingEnabled=ik(qt(a),t.interpolate),D0(a,u.img,0,0,u.paintWidth,u.paintHeight,0,-s,n,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,n){if(!this.contentVisible)return;const s=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const o=t.width,u=t.height,p=this.cachedCanvases.getCanvas("inlineImage",o,u).context;rk(p,t),a=this.applyTransferMapsToCanvas(p)}for(const o of n)s.save(),s.transform(...o.transform),s.scale(1,-1),D0(s,a,o.x,o.y,o.w,o.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,n){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,n){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,n){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const a=this.ctx;this.pendingClip&&(s||(this.pendingClip===ak?a.clip(t,"evenodd"):a.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),a.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=qt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const n=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,a)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:n,b:s,c:a,d:o}=this.ctx.getTransform();let u,h;if(s===0&&a===0){const p=Math.abs(n),m=Math.abs(o);if(p===m)if(t===0)u=h=1/p;else{const v=p*t;u=h=v<1?1/v:1}else if(t===0)u=1/p,h=1/m;else{const v=p*t,y=m*t;u=v<1?1/v:1,h=y<1?1/y:1}}else{const p=Math.abs(n*o-s*a),m=Math.hypot(n,s),v=Math.hypot(a,o);if(t===0)u=v/p,h=m/p;else{const y=t*p;u=v>y?v/y:1,h=m>y?m/y:1}}this._cachedScaleForStroking[0]=u,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(t,n){const{ctx:s,current:{lineWidth:a}}=this,[o,u]=this.getScaleForStroking();if(o===u){s.lineWidth=(a||1)*o,s.stroke(t);return}const h=s.getLineDash();n&&s.save(),s.scale(o,u),S1.a=1/o,S1.d=1/u;const p=new Path2D;if(p.addPath(t,S1),h.length>0){const m=Math.max(o,u);s.setLineDash(h.map(v=>v/m)),s.lineDashOffset/=m}s.lineWidth=a||1,s.stroke(p),n&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};sa=new WeakSet,hS=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},dS=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const n=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}},fS=function(t,n,s){const a=new Path2D;return a.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(n)),a};let sf=LE;for(const c in _w)sf.prototype[c]!==void 0&&(sf.prototype[_w[c]]=sf.prototype[c]);var by,_y;class gl{static get workerPort(){return d(this,by)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");E(this,by,t)}static get workerSrc(){return d(this,_y)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");E(this,_y,t)}}by=new WeakMap,_y=new WeakMap,P(gl,by,null),P(gl,_y,"");var Wh,Sy;class iI{constructor({parsedData:t,rawData:n}){P(this,Wh);P(this,Sy);E(this,Wh,t),E(this,Sy,n)}getRaw(){return d(this,Sy)}get(t){return d(this,Wh).get(t)??null}getAll(){return mE(d(this,Wh))}has(t){return d(this,Wh).has(t)}}Wh=new WeakMap,Sy=new WeakMap;const Qd=Symbol("INTERNAL");var Ey,xy,ky,kf;class aI{constructor(t,{name:n,intent:s,usage:a,rbGroups:o}){P(this,Ey,!1);P(this,xy,!1);P(this,ky,!1);P(this,kf,!0);E(this,Ey,!!(t&Bs.DISPLAY)),E(this,xy,!!(t&Bs.PRINT)),this.name=n,this.intent=s,this.usage=a,this.rbGroups=o}get visible(){if(d(this,ky))return d(this,kf);if(!d(this,kf))return!1;const{print:t,view:n}=this.usage;return d(this,Ey)?(n==null?void 0:n.viewState)!=="OFF":d(this,xy)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,n,s=!1){t!==Qd&&Rt("Internal method `_setVisible` called."),E(this,ky,s),E(this,kf,n)}}Ey=new WeakMap,xy=new WeakMap,ky=new WeakMap,kf=new WeakMap;var Hl,Tt,Af,Cf,Ay,pS;class oI{constructor(t,n=Bs.DISPLAY){P(this,Ay);P(this,Hl,null);P(this,Tt,new Map);P(this,Af,null);P(this,Cf,null);if(this.renderingIntent=n,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,E(this,Cf,t.order);for(const s of t.groups)d(this,Tt).set(s.id,new aI(n,s));if(t.baseState==="OFF")for(const s of d(this,Tt).values())s._setVisible(Qd,!1);for(const s of t.on)d(this,Tt).get(s)._setVisible(Qd,!0);for(const s of t.off)d(this,Tt).get(s)._setVisible(Qd,!1);E(this,Af,this.getHash())}}isVisible(t){if(d(this,Tt).size===0)return!0;if(!t)return nb("Optional content group not defined."),!0;if(t.type==="OCG")return d(this,Tt).has(t.id)?d(this,Tt).get(t.id).visible:(Ve(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return R(this,Ay,pS).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const n of t.ids){if(!d(this,Tt).has(n))return Ve(`Optional content group not found: ${n}`),!0;if(d(this,Tt).get(n).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const n of t.ids){if(!d(this,Tt).has(n))return Ve(`Optional content group not found: ${n}`),!0;if(!d(this,Tt).get(n).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const n of t.ids){if(!d(this,Tt).has(n))return Ve(`Optional content group not found: ${n}`),!0;if(!d(this,Tt).get(n).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const n of t.ids){if(!d(this,Tt).has(n))return Ve(`Optional content group not found: ${n}`),!0;if(d(this,Tt).get(n).visible)return!1}return!0}return Ve(`Unknown optional content policy ${t.policy}.`),!0}return Ve(`Unknown group type ${t.type}.`),!0}setVisibility(t,n=!0,s=!0){var o;const a=d(this,Tt).get(t);if(!a){Ve(`Optional content group not found: ${t}`);return}if(s&&n&&a.rbGroups.length)for(const u of a.rbGroups)for(const h of u)h!==t&&((o=d(this,Tt).get(h))==null||o._setVisible(Qd,!1,!0));a._setVisible(Qd,!!n,!0),E(this,Hl,null)}setOCGState({state:t,preserveRB:n}){let s;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":s=a;continue}const o=d(this,Tt).get(a);if(o)switch(s){case"ON":this.setVisibility(a,!0,n);break;case"OFF":this.setVisibility(a,!1,n);break;case"Toggle":this.setVisibility(a,!o.visible,n);break}}E(this,Hl,null)}get hasInitialVisibility(){return d(this,Af)===null||this.getHash()===d(this,Af)}getOrder(){return d(this,Tt).size?d(this,Cf)?d(this,Cf).slice():[...d(this,Tt).keys()]:null}getGroups(){return d(this,Tt).size>0?mE(d(this,Tt)):null}getGroup(t){return d(this,Tt).get(t)||null}getHash(){if(d(this,Hl)!==null)return d(this,Hl);const t=new HA;for(const[n,s]of d(this,Tt))t.update(`${n}:${s.visible}`);return E(this,Hl,t.hexdigest())}}Hl=new WeakMap,Tt=new WeakMap,Af=new WeakMap,Cf=new WeakMap,Ay=new WeakSet,pS=function(t){const n=t.length;if(n<2)return!0;const s=t[0];for(let a=1;a<n;a++){const o=t[a];let u;if(Array.isArray(o))u=R(this,Ay,pS).call(this,o);else if(d(this,Tt).has(o))u=d(this,Tt).get(o).visible;else return Ve(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return s==="And"};class lI{constructor(t,{disableRange:n=!1,disableStream:s=!1}){vn(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:o,progressiveDone:u,contentDispositionFilename:h}=t;if(this._queuedChunks=[],this._progressiveDone=u,this._contentDispositionFilename=h,(o==null?void 0:o.length)>0){const p=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(p)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!n,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((p,m)=>{this._onReceiveData({begin:p,chunk:m})}),t.addProgressListener((p,m)=>{this._onProgress({loaded:p,total:m})}),t.addProgressiveReadListener(p=>{this._onReceiveData({chunk:p})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:n}){const s=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const a=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(s),!0)});vn(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var n,s,a,o;t.total===void 0?(s=(n=this._rangeReaders[0])==null?void 0:n.onProgress)==null||s.call(n,{loaded:t.loaded}):(o=(a=this._fullRequestReader)==null?void 0:a.onProgress)==null||o.call(a,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const n=this._rangeReaders.indexOf(t);n>=0&&this._rangeReaders.splice(n,1)}getFullReader(){vn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new uI(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const s=new cI(this,t,n);return this._pdfDataRangeTransport.requestDataRange(t,n),this._rangeReaders.push(s),s}cancelAllRequests(t){var n;(n=this._fullRequestReader)==null||n.cancel(t);for(const s of this._rangeReaders.slice(0))s.cancel(t);this._pdfDataRangeTransport.abort()}}class uI{constructor(t,n,s=!1,a=null){this._stream=t,this._done=s||!1,this._filename=wE(a)?a:null,this._queuedChunks=n||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class cI{constructor(t,n,s){this._stream=t,this._begin=n,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function hI(c){let t=!0,n=s("filename\\*","i").exec(c);if(n){n=n[1];let v=h(n);return v=unescape(v),v=p(v),v=m(v),o(v)}if(n=u(c),n){const v=m(n);return o(v)}if(n=s("filename","i").exec(c),n){n=n[1];let v=h(n);return v=m(v),o(v)}function s(v,y){return new RegExp("(?:^|;)\\s*"+v+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function a(v,y){if(v){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(v,{fatal:!0}),_=b0(y);y=b.decode(_),t=!1}catch{}}return y}function o(v){return t&&/[\x80-\xff]/.test(v)&&(v=a("utf-8",v),t&&(v=a("iso-8859-1",v))),v}function u(v){const y=[];let b;const _=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=_.exec(v))!==null;){let[,x,C,N]=b;if(x=parseInt(x,10),x in y){if(x===0)break;continue}y[x]=[C,N]}const k=[];for(let x=0;x<y.length&&x in y;++x){let[C,N]=y[x];N=h(N),C&&(N=unescape(N),x===0&&(N=p(N))),k.push(N)}return k.join("")}function h(v){if(v.startsWith('"')){const y=v.slice(1).split('\\"');for(let b=0;b<y.length;++b){const _=y[b].indexOf('"');_!==-1&&(y[b]=y[b].slice(0,_),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}v=y.join('"')}return v}function p(v){const y=v.indexOf("'");if(y===-1)return v;const b=v.slice(0,y),k=v.slice(y+1).replace(/^[^']*'/,"");return a(b,k)}function m(v){return!v.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(v)?v:v.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,_,k){if(_==="q"||_==="Q")return k=k.replaceAll("_"," "),k=k.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,C){return String.fromCharCode(parseInt(C,16))}),a(b,k);try{k=atob(k)}catch{}return a(b,k)})}return""}function tC(c,t){const n=new Headers;if(!c||!t||typeof t!="object")return n;for(const s in t){const a=t[s];a!==void 0&&n.append(s,a)}return n}function sb(c){var t;return((t=URL.parse(c))==null?void 0:t.origin)??null}function nC({responseHeaders:c,isHttp:t,rangeChunkSize:n,disableRange:s}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(c.get("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*n)||s||!t||c.get("Accept-Ranges")!=="bytes"||(c.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function rC(c){const t=c.get("Content-Disposition");if(t){let n=hI(t);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if(wE(n))return n}return null}function x0(c,t){return new Sw(`Unexpected server response (${c}) while retrieving PDF "${t}".`,c,c===404||c===0&&t.startsWith("file:"))}function sC(c){return c===200||c===206}function iC(c,t,n){return{method:"GET",headers:c,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function aC(c){return c instanceof Uint8Array?c.buffer:c instanceof ArrayBuffer?c:(Ve(`getArrayBuffer - unexpected data format: ${c}`),new Uint8Array(c).buffer)}class ok{constructor(t){Ee(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=tC(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return vn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new dI(this),this._fullRequestReader}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const s=new fI(this,t,n);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var n;(n=this._fullRequestReader)==null||n.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class dI{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const n=t.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange;const s=new Headers(t.headers),a=n.url;fetch(a,iC(s,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=sb(o.url),!sC(o.status))throw x0(o.status,a);this._reader=o.body.getReader(),this._headersCapability.resolve();const u=o.headers,{allowRangeRequests:h,suggestedLength:p}=nC({responseHeaders:u,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=p||this._contentLength,this._filename=rC(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new pu("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:aC(t),done:!1})}cancel(t){var n;(n=this._reader)==null||n.cancel(t),this._abortController.abort()}}class fI{constructor(t,n,s){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${n}-${s-1}`);const u=a.url;fetch(u,iC(o,this._withCredentials,this._abortController)).then(h=>{const p=sb(h.url);if(p!==t._responseOrigin)throw new Error(`Expected range response-origin "${p}" to match "${t._responseOrigin}".`);if(!sC(h.status))throw x0(h.status,u);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:aC(t),done:!1})}cancel(t){var n;(n=this._reader)==null||n.cancel(t),this._abortController.abort()}}const E1=200,x1=206;function pI(c){const t=c.response;return typeof t!="string"?t:b0(t).buffer}class gI{constructor({url:t,httpHeaders:n,withCredentials:s}){Ee(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=tC(this.isHttp,n),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const n=new XMLHttpRequest,s=this.currXhrId++,a=this.pendingRequests[s]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(const[o,u]of this.headers)n.setRequestHeader(o,u);return this.isHttp&&"begin"in t&&"end"in t?(n.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=x1):a.expectedStatus=E1,n.responseType="arraybuffer",vn(t.onError,"Expected `onError` callback to be provided."),n.onerror=()=>{t.onError(n.status)},n.onreadystatechange=this.onStateChange.bind(this,s),n.onprogress=this.onProgress.bind(this,s),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,n.send(null),s}onProgress(t,n){var a;const s=this.pendingRequests[t];s&&((a=s.onProgress)==null||a.call(s,n))}onStateChange(t,n){const s=this.pendingRequests[t];if(!s)return;const a=s.xhr;if(a.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){s.onError(a.status);return}const o=a.status||E1;if(!(o===E1&&s.expectedStatus===x1)&&o!==s.expectedStatus){s.onError(a.status);return}const h=pI(a);if(o===x1){const p=a.getResponseHeader("Content-Range"),m=/bytes (\d+)-(\d+)\/(\d+)/.exec(p);m?s.onDone({begin:parseInt(m[1],10),chunk:h}):(Ve('Missing or invalid "Content-Range" header.'),s.onError(0))}else h?s.onDone({begin:0,chunk:h}):s.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const n=this.pendingRequests[t].xhr;delete this.pendingRequests[t],n.abort()}}class mI{constructor(t){this._source=t,this._manager=new gI(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const n=this._rangeRequestReaders.indexOf(t);n>=0&&this._rangeRequestReaders.splice(n,1)}getFullReader(){return vn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new vI(this._manager,this._source),this._fullRequestReader}getRangeReader(t,n){const s=new yI(this._manager,t,n);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var n;(n=this._fullRequestReader)==null||n.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class vI{constructor(t,n){this._manager=t,this._url=n.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,n=this._manager.getRequestXhr(t);this._manager._responseOrigin=sb(n.responseURL);const s=n.getAllResponseHeaders(),a=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(h=>{const[p,...m]=h.split(": ");return[p,m.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:u}=nC({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=rC(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=x0(t,this._url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var n;(n=this.onProgress)==null||n.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class yI{constructor(t,n,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:n,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var n;const t=sb((n=this._manager.getRequestXhr(this._requestId))==null?void 0:n.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const n=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=x0(t,this._url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var n;this.isStreamingSupported||(n=this.onProgress)==null||n.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const wI=/^[a-z][a-z0-9\-+.]+:/i;function bI(c){if(wI.test(c))return new URL(c);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(c))}class _I{constructor(t){this.source=t,this.url=bI(t.url),vn(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return vn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new SI(this),this._fullRequestReader}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const s=new EI(this,t,n);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var n;(n=this._fullRequestReader)==null||n.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class SI{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=t.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=x0(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new pu("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class EI{constructor(t,n,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:n,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const xI=1e5,lk=30;var dk,Vl,Qr,Cy,Ty,Gh,Jo,Py,Ry,qh,Tf,Pf,Wl,Rf,Ly,Lf,Xh,Ny,Iy,Nf,Yh,My,Gl,If,bl,oC,lC,gS,Hs,J0,mS,uC,cC;const Pn=class Pn{constructor({textContentSource:t,container:n,viewport:s}){P(this,bl);P(this,Vl,Promise.withResolvers());P(this,Qr,null);P(this,Cy,!1);P(this,Ty,!!((dk=globalThis.FontInspector)!=null&&dk.enabled));P(this,Gh,null);P(this,Jo,null);P(this,Py,0);P(this,Ry,0);P(this,qh,null);P(this,Tf,null);P(this,Pf,0);P(this,Wl,0);P(this,Rf,Object.create(null));P(this,Ly,[]);P(this,Lf,null);P(this,Xh,[]);P(this,Ny,new WeakMap);P(this,Iy,null);var p;if(t instanceof ReadableStream)E(this,Lf,t);else if(typeof t=="object")E(this,Lf,new ReadableStream({start(m){m.enqueue(t),m.close()}}));else throw new Error('No "textContentSource" parameter specified.');E(this,Qr,E(this,Tf,n)),E(this,Wl,s.scale*wl.pixelRatio),E(this,Pf,s.rotation),E(this,Jo,{div:null,properties:null,ctx:null});const{pageWidth:a,pageHeight:o,pageX:u,pageY:h}=s.rawDims;E(this,Iy,[1,0,0,-1,-u,h+o]),E(this,Ry,a),E(this,Py,o),R(p=Pn,Hs,uC).call(p),Cd(n,s),d(this,Vl).promise.finally(()=>{d(Pn,If).delete(this),E(this,Jo,null),E(this,Rf,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:n}=mr.platform;return at(this,"fontFamilyMap",new Map([["sans-serif",`${t&&n?"Calibri, ":""}sans-serif`],["monospace",`${t&&n?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{d(this,qh).read().then(({value:n,done:s})=>{if(s){d(this,Vl).resolve();return}d(this,Gh)??E(this,Gh,n.lang),Object.assign(d(this,Rf),n.styles),R(this,bl,oC).call(this,n.items),t()},d(this,Vl).reject)};return E(this,qh,d(this,Lf).getReader()),d(Pn,If).add(this),t(),d(this,Vl).promise}update({viewport:t,onBefore:n=null}){var o;const s=t.scale*wl.pixelRatio,a=t.rotation;if(a!==d(this,Pf)&&(n==null||n(),E(this,Pf,a),Cd(d(this,Tf),{rotation:a})),s!==d(this,Wl)){n==null||n(),E(this,Wl,s);const u={div:null,properties:null,ctx:R(o=Pn,Hs,J0).call(o,d(this,Gh))};for(const h of d(this,Xh))u.properties=d(this,Ny).get(h),u.div=h,R(this,bl,gS).call(this,u)}}cancel(){var n;const t=new pu("TextLayer task cancelled.");(n=d(this,qh))==null||n.cancel(t).catch(()=>{}),E(this,qh,null),d(this,Vl).reject(t)}get textDivs(){return d(this,Xh)}get textContentItemsStr(){return d(this,Ly)}static cleanup(){if(!(d(this,If).size>0)){d(this,Nf).clear();for(const{canvas:t}of d(this,Yh).values())t.remove();d(this,Yh).clear()}}};Vl=new WeakMap,Qr=new WeakMap,Cy=new WeakMap,Ty=new WeakMap,Gh=new WeakMap,Jo=new WeakMap,Py=new WeakMap,Ry=new WeakMap,qh=new WeakMap,Tf=new WeakMap,Pf=new WeakMap,Wl=new WeakMap,Rf=new WeakMap,Ly=new WeakMap,Lf=new WeakMap,Xh=new WeakMap,Ny=new WeakMap,Iy=new WeakMap,Nf=new WeakMap,Yh=new WeakMap,My=new WeakMap,Gl=new WeakMap,If=new WeakMap,bl=new WeakSet,oC=function(t){var a,o;if(d(this,Cy))return;(o=d(this,Jo)).ctx??(o.ctx=R(a=Pn,Hs,J0).call(a,d(this,Gh)));const n=d(this,Xh),s=d(this,Ly);for(const u of t){if(n.length>xI){Ve("Ignoring additional textDivs for performance reasons."),E(this,Cy,!0);return}if(u.str===void 0){if(u.type==="beginMarkedContentProps"||u.type==="beginMarkedContent"){const h=d(this,Qr);E(this,Qr,document.createElement("span")),d(this,Qr).classList.add("markedContent"),u.id!==null&&d(this,Qr).setAttribute("id",`${u.id}`),h.append(d(this,Qr))}else u.type==="endMarkedContent"&&E(this,Qr,d(this,Qr).parentNode);continue}s.push(u.str),R(this,bl,lC).call(this,u)}},lC=function(t){var x;const n=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};d(this,Xh).push(n);const a=Te.transform(d(this,Iy),t.transform);let o=Math.atan2(a[1],a[0]);const u=d(this,Rf)[t.fontName];u.vertical&&(o+=Math.PI/2);let h=d(this,Ty)&&u.fontSubstitution||u.fontFamily;h=Pn.fontFamilyMap.get(h)||h;const p=Math.hypot(a[2],a[3]),m=p*R(x=Pn,Hs,cC).call(x,h,u,d(this,Gh));let v,y;o===0?(v=a[4],y=a[5]-m):(v=a[4]+m*Math.sin(o),y=a[5]-m*Math.cos(o));const b="calc(var(--total-scale-factor) *",_=n.style;d(this,Qr)===d(this,Tf)?(_.left=`${(100*v/d(this,Ry)).toFixed(2)}%`,_.top=`${(100*y/d(this,Py)).toFixed(2)}%`):(_.left=`${b}${v.toFixed(2)}px)`,_.top=`${b}${y.toFixed(2)}px)`),_.fontSize=`${b}${(d(Pn,Gl)*p).toFixed(2)}px)`,_.fontFamily=h,s.fontSize=p,n.setAttribute("role","presentation"),n.textContent=t.str,n.dir=t.dir,d(this,Ty)&&(n.dataset.fontName=u.fontSubstitutionLoadedName||t.fontName),o!==0&&(s.angle=o*(180/Math.PI));let k=!1;if(t.str.length>1)k=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const C=Math.abs(t.transform[0]),N=Math.abs(t.transform[3]);C!==N&&Math.max(C,N)/Math.min(C,N)>1.5&&(k=!0)}if(k&&(s.canvasWidth=u.vertical?t.height:t.width),d(this,Ny).set(n,s),d(this,Jo).div=n,d(this,Jo).properties=s,R(this,bl,gS).call(this,d(this,Jo)),s.hasText&&d(this,Qr).append(n),s.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),d(this,Qr).append(C)}},gS=function(t){var h;const{div:n,properties:s,ctx:a}=t,{style:o}=n;let u="";if(d(Pn,Gl)>1&&(u=`scale(${1/d(Pn,Gl)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:p}=o,{canvasWidth:m,fontSize:v}=s;R(h=Pn,Hs,mS).call(h,a,v*d(this,Wl),p);const{width:y}=a.measureText(n.textContent);y>0&&(u=`scaleX(${m*d(this,Wl)/y}) ${u}`)}s.angle!==0&&(u=`rotate(${s.angle}deg) ${u}`),u.length>0&&(o.transform=u)},Hs=new WeakSet,J0=function(t=null){let n=d(this,Yh).get(t||(t=""));if(!n){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),n=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),d(this,Yh).set(t,n),d(this,My).set(n,{size:0,family:""})}return n},mS=function(t,n,s){const a=d(this,My).get(t);n===a.size&&s===a.family||(t.font=`${n}px ${s}`,a.size=n,a.family=s)},uC=function(){if(d(this,Gl)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),E(this,Gl,t.getBoundingClientRect().height),t.remove()},cC=function(t,n,s){const a=d(this,Nf).get(t);if(a)return a;const o=R(this,Hs,J0).call(this,s);o.canvas.width=o.canvas.height=lk,R(this,Hs,mS).call(this,o,lk,t);const u=o.measureText(""),h=u.fontBoundingBoxAscent,p=Math.abs(u.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let m=.8;return h?m=h/(h+p):(mr.platform.isFirefox&&Ve("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),n.ascent?m=n.ascent:n.descent&&(m=1+n.descent)),d(this,Nf).set(t,m),m},P(Pn,Hs),P(Pn,Nf,new Map),P(Pn,Yh,new Map),P(Pn,My,new WeakMap),P(Pn,Gl,null),P(Pn,If,new Set);let Gv=Pn;class qv{static textContent(t){const n=[],s={items:n,styles:Object.create(null)};function a(o){var p;if(!o)return;let u=null;const h=o.name;if(h==="#text")u=o.value;else if(qv.shouldBuildText(h))(p=o==null?void 0:o.attributes)!=null&&p.textContent?u=o.attributes.textContent:o.value&&(u=o.value);else return;if(u!==null&&n.push({str:u}),!!o.children)for(const m of o.children)a(m)}return a(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const kI=65536,AI=100;function CI(c={}){typeof c=="string"||c instanceof URL?c={url:c}:(c instanceof ArrayBuffer||ArrayBuffer.isView(c))&&(c={data:c});const t=new yS,{docId:n}=t,s=c.url?TI(c.url):null,a=c.data?PI(c.data):null,o=c.httpHeaders||null,u=c.withCredentials===!0,h=c.password??null,p=c.range instanceof hC?c.range:null,m=Number.isInteger(c.rangeChunkSize)&&c.rangeChunkSize>0?c.rangeChunkSize:kI;let v=c.worker instanceof af?c.worker:null;const y=c.verbosity,b=typeof c.docBaseUrl=="string"&&!rb(c.docBaseUrl)?c.docBaseUrl:null,_=j0(c.cMapUrl),k=c.cMapPacked!==!1,x=c.CMapReaderFactory||(dr?HN:Xx),C=j0(c.iccUrl),N=j0(c.standardFontDataUrl),F=c.StandardFontDataFactory||(dr?VN:Yx),D=j0(c.wasmUrl),j=c.WasmFactory||(dr?WN:Kx),z=c.stopAtErrors!==!0,V=Number.isInteger(c.maxImageSize)&&c.maxImageSize>-1?c.maxImageSize:-1,G=c.isEvalSupported!==!1,ee=typeof c.isOffscreenCanvasSupported=="boolean"?c.isOffscreenCanvasSupported:!dr,oe=typeof c.isImageDecoderSupported=="boolean"?c.isImageDecoderSupported:!dr&&(mr.platform.isFirefox||!globalThis.chrome),de=Number.isInteger(c.canvasMaxAreaInBytes)?c.canvasMaxAreaInBytes:-1,ce=typeof c.disableFontFace=="boolean"?c.disableFontFace:dr,Ne=c.fontExtraProperties===!0,Ae=c.enableXfa===!0,Pe=c.ownerDocument||globalThis.document,Ze=c.disableRange===!0,le=c.disableStream===!0,ae=c.disableAutoFetch===!0,q=c.pdfBug===!0,te=c.CanvasFactory||(dr?UN:$N),X=c.FilterFactory||(dr?BN:zN),L=c.enableHWA===!0,$=c.useWasm!==!1,ie=p?p.length:c.length??NaN,he=typeof c.useSystemFonts=="boolean"?c.useSystemFonts:!dr&&!ce,ve=typeof c.useWorkerFetch=="boolean"?c.useWorkerFetch:!!(x===Xx&&F===Yx&&j===Kx&&_&&N&&D&&qd(_,document.baseURI)&&qd(N,document.baseURI)&&qd(D,document.baseURI)),pe=null;vN(y);const ge={canvasFactory:new te({ownerDocument:Pe,enableHWA:L}),filterFactory:new X({docId:n,ownerDocument:Pe}),cMapReaderFactory:ve?null:new x({baseUrl:_,isCompressed:k}),standardFontDataFactory:ve?null:new F({baseUrl:N}),wasmFactory:ve?null:new j({baseUrl:D})};if(!v){const ht={verbosity:y,port:gl.workerPort};v=ht.port?af.fromPort(ht):new af(ht),t._worker=v}const Ce={docId:n,apiVersion:"5.1.91",data:a,password:h,disableAutoFetch:ae,rangeChunkSize:m,length:ie,docBaseUrl:b,enableXfa:Ae,evaluatorOptions:{maxImageSize:V,disableFontFace:ce,ignoreErrors:z,isEvalSupported:G,isOffscreenCanvasSupported:ee,isImageDecoderSupported:oe,canvasMaxAreaInBytes:de,fontExtraProperties:Ne,useSystemFonts:he,useWasm:$,useWorkerFetch:ve,cMapUrl:_,iccUrl:C,standardFontDataUrl:N,wasmUrl:D}},Me={ownerDocument:Pe,pdfBug:q,styleElement:pe,loadingParams:{disableAutoFetch:ae,enableXfa:Ae}};return v.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(v.destroyed)throw new Error("Worker was destroyed");const ht=v.messageHandler.sendWithPromise("GetDocRequest",Ce,a?[a.buffer]:null);let es;if(p)es=new lI(p,{disableRange:Ze,disableStream:le});else if(!a){if(!s)throw new Error("getDocument - no `url` parameter provided.");let Vs;if(dr)if(qd(s)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Vs=ok}else Vs=_I;else Vs=qd(s)?ok:mI;es=new Vs({url:s,length:ie,httpHeaders:o,withCredentials:u,rangeChunkSize:m,disableRange:Ze,disableStream:le})}return ht.then(Vs=>{if(t.destroyed)throw new Error("Loading aborted");if(v.destroyed)throw new Error("Worker was destroyed");const Ws=new xv(n,Vs,v.port),Aa=new OI(Ws,t,es,Me,ge);t._transport=Aa,Ws.send("Ready",null)})}).catch(t._capability.reject),t}function TI(c){if(c instanceof URL)return c.href;if(typeof c=="string"){if(dr)return c;const t=URL.parse(c,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function PI(c){if(dr&&typeof Buffer<"u"&&c instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength)return c;if(typeof c=="string")return b0(c);if(c instanceof ArrayBuffer||ArrayBuffer.isView(c)||typeof c=="object"&&!isNaN(c==null?void 0:c.length))return new Uint8Array(c);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function j0(c){if(typeof c!="string")return null;if(c.endsWith("/"))return c;throw new Error(`Invalid factory url: "${c}" must include trailing slash.`)}const vS=c=>typeof c=="object"&&Number.isInteger(c==null?void 0:c.num)&&c.num>=0&&Number.isInteger(c==null?void 0:c.gen)&&c.gen>=0,RI=c=>typeof c=="object"&&typeof(c==null?void 0:c.name)=="string",LI=CN.bind(null,vS,RI);var jw;const $w=class $w{constructor(){Ee(this,"_capability",Promise.withResolvers());Ee(this,"_transport",null);Ee(this,"_worker",null);Ee(this,"docId",`d${Fr($w,jw)._++}`);Ee(this,"destroyed",!1);Ee(this,"onPassword",null);Ee(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,n,s,a;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((n=this._transport)==null?void 0:n.destroy())}catch(o){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,o}this._transport=null,(a=this._worker)==null||a.destroy(),this._worker=null}async getData(){return this._transport.getData()}};jw=new WeakMap,P($w,jw,0);let yS=$w;class hC{constructor(t,n,s=!1,a=null){this.length=t,this.initialData=n,this.progressiveDone=s,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,n){for(const s of this._rangeListeners)s(t,n)}onDataProgress(t,n){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(t,n)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const n of this._progressiveReadListeners)n(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,n){Rt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class NI{constructor(t,n){this._pdfInfo=t,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return at(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(n)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Zo,Kh,Pv;class II{constructor(t,n,s,a=!1){P(this,Kh);P(this,Zo,!1);this._pageIndex=t,this._pageInfo=n,this._transport=s,this._stats=a?new Wx:null,this._pdfBug=a,this.commonObjs=s.commonObjs,this.objs=new dC,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:n=this.rotate,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}={}){return new S0({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:n,offsetX:s,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,n)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return at(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:n,intent:s="display",annotationMode:a=Cl.ENABLE,transform:o=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:p=null,pageColors:m=null,printAnnotationStorage:v=null,isEditing:y=!1}){var j,z;(j=this._stats)==null||j.time("Overall");const b=this._transport.getRenderingIntent(s,a,v,y),{renderingIntent:_,cacheKey:k}=b;E(this,Zo,!1),h||(h=this._transport.getOptionalContentConfig(_));let x=this._intentStates.get(k);x||(x=Object.create(null),this._intentStates.set(k,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const C=!!(_&Bs.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(z=this._stats)==null||z.time("Page Request"),this._pumpOperatorList(b));const N=V=>{var G;x.renderTasks.delete(F),C&&E(this,Zo,!0),R(this,Kh,Pv).call(this),V?(F.capability.reject(V),this._abortOperatorList({intentState:x,reason:V instanceof Error?V:new Error(V)})):F.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(G=globalThis.Stats)!=null&&G.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},F=new bS({callback:N,params:{canvasContext:t,viewport:n,transform:o,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:p,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:m});(x.renderTasks||(x.renderTasks=new Set)).add(F);const D=F.task;return Promise.all([x.displayReadyCapability.promise,h]).then(([V,G])=>{var ee;if(this.destroyed){N();return}if((ee=this._stats)==null||ee.time("Rendering"),!(G.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");F.initializeGraphics({transparency:V,optionalContentConfig:G}),F.operatorListChanged()}).catch(N),D}getOperatorList({intent:t="display",annotationMode:n=Cl.ENABLE,printAnnotationStorage:s=null,isEditing:a=!1}={}){var m;function o(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(p))}const u=this._transport.getRenderingIntent(t,n,s,a,!0);let h=this._intentStates.get(u.cacheKey);h||(h=Object.create(null),this._intentStates.set(u.cacheKey,h));let p;return h.opListReadCapability||(p=Object.create(null),p.operatorListChanged=o,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||(h.renderTasks=new Set)).add(p),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(m=this._stats)==null||m.time("Page Request"),this._pumpOperatorList(u)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:n===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>qv.textContent(s));const n=this.streamTextContent(t);return new Promise(function(s,a){function o(){u.read().then(function({value:p,done:m}){if(m){s(h);return}h.lang??(h.lang=p.lang),Object.assign(h.styles,p.styles),h.items.push(...p.items),o()},a)}const u=n.getReader(),h={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const s of n.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),E(this,Zo,!1),Promise.all(t)}cleanup(t=!1){E(this,Zo,!0);const n=R(this,Kh,Pv).call(this);return t&&n&&this._stats&&(this._stats=new Wx),n}_startRenderPage(t,n){var a,o;const s=this._intentStates.get(n);s&&((a=this._stats)==null||a.timeEnd("Page Request"),(o=s.displayReadyCapability)==null||o.resolve(t))}_renderPageChunk(t,n){for(let s=0,a=t.length;s<a;s++)n.operatorList.fnArray.push(t.fnArray[s]),n.operatorList.argsArray.push(t.argsArray[s]);n.operatorList.lastChunk=t.lastChunk,n.operatorList.separateAnnots=t.separateAnnots;for(const s of n.renderTasks)s.operatorListChanged();t.lastChunk&&R(this,Kh,Pv).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:n,annotationStorageSerializable:s,modifiedIds:a}){const{map:o,transfer:u}=s,p=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:o,modifiedIds:a},u).getReader(),m=this._intentStates.get(n);m.streamReader=p;const v=()=>{p.read().then(({value:y,done:b})=>{if(b){m.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,m),v())},y=>{if(m.streamReader=null,!this._transport.destroyed){if(m.operatorList){m.operatorList.lastChunk=!0;for(const b of m.renderTasks)b.operatorListChanged();R(this,Kh,Pv).call(this)}if(m.displayReadyCapability)m.displayReadyCapability.reject(y);else if(m.opListReadCapability)m.opListReadCapability.reject(y);else throw y}})};v()}_abortOperatorList({intentState:t,reason:n,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(n instanceof yE){let a=AI;n.extraDelay>0&&n.extraDelay<1e3&&(a+=n.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},a);return}}if(t.streamReader.cancel(new pu(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}Zo=new WeakMap,Kh=new WeakSet,Pv=function(){if(!d(this,Zo)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),E(this,Zo,!1),!0};var el,zw;class MI{constructor(){P(this,el,new Map);P(this,zw,Promise.resolve())}postMessage(t,n){const s={data:structuredClone(t,n?{transfer:n}:null)};d(this,zw).then(()=>{for(const[a]of d(this,el))a.call(this,s)})}addEventListener(t,n,s=null){let a=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:o}=s;if(o.aborted){Ve("LoopbackPort - cannot use an `aborted` signal.");return}const u=()=>this.removeEventListener(t,n);a=()=>o.removeEventListener("abort",u),o.addEventListener("abort",u)}d(this,el).set(n,a)}removeEventListener(t,n){const s=d(this,el).get(n);s==null||s(),d(this,el).delete(n)}terminate(){for(const[,t]of d(this,el))t==null||t();d(this,el).clear()}}el=new WeakMap,zw=new WeakMap;var Bw,Qh,Jh,Mf,Z0,Of,ew;const Wt=class Wt{constructor({name:t=null,port:n=null,verbosity:s=yN()}={}){P(this,Mf);var a;if(this.name=t,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,n){if((a=d(Wt,Jh))!=null&&a.has(n))throw new Error("Cannot use more than one PDFWorker per port.");(d(Wt,Jh)||E(Wt,Jh,new WeakMap)).set(n,this),this._initializeFromPort(n);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new xv("main","worker",t),this._messageHandler.on("ready",function(){}),R(this,Mf,Z0).call(this)}_initialize(){if(d(Wt,Qh)||d(Wt,Of,ew)){this._setupFakeWorker();return}let{workerSrc:t}=Wt;try{Wt._isSameOrigin(window.location,t)||(t=Wt._createCDNWrapper(new URL(t,window.location).href));const n=new Worker(t,{type:"module"}),s=new xv("main","worker",n),a=()=>{o.abort(),s.destroy(),n.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;n.addEventListener("error",()=>{this._webWorker||a()},{signal:o.signal}),s.on("test",h=>{if(o.abort(),this.destroyed||!h){a();return}this._messageHandler=s,this._port=n,this._webWorker=n,R(this,Mf,Z0).call(this)}),s.on("ready",h=>{if(o.abort(),this.destroyed){a();return}try{u()}catch{this._setupFakeWorker()}});const u=()=>{const h=new Uint8Array;s.send("test",h,[h.buffer])};u();return}catch{nb("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){d(Wt,Qh)||(Ve("Setting up fake worker."),E(Wt,Qh,!0)),Wt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const n=new MI;this._port=n;const s=`fake${Fr(Wt,Bw)._++}`,a=new xv(s+"_worker",s,n);t.setup(a,n),this._messageHandler=new xv(s,s+"_worker",n),R(this,Mf,Z0).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,n,s;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(n=d(Wt,Jh))==null||n.delete(this._port),this._port=null,(s=this._messageHandler)==null||s.destroy(),this._messageHandler=null}static fromPort(t){var s;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const n=(s=d(this,Jh))==null?void 0:s.get(t.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new Wt(t)}static get workerSrc(){if(gl.workerSrc)return gl.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return at(this,"_setupFakeWorkerGlobal",(async()=>d(this,Of,ew)?d(this,Of,ew):(await import(this.workerSrc)).WorkerMessageHandler)())}};Bw=new WeakMap,Qh=new WeakMap,Jh=new WeakMap,Mf=new WeakSet,Z0=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Of=new WeakSet,ew=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},P(Wt,Of),P(Wt,Bw,0),P(Wt,Qh,!1),P(Wt,Jh),dr&&(E(Wt,Qh,!0),gl.workerSrc||(gl.workerSrc="./pdf.worker.mjs")),Wt._isSameOrigin=(t,n)=>{const s=URL.parse(t);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const a=new URL(n,s);return s.origin===a.origin},Wt._createCDNWrapper=t=>{const n=`await import("${t}");`;return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))};let af=Wt;var tl,ya,Df,Ff,nl,Zh,Rv;class OI{constructor(t,n,s,a,o){P(this,Zh);P(this,tl,new Map);P(this,ya,new Map);P(this,Df,new Map);P(this,Ff,new Map);P(this,nl,null);this.messageHandler=t,this.loadingTask=n,this.commonObjs=new dC,this.fontLoader=new FN({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return at(this,"annotationStorage",new EE)}getRenderingIntent(t,n=Cl.ENABLE,s=null,a=!1,o=!1){let u=Bs.DISPLAY,h=aS;switch(t){case"any":u=Bs.ANY;break;case"display":break;case"print":u=Bs.PRINT;break;default:Ve(`getRenderingIntent - invalid intent: ${t}`)}const p=u&Bs.PRINT&&s instanceof WA?s:this.annotationStorage;switch(n){case Cl.DISABLE:u+=Bs.ANNOTATIONS_DISABLE;break;case Cl.ENABLE:break;case Cl.ENABLE_FORMS:u+=Bs.ANNOTATIONS_FORMS;break;case Cl.ENABLE_STORAGE:u+=Bs.ANNOTATIONS_STORAGE,h=p.serializable;break;default:Ve(`getRenderingIntent - invalid annotationMode: ${n}`)}a&&(u+=Bs.IS_EDITING),o&&(u+=Bs.OPLIST);const{ids:m,hash:v}=p.modifiedIds,y=[u,h.hash,v];return{renderingIntent:u,cacheKey:y.join("_"),annotationStorageSerializable:h,modifiedIds:m}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=d(this,nl))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const a of d(this,ya).values())t.push(a._destroy());d(this,ya).clear(),d(this,Df).clear(),d(this,Ff).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{var a,o;this.commonObjs.clear(),this.fontLoader.clear(),d(this,tl).clear(),this.filterFactory.destroy(),Gv.cleanup(),(a=this._networkStream)==null||a.cancelAllRequests(new pu("Worker was terminated.")),(o=this.messageHandler)==null||o.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:n}=this;t.on("GetReader",(s,a)=>{vn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:u}){if(u){a.close();return}vn(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("ReaderHeadersReady",async s=>{var h;await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:o,contentLength:u}=this._fullReader;return(!a||!o)&&(this._lastProgress&&((h=n.onProgress)==null||h.call(n,this._lastProgress)),this._fullReader.onProgress=p=>{var m;(m=n.onProgress)==null||m.call(n,{loaded:p.loaded,total:p.total})}),{isStreamingSupported:a,isRangeSupported:o,contentLength:u}}),t.on("GetRangeReader",(s,a)=>{vn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(s.begin,s.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:u,done:h}){if(h){a.close();return}vn(u instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(u),1,[u])}).catch(u=>{a.error(u)})},a.onCancel=u=>{o.cancel(u),a.ready.catch(h=>{if(!this.destroyed)throw h})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,n._capability.resolve(new NI(s,this))}),t.on("DocException",s=>{n._capability.reject(Xr(s))}),t.on("PasswordRequest",s=>{E(this,nl,Promise.withResolvers());try{if(!n.onPassword)throw Xr(s);const a=o=>{o instanceof Error?d(this,nl).reject(o):d(this,nl).resolve({password:o})};n.onPassword(a,s.code)}catch(a){d(this,nl).reject(a)}return d(this,nl).promise}),t.on("DataLoaded",s=>{var a;(a=n.onProgress)==null||a.call(n,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;d(this,ya).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,a,o])=>{var u;if(this.destroyed||this.commonObjs.has(s))return null;switch(a){case"Font":if("error"in o){const v=o.error;Ve(`Error during font loading: ${v}`),this.commonObjs.resolve(s,v);break}const h=this._params.pdfBug&&((u=globalThis.FontInspector)!=null&&u.enabled)?(v,y)=>globalThis.FontInspector.fontAdded(v,y):null,p=new jN(o,h);this.fontLoader.bind(p).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!p.fontExtraProperties&&p.data&&(p.data=null),this.commonObjs.resolve(s,p)});break;case"CopyLocalImage":const{imageRef:m}=o;vn(m,"The imageRef must be defined.");for(const v of d(this,ya).values())for(const[,y]of v.objs)if((y==null?void 0:y.ref)===m)return y.dataLen?(this.commonObjs.resolve(s,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,o);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([s,a,o,u])=>{var p;if(this.destroyed)return;const h=d(this,ya).get(a);if(!h.objs.has(s)){if(h._intentStates.size===0){(p=u==null?void 0:u.bitmap)==null||p.close();return}switch(o){case"Image":case"Pattern":h.objs.resolve(s,u);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",s=>{var a;this.destroyed||(a=n.onProgress)==null||a.call(n,{loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[s.type];if(!a)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&Ve("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((s=this._fullReader)==null?void 0:s.filename)??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=t-1,s=d(this,Df).get(n);if(s)return s;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&d(this,Ff).set(o.refStr,t);const u=new II(n,o,this,this._params.pdfBug);return d(this,ya).set(n,u),u});return d(this,Df).set(n,a),a}getPageIndex(t){return vS(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:n})}getFieldObjects(){return R(this,Zh,Rv).call(this,"GetFieldObjects")}hasJSActions(){return R(this,Zh,Rv).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return R(this,Zh,Rv).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return R(this,Zh,Rv).call(this,"GetOptionalContentConfig").then(n=>new oI(n,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",n=d(this,tl).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,null).then(a=>{var o,u;return{info:a[0],metadata:a[1]?new iI(a[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((u=this._fullReader)==null?void 0:u.contentLength)??null}});return d(this,tl).set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of d(this,ya).values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),d(this,tl).clear(),this.filterFactory.destroy(!0),Gv.cleanup()}}cachedPageNumber(t){if(!vS(t))return null;const n=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return d(this,Ff).get(n)??null}}tl=new WeakMap,ya=new WeakMap,Df=new WeakMap,Ff=new WeakMap,nl=new WeakMap,Zh=new WeakSet,Rv=function(t,n=null){const s=d(this,tl).get(t);if(s)return s;const a=this.messageHandler.sendWithPromise(t,n);return d(this,tl).set(t,a),a};const mv=Symbol("INITIAL_DATA");var Ls,Oy,wS;class dC{constructor(){P(this,Oy);P(this,Ls,Object.create(null))}get(t,n=null){if(n){const a=R(this,Oy,wS).call(this,t);return a.promise.then(()=>n(a.data)),null}const s=d(this,Ls)[t];if(!s||s.data===mv)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const n=d(this,Ls)[t];return!!n&&n.data!==mv}delete(t){const n=d(this,Ls)[t];return!n||n.data===mv?!1:(delete d(this,Ls)[t],!0)}resolve(t,n=null){const s=R(this,Oy,wS).call(this,t);s.data=n,s.resolve()}clear(){var t;for(const n in d(this,Ls)){const{data:s}=d(this,Ls)[n];(t=s==null?void 0:s.bitmap)==null||t.close()}E(this,Ls,Object.create(null))}*[Symbol.iterator](){for(const t in d(this,Ls)){const{data:n}=d(this,Ls)[t];n!==mv&&(yield[t,n])}}}Ls=new WeakMap,Oy=new WeakSet,wS=function(t){var n;return(n=d(this,Ls))[t]||(n[t]={...Promise.withResolvers(),data:mv})};var ql;class DI{constructor(t){P(this,ql,null);Ee(this,"onContinue",null);Ee(this,"onError",null);E(this,ql,t)}get promise(){return d(this,ql).capability.promise}cancel(t=0){d(this,ql).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=d(this,ql).operatorList;if(!t)return!1;const{annotationCanvasMap:n}=d(this,ql);return t.form||t.canvas&&(n==null?void 0:n.size)>0}}ql=new WeakMap;var Xl,ed;const bh=class bh{constructor({callback:t,params:n,objs:s,commonObjs:a,annotationCanvasMap:o,operatorList:u,pageIndex:h,canvasFactory:p,filterFactory:m,useRequestAnimationFrame:v=!1,pdfBug:y=!1,pageColors:b=null}){P(this,Xl,null);this.callback=t,this.params=n,this.objs=s,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=u,this._pageIndex=h,this.canvasFactory=p,this.filterFactory=m,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=v===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new DI(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:n}){var h,p;if(this.cancelled)return;if(this._canvas){if(d(bh,ed).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");d(bh,ed).add(this._canvas)}this._pdfBug&&((h=globalThis.StepperManager)!=null&&h.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:a,transform:o,background:u}=this.params;this.gfx=new sf(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:a,transparency:t,background:u}),this.operatorListIdx=0,this.graphicsReady=!0,(p=this.graphicsReadyCallback)==null||p.call(this)}cancel(t=null,n=0){var s,a,o;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),d(this,Xl)&&(window.cancelAnimationFrame(d(this,Xl)),E(this,Xl,null)),d(bh,ed).delete(this._canvas),t||(t=new yE(`Rendering cancelled, page ${this._pageIndex+1}`,n)),this.callback(t),(o=(a=this.task).onError)==null||o.call(a,t)}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?E(this,Xl,window.requestAnimationFrame(()=>{E(this,Xl,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),d(bh,ed).delete(this._canvas),this.callback())))}};Xl=new WeakMap,ed=new WeakMap,P(bh,ed,new WeakSet);let bS=bh;const FI="5.1.91",jI="45cbe8bb0";function uk(c){return Math.floor(Math.max(0,Math.min(1,c))*255).toString(16).padStart(2,"0")}function vv(c){return Math.max(0,Math.min(255,255*c))}class ck{static CMYK_G([t,n,s,a]){return["G",1-Math.min(1,.3*t+.59*s+.11*n+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=vv(t),[t,t,t]}static G_HTML([t]){const n=uk(t);return`#${n}${n}${n}`}static RGB_G([t,n,s]){return["G",.3*t+.59*n+.11*s]}static RGB_rgb(t){return t.map(vv)}static RGB_HTML(t){return`#${t.map(uk).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,n,s,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,s+a),1-Math.min(1,n+a)]}static CMYK_rgb([t,n,s,a]){return[vv(1-Math.min(1,t+a)),vv(1-Math.min(1,s+a)),vv(1-Math.min(1,n+a))]}static CMYK_HTML(t){const n=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(n)}static RGB_CMYK([t,n,s]){const a=1-t,o=1-n,u=1-s,h=Math.min(a,o,u);return["CMYK",a,o,u,h]}}class $I{create(t,n,s=!1){if(t<=0||n<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),s||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${n}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${n}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Rt("Abstract method `_createSVG` called.")}}class kw extends $I{_createSVG(t){return document.createElementNS(Do,t)}}class fC{static setupStorage(t,n,s,a,o){const u=a.getValue(n,{value:null});switch(s.name){case"textarea":if(u.value!==null&&(t.textContent=u.value),o==="print")break;t.addEventListener("input",h=>{a.setValue(n,{value:h.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(u.value===s.attributes.xfaOn?t.setAttribute("checked",!0):u.value===s.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",h=>{a.setValue(n,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(u.value!==null&&t.setAttribute("value",u.value),o==="print")break;t.addEventListener("input",h=>{a.setValue(n,{value:h.target.value})})}break;case"select":if(u.value!==null){t.setAttribute("value",u.value);for(const h of s.children)h.attributes.value===u.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}t.addEventListener("input",h=>{const p=h.target.options,m=p.selectedIndex===-1?"":p[p.selectedIndex].value;a.setValue(n,{value:m})});break}}static setAttributes({html:t,element:n,storage:s=null,intent:a,linkService:o}){const{attributes:u}=n,h=t instanceof HTMLAnchorElement;u.type==="radio"&&(u.name=`${u.name}-${a}`);for(const[p,m]of Object.entries(u))if(m!=null)switch(p){case"class":m.length&&t.setAttribute(p,m.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",m);break;case"style":Object.assign(t.style,m);break;case"textContent":t.textContent=m;break;default:(!h||p!=="href"&&p!=="newWindow")&&t.setAttribute(p,m)}h&&o.addLinkAttributes(t,u.href,u.newWindow),s&&u.dataId&&this.setupStorage(t,u.dataId,n,s)}static render(t){var y,b;const n=t.annotationStorage,s=t.linkService,a=t.xfaHtml,o=t.intent||"display",u=document.createElement(a.name);a.attributes&&this.setAttributes({html:u,element:a,intent:o,linkService:s});const h=o!=="richText",p=t.div;if(p.append(u),t.viewport){const _=`matrix(${t.viewport.transform.join(",")})`;p.style.transform=_}h&&p.setAttribute("class","xfaLayer xfaFont");const m=[];if(a.children.length===0){if(a.value){const _=document.createTextNode(a.value);u.append(_),h&&qv.shouldBuildText(a.name)&&m.push(_)}return{textDivs:m}}const v=[[a,-1,u]];for(;v.length>0;){const[_,k,x]=v.at(-1);if(k+1===_.children.length){v.pop();continue}const C=_.children[++v.at(-1)[1]];if(C===null)continue;const{name:N}=C;if(N==="#text"){const D=document.createTextNode(C.value);m.push(D),x.append(D);continue}const F=(y=C==null?void 0:C.attributes)!=null&&y.xmlns?document.createElementNS(C.attributes.xmlns,N):document.createElement(N);if(x.append(F),C.attributes&&this.setAttributes({html:F,element:C,storage:n,intent:o,linkService:s}),((b=C.children)==null?void 0:b.length)>0)v.push([C,-1,F]);else if(C.value){const D=document.createTextNode(C.value);h&&qv.shouldBuildText(N)&&m.push(D),F.append(D)}}for(const _ of p.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))_.setAttribute("readOnly",!0);return{textDivs:m}}static update(t){const n=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=n,t.div.hidden=!1}}const k0=1e3,zI=9,Pd=new WeakSet;class hk{static create(t){switch(t.data.annotationType){case gn.LINK:return new pC(t);case gn.TEXT:return new BI(t);case gn.WIDGET:switch(t.data.fieldType){case"Tx":return new UI(t);case"Btn":return t.data.radioButton?new vC(t):t.data.checkBox?new VI(t):new WI(t);case"Ch":return new GI(t);case"Sig":return new HI(t)}return new Md(t);case gn.POPUP:return new SS(t);case gn.FREETEXT:return new SC(t);case gn.LINE:return new XI(t);case gn.SQUARE:return new YI(t);case gn.CIRCLE:return new KI(t);case gn.POLYLINE:return new EC(t);case gn.CARET:return new JI(t);case gn.INK:return new AE(t);case gn.POLYGON:return new QI(t);case gn.HIGHLIGHT:return new xC(t);case gn.UNDERLINE:return new ZI(t);case gn.SQUIGGLY:return new eM(t);case gn.STRIKEOUT:return new tM(t);case gn.STAMP:return new kC(t);case gn.FILEATTACHMENT:return new nM(t);default:return new fn(t)}}}var td,jf,$f,Dy,_S;const NE=class NE{constructor(t,{isRenderable:n=!1,ignoreBorder:s=!1,createQuadrilaterals:a=!1}={}){P(this,Dy);P(this,td,null);P(this,jf,!1);P(this,$f,null);this.isRenderable=n,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,n&&(this.container=this._createContainer(s)),a&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:n,richText:s}){return!!(t!=null&&t.str||n!=null&&n.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return NE._hasPopupData(this.data)}updateEdited(t){var s;if(!this.container)return;d(this,td)||E(this,td,{rect:this.data.rect.slice(0)});const{rect:n}=t;n&&R(this,Dy,_S).call(this,n),(s=d(this,$f))==null||s.popup.updateEdited(t)}resetEdited(){var t;d(this,td)&&(R(this,Dy,_S).call(this,d(this,td).rect),(t=d(this,$f))==null||t.popup.resetEdited(),E(this,td,null))}_createContainer(t){const{data:n,parent:{page:s,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",n.id),this instanceof Md||(o.tabIndex=k0);const{style:u}=o;if(u.zIndex=this.parent.zIndex++,n.alternativeText&&(o.title=n.alternativeText),n.noRotate&&o.classList.add("norotate"),!n.rect||this instanceof SS){const{rotation:x}=n;return!n.hasOwnCanvas&&x!==0&&this.setRotation(x,o),o}const{width:h,height:p}=this;if(!t&&n.borderStyle.width>0){u.borderWidth=`${n.borderStyle.width}px`;const x=n.borderStyle.horizontalCornerRadius,C=n.borderStyle.verticalCornerRadius;if(x>0||C>0){const F=`calc(${x}px * var(--total-scale-factor)) / calc(${C}px * var(--total-scale-factor))`;u.borderRadius=F}else if(this instanceof vC){const F=`calc(${h}px * var(--total-scale-factor)) / calc(${p}px * var(--total-scale-factor))`;u.borderRadius=F}switch(n.borderStyle.style){case Gd.SOLID:u.borderStyle="solid";break;case Gd.DASHED:u.borderStyle="dashed";break;case Gd.BEVELED:Ve("Unimplemented border style: beveled");break;case Gd.INSET:Ve("Unimplemented border style: inset");break;case Gd.UNDERLINE:u.borderBottomStyle="solid";break}const N=n.borderColor||null;N?(E(this,jf,!0),u.borderColor=Te.makeHexColor(N[0]|0,N[1]|0,N[2]|0)):u.borderWidth=0}const m=Te.normalizeRect([n.rect[0],s.view[3]-n.rect[1]+s.view[1],n.rect[2],s.view[3]-n.rect[3]+s.view[1]]),{pageWidth:v,pageHeight:y,pageX:b,pageY:_}=a.rawDims;u.left=`${100*(m[0]-b)/v}%`,u.top=`${100*(m[1]-_)/y}%`;const{rotation:k}=n;return n.hasOwnCanvas||k===0?(u.width=`${100*h/v}%`,u.height=`${100*p/y}%`):this.setRotation(k,o),o}setRotation(t,n=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:a}=this.parent.viewport.rawDims;let{width:o,height:u}=this;t%180!==0&&([o,u]=[u,o]),n.style.width=`${100*o/s}%`,n.style.height=`${100*u/a}%`,n.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(n,s,a)=>{const o=a.detail[n],u=o[0],h=o.slice(1);a.target.style[s]=ck[`${u}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[s]:ck[`${u}_rgb`](h)})};return at(this,"_commonActions",{display:n=>{const{display:s}=n.detail,a=s%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:s===1||s===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:s}=n.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{t("bgColor","backgroundColor",n)},fillColor:n=>{t("fillColor","backgroundColor",n)},fgColor:n=>{t("fgColor","color",n)},textColor:n=>{t("textColor","color",n)},borderColor:n=>{t("borderColor","borderColor",n)},strokeColor:n=>{t("strokeColor","borderColor",n)},rotation:n=>{const s=n.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,n){const s=this._commonActions;for(const a of Object.keys(n.detail)){const o=t[a]||s[a];o==null||o(n)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const s=this._commonActions;for(const[a,o]of Object.entries(n)){const u=s[a];if(u){const h={detail:{[a]:o},target:t};u(h),delete n[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[n,s,a,o]=this.data.rect.map(x=>Math.fround(x));if(t.length===8){const[x,C,N,F]=t.subarray(2,6);if(a===x&&o===C&&n===N&&s===F)return}const{style:u}=this.container;let h;if(d(this,jf)){const{borderColor:x,borderWidth:C}=u;u.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const p=a-n,m=o-s,{svgFactory:v}=this,y=v.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);const b=v.createElement("defs");y.append(b);const _=v.createElement("clipPath"),k=`clippath_${this.data.id}`;_.setAttribute("id",k),_.setAttribute("clipPathUnits","objectBoundingBox"),b.append(_);for(let x=2,C=t.length;x<C;x+=8){const N=t[x],F=t[x+1],D=t[x+2],j=t[x+3],z=v.createElement("rect"),V=(D-n)/p,G=(o-F)/m,ee=(N-D)/p,oe=(F-j)/m;z.setAttribute("x",V),z.setAttribute("y",G),z.setAttribute("width",ee),z.setAttribute("height",oe),_.append(z),h==null||h.push(`<rect vector-effect="non-scaling-stroke" x="${V}" y="${G}" width="${ee}" height="${oe}"/>`)}d(this,jf)&&(h.push("</g></svg>')"),u.backgroundImage=h.join("")),this.container.append(y),this.container.style.clipPath=`url(#${k})`}_createPopup(){const{data:t}=this,n=E(this,$f,new SS({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(n.render())}render(){Rt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,n=null){const s=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:u,exportValues:h}of a){if(o===-1||u===n)continue;const p=typeof h=="string"?h:null,m=document.querySelector(`[data-element-id="${u}"]`);if(m&&!Pd.has(m)){Ve(`_getElementsByName - element not allowed: ${u}`);continue}s.push({id:u,exportValue:p,domElement:m})}return s}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,u=a.getAttribute("data-element-id");u!==n&&Pd.has(a)&&s.push({id:u,exportValue:o,domElement:a})}return s}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const n of t)n.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:t,editId:n})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};td=new WeakMap,jf=new WeakMap,$f=new WeakMap,Dy=new WeakSet,_S=function(t){const{container:{style:n},data:{rect:s,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:u,pageX:h,pageY:p}}}}=this;s==null||s.splice(0,4,...t),n.left=`${100*(t[0]-h)/o}%`,n.top=`${100*(u-t[3]+p)/u}%`,a===0?(n.width=`${100*(t[2]-t[0])/o}%`,n.height=`${100*(t[3]-t[1])/u}%`):this.setRotation(a)};let fn=NE;var Us,gh,gC,mC;class pC extends fn{constructor(n,s=null){super(n,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});P(this,Us);this.isTooltipOnly=n.data.isTooltipOnly}render(){const{data:n,linkService:s}=this,a=document.createElement("a");a.setAttribute("data-element-id",n.id);let o=!1;return n.url?(s.addLinkAttributes(a,n.url,n.newWindow),o=!0):n.action?(this._bindNamedAction(a,n.action),o=!0):n.attachment?(R(this,Us,gC).call(this,a,n.attachment,n.attachmentDest),o=!0):n.setOCGState?(R(this,Us,mC).call(this,a,n.setOCGState),o=!0):n.dest?(this._bindLink(a,n.dest),o=!0):(n.actions&&(n.actions.Action||n.actions["Mouse Up"]||n.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(a,n),o=!0),n.resetForm?(this._bindResetFormAction(a,n.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(a,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(a),this.container}_bindLink(n,s){n.href=this.linkService.getDestinationHash(s),n.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&R(this,Us,gh).call(this)}_bindNamedAction(n,s){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeNamedAction(s),!1),R(this,Us,gh).call(this)}_bindJSAction(n,s){n.href=this.linkService.getAnchorUrl("");const a=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(s.actions)){const u=a.get(o);u&&(n[u]=()=>{var h;return(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:o}}),!1})}n.onclick||(n.onclick=()=>!1),R(this,Us,gh).call(this)}_bindResetFormAction(n,s){const a=n.onclick;if(a||(n.href=this.linkService.getAnchorUrl("")),R(this,Us,gh).call(this),!this._fieldObjects){Ve('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),a||(n.onclick=()=>!1);return}n.onclick=()=>{var y;a==null||a();const{fields:o,refs:u,include:h}=s,p=[];if(o.length!==0||u.length!==0){const b=new Set(u);for(const _ of o){const k=this._fieldObjects[_]||[];for(const{id:x}of k)b.add(x)}for(const _ of Object.values(this._fieldObjects))for(const k of _)b.has(k.id)===h&&p.push(k)}else for(const b of Object.values(this._fieldObjects))p.push(...b);const m=this.annotationStorage,v=[];for(const b of p){const{id:_}=b;switch(v.push(_),b.type){case"text":{const x=b.defaultValue||"";m.setValue(_,{value:x});break}case"checkbox":case"radiobutton":{const x=b.defaultValue===b.exportValues;m.setValue(_,{value:x});break}case"combobox":case"listbox":{const x=b.defaultValue||"";m.setValue(_,{value:x});break}default:continue}const k=document.querySelector(`[data-element-id="${_}"]`);if(k){if(!Pd.has(k)){Ve(`_bindResetFormAction - element not allowed: ${_}`);continue}}else continue;k.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:v,name:"ResetForm"}})),!1}}}Us=new WeakSet,gh=function(){this.container.setAttribute("data-internal-link","")},gC=function(n,s,a=null){n.href=this.linkService.getAnchorUrl(""),s.description&&(n.title=s.description),n.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(s.content,s.filename,a),!1},R(this,Us,gh).call(this)},mC=function(n,s){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeSetOCGState(s),!1),R(this,Us,gh).call(this)};class BI extends fn{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Md extends fn{render(){return this.container}showElementAndHideCanvas(t){var n;this.data.hasOwnCanvas&&(((n=t.previousSibling)==null?void 0:n.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return mr.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,n,s,a,o){s.includes("mouse")?t.addEventListener(s,u=>{var h;(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(u),shift:u.shiftKey,modifier:this._getKeyModifier(u)}})}):t.addEventListener(s,u=>{var h;if(s==="blur"){if(!n.focused||!u.relatedTarget)return;n.focused=!1}else if(s==="focus"){if(n.focused)return;n.focused=!0}o&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(u)}}))})}_setEventListeners(t,n,s,a){var o,u,h;for(const[p,m]of s)(m==="Action"||(o=this.data.actions)!=null&&o[m])&&((m==="Focus"||m==="Blur")&&(n||(n={focused:!1})),this._setEventListener(t,n,p,m,a),m==="Focus"&&!((u=this.data.actions)!=null&&u.Blur)?this._setEventListener(t,n,"blur","Blur",null):m==="Blur"&&!((h=this.data.actions)!=null&&h.Focus)&&this._setEventListener(t,n,"focus","Focus",null))}_setBackgroundColor(t){const n=this.data.backgroundColor||null;t.style.backgroundColor=n===null?"transparent":Te.makeHexColor(n[0],n[1],n[2])}_setTextStyle(t){const n=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||zI,o=t.style;let u;const h=2,p=m=>Math.round(10*m)/10;if(this.data.multiLine){const m=Math.abs(this.data.rect[3]-this.data.rect[1]-h),v=Math.round(m/(v1*a))||1,y=m/v;u=Math.min(a,p(y/v1))}else{const m=Math.abs(this.data.rect[3]-this.data.rect[1]-h);u=Math.min(a,p(m/v1))}o.fontSize=`calc(${u}px * var(--total-scale-factor))`,o.color=Te.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=n[this.data.textAlignment])}_setRequired(t,n){n?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",n)}}class UI extends Md{constructor(t){const n=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:n})}setPropertyOnSiblings(t,n,s,a){const o=this.annotationStorage;for(const u of this._getElementsByName(t.name,t.id))u.domElement&&(u.domElement[n]=s),o.setValue(u.id,{[a]:s})}render(){var a,o;const t=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const u=t.getValue(n,{value:this.data.fieldValue});let h=u.value||"";const p=t.getValue(n,{charLimit:this.data.maxLen}).charLimit;p&&h.length>p&&(h=h.slice(0,p));let m=u.formattedValue||((a=this.data.textContent)==null?void 0:a.join(`
`))||null;m&&this.data.comb&&(m=m.replaceAll(/\s+/g,""));const v={userValue:h,formattedValue:m,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=m??h,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",m??h),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Pd.add(s),s.setAttribute("data-element-id",n),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=k0,this._setRequired(s,this.data.required),p&&(s.maxLength=p),s.addEventListener("input",b=>{t.setValue(n,{value:b.target.value}),this.setPropertyOnSiblings(s,"value",b.target.value,"value"),v.formattedValue=null}),s.addEventListener("resetform",b=>{const _=this.data.defaultFieldValue??"";s.value=v.userValue=_,v.formattedValue=null});let y=b=>{const{formattedValue:_}=v;_!=null&&(b.target.value=_),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",_=>{var x;if(v.focused)return;const{target:k}=_;v.userValue&&(k.value=v.userValue),v.lastCommittedValue=k.value,v.commitKey=1,(x=this.data.actions)!=null&&x.Focus||(v.focused=!0)}),s.addEventListener("updatefromsandbox",_=>{this.showElementAndHideCanvas(_.target);const k={value(x){v.userValue=x.detail.value??"",t.setValue(n,{value:v.userValue.toString()}),x.target.value=v.userValue},formattedValue(x){const{formattedValue:C}=x.detail;v.formattedValue=C,C!=null&&x.target!==document.activeElement&&(x.target.value=C),t.setValue(n,{formattedValue:C})},selRange(x){x.target.setSelectionRange(...x.detail.selRange)},charLimit:x=>{var D;const{charLimit:C}=x.detail,{target:N}=x;if(C===0){N.removeAttribute("maxLength");return}N.setAttribute("maxLength",C);let F=v.userValue;!F||F.length<=C||(F=F.slice(0,C),N.value=v.userValue=F,t.setValue(n,{value:F}),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:F,willCommit:!0,commitKey:1,selStart:N.selectionStart,selEnd:N.selectionEnd}}))}};this._dispatchEventFromSandbox(k,_)}),s.addEventListener("keydown",_=>{var C;v.commitKey=1;let k=-1;if(_.key==="Escape"?k=0:_.key==="Enter"&&!this.data.multiLine?k=2:_.key==="Tab"&&(v.commitKey=3),k===-1)return;const{value:x}=_.target;v.lastCommittedValue!==x&&(v.lastCommittedValue=x,v.userValue=x,(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:x,willCommit:!0,commitKey:k,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}))});const b=y;y=null,s.addEventListener("blur",_=>{var x,C;if(!v.focused||!_.relatedTarget)return;(x=this.data.actions)!=null&&x.Blur||(v.focused=!1);const{value:k}=_.target;v.userValue=k,v.lastCommittedValue!==k&&((C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:k,willCommit:!0,commitKey:v.commitKey,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}})),b(_)}),(o=this.data.actions)!=null&&o.Keystroke&&s.addEventListener("beforeinput",_=>{var z;v.lastCommittedValue=null;const{data:k,target:x}=_,{value:C,selectionStart:N,selectionEnd:F}=x;let D=N,j=F;switch(_.inputType){case"deleteWordBackward":{const V=C.substring(0,N).match(/\w*[^\w]*$/);V&&(D-=V[0].length);break}case"deleteWordForward":{const V=C.substring(N).match(/^[^\w]*\w*/);V&&(j+=V[0].length);break}case"deleteContentBackward":N===F&&(D-=1);break;case"deleteContentForward":N===F&&(j+=1);break}_.preventDefault(),(z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:C,change:k||"",willCommit:!1,selStart:D,selEnd:j}})}),this._setEventListeners(s,v,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_=>_.target.value)}if(y&&s.addEventListener("blur",y),this.data.comb){const _=(this.data.rect[2]-this.data.rect[0])/p;s.classList.add("comb"),s.style.letterSpacing=`calc(${_}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class HI extends Md{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class VI extends Md{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,n=this.data,s=n.id;let a=t.getValue(s,{value:n.exportValue===n.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(s,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Pd.add(o),o.setAttribute("data-element-id",s),o.disabled=n.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=n.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",n.exportValue),o.tabIndex=k0,o.addEventListener("change",u=>{const{name:h,checked:p}=u.target;for(const m of this._getElementsByName(h,s)){const v=p&&m.exportValue===n.exportValue;m.domElement&&(m.domElement.checked=v),t.setValue(m.id,{value:v})}t.setValue(s,{value:p})}),o.addEventListener("resetform",u=>{const h=n.defaultFieldValue||"Off";u.target.checked=h===n.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",u=>{const h={value(p){p.target.checked=p.detail.value!=="Off",t.setValue(s,{value:p.target.checked})}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class vC extends Md{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,n=this.data,s=n.id;let a=t.getValue(s,{value:n.fieldValue===n.buttonValue}).value;if(typeof a=="string"&&(a=a!==n.buttonValue,t.setValue(s,{value:a})),a)for(const u of this._getElementsByName(n.fieldName,s))t.setValue(u.id,{value:!1});const o=document.createElement("input");if(Pd.add(o),o.setAttribute("data-element-id",s),o.disabled=n.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=n.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=k0,o.addEventListener("change",u=>{const{name:h,checked:p}=u.target;for(const m of this._getElementsByName(h,s))t.setValue(m.id,{value:!1});t.setValue(s,{value:p})}),o.addEventListener("resetform",u=>{const h=n.defaultFieldValue;u.target.checked=h!=null&&h===n.buttonValue}),this.enableScripting&&this.hasJSActions){const u=n.buttonValue;o.addEventListener("updatefromsandbox",h=>{const p={value:m=>{const v=u===m.detail.value;for(const y of this._getElementsByName(m.target.name)){const b=v&&y.id===s;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(p,h)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class WI extends pC{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const n=t.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class GI extends Md{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,n=this.data.id,s=t.getValue(n,{value:this.data.fieldValue}),a=document.createElement("select");Pd.add(a),a.setAttribute("data-element-id",n),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=k0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",v=>{const y=this.data.defaultFieldValue;for(const b of a.options)b.selected=b.value===y});for(const v of this.data.options){const y=document.createElement("option");y.textContent=v.displayValue,y.value=v.exportValue,s.value.includes(v.exportValue)&&(y.setAttribute("selected",!0),o=!1),a.append(y)}let u=null;if(o){const v=document.createElement("option");v.value=" ",v.setAttribute("hidden",!0),v.setAttribute("selected",!0),a.prepend(v),u=()=>{v.remove(),a.removeEventListener("input",u),u=null},a.addEventListener("input",u)}const h=v=>{const y=v?"value":"textContent",{options:b,multiple:_}=a;return _?Array.prototype.filter.call(b,k=>k.selected).map(k=>k[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let p=h(!1);const m=v=>{const y=v.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",v=>{const y={value(b){u==null||u();const _=b.detail.value,k=new Set(Array.isArray(_)?_:[_]);for(const x of a.options)x.selected=k.has(x.value);t.setValue(n,{value:h(!0)}),p=h(!1)},multipleSelection(b){a.multiple=!0},remove(b){const _=a.options,k=b.detail.remove;_[k].selected=!1,a.remove(k),_.length>0&&Array.prototype.findIndex.call(_,C=>C.selected)===-1&&(_[0].selected=!0),t.setValue(n,{value:h(!0),items:m(b)}),p=h(!1)},clear(b){for(;a.length!==0;)a.remove(0);t.setValue(n,{value:null,items:[]}),p=h(!1)},insert(b){const{index:_,displayValue:k,exportValue:x}=b.detail.insert,C=a.children[_],N=document.createElement("option");N.textContent=k,N.value=x,C?C.before(N):a.append(N),t.setValue(n,{value:h(!0),items:m(b)}),p=h(!1)},items(b){const{items:_}=b.detail;for(;a.length!==0;)a.remove(0);for(const k of _){const{displayValue:x,exportValue:C}=k,N=document.createElement("option");N.textContent=x,N.value=C,a.append(N)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(n,{value:h(!0),items:m(b)}),p=h(!1)},indices(b){const _=new Set(b.detail.indices);for(const k of b.target.options)k.selected=_.has(k.index);t.setValue(n,{value:h(!0)}),p=h(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,v)}),a.addEventListener("input",v=>{var _;const y=h(!0),b=h(!1);t.setValue(n,{value:y}),v.preventDefault(),(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:p,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],v=>v.target.value)):a.addEventListener("input",function(v){t.setValue(n,{value:h(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class SS extends fn{constructor(t){const{data:n,elements:s}=t;super(t,{isRenderable:fn._hasPopupData(n)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new qI({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",n.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(s=>`${vE}${s}`).join(",")),this.container}}var zf,Uw,Hw,Bf,Uf,sn,rl,Hf,Fy,jy,Vf,sl,Gi,il,$y,al,zy,nd,rd,Lt,tw,ES,yC,wC,bC,_C,nw,rw,xS;class qI{constructor({container:t,color:n,elements:s,titleObj:a,modificationDate:o,contentsObj:u,richText:h,parent:p,rect:m,parentRect:v,open:y}){P(this,Lt);P(this,zf,R(this,Lt,bC).bind(this));P(this,Uw,R(this,Lt,xS).bind(this));P(this,Hw,R(this,Lt,rw).bind(this));P(this,Bf,R(this,Lt,nw).bind(this));P(this,Uf,null);P(this,sn,null);P(this,rl,null);P(this,Hf,null);P(this,Fy,null);P(this,jy,null);P(this,Vf,null);P(this,sl,!1);P(this,Gi,null);P(this,il,null);P(this,$y,null);P(this,al,null);P(this,zy,null);P(this,nd,null);P(this,rd,!1);var b;E(this,sn,t),E(this,zy,a),E(this,rl,u),E(this,al,h),E(this,jy,p),E(this,Uf,n),E(this,$y,m),E(this,Vf,v),E(this,Fy,s),E(this,Hf,bE.toDateObject(o)),this.trigger=s.flatMap(_=>_.getElementsToTriggerPopup());for(const _ of this.trigger)_.addEventListener("click",d(this,Bf)),_.addEventListener("mouseenter",d(this,Hw)),_.addEventListener("mouseleave",d(this,Uw)),_.classList.add("popupTriggerArea");for(const _ of s)(b=_.container)==null||b.addEventListener("keydown",d(this,zf));d(this,sn).hidden=!0,y&&R(this,Lt,nw).call(this)}render(){if(d(this,Gi))return;const t=E(this,Gi,document.createElement("div"));if(t.className="popup",d(this,Uf)){const o=t.style.outlineColor=Te.makeHexColor(...d(this,Uf));t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`}const n=document.createElement("span");n.className="header";const s=document.createElement("h1");if(n.append(s),{dir:s.dir,str:s.textContent}=d(this,zy),t.append(n),d(this,Hf)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:d(this,Hf).valueOf()})),n.append(o)}const a=d(this,Lt,tw);if(a)fC.render({xfaHtml:a,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(d(this,rl));t.append(o)}d(this,sn).append(t)}_formatContents({str:t,dir:n}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=n;const a=t.split(/(?:\r\n?|\n)/);for(let o=0,u=a.length;o<u;++o){const h=a[o];s.append(document.createTextNode(h)),o<u-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:t,popupContent:n}){var s;d(this,nd)||E(this,nd,{contentsObj:d(this,rl),richText:d(this,al)}),t&&E(this,il,null),n&&(E(this,al,R(this,Lt,wC).call(this,n)),E(this,rl,null)),(s=d(this,Gi))==null||s.remove(),E(this,Gi,null)}resetEdited(){var t;d(this,nd)&&({contentsObj:Fr(this,rl)._,richText:Fr(this,al)._}=d(this,nd),E(this,nd,null),(t=d(this,Gi))==null||t.remove(),E(this,Gi,null),E(this,il,null))}forceHide(){E(this,rd,this.isVisible),d(this,rd)&&(d(this,sn).hidden=!0)}maybeShow(){d(this,rd)&&(d(this,Gi)||R(this,Lt,rw).call(this),E(this,rd,!1),d(this,sn).hidden=!1)}get isVisible(){return d(this,sn).hidden===!1}}zf=new WeakMap,Uw=new WeakMap,Hw=new WeakMap,Bf=new WeakMap,Uf=new WeakMap,sn=new WeakMap,rl=new WeakMap,Hf=new WeakMap,Fy=new WeakMap,jy=new WeakMap,Vf=new WeakMap,sl=new WeakMap,Gi=new WeakMap,il=new WeakMap,$y=new WeakMap,al=new WeakMap,zy=new WeakMap,nd=new WeakMap,rd=new WeakMap,Lt=new WeakSet,tw=function(){const t=d(this,al),n=d(this,rl);return t!=null&&t.str&&(!(n!=null&&n.str)||n.str===t.str)&&d(this,al).html||null},ES=function(){var t,n,s;return((s=(n=(t=d(this,Lt,tw))==null?void 0:t.attributes)==null?void 0:n.style)==null?void 0:s.fontSize)||0},yC=function(){var t,n,s;return((s=(n=(t=d(this,Lt,tw))==null?void 0:t.attributes)==null?void 0:n.style)==null?void 0:s.color)||null},wC=function(t){const n=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},a={style:{color:d(this,Lt,yC),fontSize:d(this,Lt,ES)?`calc(${d(this,Lt,ES)}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))n.push({name:"span",value:o,attributes:a});return s},bC=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&d(this,sl))&&R(this,Lt,nw).call(this)},_C=function(){if(d(this,il)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:s,pageX:a,pageY:o}}}=d(this,jy);let u=!!d(this,Vf),h=u?d(this,Vf):d(this,$y);for(const k of d(this,Fy))if(!h||Te.intersect(k.data.rect,h)!==null){h=k.data.rect,u=!0;break}const p=Te.normalizeRect([h[0],t[3]-h[1]+t[1],h[2],t[3]-h[3]+t[1]]),v=u?h[2]-h[0]+5:0,y=p[0]+v,b=p[1];E(this,il,[100*(y-a)/n,100*(b-o)/s]);const{style:_}=d(this,sn);_.left=`${d(this,il)[0]}%`,_.top=`${d(this,il)[1]}%`},nw=function(){E(this,sl,!d(this,sl)),d(this,sl)?(R(this,Lt,rw).call(this),d(this,sn).addEventListener("click",d(this,Bf)),d(this,sn).addEventListener("keydown",d(this,zf))):(R(this,Lt,xS).call(this),d(this,sn).removeEventListener("click",d(this,Bf)),d(this,sn).removeEventListener("keydown",d(this,zf)))},rw=function(){d(this,Gi)||this.render(),this.isVisible?d(this,sl)&&d(this,sn).classList.add("focused"):(R(this,Lt,_C).call(this),d(this,sn).hidden=!1,d(this,sn).style.zIndex=parseInt(d(this,sn).style.zIndex)+1e3)},xS=function(){d(this,sn).classList.remove("focused"),!(d(this,sl)||!this.isVisible)&&(d(this,sn).hidden=!0,d(this,sn).style.zIndex=parseInt(d(this,sn).style.zIndex)-1e3)};class SC extends fn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=He.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const n of this.textContent){const s=document.createElement("span");s.textContent=n,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var By;class XI extends fn{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});P(this,By,null)}render(){this.container.classList.add("lineAnnotation");const{data:n,width:s,height:a}=this,o=this.svgFactory.create(s,a,!0),u=E(this,By,this.svgFactory.createElement("svg:line"));return u.setAttribute("x1",n.rect[2]-n.lineCoordinates[0]),u.setAttribute("y1",n.rect[3]-n.lineCoordinates[1]),u.setAttribute("x2",n.rect[2]-n.lineCoordinates[2]),u.setAttribute("y2",n.rect[3]-n.lineCoordinates[3]),u.setAttribute("stroke-width",n.borderStyle.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,By)}addHighlightArea(){this.container.classList.add("highlightArea")}}By=new WeakMap;var Uy;class YI extends fn{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});P(this,Uy,null)}render(){this.container.classList.add("squareAnnotation");const{data:n,width:s,height:a}=this,o=this.svgFactory.create(s,a,!0),u=n.borderStyle.width,h=E(this,Uy,this.svgFactory.createElement("svg:rect"));return h.setAttribute("x",u/2),h.setAttribute("y",u/2),h.setAttribute("width",s-u),h.setAttribute("height",a-u),h.setAttribute("stroke-width",u||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Uy)}addHighlightArea(){this.container.classList.add("highlightArea")}}Uy=new WeakMap;var Hy;class KI extends fn{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});P(this,Hy,null)}render(){this.container.classList.add("circleAnnotation");const{data:n,width:s,height:a}=this,o=this.svgFactory.create(s,a,!0),u=n.borderStyle.width,h=E(this,Hy,this.svgFactory.createElement("svg:ellipse"));return h.setAttribute("cx",s/2),h.setAttribute("cy",a/2),h.setAttribute("rx",s/2-u/2),h.setAttribute("ry",a/2-u/2),h.setAttribute("stroke-width",u||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Hy)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hy=new WeakMap;var Vy;class EC extends fn{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});P(this,Vy,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:n,vertices:s,borderStyle:a,popupRef:o},width:u,height:h}=this;if(!s)return this.container;const p=this.svgFactory.create(u,h,!0);let m=[];for(let y=0,b=s.length;y<b;y+=2){const _=s[y]-n[0],k=n[3]-s[y+1];m.push(`${_},${k}`)}m=m.join(" ");const v=E(this,Vy,this.svgFactory.createElement(this.svgElementName));return v.setAttribute("points",m),v.setAttribute("stroke-width",a.width||1),v.setAttribute("stroke","transparent"),v.setAttribute("fill","transparent"),p.append(v),this.container.append(p),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Vy)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vy=new WeakMap;class QI extends EC{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class JI extends fn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Wy,sd,Gy,kS;class AE extends fn{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});P(this,Gy);P(this,Wy,null);P(this,sd,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?He.HIGHLIGHT:He.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:n,rotation:s,inkLists:a,borderStyle:o,popupRef:u}}=this,{transform:h,width:p,height:m}=R(this,Gy,kS).call(this,s,n),v=this.svgFactory.create(p,m,!0),y=E(this,Wy,this.svgFactory.createElement("svg:g"));v.append(y),y.setAttribute("stroke-width",o.width||1),y.setAttribute("stroke-linecap","round"),y.setAttribute("stroke-linejoin","round"),y.setAttribute("stroke-miterlimit",10),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),y.setAttribute("transform",h);for(let b=0,_=a.length;b<_;b++){const k=this.svgFactory.createElement(this.svgElementName);d(this,sd).push(k),k.setAttribute("points",a[b].join(",")),y.append(k)}return!u&&this.hasPopupData&&this._createPopup(),this.container.append(v),this._editOnDoubleClick(),this.container}updateEdited(n){super.updateEdited(n);const{thickness:s,points:a,rect:o}=n,u=d(this,Wy);if(s>=0&&u.setAttribute("stroke-width",s||1),a)for(let h=0,p=d(this,sd).length;h<p;h++)d(this,sd)[h].setAttribute("points",a[h].join(","));if(o){const{transform:h,width:p,height:m}=R(this,Gy,kS).call(this,this.data.rotation,o);u.parentElement.setAttribute("viewBox",`0 0 ${p} ${m}`),u.setAttribute("transform",h)}}getElementsToTriggerPopup(){return d(this,sd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wy=new WeakMap,sd=new WeakMap,Gy=new WeakSet,kS=function(n,s){switch(n){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class xC extends fn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=He.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class ZI extends fn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class eM extends fn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class tM extends fn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class kC extends fn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=He.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var qy,Xy,AS;class nM extends fn{constructor(n){var a;super(n,{isRenderable:!0});P(this,Xy);P(this,qy,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(a=this.linkService.eventBus)==null||a.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:n,data:s}=this;let a;s.hasAppearance||s.fillAlpha===0?a=document.createElement("div"):(a=document.createElement("img"),a.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(a.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),a.addEventListener("dblclick",R(this,Xy,AS).bind(this)),E(this,qy,a);const{isMac:o}=mr.platform;return n.addEventListener("keydown",u=>{u.key==="Enter"&&(o?u.metaKey:u.ctrlKey)&&R(this,Xy,AS).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():a.classList.add("popupTriggerArea"),n.append(a),n}getElementsToTriggerPopup(){return d(this,qy)}addHighlightArea(){this.container.classList.add("highlightArea")}}qy=new WeakMap,Xy=new WeakSet,AS=function(){var n;(n=this.downloadManager)==null||n.openOrDownloadData(this.content,this.filename)};var Yy,id,Yl,Ky,yu,TS,PS;const IE=class IE{constructor({div:t,accessibilityManager:n,annotationCanvasMap:s,annotationEditorUIManager:a,page:o,viewport:u,structTreeLayer:h}){P(this,yu);P(this,Yy,null);P(this,id,null);P(this,Yl,new Map);P(this,Ky,null);this.div=t,E(this,Yy,n),E(this,id,s),E(this,Ky,h||null),this.page=o,this.viewport=u,this.zIndex=0,this._annotationEditorUIManager=a}hasEditableAnnotations(){return d(this,Yl).size>0}async render(t){var u;const{annotations:n}=t,s=this.div;Cd(s,this.viewport);const a=new Map,o={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new kw,annotationStorage:t.annotationStorage||new EE,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const h of n){if(h.noHTML)continue;const p=h.annotationType===gn.POPUP;if(p){const y=a.get(h.id);if(!y)continue;o.elements=y}else if(h.rect[2]===h.rect[0]||h.rect[3]===h.rect[1])continue;o.data=h;const m=hk.create(o);if(!m.isRenderable)continue;if(!p&&h.popupRef){const y=a.get(h.popupRef);y?y.push(m):a.set(h.popupRef,[m])}const v=m.render();h.hidden&&(v.style.visibility="hidden"),await R(this,yu,TS).call(this,v,h.id),m._isEditable&&(d(this,Yl).set(m.data.id,m),(u=this._annotationEditorUIManager)==null||u.renderAnnotationElement(m))}R(this,yu,PS).call(this)}async addLinkAnnotations(t,n){const s={data:null,layer:this.div,linkService:n,svgFactory:new kw,parent:this};for(const a of t){a.borderStyle||(a.borderStyle=IE._defaultBorderStyle),s.data=a;const o=hk.create(s);if(!o.isRenderable)continue;const u=o.render();await R(this,yu,TS).call(this,u,a.id)}}update({viewport:t}){const n=this.div;this.viewport=t,Cd(n,{rotation:t.rotation}),R(this,yu,PS).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(d(this,Yl).values())}getEditableAnnotation(t){return d(this,Yl).get(t)}static get _defaultBorderStyle(){return at(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Gd.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Yy=new WeakMap,id=new WeakMap,Yl=new WeakMap,Ky=new WeakMap,yu=new WeakSet,TS=async function(t,n){var u,h;const s=t.firstChild||t,a=s.id=`${vE}${n}`,o=await((u=d(this,Ky))==null?void 0:u.getAriaAttributes(a));if(o)for(const[p,m]of o)s.setAttribute(p,m);this.div.append(t),(h=d(this,Yy))==null||h.moveElementInDOM(this.div,t,s,!1)},PS=function(){var n;if(!d(this,id))return;const t=this.div;for(const[s,a]of d(this,id)){const o=t.querySelector(`[data-annotation-id="${s}"]`);if(!o)continue;a.className="annotationContent";const{firstChild:u}=o;u?u.nodeName==="CANVAS"?u.replaceWith(a):u.classList.contains("annotationContent")?u.after(a):u.before(a):o.append(a);const h=d(this,Yl).get(s);h&&(h._hasNoCanvas?((n=this._annotationEditorUIManager)==null||n.setMissingCanvas(s,o.id,a),h._hasNoCanvas=!1):h.canvas=a)}d(this,id).clear()};let CS=IE;const $0=/\r\n?|\n/g;var qi,Ns,Qy,ad,Is,bn,AC,CC,TC,sw,yl,iw,aw,PC,LS,RC;const Ft=class Ft extends Yt{constructor(n){super({...n,name:"freeTextEditor"});P(this,bn);P(this,qi);P(this,Ns,"");P(this,Qy,`${this.id}-editor`);P(this,ad,null);P(this,Is);E(this,qi,n.color||Ft._defaultColor||Yt._defaultLineColor),E(this,Is,n.fontSize||Ft._defaultFontSize)}static get _keyboardManager(){const n=Ft.prototype,s=u=>u.isEmpty(),a=Td.TRANSLATE_SMALL,o=Td.TRANSLATE_BIG;return at(this,"_keyboardManager",new E0([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],n.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],n.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],n._translateEmpty,{args:[-a,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],n._translateEmpty,{args:[-o,0],checker:s}],[["ArrowRight","mac+ArrowRight"],n._translateEmpty,{args:[a,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],n._translateEmpty,{args:[o,0],checker:s}],[["ArrowUp","mac+ArrowUp"],n._translateEmpty,{args:[0,-a],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],n._translateEmpty,{args:[0,-o],checker:s}],[["ArrowDown","mac+ArrowDown"],n._translateEmpty,{args:[0,a],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],n._translateEmpty,{args:[0,o],checker:s}]]))}static initialize(n,s){Yt.initialize(n,s);const a=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(a.getPropertyValue("--freetext-padding"))}static updateDefaultParams(n,s){switch(n){case ct.FREETEXT_SIZE:Ft._defaultFontSize=s;break;case ct.FREETEXT_COLOR:Ft._defaultColor=s;break}}updateParams(n,s){switch(n){case ct.FREETEXT_SIZE:R(this,bn,AC).call(this,s);break;case ct.FREETEXT_COLOR:R(this,bn,CC).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ct.FREETEXT_SIZE,Ft._defaultFontSize],[ct.FREETEXT_COLOR,Ft._defaultColor||Yt._defaultLineColor]]}get propertiesToUpdate(){return[[ct.FREETEXT_SIZE,d(this,Is)],[ct.FREETEXT_COLOR,d(this,qi)]]}_translateEmpty(n,s){this._uiManager.translateSelectedEditors(n,s,!0)}getInitialTranslation(){const n=this.parentScale;return[-Ft._internalPadding*n,-(Ft._internalPadding+d(this,Is))*n]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(He.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),E(this,ad,new AbortController);const n=this._uiManager.combinedSignal(d(this,ad));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:n}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:n}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:n}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:n}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:n})}disableEditMode(){var n;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",d(this,Qy)),this._isDraggable=!0,(n=d(this,ad))==null||n.abort(),E(this,ad,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(n){this._focusEventsAllowed&&(super.focusin(n),n.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(n){var s;this.width||(this.enableEditMode(),n&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const n=d(this,Ns),s=E(this,Ns,R(this,bn,TC).call(this).trimEnd());if(n===s)return;const a=o=>{if(E(this,Ns,o),!o){this.remove();return}R(this,bn,aw).call(this),this._uiManager.rebuild(this),R(this,bn,sw).call(this)};this.addCommands({cmd:()=>{a(s)},undo:()=>{a(n)},mustExec:!1}),R(this,bn,sw).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(n){this.enterInEditMode()}keydown(n){n.target===this.div&&n.key==="Enter"&&(this.enterInEditMode(),n.preventDefault())}editorDivKeydown(n){Ft._keyboardManager.exec(this,n)}editorDivFocus(n){this.isEditing=!0}editorDivBlur(n){this.isEditing=!1}editorDivInput(n){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let n,s;(this._isCopy||this.annotationElementId)&&(n=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",d(this,Qy)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:a}=this.editorDiv;if(a.fontSize=`calc(${d(this,Is)}px * var(--total-scale-factor))`,a.color=d(this,qi),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),SE(this,this.div,["dblclick","keydown"]),this._isCopy||this.annotationElementId){const[o,u]=this.parentDimensions;if(this.annotationElementId){const{position:h}=this._initialData;let[p,m]=this.getInitialTranslation();[p,m]=this.pageTranslationToScreen(p,m);const[v,y]=this.pageDimensions,[b,_]=this.pageTranslation;let k,x;switch(this.rotation){case 0:k=n+(h[0]-b)/v,x=s+this.height-(h[1]-_)/y;break;case 90:k=n+(h[0]-b)/v,x=s-(h[1]-_)/y,[p,m]=[m,-p];break;case 180:k=n-this.width+(h[0]-b)/v,x=s-(h[1]-_)/y,[p,m]=[-p,-m];break;case 270:k=n+(h[0]-b-this.height*y)/v,x=s+(h[1]-_-this.width*v)/y,[p,m]=[-m,p];break}this.setAt(k*o,x*u,p,m)}else this._moveAfterPaste(n,s);R(this,bn,aw).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(n){var k,x,C;const s=n.clipboardData||window.clipboardData,{types:a}=s;if(a.length===1&&a[0]==="text/plain")return;n.preventDefault();const o=R(k=Ft,yl,LS).call(k,s.getData("text")||"").replaceAll($0,`
`);if(!o)return;const u=window.getSelection();if(!u.rangeCount)return;this.editorDiv.normalize(),u.deleteFromDocument();const h=u.getRangeAt(0);if(!o.includes(`
`)){h.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),u.collapseToStart();return}const{startContainer:p,startOffset:m}=h,v=[],y=[];if(p.nodeType===Node.TEXT_NODE){const N=p.parentElement;if(y.push(p.nodeValue.slice(m).replaceAll($0,"")),N!==this.editorDiv){let F=v;for(const D of this.editorDiv.childNodes){if(D===N){F=y;continue}F.push(R(x=Ft,yl,iw).call(x,D))}}v.push(p.nodeValue.slice(0,m).replaceAll($0,""))}else if(p===this.editorDiv){let N=v,F=0;for(const D of this.editorDiv.childNodes)F++===m&&(N=y),N.push(R(C=Ft,yl,iw).call(C,D))}E(this,Ns,`${v.join(`
`)}${o}${y.join(`
`)}`),R(this,bn,aw).call(this);const b=new Range;let _=Math.sumPrecise(v.map(N=>N.length));for(const{firstChild:N}of this.editorDiv.childNodes)if(N.nodeType===Node.TEXT_NODE){const F=N.nodeValue.length;if(_<=F){b.setStart(N,_),b.setEnd(N,_);break}_-=F}u.removeAllRanges(),u.addRange(b)}get contentDiv(){return this.editorDiv}static async deserialize(n,s,a){var h;let o=null;if(n instanceof SC){const{data:{defaultAppearanceData:{fontSize:p,fontColor:m},rect:v,rotation:y,id:b,popupRef:_},textContent:k,textPosition:x,parent:{page:{pageNumber:C}}}=n;if(!k||k.length===0)return null;o=n={annotationType:He.FREETEXT,color:Array.from(m),fontSize:p,value:k.join(`
`),position:x,pageIndex:C-1,rect:v.slice(0),rotation:y,id:b,deleted:!1,popupRef:_}}const u=await super.deserialize(n,s,a);return E(u,Is,n.fontSize),E(u,qi,Te.makeHexColor(...n.color)),E(u,Ns,R(h=Ft,yl,LS).call(h,n.value)),u.annotationElementId=n.id||null,u._initialData=o,u}serialize(n=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Ft._internalPadding*this.parentScale,a=this.getRect(s,s),o=Yt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:d(this,qi)),u={annotationType:He.FREETEXT,color:o,fontSize:d(this,Is),value:R(this,bn,PC).call(this),pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return n?(u.isCopy=!0,u):this.annotationElementId&&!R(this,bn,RC).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(n){const s=super.renderAnnotationElement(n);if(this.deleted)return s;const{style:a}=s;a.fontSize=`calc(${d(this,Is)}px * var(--total-scale-factor))`,a.color=d(this,qi),s.replaceChildren();for(const u of d(this,Ns).split(`
`)){const h=document.createElement("div");h.append(u?document.createTextNode(u):document.createElement("br")),s.append(h)}const o=Ft._internalPadding*this.parentScale;return n.updateEdited({rect:this.getRect(o,o),popupContent:d(this,Ns)}),s}resetAnnotationElement(n){super.resetAnnotationElement(n),n.resetEdited()}};qi=new WeakMap,Ns=new WeakMap,Qy=new WeakMap,ad=new WeakMap,Is=new WeakMap,bn=new WeakSet,AC=function(n){const s=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--total-scale-factor))`,this.translate(0,-(o-d(this,Is))*this.parentScale),E(this,Is,o),R(this,bn,sw).call(this)},a=d(this,Is);this.addCommands({cmd:s.bind(this,n),undo:s.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},CC=function(n){const s=o=>{E(this,qi,this.editorDiv.style.color=o)},a=d(this,qi);this.addCommands({cmd:s.bind(this,n),undo:s.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},TC=function(){var a;const n=[];this.editorDiv.normalize();let s=null;for(const o of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(n.push(R(a=Ft,yl,iw).call(a,o)),s=o);return n.join(`
`)},sw=function(){const[n,s]=this.parentDimensions;let a;if(this.isAttachedToDOM)a=this.div.getBoundingClientRect();else{const{currentLayer:o,div:u}=this,h=u.style.display,p=u.classList.contains("hidden");u.classList.remove("hidden"),u.style.display="hidden",o.div.append(this.div),a=u.getBoundingClientRect(),u.remove(),u.style.display=h,u.classList.toggle("hidden",p)}this.rotation%180===this.parentRotation%180?(this.width=a.width/n,this.height=a.height/s):(this.width=a.height/n,this.height=a.width/s),this.fixAndSetPosition()},yl=new WeakSet,iw=function(n){return(n.nodeType===Node.TEXT_NODE?n.nodeValue:n.innerText).replaceAll($0,"")},aw=function(){if(this.editorDiv.replaceChildren(),!!d(this,Ns))for(const n of d(this,Ns).split(`
`)){const s=document.createElement("div");s.append(n?document.createTextNode(n):document.createElement("br")),this.editorDiv.append(s)}},PC=function(){return d(this,Ns).replaceAll(" "," ")},LS=function(n){return n.replaceAll(" "," ")},RC=function(n){const{value:s,fontSize:a,color:o,pageIndex:u}=this._initialData;return this._hasBeenMoved||n.value!==s||n.fontSize!==a||n.color.some((h,p)=>h!==o[p])||n.pageIndex!==u},P(Ft,yl),Ee(Ft,"_freeTextDefaultContent",""),Ee(Ft,"_internalPadding",0),Ee(Ft,"_defaultColor",null),Ee(Ft,"_defaultFontSize",10),Ee(Ft,"_type","freetext"),Ee(Ft,"_editorType",He.FREETEXT);let RS=Ft;class be{toSVGPath(){Rt("Abstract method `toSVGPath` must be implemented.")}get box(){Rt("Abstract getter `box` must be implemented.")}serialize(t,n){Rt("Abstract method `serialize` must be implemented.")}static _rescale(t,n,s,a,o,u){u||(u=new Float32Array(t.length));for(let h=0,p=t.length;h<p;h+=2)u[h]=n+t[h]*a,u[h+1]=s+t[h+1]*o;return u}static _rescaleAndSwap(t,n,s,a,o,u){u||(u=new Float32Array(t.length));for(let h=0,p=t.length;h<p;h+=2)u[h]=n+t[h+1]*a,u[h+1]=s+t[h]*o;return u}static _translate(t,n,s,a){a||(a=new Float32Array(t.length));for(let o=0,u=t.length;o<u;o+=2)a[o]=n+t[o],a[o+1]=s+t[o+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,n,s,a,o){switch(o){case 90:return[1-n/s,t/a];case 180:return[1-t/s,1-n/a];case 270:return[n/s,1-t/a];default:return[t/s,n/a]}}static _normalizePagePoint(t,n,s){switch(s){case 90:return[1-n,t];case 180:return[1-t,1-n];case 270:return[n,1-t];default:return[t,n]}}static createBezierPoints(t,n,s,a,o,u){return[(t+5*s)/6,(n+5*a)/6,(5*s+o)/6,(5*a+u)/6,(s+o)/2,(a+u)/2]}}Ee(be,"PRECISION",1e-4);var Ms,Xi,Wf,Gf,wa,nt,od,ld,Jy,Zy,qf,Xf,Kl,e0,Vw,Ww,In,Lv,LC,NC,IC,MC,OC,DC;const Bo=class Bo{constructor({x:t,y:n},s,a,o,u,h=0){P(this,In);P(this,Ms);P(this,Xi,[]);P(this,Wf);P(this,Gf);P(this,wa,[]);P(this,nt,new Float32Array(18));P(this,od);P(this,ld);P(this,Jy);P(this,Zy);P(this,qf);P(this,Xf);P(this,Kl,[]);E(this,Ms,s),E(this,Xf,o*a),E(this,Gf,u),d(this,nt).set([NaN,NaN,NaN,NaN,t,n],6),E(this,Wf,h),E(this,Zy,d(Bo,e0)*a),E(this,Jy,d(Bo,Ww)*a),E(this,qf,a),d(this,Kl).push(t,n)}isEmpty(){return isNaN(d(this,nt)[8])}add({x:t,y:n}){var oe;E(this,od,t),E(this,ld,n);const[s,a,o,u]=d(this,Ms);let[h,p,m,v]=d(this,nt).subarray(8,12);const y=t-m,b=n-v,_=Math.hypot(y,b);if(_<d(this,Jy))return!1;const k=_-d(this,Zy),x=k/_,C=x*y,N=x*b;let F=h,D=p;h=m,p=v,m+=C,v+=N,(oe=d(this,Kl))==null||oe.push(t,n);const j=-N/k,z=C/k,V=j*d(this,Xf),G=z*d(this,Xf);return d(this,nt).set(d(this,nt).subarray(2,8),0),d(this,nt).set([m+V,v+G],4),d(this,nt).set(d(this,nt).subarray(14,18),12),d(this,nt).set([m-V,v-G],16),isNaN(d(this,nt)[6])?(d(this,wa).length===0&&(d(this,nt).set([h+V,p+G],2),d(this,wa).push(NaN,NaN,NaN,NaN,(h+V-s)/o,(p+G-a)/u),d(this,nt).set([h-V,p-G],14),d(this,Xi).push(NaN,NaN,NaN,NaN,(h-V-s)/o,(p-G-a)/u)),d(this,nt).set([F,D,h,p,m,v],6),!this.isEmpty()):(d(this,nt).set([F,D,h,p,m,v],6),Math.abs(Math.atan2(D-p,F-h)-Math.atan2(N,C))<Math.PI/2?([h,p,m,v]=d(this,nt).subarray(2,6),d(this,wa).push(NaN,NaN,NaN,NaN,((h+m)/2-s)/o,((p+v)/2-a)/u),[h,p,F,D]=d(this,nt).subarray(14,18),d(this,Xi).push(NaN,NaN,NaN,NaN,((F+h)/2-s)/o,((D+p)/2-a)/u),!0):([F,D,h,p,m,v]=d(this,nt).subarray(0,6),d(this,wa).push(((F+5*h)/6-s)/o,((D+5*p)/6-a)/u,((5*h+m)/6-s)/o,((5*p+v)/6-a)/u,((h+m)/2-s)/o,((p+v)/2-a)/u),[m,v,h,p,F,D]=d(this,nt).subarray(12,18),d(this,Xi).push(((F+5*h)/6-s)/o,((D+5*p)/6-a)/u,((5*h+m)/6-s)/o,((5*p+v)/6-a)/u,((h+m)/2-s)/o,((p+v)/2-a)/u),!0))}toSVGPath(){if(this.isEmpty())return"";const t=d(this,wa),n=d(this,Xi);if(isNaN(d(this,nt)[6])&&!this.isEmpty())return R(this,In,LC).call(this);const s=[];s.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?s.push(`L${t[a+4]} ${t[a+5]}`):s.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);R(this,In,IC).call(this,s);for(let a=n.length-6;a>=6;a-=6)isNaN(n[a])?s.push(`L${n[a+4]} ${n[a+5]}`):s.push(`C${n[a]} ${n[a+1]} ${n[a+2]} ${n[a+3]} ${n[a+4]} ${n[a+5]}`);return R(this,In,NC).call(this,s),s.join(" ")}newFreeDrawOutline(t,n,s,a,o,u){return new FC(t,n,s,a,o,u)}getOutlines(){var y;const t=d(this,wa),n=d(this,Xi),s=d(this,nt),[a,o,u,h]=d(this,Ms),p=new Float32Array((((y=d(this,Kl))==null?void 0:y.length)??0)+2);for(let b=0,_=p.length-2;b<_;b+=2)p[b]=(d(this,Kl)[b]-a)/u,p[b+1]=(d(this,Kl)[b+1]-o)/h;if(p[p.length-2]=(d(this,od)-a)/u,p[p.length-1]=(d(this,ld)-o)/h,isNaN(s[6])&&!this.isEmpty())return R(this,In,MC).call(this,p);const m=new Float32Array(d(this,wa).length+24+d(this,Xi).length);let v=t.length;for(let b=0;b<v;b+=2){if(isNaN(t[b])){m[b]=m[b+1]=NaN;continue}m[b]=t[b],m[b+1]=t[b+1]}v=R(this,In,DC).call(this,m,v);for(let b=n.length-6;b>=6;b-=6)for(let _=0;_<6;_+=2){if(isNaN(n[b+_])){m[v]=m[v+1]=NaN,v+=2;continue}m[v]=n[b+_],m[v+1]=n[b+_+1],v+=2}return R(this,In,OC).call(this,m,v),this.newFreeDrawOutline(m,p,d(this,Ms),d(this,qf),d(this,Wf),d(this,Gf))}};Ms=new WeakMap,Xi=new WeakMap,Wf=new WeakMap,Gf=new WeakMap,wa=new WeakMap,nt=new WeakMap,od=new WeakMap,ld=new WeakMap,Jy=new WeakMap,Zy=new WeakMap,qf=new WeakMap,Xf=new WeakMap,Kl=new WeakMap,e0=new WeakMap,Vw=new WeakMap,Ww=new WeakMap,In=new WeakSet,Lv=function(){const t=d(this,nt).subarray(4,6),n=d(this,nt).subarray(16,18),[s,a,o,u]=d(this,Ms);return[(d(this,od)+(t[0]-n[0])/2-s)/o,(d(this,ld)+(t[1]-n[1])/2-a)/u,(d(this,od)+(n[0]-t[0])/2-s)/o,(d(this,ld)+(n[1]-t[1])/2-a)/u]},LC=function(){const[t,n,s,a]=d(this,Ms),[o,u,h,p]=R(this,In,Lv).call(this);return`M${(d(this,nt)[2]-t)/s} ${(d(this,nt)[3]-n)/a} L${(d(this,nt)[4]-t)/s} ${(d(this,nt)[5]-n)/a} L${o} ${u} L${h} ${p} L${(d(this,nt)[16]-t)/s} ${(d(this,nt)[17]-n)/a} L${(d(this,nt)[14]-t)/s} ${(d(this,nt)[15]-n)/a} Z`},NC=function(t){const n=d(this,Xi);t.push(`L${n[4]} ${n[5]} Z`)},IC=function(t){const[n,s,a,o]=d(this,Ms),u=d(this,nt).subarray(4,6),h=d(this,nt).subarray(16,18),[p,m,v,y]=R(this,In,Lv).call(this);t.push(`L${(u[0]-n)/a} ${(u[1]-s)/o} L${p} ${m} L${v} ${y} L${(h[0]-n)/a} ${(h[1]-s)/o}`)},MC=function(t){const n=d(this,nt),[s,a,o,u]=d(this,Ms),[h,p,m,v]=R(this,In,Lv).call(this),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(n[2]-s)/o,(n[3]-a)/u,NaN,NaN,NaN,NaN,(n[4]-s)/o,(n[5]-a)/u,NaN,NaN,NaN,NaN,h,p,NaN,NaN,NaN,NaN,m,v,NaN,NaN,NaN,NaN,(n[16]-s)/o,(n[17]-a)/u,NaN,NaN,NaN,NaN,(n[14]-s)/o,(n[15]-a)/u],0),this.newFreeDrawOutline(y,t,d(this,Ms),d(this,qf),d(this,Wf),d(this,Gf))},OC=function(t,n){const s=d(this,Xi);return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],n),n+=6},DC=function(t,n){const s=d(this,nt).subarray(4,6),a=d(this,nt).subarray(16,18),[o,u,h,p]=d(this,Ms),[m,v,y,b]=R(this,In,Lv).call(this);return t.set([NaN,NaN,NaN,NaN,(s[0]-o)/h,(s[1]-u)/p,NaN,NaN,NaN,NaN,m,v,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(a[0]-o)/h,(a[1]-u)/p],n),n+=24},P(Bo,e0,8),P(Bo,Vw,2),P(Bo,Ww,d(Bo,e0)+d(Bo,Vw));let Aw=Bo;var Yf,ud,ol,t0,Os,n0,dn,Gw,jC;class FC extends be{constructor(n,s,a,o,u,h){super();P(this,Gw);P(this,Yf);P(this,ud,new Float32Array(4));P(this,ol);P(this,t0);P(this,Os);P(this,n0);P(this,dn);E(this,dn,n),E(this,Os,s),E(this,Yf,a),E(this,n0,o),E(this,ol,u),E(this,t0,h),this.lastPoint=[NaN,NaN],R(this,Gw,jC).call(this,h);const[p,m,v,y]=d(this,ud);for(let b=0,_=n.length;b<_;b+=2)n[b]=(n[b]-p)/v,n[b+1]=(n[b+1]-m)/y;for(let b=0,_=s.length;b<_;b+=2)s[b]=(s[b]-p)/v,s[b+1]=(s[b+1]-m)/y}toSVGPath(){const n=[`M${d(this,dn)[4]} ${d(this,dn)[5]}`];for(let s=6,a=d(this,dn).length;s<a;s+=6){if(isNaN(d(this,dn)[s])){n.push(`L${d(this,dn)[s+4]} ${d(this,dn)[s+5]}`);continue}n.push(`C${d(this,dn)[s]} ${d(this,dn)[s+1]} ${d(this,dn)[s+2]} ${d(this,dn)[s+3]} ${d(this,dn)[s+4]} ${d(this,dn)[s+5]}`)}return n.push("Z"),n.join(" ")}serialize([n,s,a,o],u){const h=a-n,p=o-s;let m,v;switch(u){case 0:m=be._rescale(d(this,dn),n,o,h,-p),v=be._rescale(d(this,Os),n,o,h,-p);break;case 90:m=be._rescaleAndSwap(d(this,dn),n,s,h,p),v=be._rescaleAndSwap(d(this,Os),n,s,h,p);break;case 180:m=be._rescale(d(this,dn),a,s,-h,p),v=be._rescale(d(this,Os),a,s,-h,p);break;case 270:m=be._rescaleAndSwap(d(this,dn),a,o,-h,-p),v=be._rescaleAndSwap(d(this,Os),a,o,-h,-p);break}return{outline:Array.from(m),points:[Array.from(v)]}}get box(){return d(this,ud)}newOutliner(n,s,a,o,u,h=0){return new Aw(n,s,a,o,u,h)}getNewOutline(n,s){const[a,o,u,h]=d(this,ud),[p,m,v,y]=d(this,Yf),b=u*v,_=h*y,k=a*v+p,x=o*y+m,C=this.newOutliner({x:d(this,Os)[0]*b+k,y:d(this,Os)[1]*_+x},d(this,Yf),d(this,n0),n,d(this,t0),s??d(this,ol));for(let N=2;N<d(this,Os).length;N+=2)C.add({x:d(this,Os)[N]*b+k,y:d(this,Os)[N+1]*_+x});return C.getOutlines()}}Yf=new WeakMap,ud=new WeakMap,ol=new WeakMap,t0=new WeakMap,Os=new WeakMap,n0=new WeakMap,dn=new WeakMap,Gw=new WeakSet,jC=function(n){const s=d(this,dn);let a=s[4],o=s[5];const u=[a,o,a,o];let h=a,p=o;const m=n?Math.max:Math.min;for(let y=6,b=s.length;y<b;y+=6){const _=s[y+4],k=s[y+5];if(isNaN(s[y]))Te.pointBoundingBox(_,k,u),p<k?(h=_,p=k):p===k&&(h=m(h,_));else{const x=[1/0,1/0,-1/0,-1/0];Te.bezierBoundingBox(a,o,...s.slice(y,y+6),x),Te.rectBoundingBox(...x,u),p<x[3]?(h=x[2],p=x[3]):p===x[3]&&(h=m(h,x[2]))}a=_,o=k}const v=d(this,ud);v[0]=u[0]-d(this,ol),v[1]=u[1]-d(this,ol),v[2]=u[2]-u[0]+2*d(this,ol),v[3]=u[3]-u[1]+2*d(this,ol),this.lastPoint=[h,p]};var r0,s0,Ql,Yi,Vr,$C,ow,zC,BC,IS;class NS{constructor(t,n=0,s=0,a=!0){P(this,Vr);P(this,r0);P(this,s0);P(this,Ql,[]);P(this,Yi,[]);const o=[1/0,1/0,-1/0,-1/0],u=10**-4;for(const{x:_,y:k,width:x,height:C}of t){const N=Math.floor((_-n)/u)*u,F=Math.ceil((_+x+n)/u)*u,D=Math.floor((k-n)/u)*u,j=Math.ceil((k+C+n)/u)*u,z=[N,D,j,!0],V=[F,D,j,!1];d(this,Ql).push(z,V),Te.rectBoundingBox(N,D,F,j,o)}const h=o[2]-o[0]+2*s,p=o[3]-o[1]+2*s,m=o[0]-s,v=o[1]-s,y=d(this,Ql).at(a?-1:-2),b=[y[0],y[2]];for(const _ of d(this,Ql)){const[k,x,C]=_;_[0]=(k-m)/h,_[1]=(x-v)/p,_[2]=(C-v)/p}E(this,r0,new Float32Array([m,v,h,p])),E(this,s0,b)}getOutlines(){d(this,Ql).sort((n,s)=>n[0]-s[0]||n[1]-s[1]||n[2]-s[2]);const t=[];for(const n of d(this,Ql))n[3]?(t.push(...R(this,Vr,IS).call(this,n)),R(this,Vr,zC).call(this,n)):(R(this,Vr,BC).call(this,n),t.push(...R(this,Vr,IS).call(this,n)));return R(this,Vr,$C).call(this,t)}}r0=new WeakMap,s0=new WeakMap,Ql=new WeakMap,Yi=new WeakMap,Vr=new WeakSet,$C=function(t){const n=[],s=new Set;for(const u of t){const[h,p,m]=u;n.push([h,p,u],[h,m,u])}n.sort((u,h)=>u[1]-h[1]||u[0]-h[0]);for(let u=0,h=n.length;u<h;u+=2){const p=n[u][2],m=n[u+1][2];p.push(m),m.push(p),s.add(p),s.add(m)}const a=[];let o;for(;s.size>0;){const u=s.values().next().value;let[h,p,m,v,y]=u;s.delete(u);let b=h,_=p;for(o=[h,m],a.push(o);;){let k;if(s.has(v))k=v;else if(s.has(y))k=y;else break;s.delete(k),[h,p,m,v,y]=k,b!==h&&(o.push(b,_,h,_===p?p:m),b=h),_=_===p?m:p}o.push(b,_)}return new rM(a,d(this,r0),d(this,s0))},ow=function(t){const n=d(this,Yi);let s=0,a=n.length-1;for(;s<=a;){const o=s+a>>1,u=n[o][0];if(u===t)return o;u<t?s=o+1:a=o-1}return a+1},zC=function([,t,n]){const s=R(this,Vr,ow).call(this,t);d(this,Yi).splice(s,0,[t,n])},BC=function([,t,n]){const s=R(this,Vr,ow).call(this,t);for(let a=s;a<d(this,Yi).length;a++){const[o,u]=d(this,Yi)[a];if(o!==t)break;if(o===t&&u===n){d(this,Yi).splice(a,1);return}}for(let a=s-1;a>=0;a--){const[o,u]=d(this,Yi)[a];if(o!==t)break;if(o===t&&u===n){d(this,Yi).splice(a,1);return}}},IS=function(t){const[n,s,a]=t,o=[[n,s,a]],u=R(this,Vr,ow).call(this,a);for(let h=0;h<u;h++){const[p,m]=d(this,Yi)[h];for(let v=0,y=o.length;v<y;v++){const[,b,_]=o[v];if(!(m<=b||_<=p)){if(b>=p){if(_>m)o[v][1]=m;else{if(y===1)return[];o.splice(v,1),v--,y--}continue}o[v][2]=p,_>m&&o.push([n,m,_])}}}return o};var i0,Kf;class rM extends be{constructor(n,s,a){super();P(this,i0);P(this,Kf);E(this,Kf,n),E(this,i0,s),this.lastPoint=a}toSVGPath(){const n=[];for(const s of d(this,Kf)){let[a,o]=s;n.push(`M${a} ${o}`);for(let u=2;u<s.length;u+=2){const h=s[u],p=s[u+1];h===a?(n.push(`V${p}`),o=p):p===o&&(n.push(`H${h}`),a=h)}n.push("Z")}return n.join(" ")}serialize([n,s,a,o],u){const h=[],p=a-n,m=o-s;for(const v of d(this,Kf)){const y=new Array(v.length);for(let b=0;b<v.length;b+=2)y[b]=n+v[b]*p,y[b+1]=o-v[b+1]*m;h.push(y)}return h}get box(){return d(this,i0)}get classNamesForOutlining(){return["highlightOutline"]}}i0=new WeakMap,Kf=new WeakMap;class MS extends Aw{newFreeDrawOutline(t,n,s,a,o,u){return new sM(t,n,s,a,o,u)}}class sM extends FC{newOutliner(t,n,s,a,o,u=0){return new MS(t,n,s,a,o,u)}}var Ki,cd,Qf,Nn,a0,Jf,o0,l0,Jl,Qi,Zf,u0,Pt,OS,DS,FS,mh,UC,xl;const Yr=class Yr{constructor({editor:t=null,uiManager:n=null}){P(this,Pt);P(this,Ki,null);P(this,cd,null);P(this,Qf);P(this,Nn,null);P(this,a0,!1);P(this,Jf,!1);P(this,o0,null);P(this,l0);P(this,Jl,null);P(this,Qi,null);P(this,Zf);var s;t?(E(this,Jf,!1),E(this,Zf,ct.HIGHLIGHT_COLOR),E(this,o0,t)):(E(this,Jf,!0),E(this,Zf,ct.HIGHLIGHT_DEFAULT_COLOR)),E(this,Qi,(t==null?void 0:t._uiManager)||n),E(this,l0,d(this,Qi)._eventBus),E(this,Qf,(t==null?void 0:t.color)||((s=d(this,Qi))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),d(Yr,u0)||E(Yr,u0,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return at(this,"_keyboardManager",new E0([[["Escape","mac+Escape"],Yr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Yr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Yr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Yr.prototype._moveToPrevious],[["Home","mac+Home"],Yr.prototype._moveToBeginning],[["End","mac+End"],Yr.prototype._moveToEnd]]))}renderButton(){const t=E(this,Ki,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const n=d(this,Qi)._signal;t.addEventListener("click",R(this,Pt,mh).bind(this),{signal:n}),t.addEventListener("keydown",R(this,Pt,FS).bind(this),{signal:n});const s=E(this,cd,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=d(this,Qf),t.append(s),t}renderMainDropdown(){const t=E(this,Nn,R(this,Pt,OS).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===d(this,Ki)){R(this,Pt,mh).call(this,t);return}const n=t.target.getAttribute("data-color");n&&R(this,Pt,DS).call(this,n,t)}_moveToNext(t){var n,s;if(!d(this,Pt,xl)){R(this,Pt,mh).call(this,t);return}if(t.target===d(this,Ki)){(n=d(this,Nn).firstChild)==null||n.focus();return}(s=t.target.nextSibling)==null||s.focus()}_moveToPrevious(t){var n,s;if(t.target===((n=d(this,Nn))==null?void 0:n.firstChild)||t.target===d(this,Ki)){d(this,Pt,xl)&&this._hideDropdownFromKeyboard();return}d(this,Pt,xl)||R(this,Pt,mh).call(this,t),(s=t.target.previousSibling)==null||s.focus()}_moveToBeginning(t){var n;if(!d(this,Pt,xl)){R(this,Pt,mh).call(this,t);return}(n=d(this,Nn).firstChild)==null||n.focus()}_moveToEnd(t){var n;if(!d(this,Pt,xl)){R(this,Pt,mh).call(this,t);return}(n=d(this,Nn).lastChild)==null||n.focus()}hideDropdown(){var t,n;(t=d(this,Nn))==null||t.classList.add("hidden"),(n=d(this,Jl))==null||n.abort(),E(this,Jl,null)}_hideDropdownFromKeyboard(){var t;if(!d(this,Jf)){if(!d(this,Pt,xl)){(t=d(this,o0))==null||t.unselect();return}this.hideDropdown(),d(this,Ki).focus({preventScroll:!0,focusVisible:d(this,a0)})}}updateColor(t){if(d(this,cd)&&(d(this,cd).style.backgroundColor=t),!d(this,Nn))return;const n=d(this,Qi).highlightColors.values();for(const s of d(this,Nn).children)s.setAttribute("aria-selected",n.next().value===t)}destroy(){var t,n;(t=d(this,Ki))==null||t.remove(),E(this,Ki,null),E(this,cd,null),(n=d(this,Nn))==null||n.remove(),E(this,Nn,null)}};Ki=new WeakMap,cd=new WeakMap,Qf=new WeakMap,Nn=new WeakMap,a0=new WeakMap,Jf=new WeakMap,o0=new WeakMap,l0=new WeakMap,Jl=new WeakMap,Qi=new WeakMap,Zf=new WeakMap,u0=new WeakMap,Pt=new WeakSet,OS=function(){const t=document.createElement("div"),n=d(this,Qi)._signal;t.addEventListener("contextmenu",ra,{signal:n}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,a]of d(this,Qi).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=s,o.setAttribute("data-l10n-id",d(Yr,u0)[s]);const u=document.createElement("span");o.append(u),u.className="swatch",u.style.backgroundColor=a,o.setAttribute("aria-selected",a===d(this,Qf)),o.addEventListener("click",R(this,Pt,DS).bind(this,a),{signal:n}),t.append(o)}return t.addEventListener("keydown",R(this,Pt,FS).bind(this),{signal:n}),t},DS=function(t,n){n.stopPropagation(),d(this,l0).dispatch("switchannotationeditorparams",{source:this,type:d(this,Zf),value:t})},FS=function(t){Yr._keyboardManager.exec(this,t)},mh=function(t){if(d(this,Pt,xl)){this.hideDropdown();return}if(E(this,a0,t.detail===0),d(this,Jl)||(E(this,Jl,new AbortController),window.addEventListener("pointerdown",R(this,Pt,UC).bind(this),{signal:d(this,Qi).combinedSignal(d(this,Jl))})),d(this,Nn)){d(this,Nn).classList.remove("hidden");return}const n=E(this,Nn,R(this,Pt,OS).call(this));d(this,Ki).append(n)},UC=function(t){var n;(n=d(this,Nn))!=null&&n.contains(t.target)||this.hideDropdown()},xl=function(){return d(this,Nn)&&!d(this,Nn).classList.contains("hidden")},P(Yr,u0,null);let Cw=Yr;var ep,c0,ll,hd,tp,Jr,h0,d0,dd,Qs,Ds,cr,np,ul,_r,rp,Js,f0,qe,jS,lw,HC,VC,WC,$S,vh,ti,Jd,GC,uw,Nv,qC,XC,YC,KC,QC;const bt=class bt extends Yt{constructor(n){super({...n,name:"highlightEditor"});P(this,qe);P(this,ep,null);P(this,c0,0);P(this,ll);P(this,hd,null);P(this,tp,null);P(this,Jr,null);P(this,h0,null);P(this,d0,0);P(this,dd,null);P(this,Qs,null);P(this,Ds,null);P(this,cr,!1);P(this,np,null);P(this,ul);P(this,_r,null);P(this,rp,"");P(this,Js);P(this,f0,"");this.color=n.color||bt._defaultColor,E(this,Js,n.thickness||bt._defaultThickness),E(this,ul,n.opacity||bt._defaultOpacity),E(this,ll,n.boxes||null),E(this,f0,n.methodOfCreation||""),E(this,rp,n.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",n.highlightId>-1?(E(this,cr,!0),R(this,qe,lw).call(this,n),R(this,qe,vh).call(this)):d(this,ll)&&(E(this,ep,n.anchorNode),E(this,c0,n.anchorOffset),E(this,h0,n.focusNode),E(this,d0,n.focusOffset),R(this,qe,jS).call(this),R(this,qe,vh).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const n=bt.prototype;return at(this,"_keyboardManager",new E0([[["ArrowLeft","mac+ArrowLeft"],n._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],n._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],n._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],n._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:d(this,cr)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:d(this,Js),methodOfCreation:d(this,f0)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(n){return{numberOfColors:n.get("color").size}}static initialize(n,s){var a;Yt.initialize(n,s),bt._defaultColor||(bt._defaultColor=((a=s.highlightColors)==null?void 0:a.values().next().value)||"#fff066")}static updateDefaultParams(n,s){switch(n){case ct.HIGHLIGHT_DEFAULT_COLOR:bt._defaultColor=s;break;case ct.HIGHLIGHT_THICKNESS:bt._defaultThickness=s;break}}translateInPage(n,s){}get toolbarPosition(){return d(this,np)}updateParams(n,s){switch(n){case ct.HIGHLIGHT_COLOR:R(this,qe,HC).call(this,s);break;case ct.HIGHLIGHT_THICKNESS:R(this,qe,VC).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ct.HIGHLIGHT_DEFAULT_COLOR,bt._defaultColor],[ct.HIGHLIGHT_THICKNESS,bt._defaultThickness]]}get propertiesToUpdate(){return[[ct.HIGHLIGHT_COLOR,this.color||bt._defaultColor],[ct.HIGHLIGHT_THICKNESS,d(this,Js)||bt._defaultThickness],[ct.HIGHLIGHT_FREE,d(this,cr)]]}async addEditToolbar(){const n=await super.addEditToolbar();return n?(this._uiManager.highlightColors&&(E(this,tp,new Cw({editor:this})),n.addColorPicker(d(this,tp))),n):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(R(this,qe,Nv).call(this))}getBaseTranslation(){return[0,0]}getRect(n,s){return super.getRect(n,s,R(this,qe,Nv).call(this))}onceAdded(n){this.annotationElementId||this.parent.addUndoableEditor(this),n&&this.div.focus()}remove(){R(this,qe,$S).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(R(this,qe,vh).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(n){var a;let s=!1;this.parent&&!n?R(this,qe,$S).call(this):n&&(R(this,qe,vh).call(this,n),s=!this.parent&&((a=this.div)==null?void 0:a.classList.contains("selectedEditor"))),super.setParent(n),this.show(this._isVisible),s&&this.select()}rotate(n){var o,u,h;const{drawLayer:s}=this.parent;let a;d(this,cr)?(n=(n-this.rotation+360)%360,a=R(o=bt,ti,Jd).call(o,d(this,Qs).box,n)):a=R(u=bt,ti,Jd).call(u,[this.x,this.y,this.width,this.height],n),s.updateProperties(d(this,Ds),{bbox:a,root:{"data-main-rotation":n}}),s.updateProperties(d(this,_r),{bbox:R(h=bt,ti,Jd).call(h,d(this,Jr).box,n),root:{"data-main-rotation":n}})}render(){if(this.div)return this.div;const n=super.render();d(this,rp)&&(n.setAttribute("aria-label",d(this,rp)),n.setAttribute("role","mark")),d(this,cr)?n.classList.add("free"):this.div.addEventListener("keydown",R(this,qe,GC).bind(this),{signal:this._uiManager._signal});const s=E(this,dd,document.createElement("div"));n.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=d(this,hd);const[a,o]=this.parentDimensions;return this.setDims(this.width*a,this.height*o),SE(this,d(this,dd),["pointerover","pointerleave"]),this.enableEditing(),n}pointerover(){var n;this.isSelected||(n=this.parent)==null||n.drawLayer.updateProperties(d(this,_r),{rootClass:{hovered:!0}})}pointerleave(){var n;this.isSelected||(n=this.parent)==null||n.drawLayer.updateProperties(d(this,_r),{rootClass:{hovered:!1}})}_moveCaret(n){switch(this.parent.unselect(this),n){case 0:case 2:R(this,qe,uw).call(this,!0);break;case 1:case 3:R(this,qe,uw).call(this,!1);break}}select(){var n;super.select(),d(this,_r)&&((n=this.parent)==null||n.drawLayer.updateProperties(d(this,_r),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var n;super.unselect(),d(this,_r)&&((n=this.parent)==null||n.drawLayer.updateProperties(d(this,_r),{rootClass:{selected:!1}}),d(this,cr)||R(this,qe,uw).call(this,!1))}get _mustFixPosition(){return!d(this,cr)}show(n=this._isVisible){super.show(n),this.parent&&(this.parent.drawLayer.updateProperties(d(this,Ds),{rootClass:{hidden:!n}}),this.parent.drawLayer.updateProperties(d(this,_r),{rootClass:{hidden:!n}}))}static startHighlighting(n,s,{target:a,x:o,y:u}){const{x:h,y:p,width:m,height:v}=a.getBoundingClientRect(),y=new AbortController,b=n.combinedSignal(y),_=k=>{y.abort(),R(this,ti,KC).call(this,n,k)};window.addEventListener("blur",_,{signal:b}),window.addEventListener("pointerup",_,{signal:b}),window.addEventListener("pointerdown",mn,{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",ra,{signal:b}),a.addEventListener("pointermove",R(this,ti,YC).bind(this,n),{signal:b}),this._freeHighlight=new MS({x:o,y:u},[h,p,m,v],n.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(n,s,a){var x,C,N,F;let o=null;if(n instanceof xC){const{data:{quadPoints:D,rect:j,rotation:z,id:V,color:G,opacity:ee,popupRef:oe},parent:{page:{pageNumber:de}}}=n;o=n={annotationType:He.HIGHLIGHT,color:Array.from(G),opacity:ee,quadPoints:D,boxes:null,pageIndex:de-1,rect:j.slice(0),rotation:z,id:V,deleted:!1,popupRef:oe}}else if(n instanceof AE){const{data:{inkLists:D,rect:j,rotation:z,id:V,color:G,borderStyle:{rawWidth:ee},popupRef:oe},parent:{page:{pageNumber:de}}}=n;o=n={annotationType:He.HIGHLIGHT,color:Array.from(G),thickness:ee,inkLists:D,boxes:null,pageIndex:de-1,rect:j.slice(0),rotation:z,id:V,deleted:!1,popupRef:oe}}const{color:u,quadPoints:h,inkLists:p,opacity:m}=n,v=await super.deserialize(n,s,a);v.color=Te.makeHexColor(...u),E(v,ul,m||1),p&&E(v,Js,n.thickness),v.annotationElementId=n.id||null,v._initialData=o;const[y,b]=v.pageDimensions,[_,k]=v.pageTranslation;if(h){const D=E(v,ll,[]);for(let j=0;j<h.length;j+=8)D.push({x:(h[j]-_)/y,y:1-(h[j+1]-k)/b,width:(h[j+2]-h[j])/y,height:(h[j+1]-h[j+5])/b});R(x=v,qe,jS).call(x),R(C=v,qe,vh).call(C),v.rotate(v.rotation)}else if(p){E(v,cr,!0);const D=p[0],j={x:D[0]-_,y:b-(D[1]-k)},z=new MS(j,[0,0,y,b],1,d(v,Js)/2,!0,.001);for(let ee=0,oe=D.length;ee<oe;ee+=2)j.x=D[ee]-_,j.y=b-(D[ee+1]-k),z.add(j);const{id:V,clipPathId:G}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:v.color,"fill-opacity":v._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:z.toSVGPath()}},!0,!0);R(N=v,qe,lw).call(N,{highlightOutlines:z.getOutlines(),highlightId:V,clipPathId:G}),R(F=v,qe,vh).call(F),v.rotate(v.parentRotation)}return v}serialize(n=!1){if(this.isEmpty()||n)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),a=Yt._colorManager.convert(this.color),o={annotationType:He.HIGHLIGHT,color:a,opacity:d(this,ul),thickness:d(this,Js),quadPoints:R(this,qe,qC).call(this),outlines:R(this,qe,XC).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:R(this,qe,Nv).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!R(this,qe,QC).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(n){return n.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};ep=new WeakMap,c0=new WeakMap,ll=new WeakMap,hd=new WeakMap,tp=new WeakMap,Jr=new WeakMap,h0=new WeakMap,d0=new WeakMap,dd=new WeakMap,Qs=new WeakMap,Ds=new WeakMap,cr=new WeakMap,np=new WeakMap,ul=new WeakMap,_r=new WeakMap,rp=new WeakMap,Js=new WeakMap,f0=new WeakMap,qe=new WeakSet,jS=function(){const n=new NS(d(this,ll),.001);E(this,Qs,n.getOutlines()),[this.x,this.y,this.width,this.height]=d(this,Qs).box;const s=new NS(d(this,ll),.0025,.001,this._uiManager.direction==="ltr");E(this,Jr,s.getOutlines());const{lastPoint:a}=d(this,Jr);E(this,np,[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height])},lw=function({highlightOutlines:n,highlightId:s,clipPathId:a}){var y,b;if(E(this,Qs,n),E(this,Jr,n.getNewOutline(d(this,Js)/2+1.5,.0025)),s>=0)E(this,Ds,s),E(this,hd,a),this.parent.drawLayer.finalizeDraw(s,{bbox:n.box,path:{d:n.toSVGPath()}}),E(this,_r,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:d(this,Jr).box,path:{d:d(this,Jr).toSVGPath()}},!0));else if(this.parent){const _=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(d(this,Ds),{bbox:R(y=bt,ti,Jd).call(y,d(this,Qs).box,(_-this.rotation+360)%360),path:{d:n.toSVGPath()}}),this.parent.drawLayer.updateProperties(d(this,_r),{bbox:R(b=bt,ti,Jd).call(b,d(this,Jr).box,_),path:{d:d(this,Jr).toSVGPath()}})}const[u,h,p,m]=n.box;switch(this.rotation){case 0:this.x=u,this.y=h,this.width=p,this.height=m;break;case 90:{const[_,k]=this.parentDimensions;this.x=h,this.y=1-u,this.width=p*k/_,this.height=m*_/k;break}case 180:this.x=1-u,this.y=1-h,this.width=p,this.height=m;break;case 270:{const[_,k]=this.parentDimensions;this.x=1-h,this.y=u,this.width=p*k/_,this.height=m*_/k;break}}const{lastPoint:v}=d(this,Jr);E(this,np,[(v[0]-u)/p,(v[1]-h)/m])},HC=function(n){const s=(u,h)=>{var p,m;this.color=u,E(this,ul,h),(p=this.parent)==null||p.drawLayer.updateProperties(d(this,Ds),{root:{fill:u,"fill-opacity":h}}),(m=d(this,tp))==null||m.updateColor(u)},a=this.color,o=d(this,ul);this.addCommands({cmd:s.bind(this,n,bt._defaultOpacity),undo:s.bind(this,a,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(n)},!0)},VC=function(n){const s=d(this,Js),a=o=>{E(this,Js,o),R(this,qe,WC).call(this,o)};this.addCommands({cmd:a.bind(this,n),undo:a.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:n},!0)},WC=function(n){if(!d(this,cr))return;R(this,qe,lw).call(this,{highlightOutlines:d(this,Qs).getNewOutline(n/2)}),this.fixAndSetPosition();const[s,a]=this.parentDimensions;this.setDims(this.width*s,this.height*a)},$S=function(){d(this,Ds)===null||!this.parent||(this.parent.drawLayer.remove(d(this,Ds)),E(this,Ds,null),this.parent.drawLayer.remove(d(this,_r)),E(this,_r,null))},vh=function(n=this.parent){d(this,Ds)===null&&({id:Fr(this,Ds)._,clipPathId:Fr(this,hd)._}=n.drawLayer.draw({bbox:d(this,Qs).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":d(this,ul)},rootClass:{highlight:!0,free:d(this,cr)},path:{d:d(this,Qs).toSVGPath()}},!1,!0),E(this,_r,n.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:d(this,cr)},bbox:d(this,Jr).box,path:{d:d(this,Jr).toSVGPath()}},d(this,cr))),d(this,dd)&&(d(this,dd).style.clipPath=d(this,hd)))},ti=new WeakSet,Jd=function([n,s,a,o],u){switch(u){case 90:return[1-s-o,n,o,a];case 180:return[1-n-a,1-s-o,a,o];case 270:return[s,1-n-a,o,a]}return[n,s,a,o]},GC=function(n){bt._keyboardManager.exec(this,n)},uw=function(n){if(!d(this,ep))return;const s=window.getSelection();n?s.setPosition(d(this,ep),d(this,c0)):s.setPosition(d(this,h0),d(this,d0))},Nv=function(){return d(this,cr)?this.rotation:0},qC=function(){if(d(this,cr))return null;const[n,s]=this.pageDimensions,[a,o]=this.pageTranslation,u=d(this,ll),h=new Float32Array(u.length*8);let p=0;for(const{x:m,y:v,width:y,height:b}of u){const _=m*n+a,k=(1-v)*s+o;h[p]=h[p+4]=_,h[p+1]=h[p+3]=k,h[p+2]=h[p+6]=_+y*n,h[p+5]=h[p+7]=k-b*s,p+=8}return h},XC=function(n){return d(this,Qs).serialize(n,R(this,qe,Nv).call(this))},YC=function(n,s){this._freeHighlight.add(s)&&n.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},KC=function(n,s){this._freeHighlight.isEmpty()?n.drawLayer.remove(this._freeHighlightId):n.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},QC=function(n){const{color:s}=this._initialData;return n.color.some((a,o)=>a!==s[o])},P(bt,ti),Ee(bt,"_defaultColor",null),Ee(bt,"_defaultOpacity",1),Ee(bt,"_defaultThickness",12),Ee(bt,"_type","highlight"),Ee(bt,"_editorType",He.HIGHLIGHT),Ee(bt,"_freeHighlightId",-1),Ee(bt,"_freeHighlight",null),Ee(bt,"_freeHighlightClipId","");let Tw=bt;var fd;class JC{constructor(){P(this,fd,Object.create(null))}updateProperty(t,n){this[t]=n,this.updateSVGProperty(t,n)}updateProperties(t){if(t)for(const[n,s]of Object.entries(t))n.startsWith("_")||this.updateProperty(n,s)}updateSVGProperty(t,n){d(this,fd)[t]=n}toSVGProperties(){const t=d(this,fd);return E(this,fd,Object.create(null)),{root:t}}reset(){E(this,fd,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Rt("Not implemented")}}fd=new WeakMap;var Fs,sp,jn,pd,gd,Zl,eu,tu,md,mt,zS,BS,US,Iv,ZC,cw,Mv,Zd;const Se=class Se extends Yt{constructor(n){super(n);P(this,mt);P(this,Fs,null);P(this,sp);Ee(this,"_drawId",null);E(this,sp,n.mustBeCommitted||!1),this._addOutlines(n)}_addOutlines(n){n.drawOutlines&&(R(this,mt,zS).call(this,n),R(this,mt,Iv).call(this))}static _mergeSVGProperties(n,s){const a=new Set(Object.keys(n));for(const[o,u]of Object.entries(s))a.has(o)?Object.assign(n[o],u):n[o]=u;return n}static getDefaultDrawingOptions(n){Rt("Not implemented")}static get typesMap(){Rt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(n,s){const a=this.typesMap.get(n);a&&this._defaultDrawingOptions.updateProperty(a,s),this._currentParent&&(d(Se,jn).updateProperty(a,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(n,s){const a=this.constructor.typesMap.get(n);a&&this._updateProperty(n,a,s)}static get defaultPropertiesToUpdate(){const n=[],s=this._defaultDrawingOptions;for(const[a,o]of this.typesMap)n.push([a,s[o]]);return n}get propertiesToUpdate(){const n=[],{_drawingOptions:s}=this;for(const[a,o]of this.constructor.typesMap)n.push([a,s[o]]);return n}_updateProperty(n,s,a){const o=this._drawingOptions,u=o[s],h=p=>{var v;o.updateProperty(s,p);const m=d(this,Fs).updateProperty(s,p);m&&R(this,mt,Mv).call(this,m),(v=this.parent)==null||v.drawLayer.updateProperties(this._drawId,o.toSVGProperties())};this.addCommands({cmd:h.bind(this,a),undo:h.bind(this,u),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:n,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,Se._mergeSVGProperties(d(this,Fs).getPathResizingSVGProperties(R(this,mt,cw).call(this)),{bbox:R(this,mt,Zd).call(this)}))}_onResized(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,Se._mergeSVGProperties(d(this,Fs).getPathResizedSVGProperties(R(this,mt,cw).call(this)),{bbox:R(this,mt,Zd).call(this)}))}_onTranslating(n,s){var a;(a=this.parent)==null||a.drawLayer.updateProperties(this._drawId,{bbox:R(this,mt,Zd).call(this)})}_onTranslated(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,Se._mergeSVGProperties(d(this,Fs).getPathTranslatedSVGProperties(R(this,mt,cw).call(this),this.parentDimensions),{bbox:R(this,mt,Zd).call(this)}))}_onStartDragging(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(n){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,d(this,sp)&&(E(this,sp,!1),this.commit(),this.parent.setSelected(this),n&&this.isOnScreen&&this.div.focus())}remove(){R(this,mt,US).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(R(this,mt,Iv).call(this),R(this,mt,Mv).call(this,d(this,Fs).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(n){var a;let s=!1;this.parent&&!n?(this._uiManager.removeShouldRescale(this),R(this,mt,US).call(this)):n&&(this._uiManager.addShouldRescale(this),R(this,mt,Iv).call(this,n),s=!this.parent&&((a=this.div)==null?void 0:a.classList.contains("selectedEditor"))),super.setParent(n),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Se._mergeSVGProperties({bbox:R(this,mt,Zd).call(this)},d(this,Fs).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&R(this,mt,Mv).call(this,d(this,Fs).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let n,s;this._isCopy&&(n=this.x,s=this.y);const a=super.render();a.classList.add("draw");const o=document.createElement("div");a.append(o),o.setAttribute("aria-hidden","true"),o.className="internal";const[u,h]=this.parentDimensions;return this.setDims(this.width*u,this.height*h),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(n,s),a}static createDrawerInstance(n,s,a,o,u){Rt("Not implemented")}static startDrawing(n,s,a,o){var C;const{target:u,offsetX:h,offsetY:p,pointerId:m,pointerType:v}=o;if(d(Se,eu)&&d(Se,eu)!==v)return;const{viewport:{rotation:y}}=n,{width:b,height:_}=u.getBoundingClientRect(),k=E(Se,pd,new AbortController),x=n.combinedSignal(k);if(d(Se,Zl)||E(Se,Zl,m),d(Se,eu)??E(Se,eu,v),window.addEventListener("pointerup",N=>{var F;d(Se,Zl)===N.pointerId?this._endDraw(N):(F=d(Se,tu))==null||F.delete(N.pointerId)},{signal:x}),window.addEventListener("pointercancel",N=>{var F;d(Se,Zl)===N.pointerId?this._currentParent.endDrawingSession():(F=d(Se,tu))==null||F.delete(N.pointerId)},{signal:x}),window.addEventListener("pointerdown",N=>{d(Se,eu)===N.pointerType&&((d(Se,tu)||E(Se,tu,new Set)).add(N.pointerId),d(Se,jn).isCancellable()&&(d(Se,jn).removeLastElement(),d(Se,jn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:x}),window.addEventListener("contextmenu",ra,{signal:x}),u.addEventListener("pointermove",this._drawMove.bind(this),{signal:x}),u.addEventListener("touchmove",N=>{N.timeStamp===d(Se,md)&&mn(N)},{signal:x}),n.toggleDrawing(),(C=s._editorUndoBar)==null||C.hide(),d(Se,jn)){n.drawLayer.updateProperties(this._currentDrawId,d(Se,jn).startNew(h,p,b,_,y));return}s.updateUIForDefaultProperties(this),E(Se,jn,this.createDrawerInstance(h,p,b,_,y)),E(Se,gd,this.getDefaultDrawingOptions()),this._currentParent=n,{id:this._currentDrawId}=n.drawLayer.draw(this._mergeSVGProperties(d(Se,gd).toSVGProperties(),d(Se,jn).defaultSVGProperties),!0,!1)}static _drawMove(n){var u;if(E(Se,md,-1),!d(Se,jn))return;const{offsetX:s,offsetY:a,pointerId:o}=n;if(d(Se,Zl)===o){if(((u=d(Se,tu))==null?void 0:u.size)>=1){this._endDraw(n);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,d(Se,jn).add(s,a)),E(Se,md,n.timeStamp),mn(n)}}static _cleanup(n){n&&(this._currentDrawId=-1,this._currentParent=null,E(Se,jn,null),E(Se,gd,null),E(Se,eu,null),E(Se,md,NaN)),d(Se,pd)&&(d(Se,pd).abort(),E(Se,pd,null),E(Se,Zl,NaN),E(Se,tu,null))}static _endDraw(n){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(n==null?void 0:n.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,d(Se,jn).end(n.offsetX,n.offsetY)),this.supportMultipleDrawings){const a=d(Se,jn),o=this._currentDrawId,u=a.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(o,a.setLastElement(u))},undo:()=>{s.drawLayer.updateProperties(o,a.removeLastElement())},mustExec:!1,type:ct.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(n){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(ct.DRAW_STEP),!d(Se,jn).isEmpty()){const{pageDimensions:[a,o],scale:u}=s,h=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:d(Se,jn).getOutlines(a*u,o*u,u,this._INNER_MARGIN),drawingOptions:d(Se,gd),mustBeCommitted:!n});return this._cleanup(!0),h}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(n){}static deserializeDraw(n,s,a,o,u,h){Rt("Not implemented")}static async deserialize(n,s,a){var y,b;const{rawDims:{pageWidth:o,pageHeight:u,pageX:h,pageY:p}}=s.viewport,m=this.deserializeDraw(h,p,o,u,this._INNER_MARGIN,n),v=await super.deserialize(n,s,a);return v.createDrawingOptions(n),R(y=v,mt,zS).call(y,{drawOutlines:m}),R(b=v,mt,Iv).call(b),v.onScaleChanging(),v.rotate(),v}serializeDraw(n){const[s,a]=this.pageTranslation,[o,u]=this.pageDimensions;return d(this,Fs).serialize([s,a,o,u],n)}renderAnnotationElement(n){return n.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Fs=new WeakMap,sp=new WeakMap,jn=new WeakMap,pd=new WeakMap,gd=new WeakMap,Zl=new WeakMap,eu=new WeakMap,tu=new WeakMap,md=new WeakMap,mt=new WeakSet,zS=function({drawOutlines:n,drawId:s,drawingOptions:a}){E(this,Fs,n),this._drawingOptions||(this._drawingOptions=a),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,n.defaultProperties)):this._drawId=R(this,mt,BS).call(this,n,this.parent),R(this,mt,Mv).call(this,n.box)},BS=function(n,s){const{id:a}=s.drawLayer.draw(Se._mergeSVGProperties(this._drawingOptions.toSVGProperties(),n.defaultSVGProperties),!1,!1);return a},US=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Iv=function(n=this.parent){if(!(this._drawId!==null&&this.parent===n)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,n.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=R(this,mt,BS).call(this,d(this,Fs),n)}},ZC=function([n,s,a,o]){const{parentDimensions:[u,h],rotation:p}=this;switch(p){case 90:return[s,1-n,a*(h/u),o*(u/h)];case 180:return[1-n,1-s,a,o];case 270:return[1-s,n,a*(h/u),o*(u/h)];default:return[n,s,a,o]}},cw=function(){const{x:n,y:s,width:a,height:o,parentDimensions:[u,h],rotation:p}=this;switch(p){case 90:return[1-s,n,a*(u/h),o*(h/u)];case 180:return[1-n,1-s,a,o];case 270:return[s,1-n,a*(u/h),o*(h/u)];default:return[n,s,a,o]}},Mv=function(n){if([this.x,this.y,this.width,this.height]=R(this,mt,ZC).call(this,n),this.div){this.fixAndSetPosition();const[s,a]=this.parentDimensions;this.setDims(this.width*s,this.height*a)}this._onResized()},Zd=function(){const{x:n,y:s,width:a,height:o,rotation:u,parentRotation:h,parentDimensions:[p,m]}=this;switch((u*4+h)/90){case 1:return[1-s-o,n,o,a];case 2:return[1-n-a,1-s-o,a,o];case 3:return[s,1-n-a,o,a];case 4:return[n,s-a*(p/m),o*(m/p),a*(p/m)];case 5:return[1-s,n,a*(p/m),o*(m/p)];case 6:return[1-n-o*(m/p),1-s,o*(m/p),a*(p/m)];case 7:return[s-a*(p/m),1-n-o*(m/p),a*(p/m),o*(m/p)];case 8:return[n-a,s-o,a,o];case 9:return[1-s,n-a,o,a];case 10:return[1-n,1-s,a,o];case 11:return[s-o,1-n,o,a];case 12:return[n-o*(m/p),s,o*(m/p),a*(p/m)];case 13:return[1-s-a*(p/m),n-o*(m/p),a*(p/m),o*(m/p)];case 14:return[1-n,1-s-a*(p/m),o*(m/p),a*(p/m)];case 15:return[s,1-n,a*(p/m),o*(m/p)];default:return[n,s,a,o]}},Ee(Se,"_currentDrawId",-1),Ee(Se,"_currentParent",null),P(Se,jn,null),P(Se,pd,null),P(Se,gd,null),P(Se,Zl,NaN),P(Se,eu,null),P(Se,tu,null),P(Se,md,NaN),Ee(Se,"_INNER_MARGIN",3);let Pw=Se;var ba,$n,zn,vd,ip,zr,hr,Zs,yd,wd,bd,ap,hw;class iM{constructor(t,n,s,a,o,u){P(this,ap);P(this,ba,new Float64Array(6));P(this,$n);P(this,zn);P(this,vd);P(this,ip);P(this,zr);P(this,hr,"");P(this,Zs,0);P(this,yd,new A0);P(this,wd);P(this,bd);E(this,wd,s),E(this,bd,a),E(this,vd,o),E(this,ip,u),[t,n]=R(this,ap,hw).call(this,t,n);const h=E(this,$n,[NaN,NaN,NaN,NaN,t,n]);E(this,zr,[t,n]),E(this,zn,[{line:h,points:d(this,zr)}]),d(this,ba).set(h,0)}updateProperty(t,n){t==="stroke-width"&&E(this,ip,n)}isEmpty(){return!d(this,zn)||d(this,zn).length===0}isCancellable(){return d(this,zr).length<=10}add(t,n){[t,n]=R(this,ap,hw).call(this,t,n);const[s,a,o,u]=d(this,ba).subarray(2,6),h=t-o,p=n-u;return Math.hypot(d(this,wd)*h,d(this,bd)*p)<=2?null:(d(this,zr).push(t,n),isNaN(s)?(d(this,ba).set([o,u,t,n],2),d(this,$n).push(NaN,NaN,NaN,NaN,t,n),{path:{d:this.toSVGPath()}}):(isNaN(d(this,ba)[0])&&d(this,$n).splice(6,6),d(this,ba).set([s,a,o,u,t,n],0),d(this,$n).push(...be.createBezierPoints(s,a,o,u,t,n)),{path:{d:this.toSVGPath()}}))}end(t,n){const s=this.add(t,n);return s||(d(this,zr).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,n,s,a,o){E(this,wd,s),E(this,bd,a),E(this,vd,o),[t,n]=R(this,ap,hw).call(this,t,n);const u=E(this,$n,[NaN,NaN,NaN,NaN,t,n]);E(this,zr,[t,n]);const h=d(this,zn).at(-1);return h&&(h.line=new Float32Array(h.line),h.points=new Float32Array(h.points)),d(this,zn).push({line:u,points:d(this,zr)}),d(this,ba).set(u,0),E(this,Zs,0),this.toSVGPath(),null}getLastElement(){return d(this,zn).at(-1)}setLastElement(t){return d(this,zn)?(d(this,zn).push(t),E(this,$n,t.line),E(this,zr,t.points),E(this,Zs,0),{path:{d:this.toSVGPath()}}):d(this,yd).setLastElement(t)}removeLastElement(){if(!d(this,zn))return d(this,yd).removeLastElement();d(this,zn).pop(),E(this,hr,"");for(let t=0,n=d(this,zn).length;t<n;t++){const{line:s,points:a}=d(this,zn)[t];E(this,$n,s),E(this,zr,a),E(this,Zs,0),this.toSVGPath()}return{path:{d:d(this,hr)}}}toSVGPath(){const t=be.svgRound(d(this,$n)[4]),n=be.svgRound(d(this,$n)[5]);if(d(this,zr).length===2)return E(this,hr,`${d(this,hr)} M ${t} ${n} Z`),d(this,hr);if(d(this,zr).length<=6){const a=d(this,hr).lastIndexOf("M");E(this,hr,`${d(this,hr).slice(0,a)} M ${t} ${n}`),E(this,Zs,6)}if(d(this,zr).length===4){const a=be.svgRound(d(this,$n)[10]),o=be.svgRound(d(this,$n)[11]);return E(this,hr,`${d(this,hr)} L ${a} ${o}`),E(this,Zs,12),d(this,hr)}const s=[];d(this,Zs)===0&&(s.push(`M ${t} ${n}`),E(this,Zs,6));for(let a=d(this,Zs),o=d(this,$n).length;a<o;a+=6){const[u,h,p,m,v,y]=d(this,$n).slice(a,a+6).map(be.svgRound);s.push(`C${u} ${h} ${p} ${m} ${v} ${y}`)}return E(this,hr,d(this,hr)+s.join(" ")),E(this,Zs,d(this,$n).length),d(this,hr)}getOutlines(t,n,s,a){const o=d(this,zn).at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),d(this,yd).build(d(this,zn),t,n,s,d(this,vd),d(this,ip),a),E(this,ba,null),E(this,$n,null),E(this,zn,null),E(this,hr,null),d(this,yd)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ba=new WeakMap,$n=new WeakMap,zn=new WeakMap,vd=new WeakMap,ip=new WeakMap,zr=new WeakMap,hr=new WeakMap,Zs=new WeakMap,yd=new WeakMap,wd=new WeakMap,bd=new WeakMap,ap=new WeakSet,hw=function(t,n){return be._normalizePoint(t,n,d(this,wd),d(this,bd),d(this,vd))};var Br,p0,g0,js,_a,Sa,op,lp,_d,pr,jo,eT,tT,nT;class A0 extends be{constructor(){super(...arguments);P(this,pr);P(this,Br);P(this,p0,0);P(this,g0);P(this,js);P(this,_a);P(this,Sa);P(this,op);P(this,lp);P(this,_d)}build(n,s,a,o,u,h,p){E(this,_a,s),E(this,Sa,a),E(this,op,o),E(this,lp,u),E(this,_d,h),E(this,g0,p??0),E(this,js,n),R(this,pr,tT).call(this)}get thickness(){return d(this,_d)}setLastElement(n){return d(this,js).push(n),{path:{d:this.toSVGPath()}}}removeLastElement(){return d(this,js).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const n=[];for(const{line:s}of d(this,js)){if(n.push(`M${be.svgRound(s[4])} ${be.svgRound(s[5])}`),s.length===6){n.push("Z");continue}if(s.length===12&&isNaN(s[6])){n.push(`L${be.svgRound(s[10])} ${be.svgRound(s[11])}`);continue}for(let a=6,o=s.length;a<o;a+=6){const[u,h,p,m,v,y]=s.subarray(a,a+6).map(be.svgRound);n.push(`C${u} ${h} ${p} ${m} ${v} ${y}`)}}return n.join("")}serialize([n,s,a,o],u){const h=[],p=[],[m,v,y,b]=R(this,pr,eT).call(this);let _,k,x,C,N,F,D,j,z;switch(d(this,lp)){case 0:z=be._rescale,_=n,k=s+o,x=a,C=-o,N=n+m*a,F=s+(1-v-b)*o,D=n+(m+y)*a,j=s+(1-v)*o;break;case 90:z=be._rescaleAndSwap,_=n,k=s,x=a,C=o,N=n+v*a,F=s+m*o,D=n+(v+b)*a,j=s+(m+y)*o;break;case 180:z=be._rescale,_=n+a,k=s,x=-a,C=o,N=n+(1-m-y)*a,F=s+v*o,D=n+(1-m)*a,j=s+(v+b)*o;break;case 270:z=be._rescaleAndSwap,_=n+a,k=s+o,x=-a,C=-o,N=n+(1-v-b)*a,F=s+(1-m-y)*o,D=n+(1-v)*a,j=s+(1-m)*o;break}for(const{line:V,points:G}of d(this,js))h.push(z(V,_,k,x,C,u?new Array(V.length):null)),p.push(z(G,_,k,x,C,u?new Array(G.length):null));return{lines:h,points:p,rect:[N,F,D,j]}}static deserialize(n,s,a,o,u,{paths:{lines:h,points:p},rotation:m,thickness:v}){const y=[];let b,_,k,x,C;switch(m){case 0:C=be._rescale,b=-n/a,_=s/o+1,k=1/a,x=-1/o;break;case 90:C=be._rescaleAndSwap,b=-s/o,_=-n/a,k=1/o,x=1/a;break;case 180:C=be._rescale,b=n/a+1,_=-s/o,k=-1/a,x=1/o;break;case 270:C=be._rescaleAndSwap,b=s/o+1,_=n/a+1,k=-1/o,x=-1/a;break}if(!h){h=[];for(const F of p){const D=F.length;if(D===2){h.push(new Float32Array([NaN,NaN,NaN,NaN,F[0],F[1]]));continue}if(D===4){h.push(new Float32Array([NaN,NaN,NaN,NaN,F[0],F[1],NaN,NaN,NaN,NaN,F[2],F[3]]));continue}const j=new Float32Array(3*(D-2));h.push(j);let[z,V,G,ee]=F.subarray(0,4);j.set([NaN,NaN,NaN,NaN,z,V],0);for(let oe=4;oe<D;oe+=2){const de=F[oe],ce=F[oe+1];j.set(be.createBezierPoints(z,V,G,ee,de,ce),(oe-2)*3),[z,V,G,ee]=[G,ee,de,ce]}}}for(let F=0,D=h.length;F<D;F++)y.push({line:C(h[F].map(j=>j??NaN),b,_,k,x),points:C(p[F].map(j=>j??NaN),b,_,k,x)});const N=new this.prototype.constructor;return N.build(y,a,o,1,m,v,u),N}get box(){return d(this,Br)}updateProperty(n,s){return n==="stroke-width"?R(this,pr,nT).call(this,s):null}updateParentDimensions([n,s],a){const[o,u]=R(this,pr,jo).call(this);E(this,_a,n),E(this,Sa,s),E(this,op,a);const[h,p]=R(this,pr,jo).call(this),m=h-o,v=p-u,y=d(this,Br);return y[0]-=m,y[1]-=v,y[2]+=2*m,y[3]+=2*v,y}updateRotation(n){return E(this,p0,n),{path:{transform:this.rotationTransform}}}get viewBox(){return d(this,Br).map(be.svgRound).join(" ")}get defaultProperties(){const[n,s]=d(this,Br);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${be.svgRound(n)} ${be.svgRound(s)}`}}}get rotationTransform(){const[,,n,s]=d(this,Br);let a=0,o=0,u=0,h=0,p=0,m=0;switch(d(this,p0)){case 90:o=s/n,u=-n/s,p=n;break;case 180:a=-1,h=-1,p=n,m=s;break;case 270:o=-s/n,u=n/s,m=s;break;default:return""}return`matrix(${a} ${o} ${u} ${h} ${be.svgRound(p)} ${be.svgRound(m)})`}getPathResizingSVGProperties([n,s,a,o]){const[u,h]=R(this,pr,jo).call(this),[p,m,v,y]=d(this,Br);if(Math.abs(v-u)<=be.PRECISION||Math.abs(y-h)<=be.PRECISION){const C=n+a/2-(p+v/2),N=s+o/2-(m+y/2);return{path:{"transform-origin":`${be.svgRound(n)} ${be.svgRound(s)}`,transform:`${this.rotationTransform} translate(${C} ${N})`}}}const b=(a-2*u)/(v-2*u),_=(o-2*h)/(y-2*h),k=v/a,x=y/o;return{path:{"transform-origin":`${be.svgRound(p)} ${be.svgRound(m)}`,transform:`${this.rotationTransform} scale(${k} ${x}) translate(${be.svgRound(u)} ${be.svgRound(h)}) scale(${b} ${_}) translate(${be.svgRound(-u)} ${be.svgRound(-h)})`}}}getPathResizedSVGProperties([n,s,a,o]){const[u,h]=R(this,pr,jo).call(this),p=d(this,Br),[m,v,y,b]=p;if(p[0]=n,p[1]=s,p[2]=a,p[3]=o,Math.abs(y-u)<=be.PRECISION||Math.abs(b-h)<=be.PRECISION){const N=n+a/2-(m+y/2),F=s+o/2-(v+b/2);for(const{line:D,points:j}of d(this,js))be._translate(D,N,F,D),be._translate(j,N,F,j);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${be.svgRound(n)} ${be.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const _=(a-2*u)/(y-2*u),k=(o-2*h)/(b-2*h),x=-_*(m+u)+n+u,C=-k*(v+h)+s+h;if(_!==1||k!==1||x!==0||C!==0)for(const{line:N,points:F}of d(this,js))be._rescale(N,x,C,_,k,N),be._rescale(F,x,C,_,k,F);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${be.svgRound(n)} ${be.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([n,s],a){const[o,u]=a,h=d(this,Br),p=n-h[0],m=s-h[1];if(d(this,_a)===o&&d(this,Sa)===u)for(const{line:v,points:y}of d(this,js))be._translate(v,p,m,v),be._translate(y,p,m,y);else{const v=d(this,_a)/o,y=d(this,Sa)/u;E(this,_a,o),E(this,Sa,u);for(const{line:b,points:_}of d(this,js))be._rescale(b,p,m,v,y,b),be._rescale(_,p,m,v,y,_);h[2]*=v,h[3]*=y}return h[0]=n,h[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${be.svgRound(n)} ${be.svgRound(s)}`}}}get defaultSVGProperties(){const n=d(this,Br);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${be.svgRound(n[0])} ${be.svgRound(n[1])}`,transform:this.rotationTransform||null},bbox:n}}}Br=new WeakMap,p0=new WeakMap,g0=new WeakMap,js=new WeakMap,_a=new WeakMap,Sa=new WeakMap,op=new WeakMap,lp=new WeakMap,_d=new WeakMap,pr=new WeakSet,jo=function(n=d(this,_d)){const s=d(this,g0)+n/2*d(this,op);return d(this,lp)%180===0?[s/d(this,_a),s/d(this,Sa)]:[s/d(this,Sa),s/d(this,_a)]},eT=function(){const[n,s,a,o]=d(this,Br),[u,h]=R(this,pr,jo).call(this,0);return[n+u,s+h,a-2*u,o-2*h]},tT=function(){const n=E(this,Br,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:o}of d(this,js)){if(o.length<=12){for(let p=4,m=o.length;p<m;p+=6)Te.pointBoundingBox(o[p],o[p+1],n);continue}let u=o[4],h=o[5];for(let p=6,m=o.length;p<m;p+=6){const[v,y,b,_,k,x]=o.subarray(p,p+6);Te.bezierBoundingBox(u,h,v,y,b,_,k,x,n),u=k,h=x}}const[s,a]=R(this,pr,jo).call(this);n[0]=Hr(n[0]-s,0,1),n[1]=Hr(n[1]-a,0,1),n[2]=Hr(n[2]+s,0,1),n[3]=Hr(n[3]+a,0,1),n[2]-=n[0],n[3]-=n[1]},nT=function(n){const[s,a]=R(this,pr,jo).call(this);E(this,_d,n);const[o,u]=R(this,pr,jo).call(this),[h,p]=[o-s,u-a],m=d(this,Br);return m[0]-=h,m[1]-=p,m[2]+=2*h,m[3]+=2*p,m};class ib extends JC{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Yt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,n){t==="stroke-width"&&(n??(n=this["stroke-width"]),n*=this._viewParameters.realScale),super.updateSVGProperty(t,n)}clone(){const t=new ib(this._viewParameters);return t.updateAll(this),t}}var qw,rT;const nf=class nf extends Pw{constructor(n){super({...n,name:"inkEditor"});P(this,qw);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(n,s){Yt.initialize(n,s),this._defaultDrawingOptions=new ib(s.viewParameters)}static getDefaultDrawingOptions(n){const s=this._defaultDrawingOptions.clone();return s.updateProperties(n),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return at(this,"typesMap",new Map([[ct.INK_THICKNESS,"stroke-width"],[ct.INK_COLOR,"stroke"],[ct.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(n,s,a,o,u){return new iM(n,s,a,o,u,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(n,s,a,o,u,h){return A0.deserialize(n,s,a,o,u,h)}static async deserialize(n,s,a){let o=null;if(n instanceof AE){const{data:{inkLists:h,rect:p,rotation:m,id:v,color:y,opacity:b,borderStyle:{rawWidth:_},popupRef:k},parent:{page:{pageNumber:x}}}=n;o=n={annotationType:He.INK,color:Array.from(y),thickness:_,opacity:b,paths:{points:h},boxes:null,pageIndex:x-1,rect:p.slice(0),rotation:m,id:v,deleted:!1,popupRef:k}}const u=await super.deserialize(n,s,a);return u.annotationElementId=n.id||null,u._initialData=o,u}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:n,_drawingOptions:s,parent:a}=this;s.updateSVGProperty("stroke-width"),a.drawLayer.updateProperties(n,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const n=this._currentParent;n&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:n,thickness:s,opacity:a}){this._drawingOptions=nf.getDefaultDrawingOptions({stroke:Te.makeHexColor(...n),"stroke-width":s,"stroke-opacity":a})}serialize(n=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:a,rect:o}=this.serializeDraw(n),{_drawingOptions:{stroke:u,"stroke-opacity":h,"stroke-width":p}}=this,m={annotationType:He.INK,color:Yt._colorManager.convert(u),opacity:h,thickness:p,paths:{lines:s,points:a},pageIndex:this.pageIndex,rect:o,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return n?(m.isCopy=!0,m):this.annotationElementId&&!R(this,qw,rT).call(this,m)?null:(m.id=this.annotationElementId,m)}renderAnnotationElement(n){const{points:s,rect:a}=this.serializeDraw(!1);return n.updateEdited({rect:a,thickness:this._drawingOptions["stroke-width"],points:s}),null}};qw=new WeakSet,rT=function(n){const{color:s,thickness:a,opacity:o,pageIndex:u}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||n.color.some((h,p)=>h!==s[p])||n.thickness!==a||n.opacity!==o||n.pageIndex!==u},Ee(nf,"_type","ink"),Ee(nf,"_editorType",He.INK),Ee(nf,"_defaultDrawingOptions",null);let HS=nf;class VS extends A0{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const z0=8,yv=3;var Sd,_t,WS,Ji,sT,iT,GS,dw,aT,oT,lT,qS,XS,uT;class ml{static extractContoursFromText(t,{fontFamily:n,fontStyle:s,fontWeight:a},o,u,h,p){let m=new OffscreenCanvas(1,1),v=m.getContext("2d",{alpha:!1});const y=200,b=v.font=`${s} ${a} ${y}px ${n}`,{actualBoundingBoxLeft:_,actualBoundingBoxRight:k,actualBoundingBoxAscent:x,actualBoundingBoxDescent:C,fontBoundingBoxAscent:N,fontBoundingBoxDescent:F,width:D}=v.measureText(t),j=1.5,z=Math.ceil(Math.max(Math.abs(_)+Math.abs(k)||0,D)*j),V=Math.ceil(Math.max(Math.abs(x)+Math.abs(C)||y,Math.abs(N)+Math.abs(F)||y)*j);m=new OffscreenCanvas(z,V),v=m.getContext("2d",{alpha:!0,willReadFrequently:!0}),v.font=b,v.filter="grayscale(1)",v.fillStyle="white",v.fillRect(0,0,z,V),v.fillStyle="black",v.fillText(t,z*(j-1)/2,V*(3-j)/2);const G=R(this,_t,qS).call(this,v.getImageData(0,0,z,V).data),ee=R(this,_t,lT).call(this,G),oe=R(this,_t,XS).call(this,ee),de=R(this,_t,GS).call(this,G,z,V,oe);return this.processDrawnLines({lines:{curves:de,width:z,height:V},pageWidth:o,pageHeight:u,rotation:h,innerMargin:p,mustSmooth:!0,areContours:!0})}static process(t,n,s,a,o){const[u,h,p]=R(this,_t,uT).call(this,t),[m,v]=R(this,_t,oT).call(this,u,h,p,Math.hypot(h,p)*d(this,Sd).sigmaSFactor,d(this,Sd).sigmaR,d(this,Sd).kernelSize),y=R(this,_t,XS).call(this,v),b=R(this,_t,GS).call(this,m,h,p,y);return this.processDrawnLines({lines:{curves:b,width:h,height:p},pageWidth:n,pageHeight:s,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:n,pageHeight:s,rotation:a,innerMargin:o,mustSmooth:u,areContours:h}){a%180!==0&&([n,s]=[s,n]);const{curves:p,width:m,height:v}=t,y=t.thickness??0,b=[],_=Math.min(n/m,s/v),k=_/n,x=_/s,C=[];for(const{points:F}of p){const D=u?R(this,_t,aT).call(this,F):F;if(!D)continue;C.push(D);const j=D.length,z=new Float32Array(j),V=new Float32Array(3*(j===2?2:j-2));if(b.push({line:V,points:z}),j===2){z[0]=D[0]*k,z[1]=D[1]*x,V.set([NaN,NaN,NaN,NaN,z[0],z[1]],0);continue}let[G,ee,oe,de]=D;G*=k,ee*=x,oe*=k,de*=x,z.set([G,ee,oe,de],0),V.set([NaN,NaN,NaN,NaN,G,ee],0);for(let ce=4;ce<j;ce+=2){const Ne=z[ce]=D[ce]*k,Ae=z[ce+1]=D[ce+1]*x;V.set(be.createBezierPoints(G,ee,oe,de,Ne,Ae),(ce-2)*3),[G,ee,oe,de]=[oe,de,Ne,Ae]}}if(b.length===0)return null;const N=h?new VS:new A0;return N.build(b,n,s,1,a,h?0:y,o),{outline:N,newCurves:C,areContours:h,thickness:y,width:m,height:v}}static async compressSignature({outlines:t,areContours:n,thickness:s,width:a,height:o}){let u=1/0,h=-1/0,p=0;for(const D of t){p+=D.length;for(let j=2,z=D.length;j<z;j++){const V=D[j]-D[j-2];u=Math.min(u,V),h=Math.max(h,V)}}let m;u>=-128&&h<=127?m=Int8Array:u>=-32768&&h<=32767?m=Int16Array:m=Int32Array;const v=t.length,y=z0+yv*v,b=new Uint32Array(y);let _=0;b[_++]=y*Uint32Array.BYTES_PER_ELEMENT+(p-2*v)*m.BYTES_PER_ELEMENT,b[_++]=0,b[_++]=a,b[_++]=o,b[_++]=n?0:1,b[_++]=Math.max(0,Math.floor(s??0)),b[_++]=v,b[_++]=m.BYTES_PER_ELEMENT;for(const D of t)b[_++]=D.length-2,b[_++]=D[0],b[_++]=D[1];const k=new CompressionStream("deflate-raw"),x=k.writable.getWriter();await x.ready,x.write(b);const C=m.prototype.constructor;for(const D of t){const j=new C(D.length-2);for(let z=2,V=D.length;z<V;z++)j[z-2]=D[z]-D[z-2];x.write(j)}x.close();const N=await new Response(k.readable).arrayBuffer(),F=new Uint8Array(N);return dA(F)}static async decompressSignature(t){try{const n=TN(t),{readable:s,writable:a}=new DecompressionStream("deflate-raw"),o=a.getWriter();await o.ready,o.write(n).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let u=null,h=0;for await(const D of s)u||(u=new Uint8Array(new Uint32Array(D.buffer,0,4)[0])),u.set(D,h),h+=D.length;const p=new Uint32Array(u.buffer,0,u.length>>2),m=p[1];if(m!==0)throw new Error(`Invalid version: ${m}`);const v=p[2],y=p[3],b=p[4]===0,_=p[5],k=p[6],x=p[7],C=[],N=(z0+yv*k)*Uint32Array.BYTES_PER_ELEMENT;let F;switch(x){case Int8Array.BYTES_PER_ELEMENT:F=new Int8Array(u.buffer,N);break;case Int16Array.BYTES_PER_ELEMENT:F=new Int16Array(u.buffer,N);break;case Int32Array.BYTES_PER_ELEMENT:F=new Int32Array(u.buffer,N);break}h=0;for(let D=0;D<k;D++){const j=p[yv*D+z0],z=new Float32Array(j+2);C.push(z);for(let V=0;V<yv-1;V++)z[V]=p[yv*D+z0+V+1];for(let V=0;V<j;V++)z[V+2]=z[V]+F[h++]}return{areContours:b,thickness:_,outlines:C,width:v,height:y}}catch(n){return Ve(`decompressSignature: ${n}`),null}}}Sd=new WeakMap,_t=new WeakSet,WS=function(t,n,s,a){return s-=t,a-=n,s===0?a>0?0:4:s===1?a+6:2-a},Ji=new WeakMap,sT=function(t,n,s,a,o,u,h){const p=R(this,_t,WS).call(this,s,a,o,u);for(let m=0;m<8;m++){const v=(-m+p-h+16)%8,y=d(this,Ji)[2*v],b=d(this,Ji)[2*v+1];if(t[(s+y)*n+(a+b)]!==0)return v}return-1},iT=function(t,n,s,a,o,u,h){const p=R(this,_t,WS).call(this,s,a,o,u);for(let m=0;m<8;m++){const v=(m+p+h+16)%8,y=d(this,Ji)[2*v],b=d(this,Ji)[2*v+1];if(t[(s+y)*n+(a+b)]!==0)return v}return-1},GS=function(t,n,s,a){const o=t.length,u=new Int32Array(o);for(let v=0;v<o;v++)u[v]=t[v]<=a?1:0;for(let v=1;v<s-1;v++)u[v*n]=u[v*n+n-1]=0;for(let v=0;v<n;v++)u[v]=u[n*s-1-v]=0;let h=1,p;const m=[];for(let v=1;v<s-1;v++){p=1;for(let y=1;y<n-1;y++){const b=v*n+y,_=u[b];if(_===0)continue;let k=v,x=y;if(_===1&&u[b-1]===0)h+=1,x-=1;else if(_>=1&&u[b+1]===0)h+=1,x+=1,_>1&&(p=_);else{_!==1&&(p=Math.abs(_));continue}const C=[y,v],N=x===y+1,F={isHole:N,points:C,id:h,parent:0};m.push(F);let D;for(const ce of m)if(ce.id===p){D=ce;break}D?D.isHole?F.parent=N?D.parent:p:F.parent=N?p:D.parent:F.parent=N?p:0;const j=R(this,_t,sT).call(this,u,n,v,y,k,x,0);if(j===-1){u[b]=-h,u[b]!==1&&(p=Math.abs(u[b]));continue}let z=d(this,Ji)[2*j],V=d(this,Ji)[2*j+1];const G=v+z,ee=y+V;k=G,x=ee;let oe=v,de=y;for(;;){const ce=R(this,_t,iT).call(this,u,n,oe,de,k,x,1);z=d(this,Ji)[2*ce],V=d(this,Ji)[2*ce+1];const Ne=oe+z,Ae=de+V;C.push(Ae,Ne);const Pe=oe*n+de;if(u[Pe+1]===0?u[Pe]=-h:u[Pe]===1&&(u[Pe]=h),Ne===v&&Ae===y&&oe===G&&de===ee){u[b]!==1&&(p=Math.abs(u[b]));break}else k=oe,x=de,oe=Ne,de=Ae}}}return m},dw=function(t,n,s,a){if(s-n<=4){for(let G=n;G<s-2;G+=2)a.push(t[G],t[G+1]);return}const o=t[n],u=t[n+1],h=t[s-4]-o,p=t[s-3]-u,m=Math.hypot(h,p),v=h/m,y=p/m,b=v*u-y*o,_=p/h,k=1/m,x=Math.atan(_),C=Math.cos(x),N=Math.sin(x),F=k*(Math.abs(C)+Math.abs(N)),D=k*(1-F+F**2),j=Math.max(Math.atan(Math.abs(N+C)*D),Math.atan(Math.abs(N-C)*D));let z=0,V=n;for(let G=n+2;G<s-2;G+=2){const ee=Math.abs(b-v*t[G+1]+y*t[G]);ee>z&&(V=G,z=ee)}z>(m*j)**2?(R(this,_t,dw).call(this,t,n,V+2,a),R(this,_t,dw).call(this,t,V,s,a)):a.push(o,u)},aT=function(t){const n=[],s=t.length;return R(this,_t,dw).call(this,t,0,s,n),n.push(t[s-2],t[s-1]),n.length<=4?null:n},oT=function(t,n,s,a,o,u){const h=new Float32Array(u**2),p=-2*a**2,m=u>>1;for(let x=0;x<u;x++){const C=(x-m)**2;for(let N=0;N<u;N++)h[x*u+N]=Math.exp((C+(N-m)**2)/p)}const v=new Float32Array(256),y=-2*o**2;for(let x=0;x<256;x++)v[x]=Math.exp(x**2/y);const b=t.length,_=new Uint8Array(b),k=new Uint32Array(256);for(let x=0;x<s;x++)for(let C=0;C<n;C++){const N=x*n+C,F=t[N];let D=0,j=0;for(let V=0;V<u;V++){const G=x+V-m;if(!(G<0||G>=s))for(let ee=0;ee<u;ee++){const oe=C+ee-m;if(oe<0||oe>=n)continue;const de=t[G*n+oe],ce=h[V*u+ee]*v[Math.abs(de-F)];D+=de*ce,j+=ce}}const z=_[N]=Math.round(D/j);k[z]++}return[_,k]},lT=function(t){const n=new Uint32Array(256);for(const s of t)n[s]++;return n},qS=function(t){const n=t.length,s=new Uint8ClampedArray(n>>2);let a=-1/0,o=1/0;for(let h=0,p=s.length;h<p;h++){if(t[(h<<2)+3]===0){a=s[h]=255;continue}const v=s[h]=t[h<<2];v>a&&(a=v),v<o&&(o=v)}const u=255/(a-o);for(let h=0;h<n;h++)s[h]=(s[h]-o)*u;return s},XS=function(t){let n,s=-1/0,a=-1/0;const o=t.findIndex(p=>p!==0);let u=o,h=o;for(n=o;n<256;n++){const p=t[n];p>s&&(n-u>a&&(a=n-u,h=n-1),s=p,u=n)}for(n=h-1;n>=0&&!(t[n]>t[n+1]);n--);return n},uT=function(t){const n=t,{width:s,height:a}=t,{maxDim:o}=d(this,Sd);let u=s,h=a;if(s>o||a>o){let b=s,_=a,k=Math.log2(Math.max(s,a)/o);const x=Math.floor(k);k=k===x?x-1:x;for(let N=0;N<k;N++){u=b,h=_,u>o&&(u=Math.ceil(u/2)),h>o&&(h=Math.ceil(h/2));const F=new OffscreenCanvas(u,h);F.getContext("2d").drawImage(t,0,0,b,_,0,0,u,h),b=u,_=h,t!==n&&t.close(),t=F.transferToImageBitmap()}const C=Math.min(o/u,o/h);u=Math.round(u*C),h=Math.round(h*C)}const m=new OffscreenCanvas(u,h).getContext("2d",{willReadFrequently:!0});m.filter="grayscale(1)",m.drawImage(t,0,0,t.width,t.height,0,0,u,h);const v=m.getImageData(0,0,u,h).data;return[R(this,_t,qS).call(this,v),u,h]},P(ml,_t),P(ml,Sd,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),P(ml,Ji,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class CE extends JC{constructor(){super(),super.updateProperties({fill:"CanvasText","stroke-width":0})}clone(){const t=new CE;return t.updateAll(this),t}}class TE extends ib{constructor(t){super(t),super.updateProperties({stroke:"CanvasText","stroke-width":1})}clone(){const t=new TE(this._viewParameters);return t.updateAll(this),t}}var nu,$s,ru,su;const Cs=class Cs extends Pw{constructor(n){super({...n,mustBeCommitted:!0,name:"signatureEditor"});P(this,nu,!1);P(this,$s,null);P(this,ru,null);P(this,su,null);this._willKeepAspectRatio=!0,E(this,ru,n.signatureData||null),E(this,$s,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(n,s){Yt.initialize(n,s),this._defaultDrawingOptions=new CE,this._defaultDrawnSignatureOptions=new TE(s.viewParameters)}static getDefaultDrawingOptions(n){const s=this._defaultDrawingOptions.clone();return s.updateProperties(n),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return at(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!d(this,$s)}}static computeTelemetryFinalData(n){const s=n.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let n,s;const{_isCopy:a}=this;if(a&&(this._isCopy=!1,n=this.x,s=this.y),super.render(),this._drawId===null)if(d(this,ru)){const{lines:o,mustSmooth:u,areContours:h,description:p,uuid:m,heightInPage:v}=d(this,ru),{rawDims:{pageWidth:y,pageHeight:b},rotation:_}=this.parent.viewport,k=ml.processDrawnLines({lines:o,pageWidth:y,pageHeight:b,rotation:_,innerMargin:Cs._INNER_MARGIN,mustSmooth:u,areContours:h});this.addSignature(k,v,p,m)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return a&&(this._isCopy=!0,this._moveAfterPaste(n,s)),this.div}setUuid(n){E(this,su,n),this.addEditToolbar()}getUuid(){return d(this,su)}get description(){return d(this,$s)}set description(n){E(this,$s,n),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(n)})}getSignaturePreview(){const{newCurves:n,areContours:s,thickness:a,width:o,height:u}=d(this,ru),h=Math.max(o,u),p=ml.processDrawnLines({lines:{curves:n.map(m=>({points:m})),thickness:a,width:o,height:u},pageWidth:h,pageHeight:h,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:p.outline}}async addEditToolbar(){const n=await super.addEditToolbar();return n?(this._uiManager.signatureManager&&d(this,$s)!==null&&(await n.addEditSignatureButton(this._uiManager.signatureManager,d(this,su),d(this,$s)),n.show()),n):null}addSignature(n,s,a,o){const{x:u,y:h}=this,{outline:p}=E(this,ru,n);E(this,nu,p instanceof VS),E(this,$s,a),this.div.setAttribute("data-l10n-args",JSON.stringify({description:a}));let m;d(this,nu)?m=Cs.getDefaultDrawingOptions():(m=Cs._defaultDrawnSignatureOptions.clone(),m.updateProperties({"stroke-width":p.thickness})),this._addOutlines({drawOutlines:p,drawingOptions:m});const[v,y]=this.parentDimensions,[,b]=this.pageDimensions;let _=s/b;_=_>=1?.5:_,this.width*=_/this.height,this.width>=1&&(_*=.9/this.width,this.width=.9),this.height=_,this.setDims(v*this.width,y*this.height),this.x=u,this.y=h,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(o),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!o,hasDescription:!!a}}),this.div.hidden=!1}getFromImage(n){const{rawDims:{pageWidth:s,pageHeight:a},rotation:o}=this.parent.viewport;return ml.process(n,s,a,o,Cs._INNER_MARGIN)}getFromText(n,s){const{rawDims:{pageWidth:a,pageHeight:o},rotation:u}=this.parent.viewport;return ml.extractContoursFromText(n,s,a,o,u,Cs._INNER_MARGIN)}getDrawnSignature(n){const{rawDims:{pageWidth:s,pageHeight:a},rotation:o}=this.parent.viewport;return ml.processDrawnLines({lines:n,pageWidth:s,pageHeight:a,rotation:o,innerMargin:Cs._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:n,thickness:s}){n?this._drawingOptions=Cs.getDefaultDrawingOptions():(this._drawingOptions=Cs._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(n=!1){if(this.isEmpty())return null;const{lines:s,points:a,rect:o}=this.serializeDraw(n),{_drawingOptions:{"stroke-width":u}}=this,h={annotationType:He.SIGNATURE,isSignature:!0,areContours:d(this,nu),color:[0,0,0],thickness:d(this,nu)?0:u,pageIndex:this.pageIndex,rect:o,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return n?(h.paths={lines:s,points:a},h.uuid=d(this,su),h.isCopy=!0):h.lines=s,d(this,$s)&&(h.accessibilityData={type:"Figure",alt:d(this,$s)}),h}static deserializeDraw(n,s,a,o,u,h){return h.areContours?VS.deserialize(n,s,a,o,u,h):A0.deserialize(n,s,a,o,u,h)}static async deserialize(n,s,a){var u;const o=await super.deserialize(n,s,a);return E(o,nu,n.areContours),E(o,$s,((u=n.accessibilityData)==null?void 0:u.alt)||""),E(o,su,n.uuid),o}};nu=new WeakMap,$s=new WeakMap,ru=new WeakMap,su=new WeakMap,Ee(Cs,"_type","signature"),Ee(Cs,"_editorType",He.SIGNATURE),Ee(Cs,"_defaultDrawingOptions",null);let YS=Cs;var Gt,Bn,iu,cl,au,up,hl,Ed,Ea,zs,cp,vt,Ov,Dv,fw,pw,gw,QS,mw,cT;class KS extends Yt{constructor(n){super({...n,name:"stampEditor"});P(this,vt);P(this,Gt,null);P(this,Bn,null);P(this,iu,null);P(this,cl,null);P(this,au,null);P(this,up,"");P(this,hl,null);P(this,Ed,!1);P(this,Ea,null);P(this,zs,!1);P(this,cp,!1);E(this,cl,n.bitmapUrl),E(this,au,n.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(n,s){Yt.initialize(n,s)}static isHandlingMimeForPasting(n){return H1.includes(n)}static paste(n,s){s.pasteEditor(He.STAMP,{bitmapFile:n.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var n;return{type:"stamp",hasAltText:!!((n=this.altTextData)!=null&&n.altText)}}static computeTelemetryFinalData(n){const s=n.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(n=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:a}=this._uiManager;if(!a)throw new Error("No ML.");if(!await a.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:u,height:h}=n||this.copyCanvas(null,null,!0).imageData,p=await a.guess({name:"altText",request:{data:o,width:u,height:h,channels:o.length/(u*h)}});if(!p)throw new Error("No response from the AI service.");if(p.error)throw new Error("Error from the AI service.");if(p.cancel)return null;if(!p.output)throw new Error("No valid response from the AI service.");const m=p.output;return await this.setGuessedAltText(m),s&&!this.hasAltTextData()&&(this.altTextData={alt:m,decorative:!1}),m}remove(){var n;d(this,Bn)&&(E(this,Gt,null),this._uiManager.imageManager.deleteId(d(this,Bn)),(n=d(this,hl))==null||n.remove(),E(this,hl,null),d(this,Ea)&&(clearTimeout(d(this,Ea)),E(this,Ea,null))),super.remove()}rebuild(){if(!this.parent){d(this,Bn)&&R(this,vt,fw).call(this);return}super.rebuild(),this.div!==null&&(d(this,Bn)&&d(this,hl)===null&&R(this,vt,fw).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(n){this._isDraggable=!0,n&&this.div.focus()}isEmpty(){return!(d(this,iu)||d(this,Gt)||d(this,cl)||d(this,au)||d(this,Bn)||d(this,Ed))}get isResizable(){return!0}render(){if(this.div)return this.div;let n,s;return this._isCopy&&(n=this.x,s=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),d(this,Ed)||(d(this,Gt)?R(this,vt,pw).call(this):R(this,vt,fw).call(this)),this._isCopy&&this._moveAfterPaste(n,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(n,s){const{id:a,bitmap:o}=this._uiManager.imageManager.getFromCanvas(n,s);s.remove(),a&&this._uiManager.imageManager.isValidId(a)&&(E(this,Bn,a),o&&E(this,Gt,o),E(this,Ed,!1),R(this,vt,pw).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;d(this,Ea)!==null&&clearTimeout(d(this,Ea)),E(this,Ea,setTimeout(()=>{E(this,Ea,null),R(this,vt,QS).call(this)},200))}copyCanvas(n,s,a=!1){var _;n||(n=224);const{width:o,height:u}=d(this,Gt),h=new wl;let p=d(this,Gt),m=o,v=u,y=null;if(s){if(o>s||u>s){const ee=Math.min(s/o,s/u);m=Math.floor(o*ee),v=Math.floor(u*ee)}y=document.createElement("canvas");const k=y.width=Math.ceil(m*h.sx),x=y.height=Math.ceil(v*h.sy);d(this,zs)||(p=R(this,vt,gw).call(this,k,x));const C=y.getContext("2d");C.filter=this._uiManager.hcmFilter;let N="white",F="#cfcfd8";this._uiManager.hcmFilter!=="none"?F="black":(_=window.matchMedia)!=null&&_.call(window,"(prefers-color-scheme: dark)").matches&&(N="#8f8f9d",F="#42414d");const D=15,j=D*h.sx,z=D*h.sy,V=new OffscreenCanvas(j*2,z*2),G=V.getContext("2d");G.fillStyle=N,G.fillRect(0,0,j*2,z*2),G.fillStyle=F,G.fillRect(0,0,j,z),G.fillRect(j,z,j,z),C.fillStyle=C.createPattern(V,"repeat"),C.fillRect(0,0,k,x),C.drawImage(p,0,0,p.width,p.height,0,0,k,x)}let b=null;if(a){let k,x;if(h.symmetric&&p.width<n&&p.height<n)k=p.width,x=p.height;else if(p=d(this,Gt),o>n||u>n){const F=Math.min(n/o,n/u);k=Math.floor(o*F),x=Math.floor(u*F),d(this,zs)||(p=R(this,vt,gw).call(this,k,x))}const N=new OffscreenCanvas(k,x).getContext("2d",{willReadFrequently:!0});N.drawImage(p,0,0,p.width,p.height,0,0,k,x),b={width:k,height:x,data:N.getImageData(0,0,k,x).data}}return{canvas:y,width:m,height:v,imageData:b}}static async deserialize(n,s,a){var C;let o=null,u=!1;if(n instanceof kC){const{data:{rect:N,rotation:F,id:D,structParent:j,popupRef:z},container:V,parent:{page:{pageNumber:G}},canvas:ee}=n;let oe,de;ee?(delete n.canvas,{id:oe,bitmap:de}=a.imageManager.getFromCanvas(V.id,ee),ee.remove()):(u=!0,n._hasNoCanvas=!0);const ce=((C=await s._structTree.getAriaAttributes(`${vE}${D}`))==null?void 0:C.get("aria-label"))||"";o=n={annotationType:He.STAMP,bitmapId:oe,bitmap:de,pageIndex:G-1,rect:N.slice(0),rotation:F,id:D,deleted:!1,accessibilityData:{decorative:!1,altText:ce},isSvg:!1,structParent:j,popupRef:z}}const h=await super.deserialize(n,s,a),{rect:p,bitmap:m,bitmapUrl:v,bitmapId:y,isSvg:b,accessibilityData:_}=n;u?(a.addMissingCanvas(n.id,h),E(h,Ed,!0)):y&&a.imageManager.isValidId(y)?(E(h,Bn,y),m&&E(h,Gt,m)):E(h,cl,v),E(h,zs,b);const[k,x]=h.pageDimensions;return h.width=(p[2]-p[0])/k,h.height=(p[3]-p[1])/x,h.annotationElementId=n.id||null,_&&(h.altTextData=_),h._initialData=o,E(h,cp,!!o),h}serialize(n=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const a={annotationType:He.STAMP,bitmapId:d(this,Bn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:d(this,zs),structTreeParentId:this._structTreeParentId};if(n)return a.bitmapUrl=R(this,vt,mw).call(this,!0),a.accessibilityData=this.serializeAltText(!0),a.isCopy=!0,a;const{decorative:o,altText:u}=this.serializeAltText(!1);if(!o&&u&&(a.accessibilityData={type:"Figure",alt:u}),this.annotationElementId){const p=R(this,vt,cT).call(this,a);if(p.isSame)return null;p.isSameAltText?delete a.accessibilityData:a.accessibilityData.structParent=this._initialData.structParent??-1}if(a.id=this.annotationElementId,s===null)return a;s.stamps||(s.stamps=new Map);const h=d(this,zs)?(a.rect[2]-a.rect[0])*(a.rect[3]-a.rect[1]):null;if(!s.stamps.has(d(this,Bn)))s.stamps.set(d(this,Bn),{area:h,serialized:a}),a.bitmap=R(this,vt,mw).call(this,!1);else if(d(this,zs)){const p=s.stamps.get(d(this,Bn));h>p.area&&(p.area=h,p.serialized.bitmap.close(),p.serialized.bitmap=R(this,vt,mw).call(this,!1))}return a}renderAnnotationElement(n){return n.updateEdited({rect:this.getRect(0,0)}),null}}Gt=new WeakMap,Bn=new WeakMap,iu=new WeakMap,cl=new WeakMap,au=new WeakMap,up=new WeakMap,hl=new WeakMap,Ed=new WeakMap,Ea=new WeakMap,zs=new WeakMap,cp=new WeakMap,vt=new WeakSet,Ov=function(n,s=!1){if(!n){this.remove();return}E(this,Gt,n.bitmap),s||(E(this,Bn,n.id),E(this,zs,n.isSvg)),n.file&&E(this,up,n.file.name),R(this,vt,pw).call(this)},Dv=function(){if(E(this,iu,null),this._uiManager.enableWaiting(!1),!!d(this,hl)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,Gt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,Gt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},fw=function(){if(d(this,Bn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(d(this,Bn)).then(a=>R(this,vt,Ov).call(this,a,!0)).finally(()=>R(this,vt,Dv).call(this));return}if(d(this,cl)){const a=d(this,cl);E(this,cl,null),this._uiManager.enableWaiting(!0),E(this,iu,this._uiManager.imageManager.getFromUrl(a).then(o=>R(this,vt,Ov).call(this,o)).finally(()=>R(this,vt,Dv).call(this)));return}if(d(this,au)){const a=d(this,au);E(this,au,null),this._uiManager.enableWaiting(!0),E(this,iu,this._uiManager.imageManager.getFromFile(a).then(o=>R(this,vt,Ov).call(this,o)).finally(()=>R(this,vt,Dv).call(this)));return}const n=document.createElement("input");n.type="file",n.accept=H1.join(",");const s=this._uiManager._signal;E(this,iu,new Promise(a=>{n.addEventListener("change",async()=>{if(!n.files||n.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(n.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),R(this,vt,Ov).call(this,o)}a()},{signal:s}),n.addEventListener("cancel",()=>{this.remove(),a()},{signal:s})}).finally(()=>R(this,vt,Dv).call(this))),n.click()},pw=function(){var y;const{div:n}=this;let{width:s,height:a}=d(this,Gt);const[o,u]=this.pageDimensions,h=.75;if(this.width)s=this.width*o,a=this.height*u;else if(s>h*o||a>h*u){const b=Math.min(h*o/s,h*u/a);s*=b,a*=b}const[p,m]=this.parentDimensions;this.setDims(s*p/o,a*m/u),this._uiManager.enableWaiting(!1);const v=E(this,hl,document.createElement("canvas"));v.setAttribute("role","img"),this.addContainer(v),this.width=s/o,this.height=a/u,(y=this._initialOptions)!=null&&y.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(n.hidden=!1),R(this,vt,QS).call(this),d(this,cp)||(this.parent.addUndoableEditor(this),E(this,cp,!0)),this._reportTelemetry({action:"inserted_image"}),d(this,up)&&this.div.setAttribute("aria-description",d(this,up))},gw=function(n,s){const{width:a,height:o}=d(this,Gt);let u=a,h=o,p=d(this,Gt);for(;u>2*n||h>2*s;){const m=u,v=h;u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2)),h>2*s&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2));const y=new OffscreenCanvas(u,h);y.getContext("2d").drawImage(p,0,0,m,v,0,0,u,h),p=y.transferToImageBitmap()}return p},QS=function(){const[n,s]=this.parentDimensions,{width:a,height:o}=this,u=new wl,h=Math.ceil(a*n*u.sx),p=Math.ceil(o*s*u.sy),m=d(this,hl);if(!m||m.width===h&&m.height===p)return;m.width=h,m.height=p;const v=d(this,zs)?d(this,Gt):R(this,vt,gw).call(this,h,p),y=m.getContext("2d");y.filter=this._uiManager.hcmFilter,y.drawImage(v,0,0,v.width,v.height,0,0,h,p)},mw=function(n){if(n){if(d(this,zs)){const o=this._uiManager.imageManager.getSvgUrl(d(this,Bn));if(o)return o}const s=document.createElement("canvas");return{width:s.width,height:s.height}=d(this,Gt),s.getContext("2d").drawImage(d(this,Gt),0,0),s.toDataURL()}if(d(this,zs)){const[s,a]=this.pageDimensions,o=Math.round(this.width*s*gu.PDF_TO_CSS_UNITS),u=Math.round(this.height*a*gu.PDF_TO_CSS_UNITS),h=new OffscreenCanvas(o,u);return h.getContext("2d").drawImage(d(this,Gt),0,0,d(this,Gt).width,d(this,Gt).height,0,0,o,u),h.transferToImageBitmap()}return structuredClone(d(this,Gt))},cT=function(n){var h;const{pageIndex:s,accessibilityData:{altText:a}}=this._initialData,o=n.pageIndex===s,u=(((h=n.accessibilityData)==null?void 0:h.alt)||"")===a;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&o&&u,isSameAltText:u}},Ee(KS,"_type","stamp"),Ee(KS,"_editorType",He.STAMP);var xd,hp,xa,ou,dl,ei,lu,dp,kd,Zi,fl,Sr,pl,Le,uu,Xt,hT,la,ZS,eE,vw;const Ui=class Ui{constructor({uiManager:t,pageIndex:n,div:s,structTreeLayer:a,accessibilityManager:o,annotationLayer:u,drawLayer:h,textLayer:p,viewport:m,l10n:v}){P(this,Xt);P(this,xd);P(this,hp,!1);P(this,xa,null);P(this,ou,null);P(this,dl,null);P(this,ei,new Map);P(this,lu,!1);P(this,dp,!1);P(this,kd,!1);P(this,Zi,null);P(this,fl,null);P(this,Sr,null);P(this,pl,null);P(this,Le);const y=[...d(Ui,uu).values()];if(!Ui._initialized){Ui._initialized=!0;for(const b of y)b.initialize(v,t)}t.registerEditorTypes(y),E(this,Le,t),this.pageIndex=n,this.div=s,E(this,xd,o),E(this,xa,u),this.viewport=m,E(this,Sr,p),this.drawLayer=h,this._structTree=a,d(this,Le).addLayer(this)}get isEmpty(){return d(this,ei).size===0}get isInvisible(){return this.isEmpty&&d(this,Le).getMode()===He.NONE}updateToolbar(t){d(this,Le).updateToolbar(t)}updateMode(t=d(this,Le).getMode()){switch(R(this,Xt,vw).call(this),t){case He.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case He.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case He.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;for(const s of d(Ui,uu).values())n.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(t){var n;return t===((n=d(this,Sr))==null?void 0:n.div)}setEditingState(t){d(this,Le).setEditingState(t)}addCommands(t){d(this,Le).addCommands(t)}cleanUndoStack(t){d(this,Le).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var n;(n=d(this,xa))==null||n.div.classList.toggle("disabled",!t)}async enable(){E(this,kd,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const s of d(this,ei).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(d(this,Le).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!d(this,xa)){E(this,kd,!1);return}const n=d(this,xa).getEditableAnnotations();for(const s of n){if(s.hide(),d(this,Le).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const a=await this.deserialize(s);a&&(this.addOrRebuild(a),a.enableEditing())}E(this,kd,!1)}disable(){var a;E(this,dp,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,n=new Map;for(const o of d(this,ei).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){t.set(o.annotationElementId,o);continue}else n.set(o.annotationElementId,o);(a=this.getEditableAnnotation(o.annotationElementId))==null||a.show(),o.remove()}if(d(this,xa)){const o=d(this,xa).getEditableAnnotations();for(const u of o){const{id:h}=u.data;if(d(this,Le).isDeletedAnnotationElement(h))continue;let p=n.get(h);if(p){p.resetAnnotationElement(u),p.show(!1),u.show();continue}p=t.get(h),p&&(d(this,Le).addChangedExistingAnnotation(p),p.renderAnnotationElement(u)&&p.show(!1)),u.show()}}R(this,Xt,vw).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const o of d(Ui,uu).values())s.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),E(this,dp,!1)}getEditableAnnotation(t){var n;return((n=d(this,xa))==null?void 0:n.getEditableAnnotation(t))||null}setActiveEditor(t){d(this,Le).getActive()!==t&&d(this,Le).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=d(this,Sr))!=null&&t.div&&!d(this,pl)){E(this,pl,new AbortController);const n=d(this,Le).combinedSignal(d(this,pl));d(this,Sr).div.addEventListener("pointerdown",R(this,Xt,hT).bind(this),{signal:n}),d(this,Sr).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=d(this,Sr))!=null&&t.div&&d(this,pl)&&(d(this,pl).abort(),E(this,pl,null),d(this,Sr).div.classList.remove("highlighting"))}enableClick(){if(d(this,ou))return;E(this,ou,new AbortController);const t=d(this,Le).combinedSignal(d(this,ou));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const n=this.pointerup.bind(this);this.div.addEventListener("pointerup",n,{signal:t}),this.div.addEventListener("pointercancel",n,{signal:t})}disableClick(){var t;(t=d(this,ou))==null||t.abort(),E(this,ou,null)}attach(t){d(this,ei).set(t.id,t);const{annotationElementId:n}=t;n&&d(this,Le).isDeletedAnnotationElement(n)&&d(this,Le).removeDeletedAnnotationElement(t)}detach(t){var n;d(this,ei).delete(t.id),(n=d(this,xd))==null||n.removePointerInTextLayer(t.contentDiv),!d(this,dp)&&t.annotationElementId&&d(this,Le).addDeletedAnnotationElement(t)}remove(t){this.detach(t),d(this,Le).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var n;t.parent!==this&&(t.parent&&t.annotationElementId&&(d(this,Le).addDeletedAnnotationElement(t.annotationElementId),Yt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(n=t.parent)==null||n.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),d(this,Le).addEditor(t),this.attach(t),!t.isAttachedToDOM){const n=t.render();this.div.append(n),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!d(this,kd)),d(this,Le).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var s;if(!t.isAttachedToDOM)return;const{activeElement:n}=document;t.div.contains(n)&&!d(this,dl)&&(t._focusEventsAllowed=!1,E(this,dl,setTimeout(()=>{E(this,dl,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:d(this,Le)._signal}),n.focus())},0))),t._structTreeParentId=(s=d(this,xd))==null?void 0:s.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const n=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:n,undo:s,mustExec:!1})}getNextId(){return d(this,Le).getId()}combinedSignal(t){return d(this,Le).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=d(this,Xt,la))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,n){d(this,Le).updateToolbar(t),await d(this,Le).updateMode(t);const{offsetX:s,offsetY:a}=R(this,Xt,eE).call(this),o=this.getNextId(),u=R(this,Xt,ZS).call(this,{parent:this,id:o,x:s,y:a,uiManager:d(this,Le),isCentered:!0,...n});u&&this.add(u)}async deserialize(t){var n;return await((n=d(Ui,uu).get(t.annotationType??t.annotationEditorType))==null?void 0:n.deserialize(t,this,d(this,Le)))||null}createAndAddNewEditor(t,n,s={}){const a=this.getNextId(),o=R(this,Xt,ZS).call(this,{parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:d(this,Le),isCentered:n,...s});return o&&this.add(o),o}addNewEditor(t={}){this.createAndAddNewEditor(R(this,Xt,eE).call(this),!0,t)}setSelected(t){d(this,Le).setSelected(t)}toggleSelected(t){d(this,Le).toggleSelected(t)}unselect(t){d(this,Le).unselect(t)}pointerup(t){var a;const{isMac:n}=mr.platform;if(t.button!==0||t.ctrlKey&&n||t.target!==this.div||!d(this,lu)||(E(this,lu,!1),(a=d(this,Xt,la))!=null&&a.isDrawer&&d(this,Xt,la).supportMultipleDrawings))return;if(!d(this,hp)){E(this,hp,!0);return}const s=d(this,Le).getMode();if(s===He.STAMP||s===He.SIGNATURE){d(this,Le).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var a;if(d(this,Le).getMode()===He.HIGHLIGHT&&this.enableTextSelection(),d(this,lu)){E(this,lu,!1);return}const{isMac:n}=mr.platform;if(t.button!==0||t.ctrlKey&&n||t.target!==this.div)return;if(E(this,lu,!0),(a=d(this,Xt,la))!=null&&a.isDrawer){this.startDrawingSession(t);return}const s=d(this,Le).getActive();E(this,hp,!s||s.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),d(this,Zi)){d(this,Xt,la).startDrawing(this,d(this,Le),!1,t);return}d(this,Le).setCurrentDrawingSession(this),E(this,Zi,new AbortController);const n=d(this,Le).combinedSignal(d(this,Zi));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(E(this,fl,null),this.commitOrRemove())},{signal:n}),d(this,Xt,la).startDrawing(this,d(this,Le),!1,t)}pause(t){if(t){const{activeElement:n}=document;this.div.contains(n)&&E(this,fl,n);return}d(this,fl)&&setTimeout(()=>{var n;(n=d(this,fl))==null||n.focus(),E(this,fl,null)},0)}endDrawingSession(t=!1){return d(this,Zi)?(d(this,Le).setCurrentDrawingSession(null),d(this,Zi).abort(),E(this,Zi,null),E(this,fl,null),d(this,Xt,la).endDrawing(t)):null}findNewParent(t,n,s){const a=d(this,Le).findParent(n,s);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return d(this,Zi)?(this.endDrawingSession(),!0):!1}onScaleChanging(){d(this,Zi)&&d(this,Xt,la).onScaleChangingWhenDrawing(this)}destroy(){var t,n;this.commitOrRemove(),((t=d(this,Le).getActive())==null?void 0:t.parent)===this&&(d(this,Le).commitOrRemove(),d(this,Le).setActiveEditor(null)),d(this,dl)&&(clearTimeout(d(this,dl)),E(this,dl,null));for(const s of d(this,ei).values())(n=d(this,xd))==null||n.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,d(this,ei).clear(),d(this,Le).removeLayer(this)}render({viewport:t}){this.viewport=t,Cd(this.div,t);for(const n of d(this,Le).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:t}){d(this,Le).commitOrRemove(),R(this,Xt,vw).call(this);const n=this.viewport.rotation,s=t.rotation;if(this.viewport=t,Cd(this.div,{rotation:s}),n!==s)for(const a of d(this,ei).values())a.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:n}=this.viewport.rawDims;return[t,n]}get scale(){return d(this,Le).viewParameters.realScale}};xd=new WeakMap,hp=new WeakMap,xa=new WeakMap,ou=new WeakMap,dl=new WeakMap,ei=new WeakMap,lu=new WeakMap,dp=new WeakMap,kd=new WeakMap,Zi=new WeakMap,fl=new WeakMap,Sr=new WeakMap,pl=new WeakMap,Le=new WeakMap,uu=new WeakMap,Xt=new WeakSet,hT=function(t){d(this,Le).unselectAll();const{target:n}=t;if(n===d(this,Sr).div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&d(this,Sr).div.contains(n)){const{isMac:s}=mr.platform;if(t.button!==0||t.ctrlKey&&s)return;d(this,Le).showAllEditors("highlight",!0,!0),d(this,Sr).div.classList.add("free"),this.toggleDrawing(),Tw.startHighlighting(this,d(this,Le).direction==="ltr",{target:d(this,Sr).div,x:t.x,y:t.y}),d(this,Sr).div.addEventListener("pointerup",()=>{d(this,Sr).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:d(this,Le)._signal}),t.preventDefault()}},la=function(){return d(Ui,uu).get(d(this,Le).getMode())},ZS=function(t){const n=d(this,Xt,la);return n?new n.prototype.constructor(t):null},eE=function(){const{x:t,y:n,width:s,height:a}=this.div.getBoundingClientRect(),o=Math.max(0,t),u=Math.max(0,n),h=Math.min(window.innerWidth,t+s),p=Math.min(window.innerHeight,n+a),m=(o+h)/2-t,v=(u+p)/2-n,[y,b]=this.viewport.rotation%180===0?[m,v]:[v,m];return{offsetX:y,offsetY:b}},vw=function(){for(const t of d(this,ei).values())t.isEmpty()&&t.remove()},Ee(Ui,"_initialized",!1),P(Ui,uu,new Map([RS,HS,KS,Tw,YS].map(t=>[t._editorType,t])));let JS=Ui;var ea,Ur,Ad,m0,Xw,dT,ka,nE,fT,rE;const Rn=class Rn{constructor({pageIndex:t}){P(this,ka);P(this,ea,null);P(this,Ur,new Map);P(this,Ad,new Map);this.pageIndex=t}setParent(t){if(!d(this,ea)){E(this,ea,t);return}if(d(this,ea)!==t){if(d(this,Ur).size>0)for(const n of d(this,Ur).values())n.remove(),t.append(n);E(this,ea,t)}}static get _svgFactory(){return at(this,"_svgFactory",new kw)}draw(t,n=!1,s=!1){const a=Fr(Rn,m0)._++,o=R(this,ka,nE).call(this),u=Rn._svgFactory.createElement("defs");o.append(u);const h=Rn._svgFactory.createElement("path");u.append(h);const p=`path_p${this.pageIndex}_${a}`;h.setAttribute("id",p),h.setAttribute("vector-effect","non-scaling-stroke"),n&&d(this,Ad).set(a,h);const m=s?R(this,ka,fT).call(this,u,p):null,v=Rn._svgFactory.createElement("use");return o.append(v),v.setAttribute("href",`#${p}`),this.updateProperties(o,t),d(this,Ur).set(a,o),{id:a,clipPathId:`url(#${m})`}}drawOutline(t,n){const s=Fr(Rn,m0)._++,a=R(this,ka,nE).call(this),o=Rn._svgFactory.createElement("defs");a.append(o);const u=Rn._svgFactory.createElement("path");o.append(u);const h=`path_p${this.pageIndex}_${s}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke");let p;if(n){const y=Rn._svgFactory.createElement("mask");o.append(y),p=`mask_p${this.pageIndex}_${s}`,y.setAttribute("id",p),y.setAttribute("maskUnits","objectBoundingBox");const b=Rn._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const _=Rn._svgFactory.createElement("use");y.append(_),_.setAttribute("href",`#${h}`),_.setAttribute("stroke","none"),_.setAttribute("fill","black"),_.setAttribute("fill-rule","nonzero"),_.classList.add("mask")}const m=Rn._svgFactory.createElement("use");a.append(m),m.setAttribute("href",`#${h}`),p&&m.setAttribute("mask",`url(#${p})`);const v=m.cloneNode();return a.append(v),m.classList.add("mainOutline"),v.classList.add("secondaryOutline"),this.updateProperties(a,t),d(this,Ur).set(s,a),s}finalizeDraw(t,n){d(this,Ad).delete(t),this.updateProperties(t,n)}updateProperties(t,n){var p;if(!n)return;const{root:s,bbox:a,rootClass:o,path:u}=n,h=typeof t=="number"?d(this,Ur).get(t):t;if(h){if(s&&R(this,ka,rE).call(this,h,s),a&&R(p=Rn,Xw,dT).call(p,h,a),o){const{classList:m}=h;for(const[v,y]of Object.entries(o))m.toggle(v,y)}if(u){const v=h.firstChild.firstChild;R(this,ka,rE).call(this,v,u)}}}updateParent(t,n){if(n===this)return;const s=d(this,Ur).get(t);s&&(d(n,ea).append(s),d(this,Ur).delete(t),d(n,Ur).set(t,s))}remove(t){d(this,Ad).delete(t),d(this,ea)!==null&&(d(this,Ur).get(t).remove(),d(this,Ur).delete(t))}destroy(){E(this,ea,null);for(const t of d(this,Ur).values())t.remove();d(this,Ur).clear(),d(this,Ad).clear()}};ea=new WeakMap,Ur=new WeakMap,Ad=new WeakMap,m0=new WeakMap,Xw=new WeakSet,dT=function(t,[n,s,a,o]){const{style:u}=t;u.top=`${100*s}%`,u.left=`${100*n}%`,u.width=`${100*a}%`,u.height=`${100*o}%`},ka=new WeakSet,nE=function(){const t=Rn._svgFactory.create(1,1,!0);return d(this,ea).append(t),t.setAttribute("aria-hidden",!0),t},fT=function(t,n){const s=Rn._svgFactory.createElement("clipPath");t.append(s);const a=`clip_${n}`;s.setAttribute("id",a),s.setAttribute("clipPathUnits","objectBoundingBox");const o=Rn._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${n}`),o.classList.add("clip"),a},rE=function(t,n){for(const[s,a]of Object.entries(n))a===null?t.removeAttribute(s):t.setAttribute(s,a)},P(Rn,Xw),P(Rn,m0,0);let tE=Rn;globalThis.pdfjsTestingUtils={HighlightOutliner:NS};je.AbortException;je.AnnotationEditorLayer;je.AnnotationEditorParamsType;je.AnnotationEditorType;je.AnnotationEditorUIManager;je.AnnotationLayer;je.AnnotationMode;je.AnnotationType;je.ColorPicker;je.DOMSVGFactory;je.DrawLayer;je.FeatureTest;var aM=je.GlobalWorkerOptions;je.ImageKind;je.InvalidPDFException;je.MathClamp;je.OPS;je.OutputScale;je.PDFDataRangeTransport;je.PDFDateString;je.PDFWorker;je.PasswordResponses;je.PermissionFlag;je.PixelsPerInch;je.RenderingCancelledException;je.ResponseException;je.SignatureExtractor;je.SupportedImageMimeTypes;je.TextLayer;je.TouchManager;je.Util;je.VerbosityLevel;je.XfaLayer;je.build;je.createValidAbsoluteUrl;je.fetchData;var oM=je.getDocument;je.getFilenameFromUrl;je.getPdfFilenameFromUrl;je.getUuid;je.getXfaPageViewport;je.isDataScheme;je.isPdfFile;je.isValidExplicitDest;je.noContextMenu;je.normalizeUnicode;je.setLayerDimensions;je.shadow;je.stopEvent;je.version;const lM="/assets/pdf.worker-CKnUz2wA.mjs";aM.workerSrc=lM;function uM({pdfUrl:c}){const[t,n]=me.useState(0),[s,a]=me.useState(null),o=me.useRef([]);return me.useEffect(()=>{(async()=>{const p=await oM(c).promise;a(p),n(p.numPages)})()},[c]),me.useEffect(()=>{(async()=>{if(s)for(let h=1;h<=t;h++){const p=await s.getPage(h),m=p.getViewport({scale:1.5}),v=o.current[h-1],y=v.getContext("2d");v.height=m.height,v.width=m.width,await p.render({canvasContext:y,viewport:m}).promise}})()},[s,t]),se.jsx("div",{className:"flex flex-col gap-6",children:Array.from({length:t}).map((u,h)=>se.jsx("canvas",{ref:p=>o.current[h]=p},h))})}function cM(){const{id:c}=jk(),[t,n]=me.useState(null),[s,a]=me.useState(null),[o,u]=me.useState(!0);return me.useEffect(()=>{(async()=>{const{data:p,error:m}=await $1.from("comics").select("*").eq("id",c).single();if(m){console.error("Error loading comic:",m),u(!1);return}n(p);const{data:v,error:y}=await $1.from("comic_pages").select("comic_pdf").eq("comic_id",c).limit(1);if(y){console.error("Error loading PDF:",y),u(!1);return}v&&v.length>0&&a(v[0].comic_pdf),u(!1)})()},[c]),o?se.jsxs("div",{className:"text-center mt-10",children:[se.jsx("div",{className:"w-1/2 mx-auto bg-gray-200 rounded-full h-4 dark:bg-gray-700",children:se.jsx("div",{className:"bg-blue-600 h-4 rounded-full animate-pulse w-3/4"})}),se.jsx("p",{className:"mt-4 text-gray-500",children:"Loading comic..."})]}):t?se.jsxs("div",{className:"max-w-screen-md mx-auto px-4 pb-10",children:[se.jsx("h1",{className:"text-3xl font-bold mb-2",children:t.title}),se.jsxs("p",{className:"mb-4 text-gray-500",children:["By ",t.author]}),s?se.jsx(uM,{pdfUrl:s},s):se.jsx("p",{className:"text-sm text-gray-400",children:"No PDF found for this comic."})]}):se.jsx("div",{className:"text-center mt-6",children:"Comic not found."})}function hM(){return se.jsxs("div",{className:"bg-black text-white min-h-screen font-mono cursor-ufocursor bg-stars",children:[se.jsx(cN,{}),se.jsxs(UR,{children:[se.jsx(_l,{path:"/",element:se.jsx(ZR,{})}),se.jsx(_l,{path:"/comic",element:se.jsx(iN,{})}),se.jsx(_l,{path:"/shop",element:se.jsx(aN,{})}),se.jsx(_l,{path:"/about",element:se.jsx(oN,{})}),se.jsx(_l,{path:"/product/:id",element:se.jsx(hN,{})}),se.jsx(_l,{path:"/broadcast",element:se.jsx(fN,{})}),se.jsx(_l,{path:"/comic/:id",element:se.jsx(cM,{})})]}),se.jsx(dN,{})]})}KP.createRoot(document.getElementById("root")).render(se.jsx(YR,{children:se.jsx(hM,{})}));export{oE as g};
